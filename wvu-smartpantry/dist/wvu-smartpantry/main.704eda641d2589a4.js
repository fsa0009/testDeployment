(self.webpackChunkwvu_smartpantry=self.webpackChunkwvu_smartpantry||[]).push([[179],{2011:(at,De,O)=>{"use strict";O.d(De,{hO:()=>He,xv:()=>_e,Dh:()=>ue,GT:()=>me,cc:()=>xe,on:()=>G,pX:()=>se});var p=O(5e3),B=O(127),k=O(5813);at=O.hmd(at);const ae=["ngOnDestroy"],se=(ce,Re,Ne,he={})=>new Proxy(ce,{get:(Ce,we)=>Ne.runOutsideAngular(()=>{var ze;if(ce[we])return(null===(ze=null==he?void 0:he.spy)||void 0===ze?void 0:ze.get)&&he.spy.get(we,ce[we]),ce[we];if(ae.indexOf(we)>-1)return()=>{};const re=Re.toPromise().then(Qe=>{const X=Qe&&Qe[we];return"function"==typeof X?X.bind(Qe):X&&X.then?X.then(pe=>Ne.run(()=>pe)):Ne.run(()=>X)});return new Proxy(()=>{},{get:(Qe,X)=>re[X],apply:(Qe,X,pe)=>re.then(fe=>{var ye;const Fe=fe&&fe(...pe);return(null===(ye=null==he?void 0:he.spy)||void 0===ye?void 0:ye.apply)&&he.spy.apply(we,pe,Fe),Fe})})})}),me=(ce,Re)=>{Re.forEach(Ne=>{Object.getOwnPropertyNames(Ne.prototype||Ne).forEach(he=>{Object.defineProperty(ce.prototype,he,Object.getOwnPropertyDescriptor(Ne.prototype||Ne,he))})})};class le{constructor(Re){return Re}}const ue=new p.OlP("angularfire2.app.options"),_e=new p.OlP("angularfire2.app.name");function G(ce,Re,Ne){const Ce="object"==typeof Ne&&Ne||{};Ce.name=Ce.name||"string"==typeof Ne&&Ne||"[DEFAULT]";const ze=B.Z.apps.filter(re=>re&&re.name===Ce.name)[0]||Re.runOutsideAngular(()=>B.Z.initializeApp(ce,Ce));try{JSON.stringify(ce)!==JSON.stringify(ze.options)&&H("error",`${ze.name} Firebase App already initialized with different options${at.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(re){}return new le(ze)}const H=(ce,...Re)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[ce](...Re)},ne={provide:le,useFactory:G,deps:[ue,p.R0b,[new p.FiY,_e]]};let He=(()=>{class ce{constructor(Ne){B.Z.registerVersion("angularfire",k.q4.full,"core"),B.Z.registerVersion("angularfire",k.q4.full,"app-compat"),B.Z.registerVersion("angular",p.q4F.full,Ne.toString())}static initializeApp(Ne,he){return{ngModule:ce,providers:[{provide:ue,useValue:Ne},{provide:_e,useValue:he}]}}}return ce.\u0275fac=function(Ne){return new(Ne||ce)(p.LFG(p.Lbi))},ce.\u0275mod=p.oAB({type:ce}),ce.\u0275inj=p.cJS({providers:[ne]}),ce})();function xe(ce,Re,Ne,he,Ce){const[,we,ze]=globalThis.\u0275AngularfireInstanceCache.find(re=>re[0]===ce)||[];if(we)return function Le(ce,Re){try{return ce.toString()===Re.toString()}catch(Ne){return ce===Re}}(Ce,ze)||(Q("error",`${Re} was already initialized on the ${Ne} Firebase App with different settings.${je?" You may need to reload as Firebase is not HMR aware.":""}`),Q("warn",{is:Ce,was:ze})),we;{const re=he();return globalThis.\u0275AngularfireInstanceCache.push([ce,re,Ce]),re}}const je=!!at.hot,Q=(ce,...Re)=>{(0,p.X6Q)()&&"undefined"!=typeof console&&console[ce](...Re)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},5813:(at,De,O)=>{"use strict";O.d(De,{q4:()=>zu,iC:()=>As,fc:()=>ta,HU:()=>_d,vb:()=>Qu,JM:()=>tg});var p=O(5e3),B=O(5867),k=O(5861),ae=O(9681),se=O(2090),me=O(4859),le=O(1877),ue=O(2940);const _e="@firebase/installations",G="0.5.5",ne=`w:${G}`,He="FIS_v2",Re=new se.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ne(C){return C instanceof se.ZR&&C.code.includes("request-failed")}function he({projectId:C}){return`https://firebaseinstallations.googleapis.com/v1/projects/${C}/installations`}function Ce(C){return{token:C.token,requestStatus:2,expiresIn:fe(C.expiresIn),creationTime:Date.now()}}function we(C,T){return ze.apply(this,arguments)}function ze(){return(ze=(0,k.Z)(function*(C,T){const V=(yield T.json()).error;return Re.create("request-failed",{requestName:C,serverCode:V.code,serverMessage:V.message,serverStatus:V.status})})).apply(this,arguments)}function re({apiKey:C}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C})}function Qe(C,{refreshToken:T}){const N=re(C);return N.append("Authorization",function ye(C){return`${He} ${C}`}(T)),N}function X(C){return pe.apply(this,arguments)}function pe(){return(pe=(0,k.Z)(function*(C){const T=yield C();return T.status>=500&&T.status<600?C():T})).apply(this,arguments)}function fe(C){return Number(C.replace("s","000"))}function Fe(C,T){return de.apply(this,arguments)}function de(){return(de=(0,k.Z)(function*(C,{fid:T}){const N=he(C),J={method:"POST",headers:re(C),body:JSON.stringify({fid:T,authVersion:He,appId:C.appId,sdkVersion:ne})},Oe=yield X(()=>fetch(N,J));if(Oe.ok){const $e=yield Oe.json();return{fid:$e.fid||T,registrationStatus:2,refreshToken:$e.refreshToken,authToken:Ce($e.authToken)}}throw yield we("Create Installation",Oe)})).apply(this,arguments)}function wt(C){return new Promise(T=>{setTimeout(T,C)})}const Rn=/^[cdef][\w-]{21}$/;function it(){try{const C=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(C),C[0]=112+C[0]%16;const N=function lr(C){return function Zt(C){return btoa(String.fromCharCode(...C)).replace(/\+/g,"-").replace(/\//g,"_")}(C).substr(0,22)}(C);return Rn.test(N)?N:""}catch(C){return""}}function sn(C){return`${C.appName}!${C.appId}`}const vr=new Map;function Yt(C,T){const N=sn(C);In(N,T),function Fi(C,T){const N=function Dr(){return!Yn&&"BroadcastChannel"in self&&(Yn=new BroadcastChannel("[Firebase] FID Change"),Yn.onmessage=C=>{In(C.data.key,C.data.fid)}),Yn}();N&&N.postMessage({key:C,fid:T}),function Yi(){0===vr.size&&Yn&&(Yn.close(),Yn=null)}()}(N,T)}function In(C,T){const N=vr.get(C);if(N)for(const V of N)V(T)}let Yn=null;const Vn="firebase-installations-store";let Qi=null;function pt(){return Qi||(Qi=(0,ue.openDb)("firebase-installations-database",1,C=>{0===C.oldVersion&&C.createObjectStore(Vn)})),Qi}function Or(C,T){return xn.apply(this,arguments)}function xn(){return(xn=(0,k.Z)(function*(C,T){const N=sn(C),Y=(yield pt()).transaction(Vn,"readwrite"),J=Y.objectStore(Vn),Oe=yield J.get(N);return yield J.put(T,N),yield Y.complete,(!Oe||Oe.fid!==T.fid)&&Yt(C,T.fid),T})).apply(this,arguments)}function Wt(C){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,k.Z)(function*(C){const T=sn(C),V=(yield pt()).transaction(Vn,"readwrite");yield V.objectStore(Vn).delete(T),yield V.complete})).apply(this,arguments)}function ht(C,T){return lt.apply(this,arguments)}function lt(){return(lt=(0,k.Z)(function*(C,T){const N=sn(C),Y=(yield pt()).transaction(Vn,"readwrite"),J=Y.objectStore(Vn),Oe=yield J.get(N),$e=T(Oe);return void 0===$e?yield J.delete(N):yield J.put($e,N),yield Y.complete,$e&&(!Oe||Oe.fid!==$e.fid)&&Yt(C,$e.fid),$e})).apply(this,arguments)}function Ct(C){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,k.Z)(function*(C){let T;const N=yield ht(C,V=>{const Y=cr(V),J=St(C,Y);return T=J.registrationPromise,J.installationEntry});return""===N.fid?{installationEntry:yield T}:{installationEntry:N,registrationPromise:T}})).apply(this,arguments)}function cr(C){return Bs(C||{fid:it(),registrationStatus:0})}function St(C,T){if(0===T.registrationStatus){if(!navigator.onLine)return{installationEntry:T,registrationPromise:Promise.reject(Re.create("app-offline"))};const N={fid:T.fid,registrationStatus:1,registrationTime:Date.now()},V=function st(C,T){return Je.apply(this,arguments)}(C,N);return{installationEntry:N,registrationPromise:V}}return 1===T.registrationStatus?{installationEntry:T,registrationPromise:Vs(C)}:{installationEntry:T}}function Je(){return(Je=(0,k.Z)(function*(C,T){try{return Or(C,yield Fe(C,T))}catch(N){throw Ne(N)&&409===N.customData.serverCode?yield Wt(C):yield Or(C,{fid:T.fid,registrationStatus:0}),N}})).apply(this,arguments)}function Vs(C){return _s.apply(this,arguments)}function _s(){return(_s=(0,k.Z)(function*(C){let T=yield jt(C);for(;1===T.registrationStatus;)yield wt(100),T=yield jt(C);if(0===T.registrationStatus){const{installationEntry:N,registrationPromise:V}=yield Ct(C);return V||N}return T})).apply(this,arguments)}function jt(C){return ht(C,T=>{if(!T)throw Re.create("installation-not-found");return Bs(T)})}function Bs(C){return function Qn(C){return 1===C.registrationStatus&&C.registrationTime+1e4<Date.now()}(C)?{fid:C.fid,registrationStatus:0}:C}function wn(C,T){return j.apply(this,arguments)}function j(){return(j=(0,k.Z)(function*({appConfig:C,platformLoggerProvider:T},N){const V=W(C,N),Y=Qe(C,N),J=T.getImmediate({optional:!0});J&&Y.append("x-firebase-client",J.getPlatformInfoString());const $e={method:"POST",headers:Y,body:JSON.stringify({installation:{sdkVersion:ne}})},Ze=yield X(()=>fetch(V,$e));if(Ze.ok)return Ce(yield Ze.json());throw yield we("Generate Auth Token",Ze)})).apply(this,arguments)}function W(C,{fid:T}){return`${he(C)}/${T}/authTokens:generate`}function K(C){return be.apply(this,arguments)}function be(){return(be=(0,k.Z)(function*(C,T=!1){let N;const V=yield ht(C.appConfig,J=>{if(!Jn(J))throw Re.create("not-registered");const Oe=J.authToken;if(!T&&dr(Oe))return J;if(1===Oe.requestStatus)return N=ie(C,T),J;{if(!navigator.onLine)throw Re.create("app-offline");const $e=Xn(J);return N=zt(C,$e),$e}});return N?yield N:V.authToken})).apply(this,arguments)}function ie(C,T){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,k.Z)(function*(C,T){let N=yield ft(C.appConfig);for(;1===N.authToken.requestStatus;)yield wt(100),N=yield ft(C.appConfig);const V=N.authToken;return 0===V.requestStatus?K(C,T):V})).apply(this,arguments)}function ft(C){return ht(C,T=>{if(!Jn(T))throw Re.create("not-registered");return function oe(C){return 1===C.requestStatus&&C.requestTime+1e4<Date.now()}(T.authToken)?Object.assign(Object.assign({},T),{authToken:{requestStatus:0}}):T})}function zt(C,T){return on.apply(this,arguments)}function on(){return(on=(0,k.Z)(function*(C,T){try{const N=yield wn(C,T),V=Object.assign(Object.assign({},T),{authToken:N});return yield Or(C.appConfig,V),N}catch(N){if(!Ne(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const V=Object.assign(Object.assign({},T),{authToken:{requestStatus:0}});yield Or(C.appConfig,V)}else yield Wt(C.appConfig);throw N}})).apply(this,arguments)}function Jn(C){return void 0!==C&&2===C.registrationStatus}function dr(C){return 2===C.requestStatus&&!function Pt(C){const T=Date.now();return T<C.creationTime||C.creationTime+C.expiresIn<T+36e5}(C)}function Xn(C){const T={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},C),{authToken:T})}function z(){return(z=(0,k.Z)(function*(C){const T=C,{installationEntry:N,registrationPromise:V}=yield Ct(T.appConfig);return V?V.catch(console.error):K(T).catch(console.error),N.fid})).apply(this,arguments)}function qe(){return(qe=(0,k.Z)(function*(C,T=!1){const N=C;return yield ot(N.appConfig),(yield K(N,T)).token})).apply(this,arguments)}function ot(C){return At.apply(this,arguments)}function At(){return(At=(0,k.Z)(function*(C){const{registrationPromise:T}=yield Ct(C);T&&(yield T)})).apply(this,arguments)}function Ia(C){return Re.create("missing-app-config-values",{valueName:C})}const an="installations",Ft=C=>{const T=C.getProvider("app").getImmediate(),N=function wr(C){if(!C||!C.options)throw Ia("App Configuration");if(!C.name)throw Ia("App Name");const T=["projectId","apiKey","appId"];for(const N of T)if(!C.options[N])throw Ia(N);return{appName:C.name,projectId:C.options.projectId,apiKey:C.options.apiKey,appId:C.options.appId}}(T);return{app:T,appConfig:N,platformLoggerProvider:(0,ae._getProvider)(T,"platform-logger"),_delete:()=>Promise.resolve()}},cn=C=>{const T=C.getProvider("app").getImmediate(),N=(0,ae._getProvider)(T,an).getImmediate();return{getId:()=>function Z(C){return z.apply(this,arguments)}(N),getToken:Y=>function Te(C){return qe.apply(this,arguments)}(N,Y)}};(function si(){(0,ae._registerComponent)(new me.wA(an,Ft,"PUBLIC")),(0,ae._registerComponent)(new me.wA("installations-internal",cn,"PRIVATE"))})(),(0,ae.registerVersion)(_e,G),(0,ae.registerVersion)(_e,G,"esm2017");const Xi="@firebase/remote-config",jn=new se.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Su{constructor(T,N,V,Y){this.client=T,this.storage=N,this.storageCache=V,this.logger=Y}isCachedDataFresh(T,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const V=Date.now()-N,Y=V<=T;return this.logger.debug(`Config fetch cache check. Cache age millis: ${V}. Cache max age millis (minimumFetchIntervalMillis setting): ${T}. Is cache hit: ${Y}.`),Y}fetch(T){var N=this;return(0,k.Z)(function*(){const[V,Y]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(Y&&N.isCachedDataFresh(T.cacheMaxAgeMillis,V))return Y;T.eTag=Y&&Y.eTag;const J=yield N.client.fetch(T),Oe=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===J.status&&Oe.push(N.storage.setLastSuccessfulFetchResponse(J)),yield Promise.all(Oe),J})()}}function Gs(C=navigator){return C.languages&&C.languages[0]||C.language}class ai{constructor(T,N,V,Y,J,Oe){this.firebaseInstallations=T,this.sdkVersion=N,this.namespace=V,this.projectId=Y,this.apiKey=J,this.appId=Oe}fetch(T){var N=this;return(0,k.Z)(function*(){const[V,Y]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),Oe=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,$e={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":T.eTag||"*"},Ze={sdk_version:N.sdkVersion,app_instance_id:V,app_instance_id_token:Y,app_id:N.appId,language_code:Gs()},Jt={method:"POST",headers:$e,body:JSON.stringify(Ze)},Xt=fetch(Oe,Jt),Wn=new Promise((xs,Wr)=>{T.signal.addEventListener(()=>{const eu=new Error("The operation was aborted.");eu.name="AbortError",Wr(eu)})});let qr;try{yield Promise.race([Xt,Wn]),qr=yield Xt}catch(xs){let Wr="fetch-client-network";throw"AbortError"===xs.name&&(Wr="fetch-timeout"),jn.create(Wr,{originalErrorMessage:xs.message})}let Mn=qr.status;const ls=qr.headers.get("ETag")||void 0;let Qs,Ur;if(200===qr.status){let xs;try{xs=yield qr.json()}catch(Wr){throw jn.create("fetch-client-parse",{originalErrorMessage:Wr.message})}Qs=xs.entries,Ur=xs.state}if("INSTANCE_STATE_UNSPECIFIED"===Ur?Mn=500:"NO_CHANGE"===Ur?Mn=304:("NO_TEMPLATE"===Ur||"EMPTY_CONFIG"===Ur)&&(Qs={}),304!==Mn&&200!==Mn)throw jn.create("fetch-status",{httpStatus:Mn});return{status:Mn,eTag:ls,config:Qs}})()}}class Kp{constructor(T,N){this.client=T,this.storage=N}fetch(T){var N=this;return(0,k.Z)(function*(){const V=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(T,V)})()}attemptFetch(T,{throttleEndTimeMillis:N,backoffCount:V}){var Y=this;return(0,k.Z)(function*(){yield function zp(C,T){return new Promise((N,V)=>{const Y=Math.max(T-Date.now(),0),J=setTimeout(N,Y);C.addEventListener(()=>{clearTimeout(J),V(jn.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}(T.signal,N);try{const J=yield Y.client.fetch(T);return yield Y.storage.deleteThrottleMetadata(),J}catch(J){if(!function ys(C){if(!(C instanceof se.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}(J))throw J;const Oe={throttleEndTimeMillis:Date.now()+(0,se.$s)(V),backoffCount:V+1};return yield Y.storage.setThrottleMetadata(Oe),Y.attemptFetch(T,Oe)}})()}}class sd{constructor(T,N,V,Y,J){this.app=T,this._client=N,this._storageCache=V,this._storage=Y,this._logger=J,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Fl(C,T){const N=C.target.error||void 0;return jn.create(T,{originalErrorMessage:N&&N.message})}const qs="app_namespace_store";class Vo{constructor(T,N,V,Y=function od(){return new Promise((C,T)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=V=>{T(Fl(V,"storage-open"))},N.onsuccess=V=>{C(V.target.result)},N.onupgradeneeded=V=>{0===V.oldVersion&&V.target.result.createObjectStore(qs,{keyPath:"compositeKey"})}}catch(N){T(jn.create("storage-open",{originalErrorMessage:N}))}})}()){this.appId=T,this.appName=N,this.namespace=V,this.openDbPromise=Y}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(T){return this.set("last_fetch_status",T)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(T){return this.set("last_successful_fetch_timestamp_millis",T)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(T){return this.set("last_successful_fetch_response",T)}getActiveConfig(){return this.get("active_config")}setActiveConfig(T){return this.set("active_config",T)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(T){return this.set("active_config_etag",T)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(T){return this.set("throttle_metadata",T)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(T){var N=this;return(0,k.Z)(function*(){const V=yield N.openDbPromise;return new Promise((Y,J)=>{const $e=V.transaction([qs],"readonly").objectStore(qs),Ze=N.createCompositeKey(T);try{const Jt=$e.get(Ze);Jt.onerror=Xt=>{J(Fl(Xt,"storage-get"))},Jt.onsuccess=Xt=>{const Wn=Xt.target.result;Y(Wn?Wn.value:void 0)}}catch(Jt){J(jn.create("storage-get",{originalErrorMessage:Jt&&Jt.message}))}})})()}set(T,N){var V=this;return(0,k.Z)(function*(){const Y=yield V.openDbPromise;return new Promise((J,Oe)=>{const Ze=Y.transaction([qs],"readwrite").objectStore(qs),Jt=V.createCompositeKey(T);try{const Xt=Ze.put({compositeKey:Jt,value:N});Xt.onerror=Wn=>{Oe(Fl(Wn,"storage-set"))},Xt.onsuccess=()=>{J()}}catch(Xt){Oe(jn.create("storage-set",{originalErrorMessage:Xt&&Xt.message}))}})})()}delete(T){var N=this;return(0,k.Z)(function*(){const V=yield N.openDbPromise;return new Promise((Y,J)=>{const $e=V.transaction([qs],"readwrite").objectStore(qs),Ze=N.createCompositeKey(T);try{const Jt=$e.delete(Ze);Jt.onerror=Xt=>{J(Fl(Xt,"storage-delete"))},Jt.onsuccess=()=>{Y()}}catch(Jt){J(jn.create("storage-delete",{originalErrorMessage:Jt&&Jt.message}))}})})()}createCompositeKey(T){return[this.appId,this.appName,this.namespace,T].join()}}class Jp{constructor(T){this.storage=T}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var T=this;return(0,k.Z)(function*(){const N=T.storage.getLastFetchStatus(),V=T.storage.getLastSuccessfulFetchTimestampMillis(),Y=T.storage.getActiveConfig(),J=yield N;J&&(T.lastFetchStatus=J);const Oe=yield V;Oe&&(T.lastSuccessfulFetchTimestampMillis=Oe);const $e=yield Y;$e&&(T.activeConfig=$e)})()}setLastFetchStatus(T){return this.lastFetchStatus=T,this.storage.setLastFetchStatus(T)}setLastSuccessfulFetchTimestampMillis(T){return this.lastSuccessfulFetchTimestampMillis=T,this.storage.setLastSuccessfulFetchTimestampMillis(T)}setActiveConfig(T){return this.activeConfig=T,this.storage.setActiveConfig(T)}}function ad(){return Vi.apply(this,arguments)}function Vi(){return(Vi=(0,k.Z)(function*(){if(!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(C){return!1}})).apply(this,arguments)}!function Xp(){(0,ae._registerComponent)(new me.wA("remote-config",function C(T,{instanceIdentifier:N}){const V=T.getProvider("app").getImmediate(),Y=T.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw jn.create("registration-window");if(!(0,se.hl)())throw jn.create("indexed-db-unavailable");const{projectId:J,apiKey:Oe,appId:$e}=V.options;if(!J)throw jn.create("registration-project-id");if(!Oe)throw jn.create("registration-api-key");if(!$e)throw jn.create("registration-app-id");const Ze=new Vo($e,V.name,N=N||"firebase"),Jt=new Jp(Ze),Xt=new le.Yd(Xi);Xt.logLevel=le.in.ERROR;const Wn=new ai(Y,ae.SDK_VERSION,N,J,Oe,$e),qr=new Kp(Wn,Ze),Mn=new Su(qr,Ze,Jt,Xt),ls=new sd(V,Mn,Jt,Ze,Xt);return function mn(C){const T=(0,se.m9)(C);T._initializePromise||(T._initializePromise=T._storageCache.loadFromStorage().then(()=>{T._isInitializationComplete=!0}))}(ls),ls},"PUBLIC").setMultipleInstances(!0)),(0,ae.registerVersion)(Xi,"0.3.4"),(0,ae.registerVersion)(Xi,"0.3.4","esm2017")}();const Sa="/firebase-messaging-sw.js",Bi="/firebase-cloud-messaging-push-scope",ud="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",xa="google.c.a.c_id",jh="google.c.a.c_l",Ra="google.c.a.ts",ld="google.c.a.e";var Bo=(()=>{return(C=Bo||(Bo={})).PUSH_RECEIVED="push-received",C.NOTIFICATION_CLICKED="notification-clicked",Bo;var C})();function vi(C){const T=new Uint8Array(C);return btoa(String.fromCharCode(...T)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Ul(C){const N=(C+"=".repeat((4-C.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),V=atob(N),Y=new Uint8Array(V.length);for(let J=0;J<V.length;++J)Y[J]=V.charCodeAt(J);return Y}const bn="fcm_token_details_db",Hh="fcm_token_object_Store";function xu(C){return ka.apply(this,arguments)}function ka(){return ka=(0,k.Z)(function*(C){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(J=>J.name).includes(bn))return null;let T=null;return(yield(0,ue.openDb)(bn,5,function(){var V=(0,k.Z)(function*(Y){var J;if(Y.oldVersion<2||!Y.objectStoreNames.contains(Hh))return;const Oe=Y.transaction.objectStore(Hh),$e=yield Oe.index("fcmSenderId").get(C);if(yield Oe.clear(),$e)if(2===Y.oldVersion){const Ze=$e;if(!Ze.auth||!Ze.p256dh||!Ze.endpoint)return;T={token:Ze.fcmToken,createTime:null!==(J=Ze.createTime)&&void 0!==J?J:Date.now(),subscriptionOptions:{auth:Ze.auth,p256dh:Ze.p256dh,endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:"string"==typeof Ze.vapidKey?Ze.vapidKey:vi(Ze.vapidKey)}}}else if(3===Y.oldVersion){const Ze=$e;T={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:vi(Ze.auth),p256dh:vi(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:vi(Ze.vapidKey)}}}else if(4===Y.oldVersion){const Ze=$e;T={token:Ze.fcmToken,createTime:Ze.createTime,subscriptionOptions:{auth:vi(Ze.auth),p256dh:vi(Ze.p256dh),endpoint:Ze.endpoint,swScope:Ze.swScope,vapidKey:vi(Ze.vapidKey)}}}});return function(Y){return V.apply(this,arguments)}}())).close(),yield(0,ue.deleteDb)(bn),yield(0,ue.deleteDb)("fcm_vapid_details_db"),yield(0,ue.deleteDb)("undefined"),cd(T)?T:null}),ka.apply(this,arguments)}function cd(C){if(!C||!C.subscriptionOptions)return!1;const{subscriptionOptions:T}=C;return"number"==typeof C.createTime&&C.createTime>0&&"string"==typeof C.token&&C.token.length>0&&"string"==typeof T.auth&&T.auth.length>0&&"string"==typeof T.p256dh&&T.p256dh.length>0&&"string"==typeof T.endpoint&&T.endpoint.length>0&&"string"==typeof T.swScope&&T.swScope.length>0&&"string"==typeof T.vapidKey&&T.vapidKey.length>0}const ji="firebase-messaging-store";let Vl=null;function dn(){return Vl||(Vl=(0,ue.openDb)("firebase-messaging-database",1,C=>{0===C.oldVersion&&C.createObjectStore(ji)})),Vl}function jo(C){return _o.apply(this,arguments)}function _o(){return(_o=(0,k.Z)(function*(C){const T=hr(C),V=yield(yield dn()).transaction(ji).objectStore(ji).get(T);if(V)return V;{const Y=yield xu(C.appConfig.senderId);if(Y)return yield hn(C,Y),Y}})).apply(this,arguments)}function hn(C,T){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,k.Z)(function*(C,T){const N=hr(C),Y=(yield dn()).transaction(ji,"readwrite");return yield Y.objectStore(ji).put(T,N),yield Y.complete,T})).apply(this,arguments)}function Nu(C){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,k.Z)(function*(C){const T=hr(C),V=(yield dn()).transaction(ji,"readwrite");yield V.objectStore(ji).delete(T),yield V.complete})).apply(this,arguments)}function hr({appConfig:C}){return C.appId}const Hn=new se.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function rs(C,T){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,k.Z)(function*(C,T){const N=yield vs(C),V=Ho(T),Y={method:"POST",headers:N,body:JSON.stringify(V)};let J;try{J=yield(yield fetch(is(C.appConfig),Y)).json()}catch(Oe){throw Hn.create("token-subscribe-failed",{errorInfo:Oe})}if(J.error)throw Hn.create("token-subscribe-failed",{errorInfo:J.error.message});if(!J.token)throw Hn.create("token-subscribe-no-token");return J.token})).apply(this,arguments)}function yo(C,T){return zs.apply(this,arguments)}function zs(){return(zs=(0,k.Z)(function*(C,T){const N=yield vs(C),V=Ho(T.subscriptionOptions),Y={method:"PATCH",headers:N,body:JSON.stringify(V)};let J;try{J=yield(yield fetch(`${is(C.appConfig)}/${T.token}`,Y)).json()}catch(Oe){throw Hn.create("token-update-failed",{errorInfo:Oe})}if(J.error)throw Hn.create("token-update-failed",{errorInfo:J.error.message});if(!J.token)throw Hn.create("token-update-no-token");return J.token})).apply(this,arguments)}function Oa(C,T){return Hi.apply(this,arguments)}function Hi(){return(Hi=(0,k.Z)(function*(C,T){const V={method:"DELETE",headers:yield vs(C)};try{const J=yield(yield fetch(`${is(C.appConfig)}/${T}`,V)).json();if(J.error)throw Hn.create("token-unsubscribe-failed",{errorInfo:J.error.message})}catch(Y){throw Hn.create("token-unsubscribe-failed",{errorInfo:Y})}})).apply(this,arguments)}function is({projectId:C}){return`https://fcmregistrations.googleapis.com/v1/projects/${C}/registrations`}function vs(C){return _t.apply(this,arguments)}function _t(){return(_t=(0,k.Z)(function*({appConfig:C,installations:T}){const N=yield T.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":C.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Ho({p256dh:C,auth:T,endpoint:N,vapidKey:V}){const Y={web:{endpoint:N,auth:T,p256dh:C}};return V!==ud&&(Y.web.applicationPubKey=V),Y}const hd=6048e5;function Pu(C){return jl.apply(this,arguments)}function jl(){return(jl=(0,k.Z)(function*(C){const T=yield Dn(C.swRegistration,C.vapidKey),N={vapidKey:C.vapidKey,swScope:C.swRegistration.scope,endpoint:T.endpoint,auth:vi(T.getKey("auth")),p256dh:vi(T.getKey("p256dh"))},V=yield jo(C.firebaseDependencies);if(V){if(vo(V.subscriptionOptions,N))return Date.now()>=V.createTime+hd?$l(C,{token:V.token,createTime:Date.now(),subscriptionOptions:N}):V.token;try{yield Oa(C.firebaseDependencies,V.token)}catch(Y){console.warn(Y)}return Ut(C.firebaseDependencies,N)}return Ut(C.firebaseDependencies,N)})).apply(this,arguments)}function La(C){return Hl.apply(this,arguments)}function Hl(){return(Hl=(0,k.Z)(function*(C){const T=yield jo(C.firebaseDependencies);T&&(yield Oa(C.firebaseDependencies,T.token),yield Nu(C.firebaseDependencies));const N=yield C.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()})).apply(this,arguments)}function $l(C,T){return Se.apply(this,arguments)}function Se(){return(Se=(0,k.Z)(function*(C,T){try{const N=yield yo(C.firebaseDependencies,T),V=Object.assign(Object.assign({},T),{token:N,createTime:Date.now()});return yield hn(C.firebaseDependencies,V),N}catch(N){throw yield La(C),N}})).apply(this,arguments)}function Ut(C,T){return Gl.apply(this,arguments)}function Gl(){return(Gl=(0,k.Z)(function*(C,T){const V={token:yield rs(C,T),createTime:Date.now(),subscriptionOptions:T};return yield hn(C,V),V.token})).apply(this,arguments)}function Dn(C,T){return $o.apply(this,arguments)}function $o(){return($o=(0,k.Z)(function*(C,T){return(yield C.pushManager.getSubscription())||C.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Ul(T)})})).apply(this,arguments)}function vo(C,T){return T.vapidKey===C.vapidKey&&T.endpoint===C.endpoint&&T.auth===C.auth&&T.p256dh===C.p256dh}function wi(C){const T={from:C.from,collapseKey:C.collapse_key,messageId:C.fcmMessageId};return function ql(C,T){if(!T.notification)return;C.notification={};const N=T.notification.title;N&&(C.notification.title=N);const V=T.notification.body;V&&(C.notification.body=V);const Y=T.notification.image;Y&&(C.notification.image=Y)}(T,C),function Fa(C,T){!T.data||(C.data=T.data)}(T,C),function eg(C,T){if(!T.fcmOptions)return;C.fcmOptions={};const N=T.fcmOptions.link;N&&(C.fcmOptions.link=N);const V=T.fcmOptions.analytics_label;V&&(C.fcmOptions.analyticsLabel=V)}(T,C),T}function fd(C){return"object"==typeof C&&!!C&&xa in C}function wo(C,T){const N=[];for(let V=0;V<C.length;V++)N.push(C.charAt(V)),V<T.length&&N.push(T.charAt(V));return N.join("")}function $n(C){return Hn.create("missing-app-config-values",{valueName:C})}wo("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),wo("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class ws{constructor(T,N,V){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Y=function ku(C){if(!C||!C.options)throw $n("App Configuration Object");if(!C.name)throw $n("App Name");const T=["projectId","apiKey","appId","messagingSenderId"],{options:N}=C;for(const V of T)if(!N[V])throw $n(V);return{appName:C.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(T);this.firebaseDependencies={app:T,appConfig:Y,installations:N,analyticsProvider:V}}_delete(){return Promise.resolve()}}function Ua(C){return Ks.apply(this,arguments)}function Ks(){return(Ks=(0,k.Z)(function*(C){try{C.swRegistration=yield navigator.serviceWorker.register(Sa,{scope:Bi}),C.swRegistration.update().catch(()=>{})}catch(T){throw Hn.create("failed-service-worker-registration",{browserErrorMessage:T.message})}})).apply(this,arguments)}function $i(C,T){return Wl.apply(this,arguments)}function Wl(){return(Wl=(0,k.Z)(function*(C,T){if(!T&&!C.swRegistration&&(yield Ua(C)),T||!C.swRegistration){if(!(T instanceof ServiceWorkerRegistration))throw Hn.create("invalid-sw-registration");C.swRegistration=T}})).apply(this,arguments)}function Mu(C,T){return zl.apply(this,arguments)}function zl(){return(zl=(0,k.Z)(function*(C,T){T?C.vapidKey=T:C.vapidKey||(C.vapidKey=ud)})).apply(this,arguments)}function Va(){return(Va=(0,k.Z)(function*(C,T){if(!navigator)throw Hn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Hn.create("permission-blocked");return yield Mu(C,null==T?void 0:T.vapidKey),yield $i(C,null==T?void 0:T.serviceWorkerRegistration),Pu(C)})).apply(this,arguments)}function Ba(C,T,N){return Kl.apply(this,arguments)}function Kl(){return(Kl=(0,k.Z)(function*(C,T,N){const V=Zl(T);(yield C.firebaseDependencies.analyticsProvider.get()).logEvent(V,{message_id:N[xa],message_name:N[jh],message_time:N[Ra],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zl(C){switch(C){case Bo.NOTIFICATION_CLICKED:return"notification_open";case Bo.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ja(){return(ja=(0,k.Z)(function*(C,T){const N=T.data;if(!N.isFirebaseMessaging)return;C.onMessageHandler&&N.messageType===Bo.PUSH_RECEIVED&&("function"==typeof C.onMessageHandler?C.onMessageHandler(wi(N)):C.onMessageHandler.next(wi(N)));const V=N.data;fd(V)&&"1"===V[ld]&&(yield Ba(C,N.messageType,V))})).apply(this,arguments)}const Ha="@firebase/messaging",Yl=C=>{const T=new ws(C.getProvider("app").getImmediate(),C.getProvider("installations-internal").getImmediate(),C.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function $h(C,T){return ja.apply(this,arguments)}(T,N)),T},Gh=C=>{const T=C.getProvider("messaging").getImmediate();return{getToken:V=>function Ou(C,T){return Va.apply(this,arguments)}(T,V)}};function Go(){return ss.apply(this,arguments)}function ss(){return(ss=(0,k.Z)(function*(){try{yield(0,se.eu)()}catch(C){return!1}return"undefined"!=typeof window&&(0,se.hl)()&&(0,se.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function qh(){(0,ae._registerComponent)(new me.wA("messaging",Yl,"PUBLIC")),(0,ae._registerComponent)(new me.wA("messaging-internal",Gh,"PRIVATE")),(0,ae.registerVersion)(Ha,"0.9.8"),(0,ae.registerVersion)(Ha,"0.9.8","esm2017")}();const $a="analytics",Eo="firebase_id",Jl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Lu="https://www.googletagmanager.com/gtag/js",Er=new le.Yd("@firebase/analytics");function Xl(C){return Promise.all(C.map(T=>T.catch(N=>N)))}function Is(C,T){const N=document.createElement("script");N.src=`${Lu}?l=${C}&id=${T}`,N.async=!0,document.head.appendChild(N)}function ec(C,T,N,V,Y,J){return tc.apply(this,arguments)}function tc(){return(tc=(0,k.Z)(function*(C,T,N,V,Y,J){const Oe=V[Y];try{if(Oe)yield T[Oe];else{const Ze=(yield Xl(N)).find(Jt=>Jt.measurementId===Y);Ze&&(yield T[Ze.appId])}}catch($e){Er.error($e)}C("config",Y,J)})).apply(this,arguments)}function Uu(C,T,N,V,Y){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,k.Z)(function*(C,T,N,V,Y){try{let J=[];if(Y&&Y.send_to){let Oe=Y.send_to;Array.isArray(Oe)||(Oe=[Oe]);const $e=yield Xl(N);for(const Ze of Oe){const Jt=$e.find(Wn=>Wn.measurementId===Ze),Xt=Jt&&T[Jt.appId];if(!Xt){J=[];break}J.push(Xt)}}0===J.length&&(J=Object.values(T)),yield Promise.all(J),C("event",V,Y||{})}catch(J){Er.error(J)}})).apply(this,arguments)}function En(){const C=window.document.getElementsByTagName("script");for(const T of Object.values(C))if(T.src&&T.src.includes(Lu))return T;return null}const et=new se.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),nc=new class Pn{constructor(T={},N=1e3){this.throttleMetadata=T,this.intervalMillis=N}getThrottleMetadata(T){return this.throttleMetadata[T]}setThrottleMetadata(T,N){this.throttleMetadata[T]=N}deleteThrottleMetadata(T){delete this.throttleMetadata[T]}};function Gn(C){return new Headers({Accept:"application/json","x-goog-api-key":C})}function qo(C){return qa.apply(this,arguments)}function qa(){return(qa=(0,k.Z)(function*(C){var T;const{appId:N,apiKey:V}=C,Y={method:"GET",headers:Gn(V)},J=Jl.replace("{app-id}",N),Oe=yield fetch(J,Y);if(200!==Oe.status&&304!==Oe.status){let $e="";try{const Ze=yield Oe.json();(null===(T=Ze.error)||void 0===T?void 0:T.message)&&($e=Ze.error.message)}catch(Ze){}throw et.create("config-fetch-failed",{httpStatus:Oe.status,responseMessage:$e})}return Oe.json()})).apply(this,arguments)}function Wo(C){return Io.apply(this,arguments)}function Io(){return(Io=(0,k.Z)(function*(C,T=nc,N){const{appId:V,apiKey:Y,measurementId:J}=C.options;if(!V)throw et.create("no-app-id");if(!Y){if(J)return{measurementId:J,appId:V};throw et.create("no-api-key")}const Oe=T.getThrottleMetadata(V)||{backoffCount:0,throttleEndTimeMillis:Date.now()},$e=new ju;return setTimeout((0,k.Z)(function*(){$e.abort()}),void 0!==N?N:6e4),os({appId:V,apiKey:Y,measurementId:J},Oe,$e,T)})).apply(this,arguments)}function os(C,T,N){return gt.apply(this,arguments)}function gt(){return(gt=(0,k.Z)(function*(C,{throttleEndTimeMillis:T,backoffCount:N},V,Y=nc){const{appId:J,measurementId:Oe}=C;try{yield rc(V,T)}catch($e){if(Oe)return Er.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${$e.message}]`),{appId:J,measurementId:Oe};throw $e}try{const $e=yield qo(C);return Y.deleteThrottleMetadata(J),$e}catch($e){if(!pd($e)){if(Y.deleteThrottleMetadata(J),Oe)return Er.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Oe} provided in the "measurementId" field in the local Firebase config. [${$e.message}]`),{appId:J,measurementId:Oe};throw $e}const Ze=503===Number($e.customData.httpStatus)?(0,se.$s)(N,Y.intervalMillis,30):(0,se.$s)(N,Y.intervalMillis),Jt={throttleEndTimeMillis:Date.now()+Ze,backoffCount:N+1};return Y.setThrottleMetadata(J,Jt),Er.debug(`Calling attemptFetch again in ${Ze} millis`),os(C,Jt,V,Y)}})).apply(this,arguments)}function rc(C,T){return new Promise((N,V)=>{const Y=Math.max(T-Date.now(),0),J=setTimeout(N,Y);C.addEventListener(()=>{clearTimeout(J),V(et.create("fetch-throttle",{throttleEndTimeMillis:T}))})})}function pd(C){if(!(C instanceof se.ZR&&C.customData))return!1;const T=Number(C.customData.httpStatus);return 429===T||500===T||503===T||504===T}class ju{constructor(){this.listeners=[]}addEventListener(T){this.listeners.push(T)}abort(){this.listeners.forEach(T=>T())}}function gd(){return fn.apply(this,arguments)}function fn(){return(fn=(0,k.Z)(function*(){if(!(0,se.hl)())return Er.warn(et.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,se.eu)()}catch(C){return Er.warn(et.create("indexeddb-unavailable",{errorInfo:C}).message),!1}return!0})).apply(this,arguments)}function Wa(){return(Wa=(0,k.Z)(function*(C,T,N,V,Y,J,Oe){var $e;const Ze=Wo(C);Ze.then(Mn=>{N[Mn.measurementId]=Mn.appId,C.options.measurementId&&Mn.measurementId!==C.options.measurementId&&Er.warn(`The measurement ID in the local Firebase config (${C.options.measurementId}) does not match the measurement ID fetched from the server (${Mn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Mn=>Er.error(Mn)),T.push(Ze);const Jt=gd().then(Mn=>{if(Mn)return V.getId()}),[Xt,Wn]=yield Promise.all([Ze,Jt]);En()||Is(J,Xt.measurementId),Y("js",new Date);const qr=null!==($e=null==Oe?void 0:Oe.config)&&void 0!==$e?$e:{};return qr.origin="firebase",qr.update=!0,null!=Wn&&(qr[Eo]=Wn),Y("config",Xt.measurementId,qr),Xt.measurementId})).apply(this,arguments)}class Ko{constructor(T){this.app=T}_delete(){return delete $r[this.app.options.appId],Promise.resolve()}}let $r={},Hu=[];const Zo={};let za,Ys,as="dataLayer",ic=!1;function Rr(C,T,N){!function Yo(){const C=[];if((0,se.ru)()&&C.push("This is a browser extension environment."),(0,se.zI)()||C.push("Cookies are not available."),C.length>0){const T=C.map((V,Y)=>`(${Y+1}) ${V}`).join(" "),N=et.create("invalid-analytics-context",{errorInfo:T});Er.warn(N.message)}}();const V=C.options.appId;if(!V)throw et.create("no-app-id");if(!C.options.apiKey){if(!C.options.measurementId)throw et.create("no-api-key");Er.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${C.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=$r[V])throw et.create("already-exists",{id:V});if(!ic){!function Fu(C){let T=[];Array.isArray(window[C])?T=window[C]:window[C]=T}(as);const{wrappedGtag:J,gtagCore:Oe}=function U_(C,T,N,V,Y){let J=function(...Oe){window[V].push(arguments)};return window[Y]&&"function"==typeof window[Y]&&(J=window[Y]),window[Y]=function Kh(C,T,N,V){function J(){return(J=(0,k.Z)(function*(Oe,$e,Ze){try{"event"===Oe?yield Uu(C,T,N,$e,Ze):"config"===Oe?yield ec(C,T,N,V,$e,Ze):C("set",$e)}catch(Jt){Er.error(Jt)}})).apply(this,arguments)}return function Y(Oe,$e,Ze){return J.apply(this,arguments)}}(J,C,T,N),{gtagCore:J,wrappedGtag:window[Y]}}($r,Hu,Zo,as,"gtag");Ys=J,za=Oe,ic=!0}return $r[V]=function zo(C,T,N,V,Y,J,Oe){return Wa.apply(this,arguments)}(C,Hu,Zo,T,za,as,N),new Ko(C)}function Qo(){return(Qo=(0,k.Z)(function*(C,T,N,V,Y){if(Y&&Y.global)C("event",N,V);else{const J=yield T;C("event",N,Object.assign(Object.assign({},V),{send_to:J}))}})).apply(this,arguments)}function md(){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,k.Z)(function*(){if((0,se.ru)()||!(0,se.zI)()||!(0,se.hl)())return!1;try{return yield(0,se.eu)()}catch(C){return!1}})).apply(this,arguments)}const Yh="@firebase/analytics";!function qu(){(0,ae._registerComponent)(new me.wA($a,(T,{options:N})=>Rr(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,ae._registerComponent)(new me.wA("analytics-internal",function C(T){try{const N=T.getProvider($a).getImmediate();return{logEvent:(V,Y,J)=>function Ii(C,T,N,V){C=(0,se.m9)(C),function sc(C,T,N,V,Y){return Qo.apply(this,arguments)}(Ys,$r[C.app.options.appId],T,N,V).catch(Y=>Er.error(Y))}(N,V,Y,J)}}catch(N){throw et.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,ae.registerVersion)(Yh,"0.7.5"),(0,ae.registerVersion)(Yh,"0.7.5","esm2017")}();var Ds=O(4408),rr=O(7565);const Ya=new class Za extends rr.v{}(class ac extends Ds.o{constructor(T,N){super(T,N),this.scheduler=T,this.work=N}schedule(T,N=0){return N>0?super.schedule(T,N):(this.delay=N,this.state=T,this.scheduler.flush(this),this)}execute(T,N){return N>0||this.closed?super.execute(T,N):this._execute(T,N)}requestAsyncId(T,N,V=0){return null!=V&&V>0||null==V&&this.delay>0?super.requestAsyncId(T,N,V):T.flush(this)}});var Wu=O(4986),Gr=O(8505),bi=O(5363),Qa=O(9468);const zu=new p.GfV("7.2.1"),di="__angularfire_symbol__analyticsIsSupportedValue",ea="__angularfire_symbol__analyticsIsSupported",uc="__angularfire_symbol__remoteConfigIsSupportedValue",Ku="__angularfire_symbol__remoteConfigIsSupported",kt="__angularfire_symbol__messagingIsSupportedValue",Zu="__angularfire_symbol__messagingIsSupported";function tg(C,T,N){if(T){if(1===T.length)return T[0];const J=T.filter(Oe=>Oe.app===N);if(1===J.length)return J[0]}return N.container.getProvider(C).getImmediate({optional:!0})}globalThis[ea]||(globalThis[ea]=md().then(C=>globalThis[di]=C).catch(()=>globalThis[di]=!1)),globalThis[Zu]||(globalThis[Zu]=Go().then(C=>globalThis[kt]=C).catch(()=>globalThis[kt]=!1)),globalThis[Ku]||(globalThis[Ku]=ad().then(C=>globalThis[uc]=C).catch(()=>globalThis[uc]=!1));const Qu=(C,T)=>{const N=T?[T]:(0,B.C6)(),V=[];return N.forEach(Y=>{Y.container.getProvider(C).instances.forEach(Oe=>{V.includes(Oe)||V.push(Oe)})}),V};function Fr(){}class Ja{constructor(T,N=Ya){this.zone=T,this.delegate=N}now(){return this.delegate.now()}schedule(T,N,V){const Y=this.zone;return this.delegate.schedule(function(Oe){Y.runGuarded(()=>{T.apply(this,[Oe])})},N,V)}}class Ju{constructor(T){this.zone=T,this.task=null}call(T,N){const V=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Fr,{},Fr,Fr)),N.pipe((0,Gr.b)({next:V,complete:V,error:V})).subscribe(T).add(V)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let _d=(()=>{class C{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new Ja(Zone.current)),this.insideAngular=N.run(()=>new Ja(Zone.current,Wu.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return C.\u0275fac=function(N){return new(N||C)(p.LFG(p.R0b))},C.\u0275prov=p.Yz7({token:C,factory:C.\u0275fac,providedIn:"root"}),C})();function Ss(){const C=globalThis.\u0275AngularFireScheduler;if(!C)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return C}function ta(C){return C.pipe((0,bi.Q)(Ss().outsideAngular))}function As(C){return Ss(),function Xu(C){return function(N){return(N=N.lift(new Ju(C.ngZone))).pipe((0,Qa.R)(C.outsideAngular),(0,bi.Q)(C.insideAngular))}}(Ss())(C)}},4929:(at,De,O)=>{"use strict";O.d(De,{$:()=>hd,A:()=>H,E:()=>Ft,G:()=>Hr,I:()=>ys,K:()=>dr,L:()=>ad,M:()=>ud,N:()=>Aa,P:()=>zu,Q:()=>xa,R:()=>Yh,T:()=>Bi,U:()=>Na,V:()=>Bo,W:()=>Hh,X:()=>hr,Y:()=>Hn,Z:()=>Ar,_:()=>Hi,a:()=>et,a0:()=>jl,a1:()=>Hl,a2:()=>Se,a3:()=>Gl,a4:()=>$o,a5:()=>wi,a6:()=>ql,a7:()=>eg,a8:()=>fd,a9:()=>ws,aA:()=>Wn,aB:()=>Xu,aC:()=>an,aG:()=>Pn,aJ:()=>Ra,aa:()=>Ks,ab:()=>Wl,ae:()=>Va,af:()=>Kl,ag:()=>Zl,aj:()=>dd,ak:()=>Wh,am:()=>Ql,an:()=>Fu,ao:()=>Bn,ap:()=>X,aq:()=>Ot,ar:()=>ot,as:()=>Ne,at:()=>ef,au:()=>vd,av:()=>he,aw:()=>re,ax:()=>fe,ay:()=>Pt,az:()=>Ur,b:()=>En,c:()=>Yu,d:()=>Fr,e:()=>tg,f:()=>C,g:()=>Oe,h:()=>V,i:()=>Cs,j:()=>Jt,k:()=>Js,l:()=>rr,m:()=>$_,o:()=>ue,r:()=>Ya,s:()=>Ds,u:()=>bi,z:()=>xe});var p=O(5861),B=O(2090),k=O(9681),ae=O(655),se=O(1877),me=O(4859);const ue={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function ne(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},Le=function He(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},je=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ce=new se.Yd("@firebase/auth");function Re(v,...g){ce.logLevel<=se.in.ERROR&&ce.error(`Auth (${k.SDK_VERSION}): ${v}`,...g)}function Ne(v,...g){throw ze(v,...g)}function he(v,...g){return ze(v,...g)}function Ce(v,g,_){const I=Object.assign(Object.assign({},Le()),{[g]:_});return new B.LL("auth","Firebase",I).create(g,{appName:v.name})}function we(v,g,_){if(!(g instanceof _))throw _.name!==g.constructor.name&&Ne(v,"argument-error"),Ce(v,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ze(v,...g){if("string"!=typeof v){const _=g[0],I=[...g.slice(1)];return I[0]&&(I[0].appName=v.name),v._errorFactory.create(_,...I)}return je.create(v,...g)}function re(v,g,..._){if(!v)throw ze(g,..._)}function Qe(v){const g="INTERNAL ASSERTION FAILED: "+v;throw Re(g),new Error(g)}function X(v,g){v||Qe(g)}const pe=new Map;function fe(v){X(v instanceof Function,"Expected a class definition");let g=pe.get(v);return g?(X(g instanceof v,"Instance stored in cache mismatched with class"),g):(g=new v,pe.set(v,g),g)}function de(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function wt(){return"http:"===Zt()||"https:"===Zt()}function Zt(){var v;return"undefined"!=typeof self&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class it{constructor(g,_){this.shortDelay=g,this.longDelay=_,X(_>g,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Rn(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(wt()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function lr(v,g){X(v.emulator,"Emulator should always be set here");const{url:_}=v.emulator;return g?`${_}${g.startsWith("/")?g.slice(1):g}`:_}class sn{static initialize(g,_,I){this.fetchImpl=g,_&&(this.headersImpl=_),I&&(this.responseImpl=I)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Qe("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Qe("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Qe("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const vr={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},Yt=new it(3e4,6e4);function $t(v,g){return v.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:v.tenantId}):g}function en(v,g,_,I){return In.apply(this,arguments)}function In(){return(In=(0,p.Z)(function*(v,g,_,I,R={}){return Fi(v,R,(0,p.Z)(function*(){let L={},te={};I&&("GET"===g?te=I:L={body:JSON.stringify(I)});const Pe=(0,B.xO)(Object.assign({key:v.config.apiKey},te)).slice(1),rt=yield v._getAdditionalHeaders();return rt["Content-Type"]="application/json",v.languageCode&&(rt["X-Firebase-Locale"]=v.languageCode),sn.fetch()(yi(v,v.config.apiHost,_,Pe),Object.assign({method:g,headers:rt,referrerPolicy:"no-referrer"},L))}))})).apply(this,arguments)}function Fi(v,g,_){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,p.Z)(function*(v,g,_){v._canInitEmulator=!1;const I=Object.assign(Object.assign({},vr),g);try{const R=new Ui(v),L=yield Promise.race([_(),R.promise]);R.clearNetworkTimeout();const te=yield L.json();if("needConfirmation"in te)throw Vn(v,"account-exists-with-different-credential",te);if(L.ok&&!("errorMessage"in te))return te;{const Pe=L.ok?te.errorMessage:te.error.message,[rt,yt]=Pe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===rt)throw Vn(v,"credential-already-in-use",te);if("EMAIL_EXISTS"===rt)throw Vn(v,"email-already-in-use",te);const Tt=I[rt]||rt.toLowerCase().replace(/[_\s]+/g,"-");if(yt)throw Ce(v,Tt,yt);Ne(v,Tt)}}catch(R){if(R instanceof B.ZR)throw R;Ne(v,"network-request-failed")}})).apply(this,arguments)}function Dr(v,g,_,I){return Yi.apply(this,arguments)}function Yi(){return(Yi=(0,p.Z)(function*(v,g,_,I,R={}){const L=yield en(v,g,_,I,R);return"mfaPendingCredential"in L&&Ne(v,"multi-factor-auth-required",{_serverResponse:L}),L})).apply(this,arguments)}function yi(v,g,_,I){const R=`${g}${_}?${I}`;return v.config.emulator?lr(v.config,R):`${v.config.apiScheme}://${R}`}class Ui{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((_,I)=>{this.timer=setTimeout(()=>I(he(this.auth,"network-request-failed")),Yt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(v,g,_){const I={appName:v.name};_.email&&(I.email=_.email),_.phoneNumber&&(I.phoneNumber=_.phoneNumber);const R=he(v,g,I);return R.customData._tokenResponse=_,R}function pt(){return(pt=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Or(v,g){return xn.apply(this,arguments)}function xn(){return(xn=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Wt(v,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function ht(v){if(v)try{const g=new Date(Number(v));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Qt(){return(Qt=(0,p.Z)(function*(v,g=!1){const _=(0,B.m9)(v),I=yield _.getIdToken(g),R=St(I);re(R&&R.exp&&R.auth_time&&R.iat,_.auth,"internal-error");const L="object"==typeof R.firebase?R.firebase:void 0,te=null==L?void 0:L.sign_in_provider;return{claims:R,token:I,authTime:ht(cr(R.auth_time)),issuedAtTime:ht(cr(R.iat)),expirationTime:ht(cr(R.exp)),signInProvider:te||null,signInSecondFactor:(null==L?void 0:L.sign_in_second_factor)||null}})).apply(this,arguments)}function cr(v){return 1e3*Number(v)}function St(v){const[g,_,I]=v.split(".");if(void 0===g||void 0===_||void 0===I)return Re("JWT malformed, contained fewer than 3 sections"),null;try{const R=(0,B.tV)(_);return R?JSON.parse(R):(Re("Failed to decode base64 JWT payload"),null)}catch(R){return Re("Caught error parsing JWT payload as JSON",R),null}}function Je(v,g){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,p.Z)(function*(v,g,_=!1){if(_)return g;try{return yield g}catch(I){throw I instanceof B.ZR&&_s(I)&&v.auth.currentUser===v&&(yield v.auth.signOut()),I}})).apply(this,arguments)}function _s({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}class jt{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var _;if(g){const I=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),I}{this.errorBackoff=3e4;const R=(null!==(_=this.user.stsTokenManager.expirationTime)&&void 0!==_?_:0)-Date.now()-3e5;return Math.max(0,R)}}schedule(g=!1){var _=this;if(!this.isRunning)return;const I=this.getInterval(g);this.timerId=setTimeout((0,p.Z)(function*(){yield _.iteration()}),I)}iteration(){var g=this;return(0,p.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(_){return void("auth/network-request-failed"===_.code&&g.schedule(!0))}g.schedule()})()}}class Bs{constructor(g,_){this.createdAt=g,this.lastLoginAt=_,this._initializeTime()}_initializeTime(){this.lastSignInTime=ht(this.lastLoginAt),this.creationTime=ht(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Qn(v){return wn.apply(this,arguments)}function wn(){return(wn=(0,p.Z)(function*(v){var g;const _=v.auth,I=yield v.getIdToken(),R=yield Je(v,Wt(_,{idToken:I}));re(null==R?void 0:R.users.length,_,"internal-error");const L=R.users[0];v._notifyReloadListener(L);const te=(null===(g=L.providerUserInfo)||void 0===g?void 0:g.length)?be(L.providerUserInfo):[],Pe=K(v.providerData,te),Tt=!!v.isAnonymous&&!(v.email&&L.passwordHash||(null==Pe?void 0:Pe.length)),On={uid:L.localId,displayName:L.displayName||null,photoURL:L.photoUrl||null,email:L.email||null,emailVerified:L.emailVerified||!1,phoneNumber:L.phoneNumber||null,tenantId:L.tenantId||null,providerData:Pe,metadata:new Bs(L.createdAt,L.lastLoginAt),isAnonymous:Tt};Object.assign(v,On)})).apply(this,arguments)}function W(){return(W=(0,p.Z)(function*(v){const g=(0,B.m9)(v);yield Qn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function K(v,g){return[...v.filter(I=>!g.some(R=>R.providerId===I.providerId)),...g]}function be(v){return v.map(g=>{var{providerId:_}=g,I=(0,ae._T)(g,["providerId"]);return{providerId:_,uid:I.rawId||"",displayName:I.displayName||null,email:I.email||null,phoneNumber:I.phoneNumber||null,photoURL:I.photoUrl||null}})}function Ke(){return(Ke=(0,p.Z)(function*(v,g){const _=yield Fi(v,{},(0,p.Z)(function*(){const I=(0,B.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:R,apiKey:L}=v.config,te=yi(v,R,"/v1/token",`key=${L}`),Pe=yield v._getAdditionalHeaders();return Pe["Content-Type"]="application/x-www-form-urlencoded",sn.fetch()(te,{method:"POST",headers:Pe,body:I})}));return{accessToken:_.access_token,expiresIn:_.expires_in,refreshToken:_.refresh_token}})).apply(this,arguments)}class ft{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){re(g.idToken,"internal-error"),re(void 0!==g.idToken,"internal-error"),re(void 0!==g.refreshToken,"internal-error");const _="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function st(v){const g=St(v);return re(g,"internal-error"),re(void 0!==g.exp,"internal-error"),re(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,_)}getToken(g,_=!1){var I=this;return(0,p.Z)(function*(){return re(!I.accessToken||I.refreshToken,g,"user-token-expired"),_||!I.accessToken||I.isExpired?I.refreshToken?(yield I.refresh(g,I.refreshToken),I.accessToken):null:I.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,_){var I=this;return(0,p.Z)(function*(){const{accessToken:R,refreshToken:L,expiresIn:te}=yield function ie(v,g){return Ke.apply(this,arguments)}(g,_);I.updateTokensAndExpiration(R,L,Number(te))})()}updateTokensAndExpiration(g,_,I){this.refreshToken=_||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*I}static fromJSON(g,_){const{refreshToken:I,accessToken:R,expirationTime:L}=_,te=new ft;return I&&(re("string"==typeof I,"internal-error",{appName:g}),te.refreshToken=I),R&&(re("string"==typeof R,"internal-error",{appName:g}),te.accessToken=R),L&&(re("number"==typeof L,"internal-error",{appName:g}),te.expirationTime=L),te}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new ft,this.toJSON())}_performRefresh(){return Qe("not implemented")}}function zt(v,g){re("string"==typeof v||void 0===v,"internal-error",{appName:g})}class on{constructor(g){var{uid:_,auth:I,stsTokenManager:R}=g,L=(0,ae._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=_,this.auth=I,this.stsTokenManager=R,this.accessToken=R.accessToken,this.displayName=L.displayName||null,this.email=L.email||null,this.emailVerified=L.emailVerified||!1,this.phoneNumber=L.phoneNumber||null,this.photoURL=L.photoURL||null,this.isAnonymous=L.isAnonymous||!1,this.tenantId=L.tenantId||null,this.providerData=L.providerData?[...L.providerData]:[],this.metadata=new Bs(L.createdAt||void 0,L.lastLoginAt||void 0)}getIdToken(g){var _=this;return(0,p.Z)(function*(){const I=yield Je(_,_.stsTokenManager.getToken(_.auth,g));return re(I,_.auth,"internal-error"),_.accessToken!==I&&(_.accessToken=I,yield _.auth._persistUserIfCurrent(_),_.auth._notifyListenersIfCurrent(_)),I})()}getIdTokenResult(g){return function Ct(v){return Qt.apply(this,arguments)}(this,g)}reload(){return function j(v){return W.apply(this,arguments)}(this)}_assign(g){this!==g&&(re(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(_=>Object.assign({},_)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new on(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,_=!1){var I=this;return(0,p.Z)(function*(){let R=!1;g.idToken&&g.idToken!==I.stsTokenManager.accessToken&&(I.stsTokenManager.updateFromServerResponse(g),R=!0),_&&(yield Qn(I)),yield I.auth._persistUserIfCurrent(I),R&&I.auth._notifyListenersIfCurrent(I)})()}delete(){var g=this;return(0,p.Z)(function*(){const _=yield g.getIdToken();return yield Je(g,function Qi(v,g){return pt.apply(this,arguments)}(g.auth,{idToken:_})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,_){var I,R,L,te,Pe,rt,yt,Tt;const On=null!==(I=_.displayName)&&void 0!==I?I:void 0,fi=null!==(R=_.email)&&void 0!==R?R:void 0,nu=null!==(L=_.phoneNumber)&&void 0!==L?L:void 0,sl=null!==(te=_.photoURL)&&void 0!==te?te:void 0,Sd=null!==(Pe=_.tenantId)&&void 0!==Pe?Pe:void 0,fc=null!==(rt=_._redirectEventId)&&void 0!==rt?rt:void 0,pc=null!==(yt=_.createdAt)&&void 0!==yt?yt:void 0,gc=null!==(Tt=_.lastLoginAt)&&void 0!==Tt?Tt:void 0,{uid:Ad,emailVerified:ol,isAnonymous:xd,providerData:af,stsTokenManager:uf}=_;re(Ad&&uf,g,"internal-error");const lf=ft.fromJSON(this.name,uf);re("string"==typeof Ad,g,"internal-error"),zt(On,g.name),zt(fi,g.name),re("boolean"==typeof ol,g,"internal-error"),re("boolean"==typeof xd,g,"internal-error"),zt(nu,g.name),zt(sl,g.name),zt(Sd,g.name),zt(fc,g.name),zt(pc,g.name),zt(gc,g.name);const al=new on({uid:Ad,auth:g,email:fi,emailVerified:ol,displayName:On,isAnonymous:xd,photoURL:sl,phoneNumber:nu,tenantId:Sd,stsTokenManager:lf,createdAt:pc,lastLoginAt:gc});return af&&Array.isArray(af)&&(al.providerData=af.map(z_=>Object.assign({},z_))),fc&&(al._redirectEventId=fc),al}static _fromIdTokenResponse(g,_,I=!1){return(0,p.Z)(function*(){const R=new ft;R.updateFromServerResponse(_);const L=new on({uid:_.localId,auth:g,stsTokenManager:R,isAnonymous:I});return yield Qn(L),L})()}}const dr=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,p.Z)(function*(){return!0})()}_set(_,I){var R=this;return(0,p.Z)(function*(){R.storage[_]=I})()}_get(_){var I=this;return(0,p.Z)(function*(){const R=I.storage[_];return void 0===R?null:R})()}_remove(_){var I=this;return(0,p.Z)(function*(){delete I.storage[_]})()}_addListener(_,I){}_removeListener(_,I){}}return v.type="NONE",v})();function Pt(v,g,_){return`firebase:${v}:${g}:${_}`}class Xn{constructor(g,_,I){this.persistence=g,this.auth=_,this.userKey=I;const{config:R,name:L}=this.auth;this.fullUserKey=Pt(this.userKey,R.apiKey,L),this.fullPersistenceKey=Pt("persistence",R.apiKey,L),this.boundEventHandler=_._onStorageEvent.bind(_),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,p.Z)(function*(){const _=yield g.persistence._get(g.fullUserKey);return _?on._fromJSON(g.auth,_):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var _=this;return(0,p.Z)(function*(){if(_.persistence===g)return;const I=yield _.getCurrentUser();return yield _.removeCurrentUser(),_.persistence=g,I?_.setCurrentUser(I):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,_,I="authUser"){return(0,p.Z)(function*(){if(!_.length)return new Xn(fe(dr),g,I);const R=(yield Promise.all(_.map(function(){var yt=(0,p.Z)(function*(Tt){if(yield Tt._isAvailable())return Tt});return function(Tt){return yt.apply(this,arguments)}}()))).filter(yt=>yt);let L=R[0]||fe(dr);const te=Pt(I,g.config.apiKey,g.name);let Pe=null;for(const yt of _)try{const Tt=yield yt._get(te);if(Tt){const On=on._fromJSON(g,Tt);yt!==L&&(Pe=On),L=yt;break}}catch(Tt){}const rt=R.filter(yt=>yt._shouldAllowMigration);return L._shouldAllowMigration&&rt.length?(L=rt[0],Pe&&(yield L._set(te,Pe.toJSON())),yield Promise.all(_.map(function(){var yt=(0,p.Z)(function*(Tt){if(Tt!==L)try{yield Tt._remove(te)}catch(On){}});return function(Tt){return yt.apply(this,arguments)}}())),new Xn(L,g,I)):new Xn(L,g,I)})()}}function oe(v){const g=v.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(qe(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(Z(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(At(g))return"Blackberry";if(Bt(g))return"Webos";if(z(g))return"Safari";if((g.includes("chrome/")||Te(g))&&!g.includes("edge/"))return"Chrome";if(ot(g))return"Android";{const I=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==I?void 0:I.length))return I[1]}return"Other"}function Z(v=(0,B.z$)()){return/firefox\//i.test(v)}function z(v=(0,B.z$)()){const g=v.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function Te(v=(0,B.z$)()){return/crios\//i.test(v)}function qe(v=(0,B.z$)()){return/iemobile/i.test(v)}function ot(v=(0,B.z$)()){return/android/i.test(v)}function At(v=(0,B.z$)()){return/blackberry/i.test(v)}function Bt(v=(0,B.z$)()){return/webos/i.test(v)}function Ot(v=(0,B.z$)()){return/iphone|ipad|ipod/i.test(v)}function Bn(v=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}function Lr(v=(0,B.z$)()){return Ot(v)||ot(v)||Bt(v)||At(v)||/windows phone/i.test(v)||qe(v)}function wr(v,g=[]){let _;switch(v){case"Browser":_=oe((0,B.z$)());break;case"Worker":_=`${oe((0,B.z$)())}-${v}`;break;default:_=v}const I=g.length?g.join(","):"FirebaseCore-web";return`${_}/JsCore/${k.SDK_VERSION}/${I}`}class Ia{constructor(g,_){this.app=g,this.config=_,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ye(this),this.idTokenSubscription=new Ye(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=je,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=_.sdkClientVersion}_initializeWithPersistence(g,_){var I=this;return _&&(this._popupRedirectResolver=fe(_)),this._initializationPromise=this.queue((0,p.Z)(function*(){var R,L;if(!I._deleted&&(I.persistenceManager=yield Xn.create(I,g),!I._deleted)){if(null===(R=I._popupRedirectResolver)||void 0===R?void 0:R._shouldInitProactively)try{yield I._popupRedirectResolver._initialize(I)}catch(te){}yield I.initializeCurrentUser(_),I.lastNotifiedUid=(null===(L=I.currentUser)||void 0===L?void 0:L.uid)||null,!I._deleted&&(I._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,p.Z)(function*(){if(g._deleted)return;const _=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||_){if(g.currentUser&&_&&g.currentUser.uid===_.uid)return g._currentUser._assign(_),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(_)}})()}initializeCurrentUser(g){var _=this;return(0,p.Z)(function*(){var I;let R=yield _.assertedPersistence.getCurrentUser();if(g&&_.config.authDomain){yield _.getOrInitRedirectPersistenceManager();const L=null===(I=_.redirectUser)||void 0===I?void 0:I._redirectEventId,te=null==R?void 0:R._redirectEventId,Pe=yield _.tryRedirectSignIn(g);(!L||L===te)&&(null==Pe?void 0:Pe.user)&&(R=Pe.user)}return R?R._redirectEventId?(re(_._popupRedirectResolver,_,"argument-error"),yield _.getOrInitRedirectPersistenceManager(),_.redirectUser&&_.redirectUser._redirectEventId===R._redirectEventId?_.directlySetCurrentUser(R):_.reloadAndSetCurrentUserOrClear(R)):_.reloadAndSetCurrentUserOrClear(R):_.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var _=this;return(0,p.Z)(function*(){let I=null;try{I=yield _._popupRedirectResolver._completeRedirectFn(_,g,!0)}catch(R){yield _._setRedirectUser(null)}return I})()}reloadAndSetCurrentUserOrClear(g){var _=this;return(0,p.Z)(function*(){try{yield Qn(g)}catch(I){if("auth/network-request-failed"!==I.code)return _.directlySetCurrentUser(null)}return _.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function ut(){if("undefined"==typeof navigator)return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var g=this;return(0,p.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var _=this;return(0,p.Z)(function*(){const I=g?(0,B.m9)(g):null;return I&&re(I.auth.config.apiKey===_.config.apiKey,_,"invalid-user-token"),_._updateCurrentUser(I&&I._clone(_))})()}_updateCurrentUser(g){var _=this;return(0,p.Z)(function*(){if(!_._deleted)return g&&re(_.tenantId===g.tenantId,_,"tenant-id-mismatch"),_.queue((0,p.Z)(function*(){yield _.directlySetCurrentUser(g),_.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,p.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var _=this;return this.queue((0,p.Z)(function*(){yield _.assertedPersistence.setPersistence(fe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new B.LL("auth","Firebase",g())}onAuthStateChanged(g,_,I){return this.registerStateListener(this.authStateSubscription,g,_,I)}onIdTokenChanged(g,_,I){return this.registerStateListener(this.idTokenSubscription,g,_,I)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,_){var I=this;return(0,p.Z)(function*(){const R=yield I.getOrInitRedirectPersistenceManager(_);return null===g?R.removeCurrentUser():R.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var _=this;return(0,p.Z)(function*(){if(!_.redirectPersistenceManager){const I=g&&fe(g)||_._popupRedirectResolver;re(I,_,"argument-error"),_.redirectPersistenceManager=yield Xn.create(_,[fe(I._redirectPersistence)],"redirectUser"),_.redirectUser=yield _.redirectPersistenceManager.getCurrentUser()}return _.redirectPersistenceManager})()}_redirectUserForId(g){var _=this;return(0,p.Z)(function*(){var I,R;return _._isInitialized&&(yield _.queue((0,p.Z)(function*(){}))),(null===(I=_._currentUser)||void 0===I?void 0:I._redirectEventId)===g?_._currentUser:(null===(R=_.redirectUser)||void 0===R?void 0:R._redirectEventId)===g?_.redirectUser:null})()}_persistUserIfCurrent(g){var _=this;return(0,p.Z)(function*(){if(g===_.currentUser)return _.queue((0,p.Z)(function*(){return _.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,_;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const I=null!==(_=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==_?_:null;this.lastNotifiedUid!==I&&(this.lastNotifiedUid=I,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,_,I,R){if(this._deleted)return()=>{};const L="function"==typeof _?_:_.next.bind(_),te=this._isInitialized?Promise.resolve():this._initializationPromise;return re(te,this,"internal-error"),te.then(()=>L(this.currentUser)),"function"==typeof _?g.addObserver(_,I,R):g.addObserver(_)}directlySetCurrentUser(g){var _=this;return(0,p.Z)(function*(){_.currentUser&&_.currentUser!==g&&(_._currentUser._stopProactiveRefresh(),g&&_.isProactiveRefreshEnabled&&g._startProactiveRefresh()),_.currentUser=g,g?yield _.assertedPersistence.setCurrentUser(g):yield _.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=wr(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,p.Z)(function*(){const _={"X-Client-Version":g.clientVersion};return g.app.options.appId&&(_["X-Firebase-gmpid"]=g.app.options.appId),_})()}}function an(v){return(0,B.m9)(v)}class Ye{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,B.ne)(_=>this.observer=_)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Ft(v,g,_){const I=an(v);re(I._canInitEmulator,I,"emulator-config-failed"),re(/^https?:\/\//.test(g),I,"invalid-emulator-scheme");const R=!!(null==_?void 0:_.disableWarnings),L=cn(g),{host:te,port:Pe}=function si(v){const g=cn(v),_=/(\/\/)?([^?#/]+)/.exec(v.substr(g.length));if(!_)return{host:"",port:null};const I=_[2].split("@").pop()||"",R=/^(\[[^\]]+\])(:|$)/.exec(I);if(R){const L=R[1];return{host:L,port:Xi(I.substr(L.length+1))}}{const[L,te]=I.split(":");return{host:L,port:Xi(te)}}}(g);I.config.emulator={url:`${L}//${te}${null===Pe?"":`:${Pe}`}/`},I.settings.appVerificationDisabledForTesting=!0,I.emulatorConfig=Object.freeze({host:te,port:Pe,protocol:L.replace(":",""),options:Object.freeze({disableWarnings:R})}),R||function er(){function v(){const g=document.createElement("p"),_=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",_.position="fixed",_.width="100%",_.backgroundColor="#ffffff",_.border=".1em solid #000000",_.color="#b50000",_.bottom="0px",_.left="0px",_.margin="0px",_.zIndex="10000",_.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}function cn(v){const g=v.indexOf(":");return g<0?"":v.substr(0,g+1)}function Xi(v){if(!v)return null;const g=Number(v);return isNaN(g)?null:g}class Hr{constructor(g,_){this.providerId=g,this.signInMethod=_}toJSON(){return Qe("not implemented")}_getIdTokenResponse(g){return Qe("not implemented")}_linkToIdToken(g,_){return Qe("not implemented")}_getReauthenticationResolver(g){return Qe("not implemented")}}function gn(v,g){return js.apply(this,arguments)}function js(){return(js=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:resetPassword",$t(v,g))})).apply(this,arguments)}function jn(v,g){return xt.apply(this,arguments)}function xt(){return(xt=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ba(v,g){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:update",$t(v,g))})).apply(this,arguments)}function $s(){return($s=(0,p.Z)(function*(v,g){return Dr(v,"POST","/v1/accounts:signInWithPassword",$t(v,g))})).apply(this,arguments)}function Tn(v,g){return mo.apply(this,arguments)}function mo(){return(mo=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:sendOobCode",$t(v,g))})).apply(this,arguments)}function Ca(v,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,p.Z)(function*(v,g){return Tn(v,g)})).apply(this,arguments)}function mn(v,g){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,p.Z)(function*(v,g){return Tn(v,g)})).apply(this,arguments)}function Ta(v,g){return oi.apply(this,arguments)}function oi(){return(oi=(0,p.Z)(function*(v,g){return Tn(v,g)})).apply(this,arguments)}function es(v,g){return Du.apply(this,arguments)}function Du(){return(Du=(0,p.Z)(function*(v,g){return Tn(v,g)})).apply(this,arguments)}function ts(){return(ts=(0,p.Z)(function*(v,g){return Dr(v,"POST","/v1/accounts:signInWithEmailLink",$t(v,g))})).apply(this,arguments)}function Ll(){return(Ll=(0,p.Z)(function*(v,g){return Dr(v,"POST","/v1/accounts:signInWithEmailLink",$t(v,g))})).apply(this,arguments)}class Su extends Hr{constructor(g,_,I,R=null){super("password",I),this._email=g,this._password=_,this._tenantId=R}static _fromEmailAndPassword(g,_){return new Su(g,_,"password")}static _fromEmailAndCode(g,_,I=null){return new Su(g,_,"emailLink",I)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g;if((null==_?void 0:_.email)&&(null==_?void 0:_.password)){if("password"===_.signInMethod)return this._fromEmailAndPassword(_.email,_.password);if("emailLink"===_.signInMethod)return this._fromEmailAndCode(_.email,_.password,_.tenantId)}return null}_getIdTokenResponse(g){var _=this;return(0,p.Z)(function*(){switch(_.signInMethod){case"password":return function Cu(v,g){return $s.apply(this,arguments)}(g,{returnSecureToken:!0,email:_._email,password:_._password});case"emailLink":return function rd(v,g){return ts.apply(this,arguments)}(g,{email:_._email,oobCode:_._password});default:Ne(g,"internal-error")}})()}_linkToIdToken(g,_){var I=this;return(0,p.Z)(function*(){switch(I.signInMethod){case"password":return jn(g,{idToken:_,returnSecureToken:!0,email:I._email,password:I._password});case"emailLink":return function ns(v,g){return Ll.apply(this,arguments)}(g,{idToken:_,email:I._email,oobCode:I._password});default:Ne(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function Gs(v,g){return ai.apply(this,arguments)}function ai(){return(ai=(0,p.Z)(function*(v,g){return Dr(v,"POST","/v1/accounts:signInWithIdp",$t(v,g))})).apply(this,arguments)}class ys extends Hr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const _=new ys(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(_.idToken=g.idToken),g.accessToken&&(_.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(_.nonce=g.nonce),g.pendingToken&&(_.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(_.accessToken=g.oauthToken,_.secret=g.oauthTokenSecret):Ne("argument-error"),_}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:R}=_,L=(0,ae._T)(_,["providerId","signInMethod"]);if(!I||!R)return null;const te=new ys(I,R);return te.idToken=L.idToken||void 0,te.accessToken=L.accessToken||void 0,te.secret=L.secret,te.nonce=L.nonce,te.pendingToken=L.pendingToken||null,te}_getIdTokenResponse(g){return Gs(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Gs(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Gs(g,_)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const _={};this.idToken&&(_.id_token=this.idToken),this.accessToken&&(_.access_token=this.accessToken),this.secret&&(_.oauth_token_secret=this.secret),_.providerId=this.providerId,this.nonce&&!this.pendingToken&&(_.nonce=this.nonce),g.postBody=(0,B.xO)(_)}return g}}function Kp(v,g){return id.apply(this,arguments)}function id(){return(id=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:sendVerificationCode",$t(v,g))})).apply(this,arguments)}function sd(){return(sd=(0,p.Z)(function*(v,g){return Dr(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,g))})).apply(this,arguments)}function qs(){return(qs=(0,p.Z)(function*(v,g){const _=yield Dr(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,g));if(_.temporaryProof)throw Vn(v,"account-exists-with-different-credential",_);return _})).apply(this,arguments)}const Yp={USER_NOT_FOUND:"user-not-found"};function od(){return(od=(0,p.Z)(function*(v,g){return Dr(v,"POST","/v1/accounts:signInWithPhoneNumber",$t(v,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Yp)})).apply(this,arguments)}class Vo extends Hr{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,_){return new Vo({verificationId:g,verificationCode:_})}static _fromTokenResponse(g,_){return new Vo({phoneNumber:g,temporaryProof:_})}_getIdTokenResponse(g){return function Zp(v,g){return sd.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,_){return function Fl(v,g){return qs.apply(this,arguments)}(g,Object.assign({idToken:_},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function Qp(v,g){return od.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:_,verificationId:I,verificationCode:R}=this.params;return g&&_?{temporaryProof:g,phoneNumber:_}:{sessionInfo:I,code:R}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:_,verificationCode:I,phoneNumber:R,temporaryProof:L}=g;return I||_||R||L?new Vo({verificationId:_,verificationCode:I,phoneNumber:R,temporaryProof:L}):null}}class Da{constructor(g){var _,I,R,L,te,Pe;const rt=(0,B.zd)((0,B.pd)(g)),yt=null!==(_=rt.apiKey)&&void 0!==_?_:null,Tt=null!==(I=rt.oobCode)&&void 0!==I?I:null,On=function Jp(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(R=rt.mode)&&void 0!==R?R:null);re(yt&&Tt&&On,"argument-error"),this.apiKey=yt,this.operation=On,this.code=Tt,this.continueUrl=null!==(L=rt.continueUrl)&&void 0!==L?L:null,this.languageCode=null!==(te=rt.languageCode)&&void 0!==te?te:null,this.tenantId=null!==(Pe=rt.tenantId)&&void 0!==Pe?Pe:null}static parseLink(g){const _=function Xp(v){const g=(0,B.zd)((0,B.pd)(v)).link,_=g?(0,B.zd)((0,B.pd)(g)).deep_link_id:null,I=(0,B.zd)((0,B.pd)(v)).deep_link_id;return(I?(0,B.zd)((0,B.pd)(I)).link:null)||I||_||g||v}(g);try{return new Da(_)}catch(I){return null}}}let ad=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(_,I){return Su._fromEmailAndPassword(_,I)}static credentialWithLink(_,I){const R=Da.parseLink(I);return re(R,"argument-error"),Su._fromEmailAndCode(_,R.code,R.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class Vi{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class Sa extends Vi{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Bi extends Sa{static credentialFromJSON(g){const _="string"==typeof g?JSON.parse(g):g;return re("providerId"in _&&"signInMethod"in _,"argument-error"),ys._fromParams(_)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return re(g.idToken||g.accessToken,"argument-error"),ys._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Bi.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Bi.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:_,oauthAccessToken:I,oauthTokenSecret:R,pendingToken:L,nonce:te,providerId:Pe}=g;if(!I&&!R&&!_&&!L||!Pe)return null;try{return new Bi(Pe)._credential({idToken:_,accessToken:I,nonce:te,pendingToken:L})}catch(rt){return null}}}let ud=(()=>{class v extends Sa{constructor(){super("facebook.com")}static credential(_){return ys._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(I){return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),Aa=(()=>{class v extends Sa{constructor(){super("google.com"),this.addScope("profile")}static credential(_,I){return ys._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:_,accessToken:I})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthIdToken:I,oauthAccessToken:R}=_;if(!I&&!R)return null;try{return v.credential(I,R)}catch(L){return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),xa=(()=>{class v extends Sa{constructor(){super("github.com")}static credential(_){return ys._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:_})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_||!("oauthAccessToken"in _)||!_.oauthAccessToken)return null;try{return v.credential(_.oauthAccessToken)}catch(I){return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Ra extends Hr{constructor(g,_){super(g,g),this.pendingToken=_}_getIdTokenResponse(g){return Gs(g,this.buildRequest())}_linkToIdToken(g,_){const I=this.buildRequest();return I.idToken=_,Gs(g,I)}_getReauthenticationResolver(g){const _=this.buildRequest();return _.autoCreate=!1,Gs(g,_)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const _="string"==typeof g?JSON.parse(g):g,{providerId:I,signInMethod:R,pendingToken:L}=_;return I&&R&&L&&I===R?new Ra(I,L):null}static _create(g,_){return new Ra(g,_)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Na extends Vi{constructor(g){re(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Na.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Na.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const _=Ra.fromJSON(g);return re(_,"argument-error"),_}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:_,providerId:I}=g;if(!_||!I)return null;try{return Ra._create(I,_)}catch(R){return null}}}let Bo=(()=>{class v extends Sa{constructor(){super("twitter.com")}static credential(_,I){return ys._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:_,oauthTokenSecret:I})}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{oauthAccessToken:I,oauthTokenSecret:R}=_;if(!I||!R)return null;try{return v.credential(I,R)}catch(L){return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function vi(v,g){return Ul.apply(this,arguments)}function Ul(){return(Ul=(0,p.Z)(function*(v,g){return Dr(v,"POST","/v1/accounts:signUp",$t(v,g))})).apply(this,arguments)}class bn{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,_,I,R=!1){return(0,p.Z)(function*(){const L=yield on._fromIdTokenResponse(g,I,R),te=Pa(I);return new bn({user:L,providerId:te,_tokenResponse:I,operationType:_})})()}static _forOperation(g,_,I){return(0,p.Z)(function*(){yield g._updateTokensIfNecessary(I,!0);const R=Pa(I);return new bn({user:g,providerId:R,_tokenResponse:I,operationType:_})})()}}function Pa(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Hh(v){return xu.apply(this,arguments)}function xu(){return(xu=(0,p.Z)(function*(v){var g;const _=an(v);if(yield _._initializationPromise,null===(g=_.currentUser)||void 0===g?void 0:g.isAnonymous)return new bn({user:_.currentUser,providerId:null,operationType:"signIn"});const I=yield vi(_,{returnSecureToken:!0}),R=yield bn._fromIdTokenResponse(_,"signIn",I,!0);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class ka extends B.ZR{constructor(g,_,I,R){var L;super(_.code,_.message),this.operationType=I,this.user=R,Object.setPrototypeOf(this,ka.prototype),this.customData={appName:g.name,tenantId:null!==(L=g.tenantId)&&void 0!==L?L:void 0,_serverResponse:_.customData._serverResponse,operationType:I}}static _fromErrorAndOperation(g,_,I,R){return new ka(g,_,I,R)}}function cd(v,g,_,I){return("reauthenticate"===g?_._getReauthenticationResolver(v):_._getIdTokenResponse(v)).catch(L=>{throw"auth/multi-factor-auth-required"===L.code?ka._fromErrorAndOperation(v,L,g,I):L})}function Ru(v){return new Set(v.map(({providerId:g})=>g).filter(g=>!!g))}function dd(v,g){return ji.apply(this,arguments)}function ji(){return(ji=(0,p.Z)(function*(v,g){const _=(0,B.m9)(v);yield jo(!0,_,g);const{providerUserInfo:I}=yield Or(_.auth,{idToken:yield _.getIdToken(),deleteProvider:[g]}),R=Ru(I||[]);return _.providerData=_.providerData.filter(L=>R.has(L.providerId)),R.has("phone")||(_.phoneNumber=null),yield _.auth._persistUserIfCurrent(_),_})).apply(this,arguments)}function Vl(v,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,p.Z)(function*(v,g,_=!1){const I=yield Je(v,g._linkToIdToken(v.auth,yield v.getIdToken()),_);return bn._forOperation(v,"link",I)})).apply(this,arguments)}function jo(v,g,_){return _o.apply(this,arguments)}function _o(){return(_o=(0,p.Z)(function*(v,g,_){yield Qn(g);const R=!1===v?"provider-already-linked":"no-such-provider";re(Ru(g.providerData).has(_)===v,g.auth,R)})).apply(this,arguments)}function hn(v,g){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,p.Z)(function*(v,g,_=!1){const{auth:I}=v,R="reauthenticate";try{const L=yield Je(v,cd(I,R,g,v),_);re(L.idToken,I,"internal-error");const te=St(L.idToken);re(te,I,"internal-error");const{sub:Pe}=te;return re(v.uid===Pe,I,"user-mismatch"),bn._forOperation(v,R,L)}catch(L){throw"auth/user-not-found"===(null==L?void 0:L.code)&&Ne(I,"user-mismatch"),L}})).apply(this,arguments)}function Nu(v,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,p.Z)(function*(v,g,_=!1){const I="signIn",R=yield cd(v,I,g),L=yield bn._fromIdTokenResponse(v,I,R);return _||(yield v._updateCurrentUser(L.user)),L})).apply(this,arguments)}function hr(v,g){return Bl.apply(this,arguments)}function Bl(){return(Bl=(0,p.Z)(function*(v,g){return Nu(an(v),g)})).apply(this,arguments)}function Hn(v,g){return rs.apply(this,arguments)}function rs(){return(rs=(0,p.Z)(function*(v,g){const _=(0,B.m9)(v);return yield jo(!1,_,g.providerId),Vl(_,g)})).apply(this,arguments)}function Ar(v,g){return yo.apply(this,arguments)}function yo(){return(yo=(0,p.Z)(function*(v,g){return hn((0,B.m9)(v),g)})).apply(this,arguments)}function zs(v,g){return Oa.apply(this,arguments)}function Oa(){return(Oa=(0,p.Z)(function*(v,g){return Dr(v,"POST","/v1/accounts:signInWithCustomToken",$t(v,g))})).apply(this,arguments)}function Hi(v,g){return is.apply(this,arguments)}function is(){return(is=(0,p.Z)(function*(v,g){const _=an(v),I=yield zs(_,{token:g,returnSecureToken:!0}),R=yield bn._fromIdTokenResponse(_,"signIn",I);return yield _._updateCurrentUser(R.user),R})).apply(this,arguments)}class vs{constructor(g,_){this.factorId=g,this.uid=_.mfaEnrollmentId,this.enrollmentTime=new Date(_.enrolledAt).toUTCString(),this.displayName=_.displayName}static _fromServerResponse(g,_){return"phoneInfo"in _?_t._fromServerResponse(g,_):Ne(g,"internal-error")}}class _t extends vs{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,_){return new _t(_)}}function Ho(v,g,_){var I;re((null===(I=_.url)||void 0===I?void 0:I.length)>0,v,"invalid-continue-uri"),re(void 0===_.dynamicLinkDomain||_.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),g.continueUrl=_.url,g.dynamicLinkDomain=_.dynamicLinkDomain,g.canHandleCodeInApp=_.handleCodeInApp,_.iOS&&(re(_.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),g.iOSBundleId=_.iOS.bundleId),_.android&&(re(_.android.packageName.length>0,v,"missing-android-pkg-name"),g.androidInstallApp=_.android.installApp,g.androidMinimumVersionCode=_.android.minimumVersion,g.androidPackageName=_.android.packageName)}function hd(v,g,_){return Pu.apply(this,arguments)}function Pu(){return(Pu=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v),R={requestType:"PASSWORD_RESET",email:g};_&&Ho(I,R,_),yield mn(I,R)})).apply(this,arguments)}function jl(v,g,_){return La.apply(this,arguments)}function La(){return(La=(0,p.Z)(function*(v,g,_){yield gn((0,B.m9)(v),{oobCode:g,newPassword:_})})).apply(this,arguments)}function Hl(v,g){return $l.apply(this,arguments)}function $l(){return($l=(0,p.Z)(function*(v,g){yield ba((0,B.m9)(v),{oobCode:g})})).apply(this,arguments)}function Se(v,g){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,p.Z)(function*(v,g){const _=(0,B.m9)(v),I=yield gn(_,{oobCode:g}),R=I.requestType;switch(re(R,_,"internal-error"),R){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(I.newEmail,_,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(I.mfaInfo,_,"internal-error");default:re(I.email,_,"internal-error")}let L=null;return I.mfaInfo&&(L=vs._fromServerResponse(an(_),I.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.newEmail:I.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===I.requestType?I.email:I.newEmail)||null,multiFactorInfo:L},operation:R}})).apply(this,arguments)}function Gl(v,g){return Dn.apply(this,arguments)}function Dn(){return(Dn=(0,p.Z)(function*(v,g){const{data:_}=yield Se((0,B.m9)(v),g);return _.email})).apply(this,arguments)}function $o(v,g,_){return vo.apply(this,arguments)}function vo(){return(vo=(0,p.Z)(function*(v,g,_){const I=an(v),R=yield vi(I,{returnSecureToken:!0,email:g,password:_}),L=yield bn._fromIdTokenResponse(I,"signIn",R);return yield I._updateCurrentUser(L.user),L})).apply(this,arguments)}function wi(v,g,_){return hr((0,B.m9)(v),ad.credential(g,_))}function ql(v,g,_){return Fa.apply(this,arguments)}function Fa(){return(Fa=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v),R={requestType:"EMAIL_SIGNIN",email:g};re(_.handleCodeInApp,I,"argument-error"),_&&Ho(I,R,_),yield Ta(I,R)})).apply(this,arguments)}function eg(v,g){const _=Da.parseLink(g);return"EMAIL_SIGNIN"===(null==_?void 0:_.operation)}function fd(v,g,_){return wo.apply(this,arguments)}function wo(){return(wo=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v),R=ad.credentialWithLink(g,_||de());return re(R._tenantId===(I.tenantId||null),I,"tenant-id-mismatch"),hr(I,R)})).apply(this,arguments)}function ku(v,g){return $n.apply(this,arguments)}function $n(){return($n=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:createAuthUri",$t(v,g))})).apply(this,arguments)}function ws(v,g){return Ua.apply(this,arguments)}function Ua(){return(Ua=(0,p.Z)(function*(v,g){const I={identifier:g,continueUri:wt()?de():"http://localhost"},{signinMethods:R}=yield ku((0,B.m9)(v),I);return R||[]})).apply(this,arguments)}function Ks(v,g){return $i.apply(this,arguments)}function $i(){return($i=(0,p.Z)(function*(v,g){const _=(0,B.m9)(v),R={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};g&&Ho(_.auth,R,g);const{email:L}=yield Ca(_.auth,R);L!==v.email&&(yield v.reload())})).apply(this,arguments)}function Wl(v,g,_){return Mu.apply(this,arguments)}function Mu(){return(Mu=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v),L={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:g};_&&Ho(I.auth,L,_);const{email:te}=yield es(I.auth,L);te!==v.email&&(yield v.reload())})).apply(this,arguments)}function zl(v,g){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,p.Z)(function*(v,g){return en(v,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Va(v,g){return Ba.apply(this,arguments)}function Ba(){return(Ba=(0,p.Z)(function*(v,{displayName:g,photoURL:_}){if(void 0===g&&void 0===_)return;const I=(0,B.m9)(v),L={idToken:yield I.getIdToken(),displayName:g,photoUrl:_,returnSecureToken:!0},te=yield Je(I,zl(I.auth,L));I.displayName=te.displayName||null,I.photoURL=te.photoUrl||null;const Pe=I.providerData.find(({providerId:rt})=>"password"===rt);Pe&&(Pe.displayName=I.displayName,Pe.photoURL=I.photoURL),yield I._updateTokensIfNecessary(te)})).apply(this,arguments)}function Kl(v,g){return $h((0,B.m9)(v),g,null)}function Zl(v,g){return $h((0,B.m9)(v),null,g)}function $h(v,g,_){return ja.apply(this,arguments)}function ja(){return(ja=(0,p.Z)(function*(v,g,_){const{auth:I}=v,L={idToken:yield v.getIdToken(),returnSecureToken:!0};g&&(L.email=g),_&&(L.password=_);const te=yield Je(v,jn(I,L));yield v._updateTokensIfNecessary(te,!0)})).apply(this,arguments)}class Zs{constructor(g,_,I={}){this.isNewUser=g,this.providerId=_,this.profile=I}}class Yl extends Zs{constructor(g,_,I,R){super(g,_,I),this.username=R}}class Gh extends Zs{constructor(g,_){super(g,"facebook.com",_)}}class qh extends Yl{constructor(g,_){super(g,"github.com",_,"string"==typeof(null==_?void 0:_.login)?null==_?void 0:_.login:null)}}class Go extends Zs{constructor(g,_){super(g,"google.com",_)}}class ss extends Yl{constructor(g,_,I){super(g,"twitter.com",_,I)}}function Wh(v){const{user:g,_tokenResponse:_}=v;return g.isAnonymous&&!_?{providerId:null,isNewUser:!1,profile:null}:function Ha(v){var g,_;if(!v)return null;const{providerId:I}=v,R=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},L=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!I&&(null==v?void 0:v.idToken)){const te=null===(_=null===(g=St(v.idToken))||void 0===g?void 0:g.firebase)||void 0===_?void 0:_.sign_in_provider;if(te)return new Zs(L,"anonymous"!==te&&"custom"!==te?te:null)}if(!I)return null;switch(I){case"facebook.com":return new Gh(L,R);case"github.com":return new qh(L,R);case"google.com":return new Go(L,R);case"twitter.com":return new ss(L,R,v.screenName||null);case"custom":case"anonymous":return new Zs(L,null);default:return new Zs(L,I,R)}}(_)}class Eo{constructor(g,_){this.type=g,this.credential=_}static _fromIdtoken(g){return new Eo("enroll",g)}static _fromMfaPendingCredential(g){return new Eo("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var _,I;if(null==g?void 0:g.multiFactorSession){if(null===(_=g.multiFactorSession)||void 0===_?void 0:_.pendingCredential)return Eo._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(I=g.multiFactorSession)||void 0===I?void 0:I.idToken)return Eo._fromIdtoken(g.multiFactorSession.idToken)}return null}}class Ga{constructor(g,_,I){this.session=g,this.hints=_,this.signInResolver=I}static _fromError(g,_){const I=an(g),R=_.customData._serverResponse,L=(R.mfaInfo||[]).map(Pe=>vs._fromServerResponse(I,Pe));re(R.mfaPendingCredential,I,"internal-error");const te=Eo._fromMfaPendingCredential(R.mfaPendingCredential);return new Ga(te,L,function(){var Pe=(0,p.Z)(function*(rt){const yt=yield rt._process(I,te);delete R.mfaInfo,delete R.mfaPendingCredential;const Tt=Object.assign(Object.assign({},R),{idToken:yt.idToken,refreshToken:yt.refreshToken});switch(_.operationType){case"signIn":const On=yield bn._fromIdTokenResponse(I,_.operationType,Tt);return yield I._updateCurrentUser(On.user),On;case"reauthenticate":return re(_.user,I,"internal-error"),bn._forOperation(_.user,_.operationType,Tt);default:Ne(I,"internal-error")}});return function(rt){return Pe.apply(this,arguments)}}())}resolveSignIn(g){var _=this;return(0,p.Z)(function*(){return _.signInResolver(g)})()}}function Ql(v,g){var _;const I=(0,B.m9)(v),R=g;return re(g.customData.operationType,I,"argument-error"),re(null===(_=R.customData._serverResponse)||void 0===_?void 0:_.mfaPendingCredential,I,"argument-error"),Ga._fromError(I,R)}function Jl(v,g){return en(v,"POST","/v2/accounts/mfaEnrollment:start",$t(v,g))}class Xl{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(_=>{_.mfaInfo&&(this.enrolledFactors=_.mfaInfo.map(I=>vs._fromServerResponse(g.auth,I)))})}static _fromUser(g){return new Xl(g)}getSession(){var g=this;return(0,p.Z)(function*(){return Eo._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,_){var I=this;return(0,p.Z)(function*(){const R=g,L=yield I.getSession(),te=yield Je(I.user,R._process(I.user.auth,L,_));return yield I.user._updateTokensIfNecessary(te),I.user.reload()})()}unenroll(g){var _=this;return(0,p.Z)(function*(){const I="string"==typeof g?g:g.uid,R=yield _.user.getIdToken(),L=yield Je(_.user,function Er(v,g){return en(v,"POST","/v2/accounts/mfaEnrollment:withdraw",$t(v,g))}(_.user.auth,{idToken:R,mfaEnrollmentId:I}));_.enrolledFactors=_.enrolledFactors.filter(({uid:te})=>te!==I),yield _.user._updateTokensIfNecessary(L);try{yield _.user.reload()}catch(te){if("auth/user-token-expired"!==te.code)throw te}})()}}const Is=new WeakMap;function Fu(v){const g=(0,B.m9)(v);return Is.has(g)||Is.set(g,Xl._fromUser(g)),Is.get(g)}const ec="__sak";class tc{constructor(g,_){this.storageRetriever=g,this.type=_}_isAvailable(){try{return this.storage?(this.storage.setItem(ec,"1"),this.storage.removeItem(ec),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,_){return this.storage.setItem(g,JSON.stringify(_)),Promise.resolve()}_get(g){const _=this.storage.getItem(g);return Promise.resolve(_?JSON.parse(_):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const En=(()=>{class v extends tc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(_,I)=>this.onStorageEvent(_,I),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Uu(){const v=(0,B.z$)();return z(v)||Ot(v)}()&&function Ji(){try{return!(!window||window===window.top)}catch(v){return!1}}(),this.fallbackToPolling=Lr(),this._shouldAllowMigration=!0}forAllChangedKeys(_){for(const I of Object.keys(this.listeners)){const R=this.storage.getItem(I),L=this.localCache[I];R!==L&&_(I,L,R)}}onStorageEvent(_,I=!1){if(!_.key)return void this.forAllChangedKeys((Pe,rt,yt)=>{this.notifyListeners(Pe,yt)});const R=_.key;if(I?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Pe=this.storage.getItem(R);if(_.newValue!==Pe)null!==_.newValue?this.storage.setItem(R,_.newValue):this.storage.removeItem(R);else if(this.localCache[R]===_.newValue&&!I)return}const L=()=>{const Pe=this.storage.getItem(R);!I&&this.localCache[R]===Pe||this.notifyListeners(R,Pe)},te=this.storage.getItem(R);!function Lt(){return(0,B.w1)()&&10===document.documentMode}()||te===_.newValue||_.newValue===_.oldValue?L():setTimeout(L,10)}notifyListeners(_,I){this.localCache[_]=I;const R=this.listeners[_];if(R)for(const L of Array.from(R))L(I&&JSON.parse(I))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((_,I,R)=>{this.onStorageEvent(new StorageEvent("storage",{key:_,oldValue:I,newValue:R}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(_,I){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[_]||(this.listeners[_]=new Set,this.localCache[_]=this.storage.getItem(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(_,I){var R=()=>super._set,L=this;return(0,p.Z)(function*(){yield R().call(L,_,I),L.localCache[_]=JSON.stringify(I)})()}_get(_){var I=()=>super._get,R=this;return(0,p.Z)(function*(){const L=yield I().call(R,_);return R.localCache[_]=JSON.stringify(L),L})()}_remove(_){var I=()=>super._remove,R=this;return(0,p.Z)(function*(){yield I().call(R,_),delete R.localCache[_]})()}}return v.type="LOCAL",v})(),et=(()=>{class v extends tc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(_,I){}_removeListener(_,I){}}return v.type="SESSION",v})();let ui=(()=>{class v{constructor(_){this.eventTarget=_,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(_){const I=this.receivers.find(L=>L.isListeningto(_));if(I)return I;const R=new v(_);return this.receivers.push(R),R}isListeningto(_){return this.eventTarget===_}handleEvent(_){var I=this;return(0,p.Z)(function*(){const R=_,{eventId:L,eventType:te,data:Pe}=R.data,rt=I.handlersMap[te];if(!(null==rt?void 0:rt.size))return;R.ports[0].postMessage({status:"ack",eventId:L,eventType:te});const yt=Array.from(rt).map(function(){var On=(0,p.Z)(function*(fi){return fi(R.origin,Pe)});return function(fi){return On.apply(this,arguments)}}()),Tt=yield function bs(v){return Promise.all(v.map(function(){var g=(0,p.Z)(function*(_){try{return{fulfilled:!0,value:yield _}}catch(I){return{fulfilled:!1,reason:I}}});return function(_){return g.apply(this,arguments)}}()))}(yt);R.ports[0].postMessage({status:"done",eventId:L,eventType:te,response:Tt})})()}_subscribe(_,I){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[_]||(this.handlersMap[_]=new Set),this.handlersMap[_].add(I)}_unsubscribe(_,I){this.handlersMap[_]&&I&&this.handlersMap[_].delete(I),(!I||0===this.handlersMap[_].size)&&delete this.handlersMap[_],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function Pn(v="",g=10){let _="";for(let I=0;I<g;I++)_+=Math.floor(10*Math.random());return v+_}class nc{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,_,I=50){var R=this;return(0,p.Z)(function*(){const L="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!L)throw new Error("connection_unavailable");let te,Pe;return new Promise((rt,yt)=>{const Tt=Pn("",20);L.port1.start();const On=setTimeout(()=>{yt(new Error("unsupported_event"))},I);Pe={messageChannel:L,onMessage(fi){const nu=fi;if(nu.data.eventId===Tt)switch(nu.data.status){case"ack":clearTimeout(On),te=setTimeout(()=>{yt(new Error("timeout"))},3e3);break;case"done":clearTimeout(te),rt(nu.data.response);break;default:clearTimeout(On),clearTimeout(te),yt(new Error("invalid_response"))}}},R.handlers.add(Pe),L.port1.addEventListener("message",Pe.onMessage),R.target.postMessage({eventType:g,eventId:Tt,data:_},[L.port2])}).finally(()=>{Pe&&R.removeMessageHandler(Pe)})})()}}function Gn(){return window}function qa(){return void 0!==Gn().WorkerGlobalScope&&"function"==typeof Gn().importScripts}function Io(){return(Io=(0,p.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(v){return null}})).apply(this,arguments)}const rc="firebaseLocalStorageDb",ju="firebaseLocalStorage",gd="fbase_key";class fn{constructor(g){this.request=g}toPromise(){return new Promise((g,_)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{_(this.request.error)})})}}function zo(v,g){return v.transaction([ju],g?"readwrite":"readonly").objectStore(ju)}function Ko(){const v=indexedDB.open(rc,1);return new Promise((g,_)=>{v.addEventListener("error",()=>{_(v.error)}),v.addEventListener("upgradeneeded",()=>{const I=v.result;try{I.createObjectStore(ju,{keyPath:gd})}catch(R){_(R)}}),v.addEventListener("success",(0,p.Z)(function*(){const I=v.result;I.objectStoreNames.contains(ju)?g(I):(I.close(),yield function Wa(){const v=indexedDB.deleteDatabase(rc);return new fn(v).toPromise()}(),g(yield Ko()))}))})}function $r(v,g,_){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,p.Z)(function*(v,g,_){const I=zo(v,!0).put({[gd]:g,value:_});return new fn(I).toPromise()})).apply(this,arguments)}function as(){return(as=(0,p.Z)(function*(v,g){const _=zo(v,!1).get(g),I=yield new fn(_).toPromise();return void 0===I?null:I.value})).apply(this,arguments)}function $u(v,g){const _=zo(v,!0).delete(g);return new fn(_).toPromise()}const Cs=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var _=this;return(0,p.Z)(function*(){return _.db||(_.db=yield Ko()),_.db})()}_withRetries(_){var I=this;return(0,p.Z)(function*(){let R=0;for(;;)try{const L=yield I._openDb();return yield _(L)}catch(L){if(R++>3)throw L;I.db&&(I.db.close(),I.db=void 0)}})()}initializeServiceWorkerMessaging(){var _=this;return(0,p.Z)(function*(){return qa()?_.initializeReceiver():_.initializeSender()})()}initializeReceiver(){var _=this;return(0,p.Z)(function*(){_.receiver=ui._getInstance(function gt(){return qa()?self:null}()),_.receiver._subscribe("keyChanged",function(){var I=(0,p.Z)(function*(R,L){return{keyProcessed:(yield _._poll()).includes(L.key)}});return function(R,L){return I.apply(this,arguments)}}()),_.receiver._subscribe("ping",function(){var I=(0,p.Z)(function*(R,L){return["keyChanged"]});return function(R,L){return I.apply(this,arguments)}}())})()}initializeSender(){var _=this;return(0,p.Z)(function*(){var I,R;if(_.activeServiceWorker=yield function Wo(){return Io.apply(this,arguments)}(),!_.activeServiceWorker)return;_.sender=new nc(_.activeServiceWorker);const L=yield _.sender._send("ping",{},800);!L||(null===(I=L[0])||void 0===I?void 0:I.fulfilled)&&(null===(R=L[0])||void 0===R?void 0:R.value.includes("keyChanged"))&&(_.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(_){var I=this;return(0,p.Z)(function*(){if(I.sender&&I.activeServiceWorker&&function os(){var v;return(null===(v=null==navigator?void 0:navigator.serviceWorker)||void 0===v?void 0:v.controller)||null}()===I.activeServiceWorker)try{yield I.sender._send("keyChanged",{key:_},I.serviceWorkerReceiverAvailable?800:50)}catch(R){}})()}_isAvailable(){return(0,p.Z)(function*(){try{if(!indexedDB)return!1;const _=yield Ko();return yield $r(_,ec,"1"),yield $u(_,ec),!0}catch(_){}return!1})()}_withPendingWrite(_){var I=this;return(0,p.Z)(function*(){I.pendingWrites++;try{yield _()}finally{I.pendingWrites--}})()}_set(_,I){var R=this;return(0,p.Z)(function*(){return R._withPendingWrite((0,p.Z)(function*(){return yield R._withRetries(L=>$r(L,_,I)),R.localCache[_]=I,R.notifyServiceWorker(_)}))})()}_get(_){var I=this;return(0,p.Z)(function*(){const R=yield I._withRetries(L=>function Zo(v,g){return as.apply(this,arguments)}(L,_));return I.localCache[_]=R,R})()}_remove(_){var I=this;return(0,p.Z)(function*(){return I._withPendingWrite((0,p.Z)(function*(){return yield I._withRetries(R=>$u(R,_)),delete I.localCache[_],I.notifyServiceWorker(_)}))})()}_poll(){var _=this;return(0,p.Z)(function*(){const I=yield _._withRetries(te=>{const Pe=zo(te,!1).getAll();return new fn(Pe).toPromise()});if(!I)return[];if(0!==_.pendingWrites)return[];const R=[],L=new Set;for(const{fbase_key:te,value:Pe}of I)L.add(te),JSON.stringify(_.localCache[te])!==JSON.stringify(Pe)&&(_.notifyListeners(te,Pe),R.push(te));for(const te of Object.keys(_.localCache))_.localCache[te]&&!L.has(te)&&(_.notifyListeners(te,null),R.push(te));return R})()}notifyListeners(_,I){this.localCache[_]=I;const R=this.listeners[_];if(R)for(const L of Array.from(R))L(I)}startPolling(){var _=this;this.stopPolling(),this.pollTimer=setInterval((0,p.Z)(function*(){return _._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(_,I){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[_]||(this.listeners[_]=new Set,this._get(_)),this.listeners[_].add(I)}_removeListener(_,I){this.listeners[_]&&(this.listeners[_].delete(I),0===this.listeners[_].size&&delete this.listeners[_]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})();function Yo(v,g){return en(v,"POST","/v2/accounts/mfaSignIn:start",$t(v,g))}function Qo(){return(Qo=(0,p.Z)(function*(v){return(yield en(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Jo(v){return new Promise((g,_)=>{const I=document.createElement("script");I.setAttribute("src",v),I.onload=g,I.onerror=R=>{const L=he("internal-error");L.customData=R,_(L)},I.type="text/javascript",I.charset="UTF-8",function Sn(){var v,g;return null!==(g=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==g?g:document}().appendChild(I)})}function bo(v){return`__${v}${Math.floor(1e6*Math.random())}`}const qn=1e12;class li{constructor(g){this.auth=g,this.counter=qn,this._widgets=new Map}render(g,_){const I=this.counter;return this._widgets.set(I,new nr(g,this.auth.name,_||{})),this.counter++,I}reset(g){var _;const I=g||qn;null===(_=this._widgets.get(I))||void 0===_||_.delete(),this._widgets.delete(I)}getResponse(g){var _;return(null===(_=this._widgets.get(g||qn))||void 0===_?void 0:_.getResponse())||""}execute(g){var _=this;return(0,p.Z)(function*(){var I;return null===(I=_._widgets.get(g||qn))||void 0===I||I.execute(),""})()}}class nr{constructor(g,_,I){this.params=I,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const R="string"==typeof g?document.getElementById(g):g;re(R,"argument-error",{appName:_}),this.container=R,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function oc(v){const g=[],_="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let I=0;I<v;I++)g.push(_.charAt(Math.floor(Math.random()*_.length)));return g.join("")}(50);const{callback:g,"expired-callback":_}=this.params;if(g)try{g(this.responseToken)}catch(I){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,_)try{_()}catch(I){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const ci=bo("rcb"),md=new it(3e4,6e4);class kn{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!Gn().grecaptcha}load(g,_=""){return re(function Zh(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(_),g,"argument-error"),this.shouldResolveImmediately(_)?Promise.resolve(Gn().grecaptcha):new Promise((I,R)=>{const L=Gn().setTimeout(()=>{R(he(g,"network-request-failed"))},md.get());Gn()[ci]=()=>{Gn().clearTimeout(L),delete Gn()[ci];const Pe=Gn().grecaptcha;if(!Pe)return void R(he(g,"internal-error"));const rt=Pe.render;Pe.render=(yt,Tt)=>{const On=rt(yt,Tt);return this.counter++,On},this.hostLanguage=_,I(Pe)},Jo(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:ci,render:"explicit",hl:_})}`).catch(()=>{clearTimeout(L),R(he(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!Gn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class V_{load(g){return(0,p.Z)(function*(){return new li(g)})()}clearedOneInstance(){}}const Xo="recaptcha",Ii={theme:"light",type:"image"};class Yh{constructor(g,_=Object.assign({},Ii),I){this.parameters=_,this.type=Xo,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=an(I),this.isInvisible="invisible"===this.parameters.size,re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const R="string"==typeof g?document.getElementById(g):g;re(R,this.auth,"argument-error"),this.container=R,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new V_:new kn,this.validateStartingState()}verify(){var g=this;return(0,p.Z)(function*(){g.assertNotDestroyed();const _=yield g.render(),I=g.getAssertedRecaptcha();return I.getResponse(_)||new Promise(L=>{const te=Pe=>{!Pe||(g.tokenChangeListeners.delete(te),L(Pe))};g.tokenChangeListeners.add(te),g.isInvisible&&I.execute(_)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return _=>{if(this.tokenChangeListeners.forEach(I=>I(_)),"function"==typeof g)g(_);else if("string"==typeof g){const I=Gn()[g];"function"==typeof I&&I(_)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,p.Z)(function*(){if(yield g.init(),!g.widgetId){let _=g.container;if(!g.isInvisible){const I=document.createElement("div");_.appendChild(I),_=I}g.widgetId=g.getAssertedRecaptcha().render(_,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,p.Z)(function*(){re(wt()&&!qa(),g.auth,"internal-error"),yield function Ts(){let v=null;return new Promise(g=>{"complete"!==document.readyState?(v=()=>g(),window.addEventListener("load",v)):g()}).catch(g=>{throw v&&window.removeEventListener("load",v),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const _=yield function sc(v){return Qo.apply(this,arguments)}(g.auth);re(_,g.auth,"internal-error"),g.parameters.sitekey=_})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class qu{constructor(g,_){this.verificationId=g,this.onConfirmation=_}confirm(g){const _=Vo._fromVerification(this.verificationId,g);return this.onConfirmation(_)}}function Ds(v,g,_){return ac.apply(this,arguments)}function ac(){return(ac=(0,p.Z)(function*(v,g,_){const I=an(v),R=yield Wu(I,g,(0,B.m9)(_));return new qu(R,L=>hr(I,L))})).apply(this,arguments)}function rr(v,g,_){return Za.apply(this,arguments)}function Za(){return(Za=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v);yield jo(!1,I,"phone");const R=yield Wu(I.auth,g,(0,B.m9)(_));return new qu(R,L=>Hn(I,L))})).apply(this,arguments)}function Ya(v,g,_){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v),R=yield Wu(I.auth,g,(0,B.m9)(_));return new qu(R,L=>Ar(I,L))})).apply(this,arguments)}function Wu(v,g,_){return Gr.apply(this,arguments)}function Gr(){return(Gr=(0,p.Z)(function*(v,g,_){var I;const R=yield _.verify();try{let L;if(re("string"==typeof R,v,"argument-error"),re(_.type===Xo,v,"argument-error"),L="string"==typeof g?{phoneNumber:g}:g,"session"in L){const te=L.session;if("phoneNumber"in L)return re("enroll"===te.type,v,"internal-error"),(yield Jl(v,{idToken:te.credential,phoneEnrollmentInfo:{phoneNumber:L.phoneNumber,recaptchaToken:R}})).phoneSessionInfo.sessionInfo;{re("signin"===te.type,v,"internal-error");const Pe=(null===(I=L.multiFactorHint)||void 0===I?void 0:I.uid)||L.multiFactorUid;return re(Pe,v,"missing-multi-factor-info"),(yield Yo(v,{mfaPendingCredential:te.credential,mfaEnrollmentId:Pe,phoneSignInInfo:{recaptchaToken:R}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:te}=yield Kp(v,{phoneNumber:L.phoneNumber,recaptchaToken:R});return te}}finally{_._reset()}})).apply(this,arguments)}function bi(v,g){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,p.Z)(function*(v,g){yield Vl((0,B.m9)(v),g)})).apply(this,arguments)}let zu=(()=>{class v{constructor(_){this.providerId=v.PROVIDER_ID,this.auth=an(_)}verifyPhoneNumber(_,I){return Wu(this.auth,_,(0,B.m9)(I))}static credential(_,I){return Vo._fromVerification(_,I)}static credentialFromResult(_){return v.credentialFromTaggedObject(_)}static credentialFromError(_){return v.credentialFromTaggedObject(_.customData||{})}static credentialFromTaggedObject({_tokenResponse:_}){if(!_)return null;const{phoneNumber:I,temporaryProof:R}=_;return I&&R?Vo._fromTokenResponse(I,R):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function di(v,g){return g?fe(g):(re(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ea extends Hr{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return Gs(g,this._buildIdpRequest())}_linkToIdToken(g,_){return Gs(g,this._buildIdpRequest(_))}_getReauthenticationResolver(g){return Gs(g,this._buildIdpRequest())}_buildIdpRequest(g){const _={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(_.idToken=g),_}}function uc(v){return Nu(v.auth,new ea(v),v.bypassAuthState)}function Ku(v){const{auth:g,user:_}=v;return re(_,g,"internal-error"),hn(_,new ea(v),v.bypassAuthState)}function kt(v){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,p.Z)(function*(v){const{auth:g,user:_}=v;return re(_,g,"internal-error"),Vl(_,new ea(v),v.bypassAuthState)})).apply(this,arguments)}class us{constructor(g,_,I,R,L=!1){this.auth=g,this.resolver=I,this.user=R,this.bypassAuthState=L,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(_)?_:[_]}execute(){var g=this;return new Promise(function(){var _=(0,p.Z)(function*(I,R){g.pendingPromise={resolve:I,reject:R};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(L){g.reject(L)}});return function(I,R){return _.apply(this,arguments)}}())}onAuthEvent(g){var _=this;return(0,p.Z)(function*(){const{urlResponse:I,sessionId:R,postBody:L,tenantId:te,error:Pe,type:rt}=g;if(Pe)return void _.reject(Pe);const yt={auth:_.auth,requestUri:I,sessionId:R,tenantId:te||void 0,postBody:L||void 0,user:_.user,bypassAuthState:_.bypassAuthState};try{_.resolve(yield _.getIdpTask(rt)(yt))}catch(Tt){_.reject(Tt)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return uc;case"linkViaPopup":case"linkViaRedirect":return kt;case"reauthViaPopup":case"reauthViaRedirect":return Ku;default:Ne(this.auth,"internal-error")}}resolve(g){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){X(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hi=new it(2e3,1e4);function Yu(v,g,_){return Co.apply(this,arguments)}function Co(){return(Co=(0,p.Z)(function*(v,g,_){const I=an(v);we(v,g,Vi);const R=di(I,_);return new Ju(I,"signInViaPopup",g,R).executeNotNull()})).apply(this,arguments)}function tg(v,g,_){return Qu.apply(this,arguments)}function Qu(){return(Qu=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v);we(I.auth,g,Vi);const R=di(I.auth,_);return new Ju(I.auth,"reauthViaPopup",g,R,I).executeNotNull()})).apply(this,arguments)}function Fr(v,g,_){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v);we(I.auth,g,Vi);const R=di(I.auth,_);return new Ju(I.auth,"linkViaPopup",g,R,I).executeNotNull()})).apply(this,arguments)}let Ju=(()=>{class v extends us{constructor(_,I,R,L,te){super(_,I,L,te),this.provider=R,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var _=this;return(0,p.Z)(function*(){const I=yield _.execute();return re(I,_.auth,"internal-error"),I})()}onExecution(){var _=this;return(0,p.Z)(function*(){X(1===_.filter.length,"Popup operations only handle one event");const I=Pn();_.authWindow=yield _.resolver._openPopup(_.auth,_.provider,_.filter[0],I),_.authWindow.associatedEvent=I,_.resolver._originValidation(_.auth).catch(R=>{_.reject(R)}),_.resolver._isIframeWebStorageSupported(_.auth,R=>{R||_.reject(he(_.auth,"web-storage-unsupported"))}),_.pollUserCancellation()})()}get eventId(){var _;return(null===(_=this.authWindow)||void 0===_?void 0:_.associatedEvent)||null}cancel(){this.reject(he(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const _=()=>{var I,R;this.pollId=(null===(R=null===(I=this.authWindow)||void 0===I?void 0:I.window)||void 0===R?void 0:R.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(he(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(_,hi.get())};_()}}return v.currentPopupAction=null,v})();const Ss=new Map;class fr extends us{constructor(g,_,I=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],_,void 0,I),this.eventId=null}execute(){var g=()=>super.execute,_=this;return(0,p.Z)(function*(){let I=Ss.get(_.auth._key());if(!I){try{const L=(yield function pr(v,g){return ta.apply(this,arguments)}(_.resolver,_.auth))?yield g().call(_):null;I=()=>Promise.resolve(L)}catch(R){I=()=>Promise.reject(R)}Ss.set(_.auth._key(),I)}return _.bypassAuthState||Ss.set(_.auth._key(),()=>Promise.resolve(null)),I()})()}onAuthEvent(g){var _=()=>super.onAuthEvent,I=this;return(0,p.Z)(function*(){if("signInViaRedirect"===g.type)return _().call(I,g);if("unknown"!==g.type){if(g.eventId){const R=yield I.auth._redirectUserForId(g.eventId);if(R)return I.user=R,_().call(I,g);I.resolve(null)}}else I.resolve(null)})()}onExecution(){return(0,p.Z)(function*(){})()}cleanUp(){}}function ta(){return(ta=(0,p.Z)(function*(v,g){const _=yd(g),I=Xa(v);if(!(yield I._isAvailable()))return!1;const R="true"===(yield I._get(_));return yield I._remove(_),R})).apply(this,arguments)}function Jh(v,g){return As.apply(this,arguments)}function As(){return(As=(0,p.Z)(function*(v,g){return Xa(v)._set(yd(g),"true")})).apply(this,arguments)}function Xu(){Ss.clear()}function Xa(v){return fe(v._redirectPersistence)}function yd(v){return Pt("pendingRedirect",v.config.apiKey,v.name)}function C(v,g,_){return function T(v,g,_){return N.apply(this,arguments)}(v,g,_)}function N(){return(N=(0,p.Z)(function*(v,g,_){const I=an(v);we(v,g,Vi);const R=di(I,_);return yield Jh(R,I),R._openRedirect(I,g,"signInViaRedirect")})).apply(this,arguments)}function V(v,g,_){return function Y(v,g,_){return J.apply(this,arguments)}(v,g,_)}function J(){return(J=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v);we(I.auth,g,Vi);const R=di(I.auth,_);yield Jh(R,I.auth);const L=yield Mn(I);return R._openRedirect(I.auth,g,"reauthViaRedirect",L)})).apply(this,arguments)}function Oe(v,g,_){return function $e(v,g,_){return Ze.apply(this,arguments)}(v,g,_)}function Ze(){return(Ze=(0,p.Z)(function*(v,g,_){const I=(0,B.m9)(v);we(I.auth,g,Vi);const R=di(I.auth,_);yield jo(!1,I,g.providerId),yield Jh(R,I.auth);const L=yield Mn(I);return R._openRedirect(I.auth,g,"linkViaRedirect",L)})).apply(this,arguments)}function Jt(v,g){return Xt.apply(this,arguments)}function Xt(){return(Xt=(0,p.Z)(function*(v,g){return yield an(v)._initializationPromise,Wn(v,g,!1)})).apply(this,arguments)}function Wn(v,g){return qr.apply(this,arguments)}function qr(){return(qr=(0,p.Z)(function*(v,g,_=!1){const I=an(v),R=di(I,g),te=yield new fr(I,R,_).execute();return te&&!_&&(delete te.user._redirectEventId,yield I._persistUserIfCurrent(te.user),yield I._setRedirectUser(null,g)),te})).apply(this,arguments)}function Mn(v){return ls.apply(this,arguments)}function ls(){return(ls=(0,p.Z)(function*(v){const g=Pn(`${v.uid}:::`);return v._redirectEventId=g,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),g})).apply(this,arguments)}class Ur{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let _=!1;return this.consumers.forEach(I=>{this.isEventForConsumer(g,I)&&(_=!0,this.sendToConsumer(g,I),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function eu(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wr(v);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,_||(this.queuedRedirectEvent=g,_=!0)),_}sendToConsumer(g,_){var I;if(g.error&&!Wr(g)){const R=(null===(I=g.error.code)||void 0===I?void 0:I.split("auth/")[1])||"internal-error";_.onError(he(this.auth,R))}else _.onAuthEvent(g)}isEventForConsumer(g,_){const I=null===_.eventId||!!g.eventId&&g.eventId===_.eventId;return _.filter.includes(g.type)&&I}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(xs(g))}saveEventToCache(g){this.cachedEventUids.add(xs(g)),this.lastProcessedEventTime=Date.now()}}function xs(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(g=>g).join("-")}function Wr({type:v,error:g}){return"unknown"===v&&"auth/no-auth-event"===(null==g?void 0:g.code)}function vd(v){return el.apply(this,arguments)}function el(){return(el=(0,p.Z)(function*(v,g={}){return en(v,"GET","/v1/projects",g)})).apply(this,arguments)}const wd=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ng=/^https?/;function tl(){return(tl=(0,p.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:g}=yield vd(v);for(const _ of g)try{if(nl(_))return}catch(I){}Ne(v,"unauthorized-domain")})).apply(this,arguments)}function nl(v){const g=de(),{protocol:_,hostname:I}=new URL(g);if(v.startsWith("chrome-extension://")){const te=new URL(v);return""===te.hostname&&""===I?"chrome-extension:"===_&&v.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===_&&te.hostname===I}if(!ng.test(_))return!1;if(wd.test(v))return I===v;const R=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+R+"|"+R+")$","i").test(I)}const lc=new it(3e4,6e4);function rg(){const v=Gn().___jsl;if(null==v?void 0:v.H)for(const g of Object.keys(v.H))if(v.H[g].r=v.H[g].r||[],v.H[g].L=v.H[g].L||[],v.H[g].r=[...v.H[g].L],v.CP)for(let _=0;_<v.CP.length;_++)v.CP[_]=null}let cc=null;function ig(v){return cc=cc||function bw(v){return new Promise((g,_)=>{var I,R,L;function te(){rg(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{rg(),_(he(v,"network-request-failed"))},timeout:lc.get()})}if(null===(R=null===(I=Gn().gapi)||void 0===I?void 0:I.iframes)||void 0===R?void 0:R.Iframe)g(gapi.iframes.getContext());else{if(!(null===(L=Gn().gapi)||void 0===L?void 0:L.load)){const Pe=bo("iframefcb");return Gn()[Pe]=()=>{gapi.load?te():_(he(v,"network-request-failed"))},Jo(`https://apis.google.com/js/api.js?onload=${Pe}`).catch(rt=>_(rt))}te()}}).catch(g=>{throw cc=null,g})}(v),cc}const sg=new it(5e3,15e3),rl={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},dc=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ed(v){const g=v.config;re(g.authDomain,v,"auth-domain-config-required");const _=g.emulator?lr(g,"emulator/auth/iframe"):`https://${v.config.authDomain}/__/auth/iframe`,I={apiKey:g.apiKey,appName:v.name,v:k.SDK_VERSION},R=dc.get(v.config.apiHost);R&&(I.eid=R);const L=v._getFrameworks();return L.length&&(I.fw=L.join(",")),`${_}?${(0,B.xO)(I).slice(1)}`}function na(){return na=(0,p.Z)(function*(v){const g=yield ig(v),_=Gn().gapi;return re(_,v,"internal-error"),g.open({where:document.body,url:Ed(v),messageHandlersFilter:_.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:rl,dontclear:!0},I=>new Promise(function(){var R=(0,p.Z)(function*(L,te){yield I.restyle({setHideOnLeave:!1});const Pe=he(v,"network-request-failed"),rt=Gn().setTimeout(()=>{te(Pe)},sg.get());function yt(){Gn().clearTimeout(rt),L(I)}I.ping(yt).then(yt,()=>{te(Pe)})});return function(L,te){return R.apply(this,arguments)}}()))}),na.apply(this,arguments)}const og={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Cd{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function ef(v,g,_,I,R,L){re(v.config.authDomain,v,"auth-domain-config-required"),re(v.config.apiKey,v,"invalid-api-key");const te={apiKey:v.config.apiKey,appName:v.name,authType:_,redirectUrl:I,v:k.SDK_VERSION,eventId:R};if(g instanceof Vi){g.setDefaultLanguage(v.languageCode),te.providerId=g.providerId||"",(0,B.xb)(g.getCustomParameters())||(te.customParameters=JSON.stringify(g.getCustomParameters()));for(const[rt,yt]of Object.entries(L||{}))te[rt]=yt}if(g instanceof Sa){const rt=g.getScopes().filter(yt=>""!==yt);rt.length>0&&(te.scopes=rt.join(","))}v.tenantId&&(te.tid=v.tenantId);const Pe=te;for(const rt of Object.keys(Pe))void 0===Pe[rt]&&delete Pe[rt];return`${function H_({config:v}){return v.emulator?lr(v,"emulator/auth/handler"):`https://${v.authDomain}/__/auth/handler`}(v)}?${(0,B.xO)(Pe).slice(1)}`}const tf="webStorageSupport",Js=class Rs{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=et,this._completeRedirectFn=Wn}_openPopup(g,_,I,R){var L=this;return(0,p.Z)(function*(){var te;X(null===(te=L.eventManagers[g._key()])||void 0===te?void 0:te.manager,"_initialize() not called before _openPopup()");const Pe=ef(g,_,I,de(),R);return function Td(v,g,_,I=500,R=600){const L=Math.max((window.screen.availHeight-R)/2,0).toString(),te=Math.max((window.screen.availWidth-I)/2,0).toString();let Pe="";const rt=Object.assign(Object.assign({},og),{width:I.toString(),height:R.toString(),top:L,left:te}),yt=(0,B.z$)().toLowerCase();_&&(Pe=Te(yt)?"_blank":_),Z(yt)&&(g=g||"http://localhost",rt.scrollbars="yes");const Tt=Object.entries(rt).reduce((fi,[nu,sl])=>`${fi}${nu}=${sl},`,"");if(function ii(v=(0,B.z$)()){var g;return Ot(v)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(yt)&&"_self"!==Pe)return function Dd(v,g){const _=document.createElement("a");_.href=v,_.target=g;const I=document.createEvent("MouseEvent");I.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),_.dispatchEvent(I)}(g||"",Pe),new Cd(null);const On=window.open(g||"",Pe,Tt);re(On,v,"popup-blocked");try{On.focus()}catch(fi){}return new Cd(On)}(g,Pe,Pn())})()}_openRedirect(g,_,I,R){var L=this;return(0,p.Z)(function*(){return yield L._originValidation(g),function qo(v){Gn().location.href=v}(ef(g,_,I,de(),R)),new Promise(()=>{})})()}_initialize(g){const _=g._key();if(this.eventManagers[_]){const{manager:R,promise:L}=this.eventManagers[_];return R?Promise.resolve(R):(X(L,"If manager is not set, promise should be"),L)}const I=this.initAndGetManager(g);return this.eventManagers[_]={promise:I},I.catch(()=>{delete this.eventManagers[_]}),I}initAndGetManager(g){var _=this;return(0,p.Z)(function*(){const I=yield function il(v){return na.apply(this,arguments)}(g),R=new Ur(g);return I.register("authEvent",L=>(re(null==L?void 0:L.authEvent,g,"invalid-auth-event"),{status:R.onEvent(L.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),_.eventManagers[g._key()]={manager:R},_.iframes[g._key()]=I,R})()}_isIframeWebStorageSupported(g,_){this.iframes[g._key()].send(tf,{type:tf},R=>{var L;const te=null===(L=null==R?void 0:R[0])||void 0===L?void 0:L[tf];void 0!==te&&_(!!te),Ne(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const _=g._key();return this.originValidationPromises[_]||(this.originValidationPromises[_]=function B_(v){return tl.apply(this,arguments)}(g)),this.originValidationPromises[_]}get _shouldInitProactively(){return Lr()||z()||Ot()}};class rf extends class nf{constructor(g){this.factorId=g}_process(g,_,I){switch(_.type){case"enroll":return this._finalizeEnroll(g,_.credential,I);case"signin":return this._finalizeSignIn(g,_.credential);default:return Qe("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new rf(g)}_finalizeEnroll(g,_,I){return function Lu(v,g){return en(v,"POST","/v2/accounts/mfaEnrollment:finalize",$t(v,g))}(g,{idToken:_,displayName:I,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,_){return function Rr(v,g){return en(v,"POST","/v2/accounts/mfaSignIn:finalize",$t(v,g))}(g,{mfaPendingCredential:_,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let $_=(()=>{class v{constructor(){}static assertion(_){return rf._fromCredential(_)}}return v.FACTOR_ID="phone",v})();var G_="@firebase/auth";class Tw{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var _=this;return(0,p.Z)(function*(){return _.assertAuthConfigured(),yield _.auth._initializationPromise,_.auth.currentUser?{accessToken:yield _.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const _=this.auth.onIdTokenChanged(I=>{var R;g((null===(R=I)||void 0===R?void 0:R.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,_),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const _=this.internalListeners.get(g);!_||(this.internalListeners.delete(g),_(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}!function q_(v){(0,k._registerComponent)(new me.wA("auth",(g,{options:_})=>{const I=g.getProvider("app").getImmediate(),{apiKey:R,authDomain:L}=I.options;return(te=>{re(R&&!R.includes(":"),"invalid-api-key",{appName:te.name}),re(!(null==L?void 0:L.includes(":")),"argument-error",{appName:te.name});const Pe={apiKey:R,authDomain:L,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:wr(v)},rt=new Ia(te,Pe);return function Fe(v,g){const _=(null==g?void 0:g.persistence)||[],I=(Array.isArray(_)?_:[_]).map(fe);(null==g?void 0:g.errorMap)&&v._updateErrorMap(g.errorMap),v._initializeWithPersistence(I,null==g?void 0:g.popupRedirectResolver)}(rt,_),rt})(I)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,_,I)=>{g.getProvider("auth-internal").initialize()})),(0,k._registerComponent)(new me.wA("auth-internal",g=>{const _=an(g.getProvider("auth").getImmediate());return new Tw(_)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,k.registerVersion)(G_,"0.19.9",function ag(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,k.registerVersion)(G_,"0.19.9","esm2017")}("Browser")},2090:(at,De,O)=>{"use strict";O.d(De,{BH:()=>He,LL:()=>de,ZR:()=>Fe,gQ:()=>Vn,zI:()=>pe,hu:()=>B,g5:()=>k,US:()=>me,tV:()=>_e,h$:()=>le,$s:()=>jt,r3:()=>$t,Sg:()=>xe,ne:()=>Qi,p$:()=>G,vZ:()=>Yn,ZB:()=>H,gK:()=>ht,pd:()=>Ui,m9:()=>wn,z$:()=>Le,GJ:()=>Yt,jU:()=>ce,ru:()=>Re,d:()=>he,xb:()=>In,w1:()=>Ce,hl:()=>Qe,uI:()=>je,UG:()=>Q,Yr:()=>ze,b$:()=>Ne,G6:()=>re,Mn:()=>we,w9:()=>vr,cI:()=>Rn,UI:()=>Fi,xO:()=>Yi,zd:()=>yi,DV:()=>en,ug:()=>St,dS:()=>cr,Pz:()=>ut,Dv:()=>Sr,Wj:()=>Ct,lb:()=>Qt,eu:()=>X});const B=function(j,W){if(!j)throw k(W)},k=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},ae=function(j){const W=[];let K=0;for(let be=0;be<j.length;be++){let ie=j.charCodeAt(be);ie<128?W[K++]=ie:ie<2048?(W[K++]=ie>>6|192,W[K++]=63&ie|128):55296==(64512&ie)&&be+1<j.length&&56320==(64512&j.charCodeAt(be+1))?(ie=65536+((1023&ie)<<10)+(1023&j.charCodeAt(++be)),W[K++]=ie>>18|240,W[K++]=ie>>12&63|128,W[K++]=ie>>6&63|128,W[K++]=63&ie|128):(W[K++]=ie>>12|224,W[K++]=ie>>6&63|128,W[K++]=63&ie|128)}return W},me={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,W){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=W?this.byteToCharMapWebSafe_:this.byteToCharMap_,be=[];for(let ie=0;ie<j.length;ie+=3){const Ke=j[ie],ft=ie+1<j.length,zt=ft?j[ie+1]:0,on=ie+2<j.length,Jn=on?j[ie+2]:0;let Xn=(15&zt)<<2|Jn>>6,oe=63&Jn;on||(oe=64,ft||(Xn=64)),be.push(K[Ke>>2],K[(3&Ke)<<4|zt>>4],K[Xn],K[oe])}return be.join("")},encodeString(j,W){return this.HAS_NATIVE_SUPPORT&&!W?btoa(j):this.encodeByteArray(ae(j),W)},decodeString(j,W){return this.HAS_NATIVE_SUPPORT&&!W?atob(j):function(j){const W=[];let K=0,be=0;for(;K<j.length;){const ie=j[K++];if(ie<128)W[be++]=String.fromCharCode(ie);else if(ie>191&&ie<224){const Ke=j[K++];W[be++]=String.fromCharCode((31&ie)<<6|63&Ke)}else if(ie>239&&ie<365){const on=((7&ie)<<18|(63&j[K++])<<12|(63&j[K++])<<6|63&j[K++])-65536;W[be++]=String.fromCharCode(55296+(on>>10)),W[be++]=String.fromCharCode(56320+(1023&on))}else{const Ke=j[K++],ft=j[K++];W[be++]=String.fromCharCode((15&ie)<<12|(63&Ke)<<6|63&ft)}}return W.join("")}(this.decodeStringToByteArray(j,W))},decodeStringToByteArray(j,W){this.init_();const K=W?this.charToByteMapWebSafe_:this.charToByteMap_,be=[];for(let ie=0;ie<j.length;){const Ke=K[j.charAt(ie++)],zt=ie<j.length?K[j.charAt(ie)]:0;++ie;const Jn=ie<j.length?K[j.charAt(ie)]:64;++ie;const Pt=ie<j.length?K[j.charAt(ie)]:64;if(++ie,null==Ke||null==zt||null==Jn||null==Pt)throw Error();be.push(Ke<<2|zt>>4),64!==Jn&&(be.push(zt<<4&240|Jn>>2),64!==Pt&&be.push(Jn<<6&192|Pt))}return be},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},le=function(j){const W=ae(j);return me.encodeByteArray(W,!0)},ue=function(j){return le(j).replace(/\./g,"")},_e=function(j){try{return me.decodeString(j,!0)}catch(W){console.error("base64Decode failed: ",W)}return null};function G(j){return H(void 0,j)}function H(j,W){if(!(W instanceof Object))return W;switch(W.constructor){case Date:return new Date(W.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return W}for(const K in W)!W.hasOwnProperty(K)||!ne(K)||(j[K]=H(j[K],W[K]));return j}function ne(j){return"__proto__"!==j}class He{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((W,K)=>{this.resolve=W,this.reject=K})}wrapCallback(W){return(K,be)=>{K?this.reject(K):this.resolve(be),"function"==typeof W&&(this.promise.catch(()=>{}),1===W.length?W(K):W(K,be))}}}function xe(j,W){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const be=W||"demo-project",ie=j.iat||0,Ke=j.sub||j.user_id;if(!Ke)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ft=Object.assign({iss:`https://securetoken.google.com/${be}`,aud:be,iat:ie,exp:ie+3600,auth_time:ie,sub:Ke,user_id:Ke,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ue(JSON.stringify({alg:"none",type:"JWT"})),ue(JSON.stringify(ft)),""].join(".")}function Le(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function je(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Le())}function Q(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(j){return!1}}function ce(){return"object"==typeof self&&self.self===self}function Re(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ne(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function he(){return Le().indexOf("Electron/")>=0}function Ce(){const j=Le();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function we(){return Le().indexOf("MSAppHost/")>=0}function ze(){return!1}function re(){return!Q()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qe(){return"object"==typeof indexedDB}function X(){return new Promise((j,W)=>{try{let K=!0;const be="validate-browser-context-for-indexeddb-analytics-module",ie=self.indexedDB.open(be);ie.onsuccess=()=>{ie.result.close(),K||self.indexedDB.deleteDatabase(be),j(!0)},ie.onupgradeneeded=()=>{K=!1},ie.onerror=()=>{var Ke;W((null===(Ke=ie.error)||void 0===Ke?void 0:Ke.message)||"")}}catch(K){W(K)}})}function pe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Fe extends Error{constructor(W,K,be){super(K),this.code=W,this.customData=be,this.name="FirebaseError",Object.setPrototypeOf(this,Fe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,de.prototype.create)}}class de{constructor(W,K,be){this.service=W,this.serviceName=K,this.errors=be}create(W,...K){const be=K[0]||{},ie=`${this.service}/${W}`,Ke=this.errors[W],ft=Ke?function wt(j,W){return j.replace(Zt,(K,be)=>{const ie=W[be];return null!=ie?String(ie):`<${be}?>`})}(Ke,be):"Error";return new Fe(ie,`${this.serviceName}: ${ft} (${ie}).`,be)}}const Zt=/\{\$([^}]+)}/g;function Rn(j){return JSON.parse(j)}function ut(j){return JSON.stringify(j)}const it=function(j){let W={},K={},be={},ie="";try{const Ke=j.split(".");W=Rn(_e(Ke[0])||""),K=Rn(_e(Ke[1])||""),ie=Ke[2],be=K.d||{},delete K.d}catch(Ke){}return{header:W,claims:K,data:be,signature:ie}},vr=function(j){const K=it(j).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Yt=function(j){const W=it(j).claims;return"object"==typeof W&&!0===W.admin};function $t(j,W){return Object.prototype.hasOwnProperty.call(j,W)}function en(j,W){if(Object.prototype.hasOwnProperty.call(j,W))return j[W]}function In(j){for(const W in j)if(Object.prototype.hasOwnProperty.call(j,W))return!1;return!0}function Fi(j,W,K){const be={};for(const ie in j)Object.prototype.hasOwnProperty.call(j,ie)&&(be[ie]=W.call(K,j[ie],ie,j));return be}function Yn(j,W){if(j===W)return!0;const K=Object.keys(j),be=Object.keys(W);for(const ie of K){if(!be.includes(ie))return!1;const Ke=j[ie],ft=W[ie];if(Dr(Ke)&&Dr(ft)){if(!Yn(Ke,ft))return!1}else if(Ke!==ft)return!1}for(const ie of be)if(!K.includes(ie))return!1;return!0}function Dr(j){return null!==j&&"object"==typeof j}function Yi(j){const W=[];for(const[K,be]of Object.entries(j))Array.isArray(be)?be.forEach(ie=>{W.push(encodeURIComponent(K)+"="+encodeURIComponent(ie))}):W.push(encodeURIComponent(K)+"="+encodeURIComponent(be));return W.length?"&"+W.join("&"):""}function yi(j){const W={};return j.replace(/^\?/,"").split("&").forEach(be=>{if(be){const[ie,Ke]=be.split("=");W[decodeURIComponent(ie)]=decodeURIComponent(Ke)}}),W}function Ui(j){const W=j.indexOf("?");if(!W)return"";const K=j.indexOf("#",W);return j.substring(W,K>0?K:void 0)}class Vn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let W=1;W<this.blockSize;++W)this.pad_[W]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(W,K){K||(K=0);const be=this.W_;if("string"==typeof W)for(let Pt=0;Pt<16;Pt++)be[Pt]=W.charCodeAt(K)<<24|W.charCodeAt(K+1)<<16|W.charCodeAt(K+2)<<8|W.charCodeAt(K+3),K+=4;else for(let Pt=0;Pt<16;Pt++)be[Pt]=W[K]<<24|W[K+1]<<16|W[K+2]<<8|W[K+3],K+=4;for(let Pt=16;Pt<80;Pt++){const Xn=be[Pt-3]^be[Pt-8]^be[Pt-14]^be[Pt-16];be[Pt]=4294967295&(Xn<<1|Xn>>>31)}let Jn,dr,ie=this.chain_[0],Ke=this.chain_[1],ft=this.chain_[2],zt=this.chain_[3],on=this.chain_[4];for(let Pt=0;Pt<80;Pt++){Pt<40?Pt<20?(Jn=zt^Ke&(ft^zt),dr=1518500249):(Jn=Ke^ft^zt,dr=1859775393):Pt<60?(Jn=Ke&ft|zt&(Ke|ft),dr=2400959708):(Jn=Ke^ft^zt,dr=3395469782);const Xn=(ie<<5|ie>>>27)+Jn+on+dr+be[Pt]&4294967295;on=zt,zt=ft,ft=4294967295&(Ke<<30|Ke>>>2),Ke=ie,ie=Xn}this.chain_[0]=this.chain_[0]+ie&4294967295,this.chain_[1]=this.chain_[1]+Ke&4294967295,this.chain_[2]=this.chain_[2]+ft&4294967295,this.chain_[3]=this.chain_[3]+zt&4294967295,this.chain_[4]=this.chain_[4]+on&4294967295}update(W,K){if(null==W)return;void 0===K&&(K=W.length);const be=K-this.blockSize;let ie=0;const Ke=this.buf_;let ft=this.inbuf_;for(;ie<K;){if(0===ft)for(;ie<=be;)this.compress_(W,ie),ie+=this.blockSize;if("string"==typeof W){for(;ie<K;)if(Ke[ft]=W.charCodeAt(ie),++ft,++ie,ft===this.blockSize){this.compress_(Ke),ft=0;break}}else for(;ie<K;)if(Ke[ft]=W[ie],++ft,++ie,ft===this.blockSize){this.compress_(Ke),ft=0;break}}this.inbuf_=ft,this.total_+=K}digest(){const W=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ie=this.blockSize-1;ie>=56;ie--)this.buf_[ie]=255&K,K/=256;this.compress_(this.buf_);let be=0;for(let ie=0;ie<5;ie++)for(let Ke=24;Ke>=0;Ke-=8)W[be]=this.chain_[ie]>>Ke&255,++be;return W}}function Qi(j,W){const K=new pt(j,W);return K.subscribe.bind(K)}class pt{constructor(W,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{W(this)}).catch(be=>{this.error(be)})}next(W){this.forEachObserver(K=>{K.next(W)})}error(W){this.forEachObserver(K=>{K.error(W)}),this.close(W)}complete(){this.forEachObserver(W=>{W.complete()}),this.close()}subscribe(W,K,be){let ie;if(void 0===W&&void 0===K&&void 0===be)throw new Error("Missing Observer.");ie=function xn(j,W){if("object"!=typeof j||null===j)return!1;for(const K of W)if(K in j&&"function"==typeof j[K])return!0;return!1}(W,["next","error","complete"])?W:{next:W,error:K,complete:be},void 0===ie.next&&(ie.next=Wt),void 0===ie.error&&(ie.error=Wt),void 0===ie.complete&&(ie.complete=Wt);const Ke=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ie.error(this.finalError):ie.complete()}catch(ft){}}),this.observers.push(ie),Ke}unsubscribeOne(W){void 0===this.observers||void 0===this.observers[W]||(delete this.observers[W],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(W){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,W)}sendOne(W,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[W])try{K(this.observers[W])}catch(be){"undefined"!=typeof console&&console.error&&console.error(be)}})}close(W){this.finalized||(this.finalized=!0,void 0!==W&&(this.finalError=W),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Wt(){}const Sr=function(j,W,K,be){let ie;if(be<W?ie="at least "+W:be>K&&(ie=0===K?"none":"no more than "+K),ie)throw new Error(j+" failed: Was called with "+be+(1===be?" argument.":" arguments.")+" Expects "+ie+".")};function ht(j,W){return`${j} failed: ${W} argument `}function Ct(j,W,K,be){if((!be||K)&&"function"!=typeof K)throw new Error(ht(j,W)+"must be a valid function.")}function Qt(j,W,K,be){if((!be||K)&&("object"!=typeof K||null===K))throw new Error(ht(j,W)+"must be a valid context object.")}const cr=function(j){const W=[];let K=0;for(let be=0;be<j.length;be++){let ie=j.charCodeAt(be);if(ie>=55296&&ie<=56319){const Ke=ie-55296;be++,B(be<j.length,"Surrogate pair missing trail surrogate."),ie=65536+(Ke<<10)+(j.charCodeAt(be)-56320)}ie<128?W[K++]=ie:ie<2048?(W[K++]=ie>>6|192,W[K++]=63&ie|128):ie<65536?(W[K++]=ie>>12|224,W[K++]=ie>>6&63|128,W[K++]=63&ie|128):(W[K++]=ie>>18|240,W[K++]=ie>>12&63|128,W[K++]=ie>>6&63|128,W[K++]=63&ie|128)}return W},St=function(j){let W=0;for(let K=0;K<j.length;K++){const be=j.charCodeAt(K);be<128?W++:be<2048?W+=2:be>=55296&&be<=56319?(W+=4,K++):W+=3}return W};function jt(j,W=1e3,K=2){const be=W*Math.pow(K,j),ie=Math.round(.5*be*(Math.random()-.5)*2);return Math.min(144e5,be+ie)}function wn(j){return j&&j._delegate?j._delegate:j}},2783:(at,De,O)=>{"use strict";var p=O(5e3);let B=null;function k(){return B}const le=new p.OlP("DocumentToken");let ue=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function _e(){return(0,p.LFG)(H)}()},providedIn:"platform"}),n})();const G=new p.OlP("Location Initialized");let H=(()=>{class n extends ue{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return k().getBaseHref(this._doc)}onPopState(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=k().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){ne()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){ne()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function He(){return new H((0,p.LFG)(le))}()},providedIn:"platform"}),n})();function ne(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Le(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function je(n){return n&&"?"!==n[0]?"?"+n:n}let Q=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:function(){return function ce(n){const e=(0,p.LFG)(le).location;return new Ne((0,p.LFG)(ue),e&&e.origin||"")}()},providedIn:"root"}),n})();const Re=new p.OlP("appBaseHref");let Ne=(()=>{class n extends Q{constructor(t,r){if(super(),this._platformLocation=t,this._removeListenerFns=[],null==r&&(r=this._platformLocation.getBaseHrefFromDOM()),null==r)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=r}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+je(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+je(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+je(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue),p.LFG(Re,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),he=(()=>{class n extends Q{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+je(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformLocation).historyGo)||void 0===i||i.call(r,t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ue),p.LFG(Re,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Ce=(()=>{class n{constructor(t,r){this._subject=new p.vpe,this._urlChangeListeners=[],this._platformStrategy=t;const i=this._platformStrategy.getBaseHref();this._platformLocation=r,this._baseHref=Le(re(i)),this._platformStrategy.onPopState(a=>{this._subject.emit({url:this.path(!0),pop:!0,state:a.state,type:a.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+je(r))}normalize(t){return n.stripTrailingSlash(function ze(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,re(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._platformStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}replaceState(t,r="",i=null){this._platformStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+je(r)),i)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(t=0){var r,i;null===(i=(r=this._platformStrategy).historyGo)||void 0===i||i.call(r,t)}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}))}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=je,n.joinWithSlash=xe,n.stripTrailingSlash=Le,n.\u0275fac=function(t){return new(t||n)(p.LFG(Q),p.LFG(ue))},n.\u0275prov=p.Yz7({token:n,factory:function(){return function we(){return new Ce((0,p.LFG)(Q),(0,p.LFG)(ue))}()},providedIn:"root"}),n})();function re(n){return n.replace(/\/index.html$/,"")}var pe=(()=>((pe=pe||{})[pe.Zero=0]="Zero",pe[pe.One=1]="One",pe[pe.Two=2]="Two",pe[pe.Few=3]="Few",pe[pe.Many=4]="Many",pe[pe.Other=5]="Other",pe))();const Ui=p.kL8;class gn{}let jn=(()=>{class n extends gn{constructor(t){super(),this.locale=t}getPluralCategory(t,r){switch(Ui(r||this.locale)(t)){case pe.Zero:return"zero";case pe.One:return"one";case pe.Two:return"two";case pe.Few:return"few";case pe.Many:return"many";default:return"other"}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.soG))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function ba(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}class $s{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Tn=(()=>{class n{constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,a,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new $s(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===a?void 0:a);else if(null!==a){const h=r.get(a);r.move(h,l),mo(h,i)}});for(let i=0,a=r.length;i<a;i++){const h=r.get(i).context;h.index=i,h.count=a,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{mo(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc),p.Y36(p.ZZ4))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),n})();function mo(n,e){n.context.$implicit=e.item}let tr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new mn,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){Tu("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){Tu("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(p.s_b),p.Y36(p.Rgc))},n.\u0275dir=p.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),n})();class mn{constructor(){this.$implicit=null,this.ngIf=null}}function Tu(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,p.AaK)(e)}'.`)}let ld=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[{provide:gn,useClass:jn}]}),n})();function Pa(n){return"server"===n}let cd=(()=>{class n{}return n.\u0275prov=(0,p.Yz7)({token:n,providedIn:"root",factory:()=>new Ru((0,p.LFG)(le),window)}),n})();class Ru{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function ji(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=dd(this.window.history)||dd(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch(e){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(e){return!1}}}function dd(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class dn{}class _o extends class jo extends class me{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function se(n){B||(B=n)}(new _o)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ma(){return hn=hn||document.querySelector("base"),hn?hn.getAttribute("href"):null}();return null==t?null:function Ws(n){Nu=Nu||document.createElement("a"),Nu.setAttribute("href",n);const e=Nu.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hn=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return ba(document.cookie,e)}}let Nu,hn=null;const hr=new p.OlP("TRANSITION_ID"),Hn=[{provide:p.ip1,useFactory:function Bl(n,e,t){return()=>{t.get(p.CZH).donePromise.then(()=>{const r=k(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[hr,le,p.zs3],multi:!0}];class rs{static init(){(0,p.VLi)(new rs)}addToWindow(e){p.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},p.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),p.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),p.dqk.frameworkStabilizers||(p.dqk.frameworkStabilizers=[]),p.dqk.frameworkStabilizers.push(r=>{const i=p.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const h=function(m){l=l||m,a--,0==a&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){if(null==t)return null;const i=e.getTestability(t);return null!=i?i:r?k().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null}}let Ar=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const yo=new p.OlP("EventManagerPlugins");let zs=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(yo),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class Oa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=k().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Hi=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),is=(()=>{class n extends Hi{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(vs),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(vs))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function vs(n){k().remove(n)}const _t={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Ho=/%COMP%/g;function Se(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Se(n,i,t):(i=i.replace(Ho,n),t.push(i))}return t}function Ut(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Dn=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new $o(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case p.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new ql(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case p.ifc.ShadowDom:return new Fa(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Se(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(zs),p.LFG(is),p.LFG(p.AFp))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class $o{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(_t[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){e.appendChild(t)}insertBefore(e,t,r){e&&e.insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=_t[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=_t[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(p.JOm.DashCase|p.JOm.Important)?e.style.setProperty(t,r,i&p.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&p.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ut(r)):this.eventManager.addEventListener(e,t,Ut(r))}}class ql extends $o{constructor(e,t,r,i){super(e),this.component=r;const a=Se(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Hl(n){return"_ngcontent-%COMP%".replace(Ho,n)}(i+"-"+r.id),this.hostAttr=function $l(n){return"_nghost-%COMP%".replace(Ho,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Fa extends $o{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Se(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const h=document.createElement("style");h.textContent=a[l],this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let eg=(()=>{class n extends Oa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const fd=["alt","control","meta","shift"],ku={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},$n={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ws={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Ua=(()=>{class n extends Oa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>k().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="";if(fd.forEach(m=>{const w=r.indexOf(m);w>-1&&(r.splice(w,1),l+=m+".")}),l+=a,0!=r.length||0===a.length)return null;const h={};return h.domEventName=i,h.fullKey=l,h}static getEventFullKey(t){let r="",i=function Ks(n){let e=n.key;if(null==e){if(e=n.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===n.location&&$n.hasOwnProperty(e)&&(e=$n[e]))}return ku[e]||e}(t);return i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),fd.forEach(a=>{a!=i&&ws[a](t)&&(r+=a+".")}),r+=i,r}static eventCallback(t,r,i){return a=>{n.getEventFullKey(a)===t&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const Ou=(0,p.eFA)(p._c5,"browser",[{provide:p.Lbi,useValue:"browser"},{provide:p.g9A,useValue:function $i(){_o.makeCurrent(),rs.init()},multi:!0},{provide:le,useFactory:function Mu(){return(0,p.RDi)(document),document},deps:[]}]),Va=[{provide:p.zSh,useValue:"root"},{provide:p.qLn,useFactory:function Wl(){return new p.qLn},deps:[]},{provide:yo,useClass:eg,multi:!0,deps:[le,p.R0b,p.Lbi]},{provide:yo,useClass:Ua,multi:!0,deps:[le]},{provide:Dn,useClass:Dn,deps:[zs,is,p.AFp]},{provide:p.FYo,useExisting:Dn},{provide:Hi,useExisting:is},{provide:is,useClass:is,deps:[le]},{provide:p.dDg,useClass:p.dDg,deps:[p.R0b]},{provide:zs,useClass:zs,deps:[yo,p.R0b]},{provide:dn,useClass:Ar,deps:[]}];let Ba=(()=>{class n{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(t){return{ngModule:n,providers:[{provide:p.AFp,useValue:t.appId},{provide:hr,useExisting:p.AFp},Hn]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(n,12))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:Va,imports:[ld,p.hGG]}),n})();"undefined"!=typeof window&&window;var En=O(8996),Bu=O(7669);function et(...n){const e=(0,Bu.yG)(n);return(0,En.D)(n,e)}var bs=O(7579);class ui extends bs.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}var Pn=O(8306);const{isArray:nc}=Array,{getPrototypeOf:Gn,prototype:qo,keys:qa}=Object;var os=O(4671),gt=O(4004);const{isArray:rc}=Array;var fn=O(5403),zo=O(9672);function Wa(...n){const e=(0,Bu.yG)(n),t=(0,Bu.jO)(n),{args:r,keys:i}=function Wo(n){if(1===n.length){const e=n[0];if(nc(e))return{args:e,keys:null};if(function Io(n){return n&&"object"==typeof n&&Gn(n)===qo}(e)){const t=qa(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}(n);if(0===r.length)return(0,En.D)([],e);const a=new Pn.y(function Ko(n,e,t=os.y){return r=>{$r(e,()=>{const{length:i}=n,a=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)$r(e,()=>{const w=(0,En.D)(n[m],e);let D=!1;w.subscribe((0,fn.x)(r,S=>{a[m]=S,D||(D=!0,h--),h||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>function gd(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}(i,l):os.y));return t?a.pipe(function ju(n){return(0,gt.U)(e=>function pd(n,e){return rc(e)?n(...e):n(e)}(n,e))}(t)):a}function $r(n,e,t){n?(0,zo.f)(t,n,e):e()}const Zo=(0,O(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var as=O(8189);function za(...n){return function $u(){return(0,as.J)(1)}()((0,En.D)(n,(0,Bu.yG)(n)))}var Ys=O(8421);function ic(n){return new Pn.y(e=>{(0,Ys.Xf)(n()).subscribe(e)})}var Cs=O(515),Yo=O(727),Rr=O(4482);function sc(){return(0,Rr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Qo extends Pn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,null==e||e.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Yo.w0;const t=this.getSubject();e.add(this.source.subscribe((0,fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Yo.w0.EMPTY)}return e}refCount(){return sc()(this)}}function Sn(n,e){return(0,Rr.e)((t,r)=>{let i=null,a=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,fn.x)(r,m=>{null==i||i.unsubscribe();let w=0;const D=a++;(0,Ys.Xf)(n(m,D)).subscribe(i=(0,fn.x)(r,S=>r.next(e?e(m,S,D,w++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}var Jo=O(5698);function bo(...n){const e=(0,Bu.yG)(n);return(0,Rr.e)((t,r)=>{(e?za(n,t,e):za(n,t)).subscribe(r)})}function Ka(n,e,t,r,i){return(a,l)=>{let h=t,m=e,w=0;a.subscribe((0,fn.x)(l,D=>{const S=w++;m=h?n(m,D,S):(h=!0,D),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}function Ei(n,e){return(0,Rr.e)(Ka(n,e,arguments.length>=2,!0))}function qn(n,e){return(0,Rr.e)((t,r)=>{let i=0;t.subscribe((0,fn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}function li(n){return(0,Rr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,fn.x)(t,void 0,void 0,l=>{a=(0,Ys.Xf)(n(l,li(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}var nr=O(5577),oc=O(576);function ci(n,e){return(0,oc.m)(e)?(0,nr.z)(n,e,1):(0,nr.z)(n,1)}function md(n){return n<=0?()=>Cs.E:(0,Rr.e)((e,t)=>{let r=[];e.subscribe((0,fn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Gu(n=kn){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,fn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function kn(){return new Zo}function Zh(n){return(0,Rr.e)((e,t)=>{let r=!1;e.subscribe((0,fn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Xo(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qn((i,a)=>n(i,a,r)):os.y,(0,Jo.q)(1),t?Zh(e):Gu(()=>new Zo))}var Ii=O(8505);class Ts{constructor(e,t){this.id=e,this.url=t}}class qu extends Ts{constructor(e,t,r="imperative",i=null){super(e,t),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ds extends Ts{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class ac extends Ts{constructor(e,t,r){super(e,t),this.reason=r}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class rr extends Ts{constructor(e,t,r){super(e,t),this.error=r}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Za extends Ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ya extends Ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Qh extends Ts{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Wu extends Ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Gr extends Ts{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class bi{constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Qa{constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class zu{constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class di{constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ea{constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class uc{constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ku{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const kt="primary";class Zu{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function us(n){return new Zu(n)}const hi="ngNavigationCancelingError";function Yu(n){const e=Error("NavigationCancelingError: "+n);return e[hi]=!0,e}function tg(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],h=n[a];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Fr(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!Ja(n[i],e[i]))return!1;return!0}function Ja(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function Ju(n){return Array.prototype.concat.apply([],n)}function _d(n){return n.length>0?n[n.length-1]:null}function fr(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function pr(n){return(0,p.CqO)(n)?n:(0,p.QGY)(n)?(0,En.D)(Promise.resolve(n)):et(n)}const Jh={exact:function yd(n,e,t){if(!Ze(n.segments,e.segments)||!V(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!yd(n.children[r],e.children[r],t))return!1;return!0},subset:T},As={exact:function Xa(n,e){return Fr(n,e)},subset:function C(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Ja(n[t],e[t]))},ignored:()=>!0};function Xu(n,e,t){return Jh[t.paths](n.root,e.root,t.matrixParams)&&As[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function T(n,e,t){return N(n,e,e.segments,t)}function N(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Ze(i,t)||e.hasChildren()||!V(i,t,r))}if(n.segments.length===t.length){if(!Ze(n.segments,t)||!V(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!T(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Ze(n.segments,i)&&V(n.segments,i,r)&&n.children[kt])&&N(n.children[kt],e,a,r)}}function V(n,e,t){return e.every((r,i)=>As[t](n[i].parameters,r.parameters))}class Y{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=us(this.queryParams)),this._queryParamMap}toString(){return qr.serialize(this)}}class J{constructor(e,t){this.segments=e,this.children=t,this.parent=null,fr(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mn(this)}}class Oe{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=us(this.parameters)),this._parameterMap}toString(){return el(this)}}function Ze(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}class Xt{}class Wn{parse(e){const t=new cc(e);return new Y(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${ls(e.root,!0)}`,r=function ng(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Ur(t)}=${Ur(i)}`).join("&"):`${Ur(t)}=${Ur(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function xs(n){return encodeURI(n)}(e.fragment)}`:""}`}}const qr=new Wn;function Mn(n){return n.segments.map(e=>el(e)).join("/")}function ls(n,e){if(!n.hasChildren())return Mn(n);if(e){const t=n.children[kt]?ls(n.children[kt],!1):"",r=[];return fr(n.children,(i,a)=>{a!==kt&&r.push(`${a}:${ls(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Jt(n,e){let t=[];return fr(n.children,(r,i)=>{i===kt&&(t=t.concat(e(r,i)))}),fr(n.children,(r,i)=>{i!==kt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===kt?[ls(n.children[kt],!1)]:[`${i}:${ls(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[kt]?`${Mn(n)}/${t[0]}`:`${Mn(n)}/(${t.join("//")})`}}function Qs(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Ur(n){return Qs(n).replace(/%3B/gi,";")}function Wr(n){return Qs(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function eu(n){return decodeURIComponent(n)}function vd(n){return eu(n.replace(/\+/g,"%20"))}function el(n){return`${Wr(n.path)}${function wd(n){return Object.keys(n).map(e=>`;${Wr(e)}=${Wr(n[e])}`).join("")}(n.parameters)}`}const B_=/^[^\/()?;=#]+/;function tl(n){const e=n.match(B_);return e?e[0]:""}const nl=/^[^=?&#]+/,rg=/^[^&#]+/;class cc{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new J([],{}):new J([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[kt]=new J(e,t)),r}parseSegment(){const e=tl(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(e),new Oe(eu(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=tl(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=tl(this.remaining);i&&(r=i,this.capture(r))}e[eu(t)]=eu(r)}parseQueryParam(e){const t=function lc(n){const e=n.match(nl);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function bw(n){const e=n.match(rg);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=vd(t),a=vd(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=tl(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new Error(`Cannot parse url '${this.url}'`);let a;r.indexOf(":")>-1?(a=r.substr(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=kt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[kt]:new J([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new Error(`Expected "${e}".`)}}class ig{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=sg(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=sg(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=Xh(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Xh(e,this._root).map(t=>t.value)}}function sg(n,e){if(n===e.value)return e;for(const t of e.children){const r=sg(n,t);if(r)return r}return null}function Xh(n,e){if(n===e.value)return[e];for(const t of e.children){const r=Xh(n,t);if(r.length)return r.unshift(e),r}return[]}class To{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function rl(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class dc extends ig{constructor(e,t){super(e),this.snapshot=t,bd(this,e)}toString(){return this.snapshot.toString()}}function Ed(n,e){const t=function il(n,e){const l=new tu([],{},{},"",{},kt,e,null,n.root,-1,{});return new Id("",new To(l,[]))}(n,e),r=new ui([new Oe("",{})]),i=new ui({}),a=new ui({}),l=new ui({}),h=new ui(""),m=new na(r,i,l,h,a,kt,e,t.root);return m.snapshot=t.root,new dc(new To(m,[]),t)}class na{constructor(e,t,r,i,a,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,gt.U)(e=>us(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,gt.U)(e=>us(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function og(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function Cw(n){return n.reduce((e,t)=>({params:Object.assign(Object.assign({},e.params),t.params),data:Object.assign(Object.assign({},e.data),t.data),resolve:Object.assign(Object.assign({},e.resolve),t._resolvedData)}),{params:{},data:{},resolve:{}})}(t.slice(r))}class tu{constructor(e,t,r,i,a,l,h,m,w,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=h,this.routeConfig=m,this._urlSegment=w,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=us(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=us(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Id extends ig{constructor(e,t){super(t),this.url=e,bd(this,t)}toString(){return Cd(this._root)}}function bd(n,e){e.value._routerState=n,e.children.forEach(t=>bd(n,t))}function Cd(n){const e=n.children.length>0?` { ${n.children.map(Cd).join(", ")} } `:"";return`${n.value}${e}`}function Td(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Fr(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Fr(e.params,t.params)||n.params.next(t.params),function Qu(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Fr(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Fr(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Dd(n,e){const t=Fr(n.params,e.params)&&function $e(n,e){return Ze(n,e)&&n.every((t,r)=>Fr(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Dd(n.parent,e.parent))}function hc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function ef(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return hc(n,r,i);return hc(n,r)})}(n,e,t);return new To(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>hc(n,h)),l}}const r=function H_(n){return new na(new ui(n.url),new ui(n.params),new ui(n.queryParams),new ui(n.fragment),new ui(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>hc(n,a));return new To(r,i)}}function Rs(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Js(n){return"object"==typeof n&&null!=n&&n.outlets}function nf(n,e,t,r,i){let a={};return r&&fr(r,(l,h)=>{a[h]=Array.isArray(l)?l.map(m=>`${m}`):`${l}`}),new Y(t.root===n?e:rf(t.root,n,e),a,i)}function rf(n,e,t){const r={};return fr(n.children,(i,a)=>{r[a]=i===e?t:rf(i,e,t)}),new J(n.segments,r)}class $_{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Rs(r[0]))throw new Error("Root segment cannot have matrix parameters");const i=r.find(Js);if(i&&i!==_d(r))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class sf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function W_(n,e,t){if(n||(n=new J([],{})),0===n.segments.length&&n.hasChildren())return v(n,e,t);const r=function g(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],h=t[r];if(Js(h))break;const m=`${h}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&w&&"object"==typeof w&&void 0===w.outlets){if(!L(m,w,l))return a;r+=2}else{if(!L(m,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new J(n.segments.slice(0,r.pathIndex),{});return a.children[kt]=new J(n.segments.slice(r.pathIndex),n.children),v(a,0,i)}return r.match&&0===i.length?new J(n.segments,{}):r.match&&!n.hasChildren()?_(n,e,t):r.match?v(n,0,i):_(n,e,t)}function v(n,e,t){if(0===t.length)return new J(n.segments,{});{const r=function q_(n){return Js(n[0])?n[0].outlets:{[kt]:n}}(t),i={};return fr(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=W_(n.children[l],e,a))}),fr(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new J(n.segments,i)}}function _(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Js(a)){const m=I(a.outlets);return new J(r,m)}if(0===i&&Rs(t[0])){r.push(new Oe(n.segments[e].path,R(t[0]))),i++;continue}const l=Js(a)?a.outlets[kt]:`${a}`,h=i<t.length-1?t[i+1]:null;l&&h&&Rs(h)?(r.push(new Oe(l,R(h))),i+=2):(r.push(new Oe(l,{})),i++)}return new J(r,{})}function I(n){const e={};return fr(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=_(new J([],{}),0,t))}),e}function R(n){const e={};return fr(n,(t,r)=>e[r]=`${t}`),e}function L(n,e,t){return n==t.path&&Fr(e,t.parameters)}class Pe{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Td(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=rl(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),fr(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=rl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=rl(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=rl(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new uc(a.value.snapshot))}),e.children.length&&this.forwardEvent(new di(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(Td(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Td(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=function rt(n){for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(i.snapshot),m=h?h.module.componentFactoryResolver:null;l.attachRef=null,l.route=i,l.resolver=m,l.outlet&&l.outlet.activateWith(i,m),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class yt{constructor(e,t){this.routes=e,this.module=t}}function Tt(n){return"function"==typeof n}function fi(n){return n instanceof Y}const pc=Symbol("INITIAL_VALUE");function gc(){return Sn(n=>Wa(n.map(e=>e.pipe((0,Jo.q)(1),bo(pc)))).pipe(Ei((e,t)=>{let r=!1;return t.reduce((i,a,l)=>i!==pc?i:(a===pc&&(r=!0),r||!1!==a&&l!==t.length-1&&!fi(a)?i:a),e)},pc),qn(e=>e!==pc),(0,gt.U)(e=>fi(e)?e:!0===e),(0,Jo.q)(1)))}class Ad{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new ol,this.attachRef=null}}class ol{constructor(){this.contexts=new Map}onChildOutletCreated(e,t){const r=this.getOrCreateContext(e);r.outlet=t,this.contexts.set(e,r)}onChildOutletDestroyed(e){const t=this.getContext(e);t&&(t.outlet=null,t.attachRef=null)}onOutletDeactivated(){const e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let t=this.getContext(e);return t||(t=new Ad,this.contexts.set(e,t)),t}getContext(e){return this.contexts.get(e)||null}}let xd=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.resolver=i,this.changeDetector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new p.vpe,this.deactivateEvents=new p.vpe,this.attachEvents=new p.vpe,this.detachEvents=new p.vpe,this.name=a||kt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const l=(r=r||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),h=this.parentContexts.getOrCreateContext(this.name).children,m=new af(t,h,this.location.injector);this.activated=this.location.createComponent(l,this.location.length,m),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(ol),p.Y36(p.s_b),p.Y36(p._Vd),p.$8M("name"),p.Y36(p.sBO))},n.\u0275dir=p.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),n})();class af{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===na?this.route:e===ol?this.childContexts:this.parent.get(e,t)}}let uf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[xd],encapsulation:2}),n})();function lf(n,e=""){for(let t=0;t<n.length;t++){const r=n[t];al(r,z_(e,r))}}function al(n,e){n.children&&lf(n.children,e)}function z_(n,e){return e?n||e.path?n&&!e.path?`${n}/`:!n&&e.path?e.path:`${n}/${e.path}`:"":n}function cf(n){const e=n.children&&n.children.map(cf),t=e?Object.assign(Object.assign({},n),{children:e}):Object.assign({},n);return!t.component&&(e||t.loadChildren)&&t.outlet&&t.outlet!==kt&&(t.component=uf),t}function Xs(n){return n.outlet||kt}function Ir(n,e){const t=n.filter(r=>Xs(r)===e);return t.push(...n.filter(r=>Xs(r)!==e)),t}const Dw={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ug(n,e,t){var r;if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?Object.assign({},Dw):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const a=(e.matcher||tg)(t,n,e);if(!a)return Object.assign({},Dw);const l={};fr(a.posParams,(m,w)=>{l[w]=m.path});const h=a.consumed.length>0?Object.assign(Object.assign({},l),a.consumed[a.consumed.length-1].parameters):l;return{matched:!0,consumedSegments:a.consumed,lastChild:a.consumed.length,parameters:h,positionalParamSegments:null!==(r=a.posParams)&&void 0!==r?r:{}}}function Rd(n,e,t,r,i="corrected"){if(t.length>0&&function uT(n,e,t){return t.some(r=>lg(n,e,r)&&Xs(r)!==kt)}(n,t,r)){const l=new J(e,function aT(n,e,t,r){const i={};i[kt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&Xs(a)!==kt){const l=new J([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Xs(a)]=l}return i}(n,e,r,new J(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function lT(n,e,t){return t.some(r=>lg(n,e,r))}(n,t,r)){const l=new J(n.segments,function Sw(n,e,t,r,i,a){const l={};for(const h of r)if(lg(n,t,h)&&!i[Xs(h)]){const m=new J([],{});m._sourceSegment=n,m._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[Xs(h)]=m}return Object.assign(Object.assign({},i),l)}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new J(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function lg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function Aw(n,e,t,r){return!!(Xs(n)===r||r!==kt&&lg(e,t,n))&&("**"===n.path||ug(e,n,t).matched)}function cT(n,e,t){return 0===e.length&&!n.children[t]}class cg{constructor(e){this.segmentGroup=e||null}}class Nd{constructor(e){this.urlTree=e}}function zr(n){return new Pn.y(e=>e.error(new cg(n)))}function dg(n){return new Pn.y(e=>e.error(new Nd(n)))}function xw(n){return new Pn.y(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${n}'`)))}class df{constructor(e,t,r,i,a){this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0,this.ngModule=e.get(p.h0i)}apply(){const e=Rd(this.urlTree.root,[],[],this.config).segmentGroup,t=new J(e.segments,e.children);return this.expandSegmentGroup(this.ngModule,this.config,t,kt).pipe((0,gt.U)(a=>this.createUrlTree(Z_(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(li(a=>{if(a instanceof Nd)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof cg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.ngModule,this.config,e.root,kt).pipe((0,gt.U)(i=>this.createUrlTree(Z_(i),e.queryParams,e.fragment))).pipe(li(i=>{throw i instanceof cg?this.noMatchError(i):i}))}noMatchError(e){return new Error(`Cannot match any routes. URL Segment: '${e.segmentGroup}'`)}createUrlTree(e,t,r){const i=e.segments.length>0?new J([],{[kt]:e}):e;return new Y(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,gt.U)(a=>new J([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,En.D)(i).pipe(ci(a=>{const l=r.children[a],h=Ir(t,a);return this.expandSegmentGroup(e,h,l,a).pipe((0,gt.U)(m=>({segment:m,outlet:a})))}),Ei((a,l)=>(a[l.outlet]=l.segment,a),{}),function V_(n,e){const t=arguments.length>=2;return r=>r.pipe(n?qn((i,a)=>n(i,a,r)):os.y,md(1),t?Zh(e):Gu(()=>new Zo))}())}expandSegment(e,t,r,i,a,l){return(0,En.D)(r).pipe(ci(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,a,l).pipe(li(w=>{if(w instanceof cg)return et(null);throw w}))),Xo(h=>!!h),li((h,m)=>{if(h instanceof Zo||"EmptyError"===h.name){if(cT(t,i,a))return et(new J([],{}));throw new cg(t)}throw h}))}expandSegmentAgainstRoute(e,t,r,i,a,l,h){return Aw(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):zr(t):zr(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?dg(a):this.lineralizeSegments(r,a).pipe((0,nr.z)(l=>{const h=new J(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:h,consumedSegments:m,lastChild:w,positionalParamSegments:D}=ug(t,i,a);if(!h)return zr(t);const S=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?dg(S):this.lineralizeSegments(i,S).pipe((0,nr.z)(P=>this.expandSegment(e,t,r,P.concat(a.slice(w)),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){if("**"===r.path)return r.loadChildren?(r._loadedConfig?et(r._loadedConfig):this.configLoader.load(e.injector,r)).pipe((0,gt.U)(P=>(r._loadedConfig=P,new J(i,{})))):et(new J(i,{}));const{matched:l,consumedSegments:h,lastChild:m}=ug(t,r,i);if(!l)return zr(t);const w=i.slice(m);return this.getChildConfig(e,r,i).pipe((0,nr.z)(S=>{const P=S.module,U=S.routes,{segmentGroup:q,slicedSegments:ve}=Rd(t,h,w,U),ke=new J(q.segments,q.children);if(0===ve.length&&ke.hasChildren())return this.expandChildren(P,U,ke).pipe((0,gt.U)(dt=>new J(h,dt)));if(0===U.length&&0===ve.length)return et(new J(h,{}));const tt=Xs(r)===a;return this.expandSegment(P,ke,U,ve,tt?kt:a,!0).pipe((0,gt.U)(It=>new J(h.concat(It.segments),It.children)))}))}getChildConfig(e,t,r){return t.children?et(new yt(t.children,e)):t.loadChildren?void 0!==t._loadedConfig?et(t._loadedConfig):this.runCanLoadGuards(e.injector,t,r).pipe((0,nr.z)(i=>i?this.configLoader.load(e.injector,t).pipe((0,gt.U)(a=>(t._loadedConfig=a,a))):function Rw(n){return new Pn.y(e=>e.error(Yu(`Cannot load children because the guard of the route "path: '${n.path}'" returned false`)))}(t))):et(new yt([],e))}runCanLoadGuards(e,t,r){const i=t.canLoad;return i&&0!==i.length?et(i.map(l=>{const h=e.get(l);let m;if(function nu(n){return n&&Tt(n.canLoad)}(h))m=h.canLoad(t,r);else{if(!Tt(h))throw new Error("Invalid CanLoad guard");m=h(t,r)}return pr(m)})).pipe(gc(),(0,Ii.b)(l=>{if(!fi(l))return;const h=Yu(`Redirecting to "${this.urlSerializer.serialize(l)}"`);throw h.url=l,h}),(0,gt.U)(l=>!0===l)):et(!0)}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return et(r);if(i.numberOfChildren>1||!i.children[kt])return xw(e.redirectTo);i=i.children[kt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreatreUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreatreUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new Y(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return fr(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[a]=t[h]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return fr(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new J(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new Error(`Cannot redirect to '${e}'. Cannot find '${t.path}'.`);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}function Z_(n){const e={};for(const r of Object.keys(n.children)){const a=Z_(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function K_(n){if(1===n.numberOfChildren&&n.children[kt]){const e=n.children[kt];return new J(n.segments.concat(e.segments),e.children)}return n}(new J(n.segments,e))}class Y_{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class hg{constructor(e,t){this.component=e,this.route=t}}function Nw(n,e,t){const r=n._root;return ff(r,e?e._root:null,t,[r.value])}function hf(n,e,t){const r=function fT(n){if(!n)return null;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:t).get(n)}function ff(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=rl(e);return n.children.forEach(l=>{(function Q_(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const m=function pT(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Ze(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Ze(n.url,e.url)||!Fr(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Dd(n,e)||!Fr(n.queryParams,e.queryParams);default:return!Dd(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new Y_(r)):(a.data=l.data,a._resolvedData=l._resolvedData),ff(n,e,a.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new hg(h.outlet.component,l))}else l&&pf(e,h,i),i.canActivateChecks.push(new Y_(r)),ff(n,null,a.component?h?h.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),fr(a,(l,h)=>pf(l,t.getContext(h),i)),i}function pf(n,e,t){const r=rl(n),i=n.value;fr(r,(a,l)=>{pf(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new hg(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class ET{}function X_(n){return new Pn.y(e=>e.error(n))}class bT{constructor(e,t,r,i,a,l){this.rootComponentType=e,this.config=t,this.urlTree=r,this.url=i,this.paramsInheritanceStrategy=a,this.relativeLinkResolution=l}recognize(){const e=Rd(this.urlTree.root,[],[],this.config.filter(l=>void 0===l.redirectTo),this.relativeLinkResolution).segmentGroup,t=this.processSegmentGroup(this.config,e,kt);if(null===t)return null;const r=new tu([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},kt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new To(r,t),a=new Id(this.url,i);return this.inheritParamsAndData(a._root),a}inheritParamsAndData(e){const t=e.value,r=og(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r){return 0===t.segments.length&&t.hasChildren()?this.processChildren(e,t):this.processSegment(e,t,t.segments,r)}processChildren(e,t){const r=[];for(const a of Object.keys(t.children)){const l=t.children[a],h=Ir(e,a),m=this.processSegmentGroup(h,l,a);if(null===m)return null;r.push(...m)}const i=kw(r);return function CT(n){n.sort((e,t)=>e.value.outlet===kt?-1:t.value.outlet===kt?1:e.value.outlet.localeCompare(t.value.outlet))}(i),i}processSegment(e,t,r,i){for(const a of e){const l=this.processSegmentAgainstRoute(a,t,r,i);if(null!==l)return l}return cT(t,r,i)?[]:null}processSegmentAgainstRoute(e,t,r,i){if(e.redirectTo||!Aw(e,t,r,i))return null;let a,l=[],h=[];if("**"===e.path){const U=r.length>0?_d(r).parameters:{};a=new tu(r,U,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Do(e),Xs(e),e.component,e,Mw(t),mc(t)+r.length,DT(e))}else{const U=ug(t,e,r);if(!U.matched)return null;l=U.consumedSegments,h=r.slice(U.lastChild),a=new tu(l,U.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,Do(e),Xs(e),e.component,e,Mw(t),mc(t)+l.length,DT(e))}const m=function TT(n){return n.children?n.children:n.loadChildren?n._loadedConfig.routes:[]}(e),{segmentGroup:w,slicedSegments:D}=Rd(t,l,h,m.filter(U=>void 0===U.redirectTo),this.relativeLinkResolution);if(0===D.length&&w.hasChildren()){const U=this.processChildren(m,w);return null===U?null:[new To(a,U)]}if(0===m.length&&0===D.length)return[new To(a,[])];const S=Xs(e)===i,P=this.processSegment(m,w,D,S?kt:i);return null===P?null:[new To(a,P)]}}function Pw(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function kw(n){const e=[],t=new Set;for(const r of n){if(!Pw(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=kw(r.children);e.push(new To(r.value,i))}return e.filter(r=>!t.has(r))}function Mw(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function mc(n){let e=n,t=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift?e._segmentIndexShift:0;return t-1}function Do(n){return n.data||{}}function DT(n){return n.resolve||{}}function fg(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function ty(n){return Sn(e=>{const t=n(e);return t?(0,En.D)(t).pipe((0,gt.U)(()=>e)):et(e)})}class Fw extends class mf{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const pg=new p.OlP("ROUTES");class gg{constructor(e,t,r,i){this.injector=e,this.compiler=t,this.onLoadStartListener=r,this.onLoadEndListener=i}load(e,t){if(t._loader$)return t._loader$;this.onLoadStartListener&&this.onLoadStartListener(t);const i=this.loadModuleFactory(t.loadChildren).pipe((0,gt.U)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t);const l=a.create(e);return new yt(Ju(l.injector.get(pg,void 0,p.XFs.Self|p.XFs.Optional)).map(cf),l)}),li(a=>{throw t._loader$=void 0,a}));return t._loader$=new Qo(i,()=>new bs.x).pipe(sc()),t._loader$}loadModuleFactory(e){return pr(e()).pipe((0,nr.z)(t=>t instanceof p.YKP?et(t):(0,En.D)(this.compiler.compileModuleAsync(t))))}}class Uw{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function oN(n){throw n}function Pd(n,e,t){return e.parse("/")}function mg(n,e){return et(null)}const Vw={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ST={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let pi=(()=>{class n{constructor(t,r,i,a,l,h,m){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=m,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new bs.x,this.errorHandler=oN,this.malformedUriErrorHandler=Pd,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:mg,afterPreactivation:mg},this.urlHandlingStrategy=new Uw,this.routeReuseStrategy=new Fw,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=l.get(p.h0i),this.console=l.get(p.c2e);const S=l.get(p.R0b);this.isNgZoneEnabled=S instanceof p.R0b&&p.R0b.isInAngularZone(),this.resetConfig(m),this.currentUrlTree=function ta(){return new Y(new J([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new gg(l,h,P=>this.triggerEvent(new bi(P)),P=>this.triggerEvent(new Qa(P))),this.routerState=Ed(this.currentUrlTree,this.rootComponentType),this.transitions=new ui({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var t;return null===(t=this.location.getState())||void 0===t?void 0:t.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(qn(i=>0!==i.id),(0,gt.U)(i=>Object.assign(Object.assign({},i),{extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Sn(i=>{let a=!1,l=!1;return et(i).pipe((0,Ii.b)(h=>{this.currentNavigation={id:h.id,initialUrl:h.currentRawUrl,extractedUrl:h.extractedUrl,trigger:h.source,extras:h.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Sn(h=>{const m=this.browserUrlTree.toString(),w=!this.navigated||h.extractedUrl.toString()!==m||m!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(h.rawUrl))return _g(h.source)&&(this.browserUrlTree=h.extractedUrl),et(h).pipe(Sn(S=>{const P=this.transitions.getValue();return r.next(new qu(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?Cs.E:Promise.resolve(S)}),function dT(n,e,t,r){return Sn(i=>function Ci(n,e,t,r,i){return new df(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,gt.U)(a=>Object.assign(Object.assign({},i),{urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ii.b)(S=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:S.urlAfterRedirects})}),function iN(n,e,t,r,i){return(0,nr.z)(a=>function IT(n,e,t,r,i="emptyOnly",a="legacy"){try{const l=new bT(n,e,t,r,i,a).recognize();return null===l?X_(new ET):et(l)}catch(l){return X_(l)}}(n,e,a.urlAfterRedirects,t(a.urlAfterRedirects),r,i).pipe((0,gt.U)(l=>Object.assign(Object.assign({},a),{targetSnapshot:l}))))}(this.rootComponentType,this.config,S=>this.serializeUrl(S),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ii.b)(S=>{if("eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new Za(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:U,source:q,restoredState:ve,extras:ke}=h,tt=new qu(P,this.serializeUrl(U),q,ve);r.next(tt);const vt=Ed(U,this.rootComponentType).snapshot;return et(Object.assign(Object.assign({},h),{targetSnapshot:vt,urlAfterRedirects:U,extras:Object.assign(Object.assign({},ke),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=h.rawUrl,h.resolve(null),Cs.E}),ty(h=>{const{targetSnapshot:m,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:U}}=h;return this.hooks.beforePreactivation(m,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!U})}),(0,Ii.b)(h=>{const m=new Ya(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot);this.triggerEvent(m)}),(0,gt.U)(h=>Object.assign(Object.assign({},h),{guards:Nw(h.targetSnapshot,h.currentSnapshot,this.rootContexts)})),function J_(n,e){return(0,nr.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?et(Object.assign(Object.assign({},t),{guardsResult:!0})):function gT(n,e,t,r){return(0,En.D)(n).pipe((0,nr.z)(i=>function wT(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?et(a.map(h=>{const m=hf(h,e,i);let w;if(function fc(n){return n&&Tt(n.canDeactivate)}(m))w=pr(m.canDeactivate(n,e,t,r));else{if(!Tt(m))throw new Error("Invalid CanDeactivate guard");w=pr(m(n,e,t,r))}return w.pipe(Xo())})).pipe(gc()):et(!0)}(i.component,i.route,t,e,r)),Xo(i=>!0!==i,!0))}(l,r,i,n).pipe((0,nr.z)(h=>h&&function On(n){return"boolean"==typeof n}(h)?function mT(n,e,t,r){return(0,En.D)(e).pipe(ci(i=>za(function _T(n,e){return null!==n&&e&&e(new zu(n)),et(!0)}(i.route.parent,r),function gf(n,e){return null!==n&&e&&e(new ea(n)),et(!0)}(i.route,r),function vT(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function hT(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>ic(()=>et(l.guards.map(m=>{const w=hf(m,l.node,t);let D;if(function Sd(n){return n&&Tt(n.canActivateChild)}(w))D=pr(w.canActivateChild(r,n));else{if(!Tt(w))throw new Error("Invalid CanActivateChild guard");D=pr(w(r,n))}return D.pipe(Xo())})).pipe(gc())));return et(a).pipe(gc())}(n,i.path,t),function yT(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return et(!0);const i=r.map(a=>ic(()=>{const l=hf(a,e,t);let h;if(function sl(n){return n&&Tt(n.canActivate)}(l))h=pr(l.canActivate(e,n));else{if(!Tt(l))throw new Error("Invalid CanActivate guard");h=pr(l(e,n))}return h.pipe(Xo())}));return et(i).pipe(gc())}(n,i.route,t))),Xo(i=>!0!==i,!0))}(r,a,n,e):et(h)),(0,gt.U)(h=>Object.assign(Object.assign({},t),{guardsResult:h})))})}(this.ngModule.injector,h=>this.triggerEvent(h)),(0,Ii.b)(h=>{if(fi(h.guardsResult)){const w=Yu(`Redirecting to "${this.serializeUrl(h.guardsResult)}"`);throw w.url=h.guardsResult,w}const m=new Qh(h.id,this.serializeUrl(h.extractedUrl),this.serializeUrl(h.urlAfterRedirects),h.targetSnapshot,!!h.guardsResult);this.triggerEvent(m)}),qn(h=>!!h.guardsResult||(this.restoreHistory(h),this.cancelNavigationTransition(h,""),!1)),ty(h=>{if(h.guards.canActivateChecks.length)return et(h).pipe((0,Ii.b)(m=>{const w=new Wu(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}),Sn(m=>{let w=!1;return et(m).pipe(function Ow(n,e){return(0,nr.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return et(t);let a=0;return(0,En.D)(i).pipe(ci(l=>function sN(n,e,t,r){return function ra(n,e,t,r){const i=fg(n);if(0===i.length)return et({});const a={};return(0,En.D)(i).pipe((0,nr.z)(l=>function ey(n,e,t,r){const i=hf(n,e,r);return pr(i.resolve?i.resolve(e,t):i(e,t))}(n[l],e,t,r).pipe((0,Ii.b)(h=>{a[l]=h}))),md(1),(0,nr.z)(()=>fg(a).length===i.length?et(a):Cs.E))}(n._resolve,n,e,r).pipe((0,gt.U)(a=>(n._resolvedData=a,n.data=Object.assign(Object.assign({},n.data),og(n,t).resolve),null)))}(l.route,r,n,e)),(0,Ii.b)(()=>a++),md(1),(0,nr.z)(l=>a===i.length?et(t):Cs.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ii.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(m),this.cancelNavigationTransition(m,"At least one route resolver didn't emit any value."))}}))}),(0,Ii.b)(m=>{const w=new Gr(m.id,this.serializeUrl(m.extractedUrl),this.serializeUrl(m.urlAfterRedirects),m.targetSnapshot);this.triggerEvent(w)}))}),ty(h=>{const{targetSnapshot:m,id:w,extractedUrl:D,rawUrl:S,extras:{skipLocationChange:P,replaceUrl:U}}=h;return this.hooks.afterPreactivation(m,{navigationId:w,appliedUrlTree:D,rawUrlTree:S,skipLocationChange:!!P,replaceUrl:!!U})}),(0,gt.U)(h=>{const m=function j_(n,e,t){const r=hc(n,e._root,t?t._root:void 0);return new dc(r,e)}(this.routeReuseStrategy,h.targetSnapshot,h.currentRouterState);return Object.assign(Object.assign({},h),{targetRouterState:m})}),(0,Ii.b)(h=>{this.currentUrlTree=h.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(h.urlAfterRedirects,h.rawUrl),this.routerState=h.targetRouterState,"deferred"===this.urlUpdateStrategy&&(h.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,h),this.browserUrlTree=h.urlAfterRedirects)}),((n,e,t)=>(0,gt.U)(r=>(new Pe(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,h=>this.triggerEvent(h)),(0,Ii.b)({next(){a=!0},complete(){a=!0}}),function Yh(n){return(0,Rr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}(()=>{var h;a||l||this.cancelNavigationTransition(i,`Navigation ID ${i.id} is not equal to the current navigation id ${this.navigationId}`),(null===(h=this.currentNavigation)||void 0===h?void 0:h.id)===i.id&&(this.currentNavigation=null)}),li(h=>{if(l=!0,function Co(n){return n&&n[hi]}(h)){const m=fi(h.url);m||(this.navigated=!0,this.restoreHistory(i,!0));const w=new ac(i.id,this.serializeUrl(i.extractedUrl),h.message);r.next(w),m?setTimeout(()=>{const D=this.urlHandlingStrategy.merge(h.url,this.rawUrlTree),S={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||_g(i.source)};this.scheduleNavigation(D,"imperative",null,S,{resolve:i.resolve,reject:i.reject,promise:i.promise})},0):i.resolve(!1)}else{this.restoreHistory(i,!0);const m=new rr(i.id,this.serializeUrl(i.extractedUrl),h);r.next(m);try{i.resolve(this.errorHandler(h))}catch(w){i.reject(w)}}return Cs.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{var i;const a={replaceUrl:!0},l=(null===(i=t.state)||void 0===i?void 0:i.navigationId)?t.state:null;if(l){const m=Object.assign({},l);delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(a.state=m)}const h=this.parseUrl(t.url);this.scheduleNavigation(h,r,l,a)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){lf(t),this.config=t.map(cf),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,w=i||this.routerState.root,D=m?this.currentUrlTree.fragment:l;let S=null;switch(h){case"merge":S=Object.assign(Object.assign({},this.currentUrlTree.queryParams),a);break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),function tf(n,e,t,r,i){if(0===t.length)return nf(e.root,e.root,e,r,i);const a=function G_(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new $_(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const h={};return fr(a.outlets,(m,w)=>{h[w]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,a]},[]);return new $_(t,e,r)}(t);if(a.toRoot())return nf(e.root,new J([],{}),e,r,i);const l=function Tw(n,e,t){if(n.isAbsolute)return new sf(e.root,!0,0);if(-1===t.snapshot._lastPathIndex){const a=t.snapshot._urlSegment;return new sf(a,a===e.root,0)}const r=Rs(n.commands[0])?0:1;return function ag(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new sf(r,!1,i-a)}(t.snapshot._urlSegment,t.snapshot._lastPathIndex+r,n.numberOfDoubleDots)}(a,e,n),h=l.processChildren?v(l.segmentGroup,l.index,a.commands):W_(l.segmentGroup,l.index,a.commands);return nf(l.segmentGroup,h,e,r,i)}(w,this.currentUrlTree,t,S,null!=D?D:null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=fi(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function AT(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new Error(`The requested path contains ${t} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?Object.assign({},Vw):!1===r?Object.assign({},ST):r,fi(t))return Xu(this.currentUrlTree,t,i);const a=this.parseUrl(t);return Xu(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ds(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){var h,m,w;if(this.disposed)return Promise.resolve(!1);const D=this.transitions.value,S=_g(r)&&D&&!_g(D.source),P=D.rawUrl.toString()===t.toString(),U=D.id===(null===(h=this.currentNavigation)||void 0===h?void 0:h.id);if(S&&P&&U)return Promise.resolve(!0);let ve,ke,tt;l?(ve=l.resolve,ke=l.reject,tt=l.promise):tt=new Promise((dt,vn)=>{ve=dt,ke=vn});const vt=++this.navigationId;let It;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),It=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?null!==(m=this.browserPageId)&&void 0!==m?m:0:(null!==(w=this.browserPageId)&&void 0!==w?w:0)+1):It=0,this.setTransition({id:vt,targetPageId:It,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:ve,reject:ke,promise:tt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),tt.catch(dt=>Promise.reject(dt))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a=Object.assign(Object.assign({},r.extras.state),this.generateNgRouterState(r.id,r.targetPageId));this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){var i,a;if("computed"===this.canceledNavigationResolution){const l=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(i=this.currentNavigation)||void 0===i?void 0:i.finalUrl)||0===l?this.currentUrlTree===(null===(a=this.currentNavigation)||void 0===a?void 0:a.finalUrl)&&0===l&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(l)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r){const i=new ac(t.id,this.serializeUrl(t.extractedUrl),r);this.triggerEvent(i),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function _g(n){return"imperative"!==n}let ru=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this.commands=null,this.onChanges=new bs.x,this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){if(null===this.urlTree)return!0;const t={skipLocationChange:kd(this.skipLocationChange),replaceUrl:kd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:kd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(pi),p.Y36(na),p.$8M("tabindex"),p.Y36(p.Qsj),p.Y36(p.SBq))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&p.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})(),yg=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this.commands=null,this.href=null,this.onChanges=new bs.x,this.subscription=t.events.subscribe(a=>{a instanceof Ds&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){if(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const h={skipLocationChange:kd(this.skipLocationChange),replaceUrl:kd(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,h),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:kd(this.preserveFragment)})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(pi),p.Y36(na),p.Y36(Q))},n.\u0275dir=p.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&p.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&p.uIk("target",r.target)("href",r.href,p.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[p.TTD]}),n})();function kd(n){return""===n||!!n}let Bw=(()=>{class n{constructor(t,r,i,a,l,h){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.linkWithHref=h,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new p.vpe,this.routerEventsSubscription=t.events.subscribe(m=>{m instanceof Ds&&this.update()})}ngAfterContentInit(){et(this.links.changes,this.linksWithHrefs.changes,et(null)).pipe((0,as.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){var t;null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe();const r=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(i=>!!i).map(i=>i.onChanges);this.linkInputChangesSubscription=(0,En.D)(r).pipe((0,as.J)()).subscribe(i=>{this.isActive!==this.isLinkActive(this.router)(i)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){var t;this.routerEventsSubscription.unsubscribe(),null===(t=this.linkInputChangesSubscription)||void 0===t||t.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function jw(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(pi),p.Y36(p.SBq),p.Y36(p.Qsj),p.Y36(p.sBO),p.Y36(ru,8),p.Y36(yg,8))},n.\u0275dir=p.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(p.Suo(i,ru,5),p.Suo(i,yg,5)),2&t){let a;p.iGM(a=p.CRH())&&(r.links=a),p.iGM(a=p.CRH())&&(r.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],features:[p.TTD]}),n})();class vg{}class wg{preload(e,t){return et(null)}}let $w=(()=>{class n{constructor(t,r,i,a){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=new gg(i,r,m=>t.triggerEvent(new bi(m)),m=>t.triggerEvent(new Qa(m)))}setUpPreloading(){this.subscription=this.router.events.pipe(qn(t=>t instanceof Ds),ci(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(p.h0i);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r)if(a.loadChildren&&!a.canLoad&&a._loadedConfig){const l=a._loadedConfig;i.push(this.processRoutes(l.module,l.routes))}else a.loadChildren&&!a.canLoad?i.push(this.preloadConfig(t,a)):a.children&&i.push(this.processRoutes(t,a.children));return(0,En.D)(i).pipe((0,as.J)(),(0,gt.U)(a=>{}))}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>(r._loadedConfig?et(r._loadedConfig):this.loader.load(t.injector,r)).pipe((0,nr.z)(a=>(r._loadedConfig=a,this.processRoutes(a.module,a.routes)))))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pi),p.LFG(p.Sil),p.LFG(p.zs3),p.LFG(vg))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),ry=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qu?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ds&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Ku&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Ku(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){p.$Z()},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const ul=new p.OlP("ROUTER_CONFIGURATION"),ll=new p.OlP("ROUTER_FORROOT_GUARD"),Gw=[Ce,{provide:Xt,useClass:Wn},{provide:pi,useFactory:function Kw(n,e,t,r,i,a,l={},h,m){const w=new pi(null,n,e,t,r,i,Ju(a));return h&&(w.urlHandlingStrategy=h),m&&(w.routeReuseStrategy=m),function sy(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,w),l.enableTracing&&w.events.subscribe(D=>{var S,P;null===(S=console.group)||void 0===S||S.call(console,`Router Event: ${D.constructor.name}`),console.log(D.toString()),console.log(D),null===(P=console.groupEnd)||void 0===P||P.call(console)}),w},deps:[Xt,ol,Ce,p.zs3,p.Sil,pg,ul,[class ny{},new p.FiY],[class Lw{},new p.FiY]]},ol,{provide:na,useFactory:function Zw(n){return n.routerState.root},deps:[pi]},$w,wg,class Hw{preload(e,t){return t().pipe(li(()=>et(null)))}},{provide:ul,useValue:{enableTracing:!1}}];function qw(){return new p.PXZ("Router",pi)}let Ww=(()=>{class n{constructor(t,r){}static forRoot(t,r){return{ngModule:n,providers:[Gw,iy(t),{provide:ll,useFactory:zw,deps:[[pi,new p.FiY,new p.tp0]]},{provide:ul,useValue:r||{}},{provide:Q,useFactory:RT,deps:[ue,[new p.tBr(Re),new p.FiY],ul]},{provide:ry,useFactory:Eg,deps:[pi,cd,ul]},{provide:vg,useExisting:r&&r.preloadingStrategy?r.preloadingStrategy:wg},{provide:p.PXZ,multi:!0,useFactory:qw},[Md,{provide:p.ip1,multi:!0,useFactory:Ig,deps:[Md]},{provide:bg,useFactory:Yw,deps:[Md]},{provide:p.tb,multi:!0,useExisting:bg}]]}}static forChild(t){return{ngModule:n,providers:[iy(t)]}}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(ll,8),p.LFG(pi,8))},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})();function Eg(n,e,t){return t.scrollOffset&&e.setOffset(t.scrollOffset),new ry(n,e,t)}function RT(n,e,t={}){return t.useHash?new he(n,e):new Ne(n,e)}function zw(n){return"guarded"}function iy(n){return[{provide:p.deG,multi:!0,useValue:n},{provide:pg,multi:!0,useValue:n}]}let Md=(()=>{class n{constructor(t){this.injector=t,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new bs.x}appInitializer(){return this.injector.get(G,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let r=null;const i=new Promise(h=>r=h),a=this.injector.get(pi),l=this.injector.get(ul);return"disabled"===l.initialNavigation?(a.setUpLocationChangeListener(),r(!0)):"enabled"===l.initialNavigation||"enabledBlocking"===l.initialNavigation?(a.hooks.afterPreactivation=()=>this.initNavigation?et(null):(this.initNavigation=!0,r(!0),this.resultOfPreactivationDone),a.initialNavigation()):r(!0),i})}bootstrapListener(t){const r=this.injector.get(ul),i=this.injector.get($w),a=this.injector.get(ry),l=this.injector.get(pi),h=this.injector.get(p.z2F);t===h.components[0]&&(("enabledNonBlocking"===r.initialNavigation||void 0===r.initialNavigation)&&l.initialNavigation(),i.setUpPreloading(),a.init(),l.resetRootComponentType(h.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function Ig(n){return n.appInitializer.bind(n)}function Yw(n){return n.bootstrapListener.bind(n)}const bg=new p.OlP("Router Initializer");let _f=(()=>{class n{constructor(){this.title="angularfiebase-authentication"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&p._UZ(0,"router-outlet")},directives:[xd],styles:[""]}),n})();var Vr=O(2011),Cg=O(6451),Tg=O(5363),NT=O(6063);class Xw extends bs.x{constructor(e=1/0,t=1/0,r=NT.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}var Dg=O(3099);function oy(n,e,t){var r,i;let a,l=!1;return n&&"object"==typeof n?(a=null!==(r=n.bufferSize)&&void 0!==r?r:1/0,e=null!==(i=n.windowTime)&&void 0!==i?i:1/0,l=!!n.refCount,t=n.scheduler):a=null!=n?n:1/0,(0,Dg.B)({connector:()=>new Xw(a,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:l})}function PT(n,e){return(0,oc.m)(e)?Sn(()=>n,e):Sn(()=>n)}var Sg=O(9468),un=O(5813);O(5867);var Ee=O(5861),Ln=O(9681),eo=O(4859),M=O(2090),Ns=O(1877);const sa=new Map,uy={activated:!1,tokenObservers:[]},eE={initialized:!1,enabled:!1};function Nr(n){return sa.get(n)||uy}function oa(n,e){sa.set(n,e)}function yf(){return eE}class hN{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ee.Z)(function*(){t.stop();try{t.pending=new M.BH,yield function jT(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new M.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Gi=new M.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function dy(n){if(!Nr(n).activated)throw Gi.create("use-before-activation",{appName:n.name})}function Mg(n,e){return Og.apply(this,arguments)}function Og(){return(Og=(0,Ee.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});i&&(r["X-Firebase-Client"]=i.getPlatformInfoString());const a={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,a)}catch(S){throw Gi.create("fetch-network-error",{originalErrorMessage:S.message})}if(200!==l.status)throw Gi.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Gi.create("fetch-parse-error",{originalErrorMessage:S.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Gi.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const w=1e3*Number(m[1]),D=Date.now();return{token:h.attestationToken,expireTimeMillis:D+w,issuedAtTimeMillis:D}})).apply(this,arguments)}function pN(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const Lg="firebase-app-check-store";let gy=null;function qT(){return gy||(gy=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Gi.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Lg,{keyPath:"compositeKey"})}}catch(t){e(Gi.create("storage-open",{originalErrorMessage:t.message}))}}),gy)}function my(){return(my=(0,Ee.Z)(function*(n,e){const r=(yield qT()).transaction(Lg,"readwrite"),a=r.objectStore(Lg).put({compositeKey:n,value:e});return new Promise((l,h)=>{a.onsuccess=m=>{l()},r.onerror=m=>{var w;h(Gi.create("storage-set",{originalErrorMessage:null===(w=m.target.error)||void 0===w?void 0:w.message}))}})})).apply(this,arguments)}const _c=new Ns.Yd("@firebase/app-check");function vy(n,e){return(0,M.hl)()?function yN(n,e){return function Fg(n,e){return my.apply(this,arguments)}(function yy(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{_c.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function nE(){return yf().enabled}function wy(){return Ey.apply(this,arguments)}function Ey(){return(Ey=(0,Ee.Z)(function*(){const n=yf();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Ef={error:"UNKNOWN_ERROR"};function Od(n){return M.US.encodeString(JSON.stringify(n),!1)}function Ld(n){return dl.apply(this,arguments)}function dl(){return(dl=(0,Ee.Z)(function*(n,e=!1){const t=n.app;dy(t);const r=Nr(t);let a,i=r.token;if(!i){const m=yield r.cachedTokenPromise;m&&Fd(m)&&(i=m)}if(!e&&i&&Fd(i))return{token:i.token};let h,l=!1;if(nE()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Mg(pN(t,yield wy()),n.platformLoggerProvider).then(w=>(r.exchangeTokenPromise=void 0,w)),l=!0);const m=yield r.exchangeTokenPromise;return yield vy(t,m),oa(t,Object.assign(Object.assign({},r),{token:m})),{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().then(m=>(r.exchangeTokenPromise=void 0,m)),l=!0),i=yield r.exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?_c.warn(m.message):_c.error(m),a=m}return i?(h={token:i.token},oa(t,Object.assign(Object.assign({},r),{token:i})),yield vy(t,i)):h=by(a),l&&Iy(t,h),h})).apply(this,arguments)}function hl(n,e){const t=Nr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),oa(n,Object.assign(Object.assign({},t),{tokenObservers:r}))}function rE(n){const{app:e}=n,t=Nr(e);let r=t.tokenRefresher;r||(r=function iE(n){const{app:e}=n;return new hN((0,Ee.Z)(function*(){let r;if(r=Nr(e).token?yield Ld(n,!0):yield Ld(n),r.error)throw r.error}),()=>!0,()=>{const t=Nr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),oa(e,Object.assign(Object.assign({},t),{tokenRefresher:r}))),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function Iy(n,e){const t=Nr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch(i){}}function Fd(n){return n.expireTimeMillis-Date.now()>0}function by(n){return{token:Od(Ef),error:n}}class sE{constructor(e,t){this.app=e,this.platformLoggerProvider=t}_delete(){const{tokenObservers:e}=Nr(this.app);for(const t of e)hl(this.app,t.next);return Promise.resolve()}}const hE="app-check-internal";!function fE(){(0,Ln._registerComponent)(new eo.wA("app-check",n=>function Ug(n,e){return new sE(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("platform-logger")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(hE).initialize()})),(0,Ln._registerComponent)(new eo.wA(hE,n=>function ZT(n){return{getToken:e=>Ld(n,e),addTokenListener:e=>function yc(n,e,t,r){const{app:i}=n,a=Nr(i),l={next:t,error:r,type:e};if(oa(i,Object.assign(Object.assign({},a),{tokenObservers:[...a.tokenObservers,l]})),a.token&&Fd(a.token)){const h=a.token;Promise.resolve().then(()=>{t({token:h.token}),rE(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>rE(n))}(n,"INTERNAL",e),removeTokenListener:e=>hl(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Ln.registerVersion)("@firebase/app-check","0.5.3")}();class ds{constructor(){return(0,un.vb)("app-check")}}"undefined"!=typeof window&&window;var Ud=O(127);const Py=new p.OlP("angularfire2.auth.use-emulator"),ky=new p.OlP("angularfire2.auth.settings"),If=new p.OlP("angularfire2.auth.tenant-id"),vE=new p.OlP("angularfire2.auth.langugage-code"),My=new p.OlP("angularfire2.auth.use-device-language"),jg=new p.OlP("angularfire.auth.persistence"),Hg=(n,e,t,r,i,a,l,h)=>(0,Vr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,a&&m.useDeviceLanguage(),l)for(const[w,D]of Object.entries(l))m.settings[w]=D;return h&&m.setPersistence(h),m},[t,r,i,a,l,h]);let to=(()=>{class n{constructor(t,r,i,a,l,h,m,w,D,S,P,U){const q=new bs.x,ve=et(void 0).pipe((0,Tg.Q)(l.outsideAngular),Sn(()=>a.runOutsideAngular(()=>Promise.resolve().then(O.bind(O,5881)))),(0,gt.U)(()=>(0,Vr.on)(t,a,r)),(0,gt.U)(ke=>Hg(ke,a,h,w,D,S,m,P)),oy({bufferSize:1,refCount:!1}));if(Pa(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=et(null);else{ve.pipe(Xo()).subscribe();const tt=ve.pipe(Sn(dt=>dt.getRedirectResult().then(vn=>vn,()=>null)),un.iC,oy({bufferSize:1,refCount:!1})),vt=ve.pipe(Sn(dt=>new Pn.y(vn=>({unsubscribe:a.runOutsideAngular(()=>dt.onAuthStateChanged(Li=>vn.next(Li),Li=>vn.error(Li),()=>vn.complete()))})))),It=ve.pipe(Sn(dt=>new Pn.y(vn=>({unsubscribe:a.runOutsideAngular(()=>dt.onIdTokenChanged(Li=>vn.next(Li),Li=>vn.error(Li),()=>vn.complete()))}))));this.authState=tt.pipe(PT(vt),(0,Sg.R)(l.outsideAngular),(0,Tg.Q)(l.insideAngular)),this.user=tt.pipe(PT(It),(0,Sg.R)(l.outsideAngular),(0,Tg.Q)(l.insideAngular)),this.idToken=this.user.pipe(Sn(dt=>dt?(0,En.D)(dt.getIdToken()):et(null))),this.idTokenResult=this.user.pipe(Sn(dt=>dt?(0,En.D)(dt.getIdTokenResult()):et(null))),this.credential=(0,Cg.T)(tt,q,this.authState.pipe(qn(dt=>!dt))).pipe((0,gt.U)(dt=>(null==dt?void 0:dt.user)?dt:null),(0,Sg.R)(l.outsideAngular),(0,Tg.Q)(l.insideAngular))}return(0,Vr.pX)(this,ve,a,{spy:{apply:(ke,tt,vt)=>{(ke.startsWith("signIn")||ke.startsWith("createUser"))&&vt.then(It=>q.next(It))}}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vr.Dh),p.LFG(Vr.xv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(un.HU),p.LFG(Py,8),p.LFG(ky,8),p.LFG(If,8),p.LFG(vE,8),p.LFG(My,8),p.LFG(jg,8),p.LFG(ds,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wE=(()=>{class n{constructor(){Ud.Z.registerVersion("angularfire",un.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[to]}),n})();var $g=O(4986),Vd=O(3942);const EE="firebasestorage.googleapis.com",IE="storageBucket";class ir extends M.ZR{constructor(e,t){super(bf(e),`Firebase Storage: ${t} (${bf(e)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ir.prototype)}_codeEquals(e){return bf(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function bf(n){return"storage/"+n}function vc(){return new ir("unknown","An unknown error occurred, please check the error payload for server response.")}function Gg(){return new ir("canceled","User canceled the upload/download.")}function wc(){return new ir("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function Bd(n){return new ir("invalid-argument",n)}function Ec(){return new ir("app-deleted","The Firebase app was deleted.")}function AE(n){return new ir("invalid-root-operation","The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Cf(n,e){return new ir("invalid-format","String does not match format '"+n+"': "+e)}function Tf(n){throw new ir("internal-error","Internal error: "+n)}class Ti{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ti.makeFromUrl(e,t)}catch(i){return new Ti(e,"")}if(""===r.path)return r;throw function cD(n){return new ir("invalid-default-bucket","Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",h=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(dt){dt.path_=decodeURIComponent(dt.path)}const S=t.replace(/[.]/g,"\\."),It=[{regex:h,indices:{bucket:1,path:3},postModify:function a(dt){"/"===dt.path.charAt(dt.path.length-1)&&(dt.path_=dt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===EE?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let dt=0;dt<It.length;dt++){const vn=It[dt],Li=vn.regex.exec(e);if(Li){let Iw=Li[vn.indices.path];Iw||(Iw=""),r=new Ti(Li[vn.indices.bucket],Iw),vn.postModify(r);break}}if(null==r)throw function lD(n){return new ir("invalid-url","Invalid URL '"+n+"'.")}(e);return r}}class no{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function qg(n){return"string"==typeof n||n instanceof String}function kE(n){return Uy()&&n instanceof Blob}function Uy(){return"undefined"!=typeof Blob}function Vy(n,e,t,r){if(r<e)throw Bd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw Bd(`Invalid value for '${n}'. Expected ${t} or less.`)}function ua(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function hD(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var su=(()=>{return(n=su||(su={}))[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT",su;var n})();class fD{constructor(e,t,r,i,a,l,h,m,w,D,S){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=h,this.errorCallback_=m,this.timeout_=w,this.progressCallback_=D,this.connectionFactory_=S,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((P,U)=>{this.resolve_=P,this.reject_=U,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,h=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(h,h.getResponse());!function RE(n){return void 0!==n}(m)?a():a(m)}catch(m){l(m)}else if(null!==h){const m=vc();m.serverResponse=h.getErrorText(),l(this.errorCallback_?this.errorCallback_(h,m):m)}else l(i.canceled?this.appDelete_?Ec():Gg():function uD(){return new ir("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?t(0,new Wg(!1,null,!0)):this.backoffId_=function Fy(n,e,t){let r=1,i=null,a=null,l=!1,h=0;function m(){return 2===h}let w=!1;function D(...ke){w||(w=!0,e.apply(null,ke))}function S(ke){i=setTimeout(()=>{i=null,n(U,m())},ke)}function P(){a&&clearTimeout(a)}function U(ke,...tt){if(w)return void P();if(ke)return P(),void D.call(null,ke,...tt);if(m()||l)return P(),void D.call(null,ke,...tt);let It;r<64&&(r*=2),1===h?(h=2,It=0):It=1e3*(r+Math.random()),S(It)}let q=!1;function ve(ke){q||(q=!0,P(),!w&&(null!==i?(ke||(h=2),clearTimeout(i),S(0)):ke||(h=1)))}return S(0),a=setTimeout(()=>{l=!0,ve(!0)},t),ve}((r,i)=>{if(i)return void r(!1,new Wg(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=h=>{null!==this.progressCallback_&&this.progressCallback_(h.loaded,h.lengthComputable?h.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const h=a.getErrorCode()===su.NO_ERROR,m=a.getStatus();if(!h||this.isRetryStatusCode_(m)){const D=a.getErrorCode()===su.ABORT;return void r(!1,new Wg(!1,null,D))}const w=-1!==this.successCodes_.indexOf(m);r(!0,new Wg(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function xE(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(e){const t=e>=500&&e<600,i=-1!==[408,429].indexOf(e),a=-1!==this.additionalRetryCodes_.indexOf(e);return t||i||a}}class Wg{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function kN(...n){const e=function OE(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(Uy())return new Blob(n);throw new ir("unsupported-environment","This browser doesn't seem to support creating Blobs")}const ro={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class zg{constructor(e,t){this.data=e,this.contentType=t||null}}function Kg(n,e){switch(n){case ro.RAW:return new zg(jy(e));case ro.BASE64:case ro.BASE64URL:return new zg(mD(n,e));case ro.DATA_URL:return new zg(function LE(n){const e=new Hy(n);return e.base64?mD(ro.BASE64,e.rest):function gD(n){let e;try{e=decodeURIComponent(n)}catch(t){throw Cf(ro.DATA_URL,"Malformed data URL.")}return jy(e)}(e.rest)}(e),function _D(n){return new Hy(n).contentType}(e))}throw vc()}function jy(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function mD(n,e){switch(n){case ro.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw Cf(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ro.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw Cf(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function MN(n){return atob(n)}(e)}catch(i){throw Cf(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class Hy{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw Cf(ro.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function $y(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class la{constructor(e,t){let r=0,i="";kE(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(kE(this.data_)){const i=function So(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new la(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new la(r,!0)}}static getBlob(...e){if(Uy()){const t=e.map(r=>r instanceof la?r.data_:r);return new la(kN.apply(null,t))}{const t=e.map(l=>qg(l)?Kg(ro.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let h=0;h<l.length;h++)i[a++]=l[h]}),new la(i,!0)}}uploadData(){return this.data_}}function Gy(n){let e;try{e=JSON.parse(n)}catch(t){return null}return function PE(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function FE(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function wD(n,e){return e}class Kr{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||wD}}let ou=null;function au(){if(ou)return ou;const n=[];n.push(new Kr("bucket")),n.push(new Kr("generation")),n.push(new Kr("metageneration")),n.push(new Kr("name","fullPath",!0));const t=new Kr("name");t.xform=function e(a,l){return function ED(n){return!qg(n)||n.length<2?n:FE(n)}(l)},n.push(t);const i=new Kr("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new Kr("timeCreated")),n.push(new Kr("updated")),n.push(new Kr("md5Hash",null,!0)),n.push(new Kr("cacheControl",null,!0)),n.push(new Kr("contentDisposition",null,!0)),n.push(new Kr("contentEncoding",null,!0)),n.push(new Kr("contentLanguage",null,!0)),n.push(new Kr("contentType",null,!0)),n.push(new Kr("metadata","customMetadata",!0)),ou=n,ou}function Zg(n,e,t){const r=Gy(e);return null===r?null:function bD(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function ID(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new Ti(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function Ic(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const gi="prefixes";class so{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function qi(n){if(!n)throw vc()}function uu(n,e){return function t(r,i){const a=Zg(n,i,e);return qi(null!==a),a}}function Ao(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function CE(){return new ir("unauthorized-app","This app does not have permission to access Firebase Storage on this project.")}():function bE(){return new ir("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function Ly(n){return new ir("quota-exceeded","Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function TE(n){return new ir("unauthorized","User does not have permission to access '"+n+"'.")}(n.path):r,i.serverResponse=r.serverResponse,i}}function da(n){const e=Ao(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function aD(n){return new ir("object-not-found","Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function bc(n,e,t){const i=ua(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new so(i,"GET",uu(n,t),l);return h.errorHandler=da(e),h}function $d(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const h=ua(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,D=new so(h,"GET",function jd(n,e){return function t(r,i){const a=function io(n,e,t){const r=Gy(t);return null===r?null:function Yg(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[gi])for(const i of t[gi]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new Ti(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new Ti(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return qi(null!==a),a}}(n,e.bucket),w);return D.urlParams=a,D.errorHandler=Ao(e),D}function qy(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function jE(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class Df{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function Qg(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch(i){qi(!1)}return qi(!!t&&-1!==(e||["active"]).indexOf(t)),t}const $E={STATE_CHANGED:"state_changed"},Di={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Ky(n){switch(n){case"running":case"pausing":case"canceling":return Di.RUNNING;case"paused":return Di.PAUSED;case"success":return Di.SUCCESS;case"canceled":return Di.CANCELED;default:return Di.ERROR}}class DD{constructor(e,t,r){if(function NE(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=null!=t?t:void 0,this.complete=null!=r?r:void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Tc(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class SD extends class qE{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=su.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=su.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=su.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Tf("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Tf("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Tf("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}getResponse(){if(!this.sent_)throw Tf("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Tf("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function xo(){return new SD}class WE{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=au(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{this._request=void 0,this._chunkMultiplier=1,i._codeEquals("canceled")?(this._needToFetchStatus=!0,this.completeTransitions_()):(this._error=i,this._transition("error"))},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals("canceled")?this.completeTransitions_():(this._error=i,this._transition("error"))},this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function HE(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=qy(e,r,i),h={name:l.fullPath},m=ua(a,n.host,n._protocol),D={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=Ic(l,t),q=new so(m,"POST",function U(ve){let ke;Qg(ve);try{ke=ve.getResponseHeader("X-Goog-Upload-URL")}catch(tt){qi(!1)}return qi(qg(ke)),ke},n.maxUploadRetryTime);return q.urlParams=h,q.headers=D,q.body=S,q.errorHandler=Ao(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,xo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function CD(n,e,t,r){const m=new so(t,"POST",function a(w){const D=Qg(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch(U){qi(!1)}S||qi(!1);const P=Number(S);return qi(!isNaN(P)),new Df(P,r.size(),"final"===D)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=Ao(e),m}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,xo,t,r);this._request=a,a.getPromise().then(l=>{l=l,this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new Df(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function TD(n,e,t,r,i,a,l,h){const m=new Df(0,0);if(l?(m.current=l.current,m.total=l.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function SE(){return new ir("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.")}();const w=m.total-m.current;let D=w;i>0&&(D=Math.min(D,i));const S=m.current,q={"X-Goog-Upload-Command":D===w?"upload, finalize":"upload","X-Goog-Upload-Offset":`${m.current}`},ve=r.slice(S,S+D);if(null===ve)throw wc();const It=new so(t,"POST",function ke(dt,vn){const Li=Qg(dt,["active","final"]),Bh=m.current+D,Iw=r.size();let nN;return nN="final"===Li?uu(e,a)(dt,vn):null,new Df(Bh,Iw,"final"===Li,nN)},e.maxUploadRetryTime);return It.headers=q,It.body=ve.uploadData(),It.progressCallback=h||null,It.errorHandler=Ao(n),It}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const h=this._ref.storage._makeRequest(l,xo,i,a);this._request=h,h.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=bc(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,xo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Wy(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},m=function h(){let It="";for(let dt=0;dt<2;dt++)It+=Math.random().toString().slice(2);return It}();l["Content-Type"]="multipart/related; boundary="+m;const w=qy(e,r,i),D=Ic(w,t),U=la.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+D+"\r\n--"+m+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===U)throw wc();const q={name:w.fullPath},ve=ua(a,n.host,n._protocol),tt=n.maxUploadRetryTime,vt=new so(ve,"POST",uu(n,t),tt);return vt.urlParams=q,vt.headers=l,vt.body=U.uploadData(),vt.errorHandler=Ao(e),vt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,xo,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request&&this._request.cancel();break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Gg(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=Ky(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new DD(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(Ky(this._state)){case Di.SUCCESS:Tc(this._resolve.bind(null,this.snapshot))();break;case Di.CANCELED:case Di.ERROR:Tc(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(Ky(this._state)){case Di.RUNNING:case Di.PAUSED:e.next&&Tc(e.next.bind(e,this.snapshot))();break;case Di.SUCCESS:e.complete&&Tc(e.complete.bind(e))();break;default:e.error&&Tc(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Gd{constructor(e,t){this._service=e,this._location=t instanceof Ti?t:Ti.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Gd(e,t)}get root(){const e=new Ti(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FE(this._location.path)}get storage(){return this._service}get parent(){const e=function yD(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ti(this._location.bucket,e);return new Gd(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw AE(e)}}function Dc(n,e,t){return Qy.apply(this,arguments)}function Qy(){return(Qy=(0,Ee.Z)(function*(n,e,t){const i=yield Jy(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield Dc(n,e,i.nextPageToken))})).apply(this,arguments)}function Jy(n,e){null!=e&&"number"==typeof e.maxResults&&Vy("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=$d(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,xo)}function Jg(n){n._throwIfRoot("getDownloadURL");const e=function UE(n,e,t){const i=ua(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,h=new so(i,"GET",function Hd(n,e){return function t(r,i){const a=Zg(n,i,e);return qi(null!==a),function ca(n,e,t,r){const i=Gy(e);if(null===i||!qg(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return ua("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+hD({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return h.errorHandler=da(e),h}(n.storage,n._location,au());return n.storage.makeRequestWithTokens(e,xo).then(t=>{if(null===t)throw function dD(){return new ir("no-download-url","The given file does not have any download URLs.")}();return t})}function Xy(n,e){const t=function vD(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ti(n._location.bucket,t);return new Gd(n.storage,r)}function YE(n,e){if(n instanceof ev){const t=n;if(null==t._bucket)throw function DE(){return new ir("no-default-bucket","No default bucket found. Did you set the '"+IE+"' property when initializing the app?")}();const r=new Gd(t,t._bucket);return null!=e?YE(r,e):r}return void 0!==e?Xy(n,e):n}function MD(n,e){if(e&&function PD(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ev)return function kD(n,e){return new Gd(n,e)}(n,e);throw Bd("To use ref(service, url), the first argument must be a Storage instance.")}return YE(n,e)}function QE(n,e){const t=null==e?void 0:e[IE];return null==t?null:Ti.makeFromBucketSpec(t,n)}class ev{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=EE,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ti.makeFromBucketSpec(i,this._host):QE(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ti.makeFromBucketSpec(this._url,e):QE(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Vy("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Vy("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,Ee.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,Ee.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Gd(this,e)}_makeRequest(e,t,r,i){if(this._deleted)return new no(Ec());{const a=function ME(n,e,t,r,i,a){const l=hD(n.urlParams),h=n.url+l,m=Object.assign({},n.headers);return function By(n,e){e&&(n["X-Firebase-GMPID"]=e)}(m,e),function NN(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(m,t),function PN(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(m,a),function pD(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(m,r),new fD(h,n.method,m,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i)}(e,this._appId,r,i,t,this._firebaseVersion);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}makeRequestWithTokens(e,t){var r=this;return(0,Ee.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const tv="@firebase/storage";function Af(n,e){return MD(n=(0,M.m9)(n),e)}function rI(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ev(t,r,i,e,Ln.SDK_VERSION)}!function iI(){(0,Ln._registerComponent)(new eo.wA("storage",rI,"PUBLIC").setMultipleInstances(!0)),(0,Ln.registerVersion)(tv,"0.9.2",""),(0,Ln.registerVersion)(tv,"0.9.2","esm2017")}();class qd{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class ov{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new qd(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new qd(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new qd(l,this,this._ref)):{next:t.next?l=>t.next(new qd(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class av{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new Ro(e,this._service))}get items(){return this._delegate.items.map(e=>new Ro(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Ro{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function sv(n,e){return Xy(n,e)}(this._delegate,e);return new Ro(t,this.storage)}get root(){return new Ro(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new Ro(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new ov(function BN(n,e,t){return function KE(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new WE(n,new la(e),t)}(n=(0,M.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ro.RAW,r){this._throwIfRoot("putString");const i=Kg(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new ov(new WE(this._delegate,new la(i.data,!0),a),this)}listAll(){return function iv(n){return function xD(n){const e={prefixes:[],items:[]};return Dc(n,e).then(()=>e)}(n=(0,M.m9)(n))}(this._delegate).then(e=>new av(e,this.storage))}list(e){return function rv(n,e){return Jy(n=(0,M.m9)(n),e)}(this._delegate,e||void 0).then(t=>new av(t,this.storage))}getMetadata(){return function Sf(n){return function RD(n){n._throwIfRoot("getMetadata");const e=bc(n.storage,n._location,au());return n.storage.makeRequestWithTokens(e,xo)}(n=(0,M.m9)(n))}(this._delegate)}updateMetadata(e){return function eI(n,e){return function ZE(n,e){n._throwIfRoot("updateMetadata");const t=function VE(n,e,t,r){const a=ua(e.fullServerUrl(),n.host,n._protocol),h=Ic(t,r),w=n.maxOperationRetryTime,D=new so(a,"PATCH",uu(n,r),w);return D.headers={"Content-Type":"application/json; charset=utf-8"},D.body=h,D.errorHandler=da(e),D}(n.storage,n._location,e,au());return n.storage.makeRequestWithTokens(t,xo)}(n=(0,M.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function OD(n){return Jg(n=(0,M.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function em(n){return function ND(n){n._throwIfRoot("deleteObject");const e=function BE(n,e){const r=ua(e.fullServerUrl(),n.host,n._protocol),h=new so(r,"DELETE",function l(m,w){},n.maxOperationRetryTime);return h.successCodes=[200,204],h.errorHandler=da(e),h}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,xo)}(n=(0,M.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw AE(e)}}class uv{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(sI(e))throw Bd("ref() expected a child path but got a URL, use refFromURL instead.");return new Ro(Af(this._delegate,e),this)}refFromURL(e){if(!sI(e))throw Bd("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ti.makeFromUrl(e,this._delegate.host)}catch(t){throw Bd("refFromUrl() expected a valid full URL but got an invalid one.")}return new Ro(Af(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function LD(n,e,t,r={}){!function JE(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,M.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function sI(n){return/^[A-Za-z]+:\/\//.test(n)}function uI(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new uv(t,r)}function lI(n){const e=function UD(n){return new Pn.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function iu(n,e=$g.z){return(0,Rr.e)((t,r)=>{let i=null,a=null,l=null;const h=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function m(){const w=l+n,D=e.now();if(D<w)return i=this.schedule(void 0,w-D),void r.add(i);h()}t.subscribe((0,fn.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{h(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,gt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function Wd(n){return{getDownloadURL:()=>et(void 0).pipe(un.fc,Sn(()=>n.getDownloadURL()),un.iC),getMetadata:()=>et(void 0).pipe(un.fc,Sn(()=>n.getMetadata()),un.iC),delete:()=>(0,En.D)(n.delete()),child:e=>Wd(n.child(e)),updateMetadata:e=>(0,En.D)(n.updateMetadata(e)),put:(e,t)=>lI(n.put(e,t)),putString:(e,t,r)=>lI(n.putString(e,t,r)),list:e=>(0,En.D)(n.list(e)),listAll:()=>(0,En.D)(n.listAll())}}!function FD(n){const e={TaskState:Di,TaskEvent:$E,StringFormat:ro,Storage:uv,Reference:Ro};n.INTERNAL.registerComponent(new eo.wA("storage-compat",uI,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.1.10")}(Vd.Z);const cv=new p.OlP("angularfire2.storageBucket"),cI=new p.OlP("angularfire2.storage.maxUploadRetryTime"),dI=new p.OlP("angularfire2.storage.maxOperationRetryTime"),hI=new p.OlP("angularfire2.storage.use-emulator");let fI=(()=>{class n{constructor(t,r,i,a,l,h,m,w,D,S){const P=(0,Vr.on)(t,l,r);this.storage=(0,Vr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const U=l.runOutsideAngular(()=>P.storage(i||void 0)),q=D;return q&&U.useEmulator(...q),m&&U.setMaxUploadRetryTime(m),w&&U.setMaxOperationRetryTime(w),U},[m,w])}ref(t){return Wd(this.storage.ref(t))}refFromURL(t){return Wd(this.storage.refFromURL(t))}upload(t,r,i){return Wd(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vr.Dh),p.LFG(Vr.xv,8),p.LFG(cv,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(un.HU),p.LFG(cI,8),p.LFG(dI,8),p.LFG(hI,8),p.LFG(ds,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pI=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({}),n})(),gI=(()=>{class n{constructor(){Ud.Z.registerVersion("angularfire",un.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[fI],imports:[pI]}),n})();function tm(){return(0,Rr.e)((n,e)=>{let t,r=!1;n.subscribe((0,fn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function BD(n,e=os.y){return n=null!=n?n:jD,(0,Rr.e)((t,r)=>{let i,a=!0;t.subscribe((0,fn.x)(r,l=>{const h=e(l);(a||!n(i,h))&&(a=!1,i=h,r.next(l))}))})}function jD(n,e){return n===e}O(5881);var Ge,mI="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},lu={},nm=nm||{},Rt=mI||self;function rm(){}function im(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function xf(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var sm="closure_uid_"+(1e9*Math.random()>>>0),zd=0;function HD(n,e,t){return n.call.apply(n.bind,arguments)}function $D(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Zr(n,e,t){return(Zr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?HD:$D).apply(null,arguments)}function om(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Yr(n,e){function t(){}t.prototype=e.prototype,n.Z=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Vb=function(r,i,a){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Sc(){this.s=this.s,this.o=this.o}var vI={};Sc.prototype.s=!1,Sc.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var n=function _I(n){return Object.prototype.hasOwnProperty.call(n,sm)&&n[sm]||(n[sm]=++zd)}(this);delete vI[n]}},Sc.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const No=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1},wI=Array.prototype.forEach?function(n,e,t){Array.prototype.forEach.call(n,e,t)}:function(n,e,t){const r=n.length,i="string"==typeof n?n.split(""):n;for(let a=0;a<r;a++)a in i&&e.call(t,i[a],a,n)};function Po(n){return Array.prototype.concat.apply([],arguments)}function Ps(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function hs(n){return/^[\s\xa0]*$/.test(n)}var Wi,dv=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Si(n,e){return-1!=n.indexOf(e)}function hv(n,e){return n<e?-1:n>e?1:0}e:{var EI=Rt.navigator;if(EI){var II=EI.userAgent;if(II){Wi=II;break e}}Wi=""}function Rf(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Kd(n){const e={};for(const t in n)e[t]=n[t];return e}var bI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function fv(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<bI.length;a++)t=bI[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function pv(n){return pv[" "](n),n}pv[" "]=rm;var Pf,n,TI=Si(Wi,"Opera"),cu=Si(Wi,"Trident")||Si(Wi,"MSIE"),DI=Si(Wi,"Edge"),am=DI||cu,gv=Si(Wi,"Gecko")&&!(Si(Wi.toLowerCase(),"webkit")&&!Si(Wi,"Edge"))&&!(Si(Wi,"Trident")||Si(Wi,"MSIE"))&&!Si(Wi,"Edge"),mv=Si(Wi.toLowerCase(),"webkit")&&!Si(Wi,"Edge");function Nf(){var n=Rt.document;return n?n.documentMode:void 0}e:{var um="",lm=(n=Wi,gv?/rv:([^\);]+)(\)|;)/.exec(n):DI?/Edge\/([\d\.]+)/.exec(n):cu?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):mv?/WebKit\/(\S+)/.exec(n):TI?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(lm&&(um=lm?lm[1]:""),cu){var cm=Nf();if(null!=cm&&cm>parseFloat(um)){Pf=String(cm);break e}}Pf=um}var SI={};var qD=Rt.document&&cu&&(Nf()||parseInt(Pf,10))||void 0,WD=function(){if(!Rt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rt.addEventListener("test",rm,e),Rt.removeEventListener("test",rm,e)}catch(t){}return n}();function Ai(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}function kf(n,e){if(Ai.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(gv){e:{try{pv(e.nodeName);var i=!0;break e}catch(a){}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:zD[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&kf.Z.h.call(this)}}Ai.prototype.h=function(){this.defaultPrevented=!0},Yr(kf,Ai);var zD={2:"touch",3:"pen",4:"mouse"};kf.prototype.h=function(){kf.Z.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Mf="closure_listenable_"+(1e6*Math.random()|0),KD=0;function ZD(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ia=i,this.key=++KD,this.ca=this.fa=!1}function hm(n){n.ca=!0,n.listener=null,n.proxy=null,n.src=null,n.ia=null}function fm(n){this.src=n,this.g={},this.h=0}function yv(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=No(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(hm(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function vv(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.ca&&a.listener==e&&a.capture==!!t&&a.ia==r)return i}return-1}fm.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=vv(n,e,r,i);return-1<l?(e=n[l],t||(e.fa=!1)):((e=new ZD(e,this.src,a,!!r,i)).fa=t,n.push(e)),e};var wv="closure_lm_"+(1e6*Math.random()|0),Ev={};function xI(n,e,t,r,i){if(r&&r.once)return NI(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)xI(n,e[a],t,r,i);return null}return t=_m(t),n&&n[Mf]?n.N(e,t,xf(r)?!!r.capture:!!r,i):RI(n,e,t,!1,r,i)}function RI(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=xf(i)?!!i.capture:!!i,h=gm(n);if(h||(n[wv]=h=new fm(n)),(t=h.add(e,t,r,l,a)).proxy)return t;if(r=function YD(){var e=PI;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)WD||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(bv(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function NI(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)NI(n,e[a],t,r,i);return null}return t=_m(t),n&&n[Mf]?n.O(e,t,xf(r)?!!r.capture:!!r,i):RI(n,e,t,!0,r,i)}function Iv(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)Iv(n,e[a],t,r,i);else r=xf(r)?!!r.capture:!!r,t=_m(t),n&&n[Mf]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=vv(a=n.g[e],t,r,i))&&(hm(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=gm(n))&&(e=n.g[e.toString()],n=-1,e&&(n=vv(e,t,r,i)),(t=-1<n?e[n]:null)&&pm(t))}function pm(n){if("number"!=typeof n&&n&&!n.ca){var e=n.src;if(e&&e[Mf])yv(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(bv(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=gm(e))?(yv(t,n),0==t.h&&(t.src=null,e[wv]=null)):hm(n)}}}function bv(n){return n in Ev?Ev[n]:Ev[n]="on"+n}function PI(n,e){if(n.ca)n=!0;else{e=new kf(e,this);var t=n.listener,r=n.ia||n.src;n.fa&&pm(n),n=t.call(r,e)}return n}function gm(n){return(n=n[wv])instanceof fm?n:null}var mm="__closure_events_fn_"+(1e9*Math.random()>>>0);function _m(n){return"function"==typeof n?n:(n[mm]||(n[mm]=function(e){return n.handleEvent(e)}),n[mm])}function Br(){Sc.call(this),this.i=new fm(this),this.P=this,this.I=null}function Qr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new Ai(e,n);else if(e instanceof Ai)e.target=e.target||n;else{var i=e;fv(e=new Ai(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Of(l,r,!0,e)&&i}if(i=Of(l=e.g=n,r,!0,e)&&i,i=Of(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Of(l=e.g=t[a],r,!1,e)&&i}function Of(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.ca&&l.capture==t){var h=l.listener,m=l.ia||l.src;l.fa&&yv(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}Yr(Br,Sc),Br.prototype[Mf]=!0,Br.prototype.removeEventListener=function(n,e,t,r){Iv(this,n,e,t,r)},Br.prototype.M=function(){if(Br.Z.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hm(t[r]);delete n.g[e],n.h--}}this.I=null},Br.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Br.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var ym=Rt.JSON.stringify;function Ac(){var n=JD;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var MI,kI=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Zd,n=>n.reset());class Zd{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function HN(n){Rt.setTimeout(()=>{throw n},0)}function Lf(n,e){MI||function OI(){var n=Rt.Promise.resolve(void 0);MI=function(){n.then(Et)}}(),vm||(MI(),vm=!0),JD.add(n,e)}var vm=!1,JD=new class QD{constructor(){this.h=this.g=null}add(e,t){const r=kI.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function Et(){for(var n;n=Ac();){try{n.h.call(n.g)}catch(t){HN(t)}var e=kI;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}vm=!1}function wm(n,e){Br.call(this),this.h=n||1,this.g=e||Rt,this.j=Zr(this.kb,this),this.l=Date.now()}function Cv(n){n.da=!1,n.S&&(n.g.clearTimeout(n.S),n.S=null)}function Tv(n,e,t){if("function"==typeof n)t&&(n=Zr(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Zr(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rt.setTimeout(n,e||0)}function Ff(n){n.g=Tv(()=>{n.g=null,n.i&&(n.i=!1,Ff(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Yr(wm,Br),(Ge=wm.prototype).da=!1,Ge.S=null,Ge.kb=function(){if(this.da){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-n):(this.S&&(this.g.clearTimeout(this.S),this.S=null),Qr(this,"tick"),this.da&&(Cv(this),this.start()))}},Ge.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ge.M=function(){wm.Z.M.call(this),Cv(this),delete this.g};class XD extends Sc{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ff(this)}M(){super.M(),this.g&&(Rt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function pl(n){Sc.call(this),this.h=n,this.g={}}Yr(pl,Sc);var Uf=[];function sr(n,e,t,r){Array.isArray(t)||(t&&(Uf[0]=t.toString()),t=Uf);for(var i=0;i<t.length;i++){var a=xI(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function eS(n){Rf(n.g,function(e,t){this.g.hasOwnProperty(t)&&pm(e)},n),n.g={}}function Vf(){this.g=!0}function xc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function FI(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return ym(t)}catch(h){return e}}(n,t)+(r?" "+r:"")})}pl.prototype.M=function(){pl.Z.M.call(this),eS(this)},pl.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Vf.prototype.Aa=function(){this.g=!1},Vf.prototype.info=function(){};var gl={},UI=null;function Em(){return UI=UI||new Br}function VI(n){Ai.call(this,gl.Ma,n)}function du(n){const e=Em();Qr(e,new VI(e,n))}function BI(n,e){Ai.call(this,gl.STAT_EVENT,n),this.stat=e}function zi(n){const e=Em();Qr(e,new BI(e,n))}function jI(n,e){Ai.call(this,gl.Na,n),this.size=e}function ml(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rt.setTimeout(function(){n()},e)}gl.Ma="serverreachability",Yr(VI,Ai),gl.STAT_EVENT="statevent",Yr(BI,Ai),gl.Na="timingevent",Yr(jI,Ai);var Bf={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},Dv={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function Im(){}function Yd(){}Im.prototype.h=null;var xv,hu={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Sv(){Ai.call(this,"d")}function Av(){Ai.call(this,"c")}function jf(){}function Qd(n,e,t,r){this.l=n,this.j=e,this.m=t,this.X=r||1,this.V=new pl(this),this.P=rS,this.W=new wm(n=am?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new Rv}function Rv(){this.i=null,this.g="",this.h=!1}Yr(Sv,Ai),Yr(Av,Ai),Yr(jf,Im),jf.prototype.g=function(){return new XMLHttpRequest},jf.prototype.i=function(){return{}},xv=new jf;var rS=45e3,bm={},Cm={};function Nv(n,e,t){n.K=1,n.v=qf(fs(e)),n.s=t,n.U=!0,iS(n,null)}function iS(n,e){n.F=Date.now(),Jd(n),n.A=fs(n.v);var t=n.A,r=n.X;Array.isArray(r)||(r=[String(r)]),zI(t.h,"t",r),n.C=0,t=n.l.H,n.h=new Rv,n.g=lb(n.l,t?e:null,!n.s),0<n.O&&(n.L=new XD(Zr(n.Ia,n,n.g),n.O)),sr(n.V,n.g,"readystatechange",n.gb),e=n.H?Kd(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ea(n.A,n.u,n.s,e)):(n.u="GET",n.g.ea(n.A,n.u,null,e)),du(1),function tS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",h=a.split("&"),m=0;m<h.length;m++){var w=h[m].split("=");if(1<w.length){var D=w[0];w=w[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+w+"&":l+(D+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.X,n.s)}function sS(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Ba}function oS(n,e,t){let i,r=!0;for(;!n.I&&n.C<t.length;){if(i=$N(n,t),i==Cm){4==e&&(n.o=4,zi(14),r=!1),xc(n.j,n.m,null,"[Incomplete Response]");break}if(i==bm){n.o=4,zi(15),xc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}xc(n.j,n.m,i,null),Rc(n,i)}sS(n)&&i!=Cm&&i!=bm&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,zi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.aa&&(n.aa=!0,(e=n.l).g==n&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+t.length),ab(e),e.L=!0,zi(11))):(xc(n.j,n.m,t,"[Invalid Chunked Response]"),_l(n),$f(n))}function $N(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Cm:(t=Number(e.substring(t,r)),isNaN(t)?bm:(r+=1)+t>e.length?Cm:(e=e.substr(r,t),n.C=r+t,e))}function Jd(n){n.Y=Date.now()+n.P,Hf(n,n.P)}function Hf(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=ml(Zr(n.eb,n),e)}function Tm(n){n.B&&(Rt.clearTimeout(n.B),n.B=null)}function $f(n){0==n.l.G||n.I||Oc(n.l,n)}function _l(n){Tm(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,Cv(n.W),eS(n.V),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function Rc(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||Vv(t.i,n)))if(t.I=n.N,!n.J&&Vv(t.i,n)&&3==t.G){try{var r=t.Ca.g.parse(e)}catch(w){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0])e:if(t.u)t.ta=i[1],0<t.ta-t.U&&37500>i[2]&&t.N&&0==t.A&&!t.v&&(t.v=ml(Zr(t.ab,t),6e3));else{if(t.g){if(!(t.g.F+3e3<n.F))break e;Nm(t),Mc(t)}Zv(t),zi(18)}if(1>=YI(t.i)&&t.ka){try{t.ka()}catch(w){}t.ka=void 0}}else oo(t,11)}else if((n.J||t.g==n)&&Nm(t),!hs(e))for(i=t.Ca.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.U=w[0],w=w[1],2==t.G)if("c"==w[0]){t.J=w[1],t.la=w[2];const D=w[3];null!=D&&(t.ma=D,t.h.info("VER="+t.ma));const S=w[4];null!=S&&(t.za=S,t.h.info("SVER="+t.za));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.K=r=1.5*P,t.h.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const q=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.i;!a.g&&(Si(q,"spdy")||Si(q,"quic")||Si(q,"h2"))&&(a.j=a.l,a.g=new Set,a.h&&(Am(a,a.h),a.h=null))}if(r.D){const ve=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;ve&&(r.sa=ve,zn(r.F,r.D,ve))}}t.G=3,t.j&&t.j.xa(),t.$&&(t.O=Date.now()-n.F,t.h.info("Handshake RTT: "+t.O+"ms"));var l=n;if((r=t).oa=Qv(r,r.H?r.la:null,r.W),l.J){QI(r.i,l);var h=l,m=r.K;m&&h.setTimeout(m),h.B&&(Tm(h),Jd(h)),r.g=l}else Rm(r);0<t.l.length&&Xf(t)}else"stop"!=w[0]&&"close"!=w[0]||oo(t,7);else 3==t.G&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?oo(t,7):Jf(t):"noop"!=w[0]&&t.j&&t.j.wa(w),t.A=0)}du(4)}catch(w){}}function Pv(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(im(n)||"string"==typeof n)wI(n,e,void 0);else{if(n.T&&"function"==typeof n.T)var t=n.T();else if(n.R&&"function"==typeof n.R)t=void 0;else if(im(n)||"string"==typeof n){t=[];for(var r=n.length,i=0;i<r;i++)t.push(i)}else for(i in t=[],r=0,n)t[r++]=i;r=function aS(n){if(n.R&&"function"==typeof n.R)return n.R();if("string"==typeof n)return n.split("");if(im(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length;for(var a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}}function Xd(n,e){this.h={},this.g=[],this.i=0;var t=arguments.length;if(1<t){if(t%2)throw Error("Uneven number of arguments");for(var r=0;r<t;r+=2)this.set(arguments[r],arguments[r+1])}else if(n)if(n instanceof Xd)for(t=n.T(),r=0;r<t.length;r++)this.set(t[r],n.get(t[r]));else for(r in n)this.set(r,n[r])}function kv(n){if(n.i!=n.g.length){for(var e=0,t=0;e<n.g.length;){var r=n.g[e];Nc(n.h,r)&&(n.g[t++]=r),e++}n.g.length=t}if(n.i!=n.g.length){var i={};for(t=e=0;e<n.g.length;)Nc(i,r=n.g[e])||(n.g[t++]=r,i[r]=1),e++;n.g.length=t}}function Nc(n,e){return Object.prototype.hasOwnProperty.call(n,e)}(Ge=Qd.prototype).setTimeout=function(n){this.P=n},Ge.gb=function(n){n=n.target;const e=this.L;e&&3==fu(n)?e.l():this.Ia(n)},Ge.Ia=function(n){try{if(n==this.g)e:{const D=fu(this.g);var e=this.g.Da();const S=this.g.ba();if(!(3>D)&&(3!=D||am||this.g&&(this.h.h||this.g.ga()||rb(this.g)))){this.I||4!=D||7==e||du(8==e||0>=S?3:2),Tm(this);var t=this.g.ba();this.N=t;t:if(sS(this)){var r=rb(this.g);n="";var i=r.length,a=4==fu(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){_l(this),$f(this);var l="";break t}this.h.i=new Rt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ga();if(this.i=200==t,function nS(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.X,D,t),this.i){if(this.$&&!this.J){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!hs(h)){var w=h;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,zi(12),_l(this),$f(this);break e}xc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Rc(this,t)}this.U?(oS(this,D,l),am&&this.i&&3==D&&(sr(this.V,this.W,"tick",this.fb),this.W.start())):(xc(this.j,this.m,l,null),Rc(this,l)),4==D&&_l(this),this.i&&!this.I&&(4==D?Oc(this.l,this):(this.i=!1,Jd(this)))}else 400==t&&0<l.indexOf("Unknown SID")?(this.o=3,zi(12)):(this.o=0,zi(13)),_l(this),$f(this)}}}catch(D){}},Ge.fb=function(){if(this.g){var n=fu(this.g),e=this.g.ga();this.C<e.length&&(Tm(this),oS(this,n,e),this.i&&4!=n&&Jd(this))}},Ge.cancel=function(){this.I=!0,_l(this)},Ge.eb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function LI(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(du(3),zi(17)),_l(this),this.o=2,$f(this)):Hf(this,this.Y-n)},(Ge=Xd.prototype).R=function(){kv(this);for(var n=[],e=0;e<this.g.length;e++)n.push(this.h[this.g[e]]);return n},Ge.T=function(){return kv(this),this.g.concat()},Ge.get=function(n,e){return Nc(this.h,n)?this.h[n]:e},Ge.set=function(n,e){Nc(this.h,n)||(this.i++,this.g.push(n)),this.h[n]=e},Ge.forEach=function(n,e){for(var t=this.T(),r=0;r<t.length;r++){var i=t[r],a=this.get(i);n.call(e,a,i,this)}};var Mv=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pc(n,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,n instanceof Pc){this.g=void 0!==e?e:n.g,Dm(this,n.j),this.s=n.s,Gf(this,n.i),Sm(this,n.m),this.l=n.l,e=n.h;var t=new th;t.i=e.i,e.g&&(t.g=new Xd(e.g),t.h=e.h),Ov(this,t),this.o=n.o}else n&&(t=String(n).match(Mv))?(this.g=!!e,Dm(this,t[1]||"",!0),this.s=Wf(t[2]||""),Gf(this,t[3]||"",!0),Sm(this,t[4]),this.l=Wf(t[5]||"",!0),Ov(this,t[6]||"",!0),this.o=Wf(t[7]||"")):(this.g=!!e,this.h=new th(null,this.g))}function fs(n){return new Pc(n)}function Dm(n,e,t){n.j=t?Wf(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function Gf(n,e,t){n.i=t?Wf(e,!0):e}function Sm(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function Ov(n,e,t){e instanceof th?(n.h=e,function fS(n,e){e&&!n.j&&(yl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(qI(this,r),zI(this,i,t))},n)),n.j=e}(n.h,n.g)):(t||(e=eh(e,Fv)),n.h=new th(e,n.g))}function zn(n,e,t){n.h.set(e,t)}function qf(n){return zn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wf(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function eh(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,$I),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function $I(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Pc.prototype.toString=function(){var n=[],e=this.j;e&&n.push(eh(e,GI,!0),":");var t=this.i;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(eh(e,GI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.i&&"/"!=t.charAt(0)&&n.push("/"),n.push(eh(t,"/"==t.charAt(0)?dS:cS,!0))),(t=this.h.toString())&&n.push("?",t),(t=this.o)&&n.push("#",eh(t,hS)),n.join("")};var GI=/[#\/\?@]/g,cS=/[#\?:]/g,dS=/[#\?]/g,Fv=/[#\?@]/g,hS=/#/g;function th(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function yl(n){n.g||(n.g=new Xd,n.h=0,n.i&&function uS(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function qI(n,e){yl(n),e=nh(n,e),Nc(n.g.h,e)&&(n.i=null,n.h-=n.g.get(e).length,Nc((n=n.g).h,e)&&(delete n.h[e],n.i--,n.g.length>2*n.i&&kv(n)))}function WI(n,e){return yl(n),e=nh(n,e),Nc(n.g.h,e)}function zI(n,e,t){qI(n,e),0<t.length&&(n.i=null,n.g.set(nh(n,e),Ps(t)),n.h+=t.length)}function nh(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function KI(n){this.l=n||ZI,n=Rt.PerformanceNavigationTiming?0<(n=Rt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rt.g&&Rt.g.Ea&&Rt.g.Ea()&&Rt.g.Ea().Zb),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ge=th.prototype).add=function(n,e){yl(this),this.i=null,n=nh(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ge.forEach=function(n,e){yl(this),this.g.forEach(function(t,r){wI(t,function(i){n.call(e,i,r,this)},this)},this)},Ge.T=function(){yl(this);for(var n=this.g.R(),e=this.g.T(),t=[],r=0;r<e.length;r++)for(var i=n[r],a=0;a<i.length;a++)t.push(e[r]);return t},Ge.R=function(n){yl(this);var e=[];if("string"==typeof n)WI(this,n)&&(e=Po(e,this.g.get(nh(this,n))));else{n=this.g.R();for(var t=0;t<n.length;t++)e=Po(e,n[t])}return e},Ge.set=function(n,e){return yl(this),this.i=null,WI(this,n=nh(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ge.get=function(n,e){return n&&0<(n=this.R(n)).length?String(n[0]):e},Ge.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var n=[],e=this.g.T(),t=0;t<e.length;t++){var r=e[t],i=encodeURIComponent(String(r));r=this.R(r);for(var a=0;a<r.length;a++){var l=i;""!==r[a]&&(l+="="+encodeURIComponent(String(r[a]))),n.push(l)}}return this.i=n.join("&")};var ZI=10;function Uv(n){return!!n.h||!!n.g&&n.g.size>=n.j}function YI(n){return n.h?1:n.g?n.g.size:0}function Vv(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Am(n,e){n.g?n.g.add(e):n.h=e}function QI(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function JI(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Ps(n.i)}function Bv(){}function jv(){this.g=new Bv}function Hv(n,e,t){const r=t||"";try{Pv(n,function(i,a){let l=i;xf(i)&&(l=ym(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function rh(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(a){}}function zf(n){this.l=n.$b||null,this.j=n.ib||!1}function xm(n,e){Br.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=Kf,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}KI.prototype.cancel=function(){if(this.i=JI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Bv.prototype.stringify=function(n){return Rt.JSON.stringify(n,void 0)},Bv.prototype.parse=function(n){return Rt.JSON.parse(n,void 0)},Yr(zf,Im),zf.prototype.g=function(){return new xm(this.l,this.j)},zf.prototype.i=function(n){return function(){return n}}({}),Yr(xm,Br);var Kf=0;function eb(n){n.j.read().then(n.Sa.bind(n)).catch(n.ha.bind(n))}function Zf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Yf(n)}function Yf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ge=xm.prototype).open=function(n,e){if(this.readyState!=Kf)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Yf(this)},Ge.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Rt).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},Ge.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zf(this)),this.readyState=Kf},Ge.Va=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Yf(this)),this.g&&(this.readyState=3,Yf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==Rt.ReadableStream&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;eb(this)}else n.text().then(this.Ua.bind(this),this.ha.bind(this))},Ge.Sa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zf(this):Yf(this),3==this.readyState&&eb(this)}},Ge.Ua=function(n){this.g&&(this.response=this.responseText=n,Zf(this))},Ge.Ta=function(n){this.g&&(this.response=n,Zf(this))},Ge.ha=function(){this.g&&Zf(this)},Ge.setRequestHeader=function(n,e){this.v.append(n,e)},Ge.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ge.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xm.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var tb=Rt.JSON.parse;function Pr(n){Br.call(this),this.headers=new Xd,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=$v,this.K=this.L=!1}Yr(Pr,Br);var $v="",GN=/^https?$/i,gS=["POST","PUT"];function mS(n){return"content-type"==n.toLowerCase()}function kc(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,ih(n),Gv(n)}function ih(n){n.D||(n.D=!0,Qr(n,"complete"),Qr(n,"error"))}function nb(n){if(n.h&&void 0!==nm&&(!n.C[1]||4!=fu(n)||2!=n.ba()))if(n.v&&4==fu(n))Tv(n.Fa,0,n);else if(Qr(n,"readystatechange"),4==fu(n)){n.h=!1;try{const h=n.ba();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===h){var i=String(n.H).match(Mv)[1]||null;if(!i&&Rt.self&&Rt.self.location){var a=Rt.self.location.protocol;i=a.substr(0,a.length-1)}r=!GN.test(i?i.toLowerCase():"")}t=r}if(t)Qr(n,"complete"),Qr(n,"success");else{n.m=6;try{var l=2<fu(n)?n.g.statusText:""}catch(m){l=""}n.j=l+" ["+n.ba()+"]",ih(n)}}finally{Gv(n)}}}function Gv(n,e){if(n.g){qv(n);const t=n.g,r=n.C[0]?rm:null;n.g=null,n.C=null,e||Qr(n,"ready");try{t.onreadystatechange=r}catch(i){}}}function qv(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Rt.clearTimeout(n.A),n.A=null)}function fu(n){return n.g?n.g.readyState:0}function rb(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case $v:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch(e){return null}}function Wv(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=function _S(n){let e="";return Rf(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):zn(n,e,t))}function sh(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function zv(n){this.za=0,this.l=[],this.h=new Vf,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=sh("failFast",!1,n),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=sh("baseRetryDelayMs",5e3,n),this.$a=sh("retryDelaySeedMs",1e4,n),this.Ya=sh("forwardChannelMaxRetries",2,n),this.ra=sh("forwardChannelRequestTimeoutMs",2e4,n),this.qa=n&&n.xmlHttpFactory||void 0,this.Ba=n&&n.Yb||!1,this.K=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.J="",this.i=new KI(n&&n.concurrentRequestLimit),this.Ca=new jv,this.ja=n&&n.fastHandshake||!1,this.Ra=n&&n.Wb||!1,n&&n.Aa&&this.h.Aa(),n&&n.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&n&&n.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!n||!1!==n.Xb}function Jf(n){if(oh(n),3==n.G){var e=n.V++,t=fs(n.F);zn(t,"SID",n.J),zn(t,"RID",e),zn(t,"TYPE","terminate"),ep(n,t),(e=new Qd(n,n.h,e,void 0)).K=2,e.v=qf(fs(t)),t=!1,Rt.navigator&&Rt.navigator.sendBeacon&&(t=Rt.navigator.sendBeacon(e.v.toString(),"")),!t&&Rt.Image&&((new Image).src=e.v,t=!0),t||(e.g=lb(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Jd(e)}yS(n)}function Mc(n){n.g&&(ab(n),n.g.cancel(),n.g=null)}function oh(n){Mc(n),n.u&&(Rt.clearTimeout(n.u),n.u=null),Nm(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rt.clearTimeout(n.m),n.m=null)}function Kv(n,e){n.l.push(new class{constructor(n,e){this.h=n,this.g=e}}(n.Za++,e)),3==n.G&&Xf(n)}function Xf(n){Uv(n.i)||n.m||(n.m=!0,Lf(n.Ha,n),n.C=0)}function sb(n,e){var t;t=e?e.m:n.V++;const r=fs(n.F);zn(r,"SID",n.J),zn(r,"RID",t),zn(r,"AID",n.U),ep(n,r),n.o&&n.s&&Wv(r,n.o,n.s),t=new Qd(n,n.h,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.l=e.D.concat(n.l)),e=ob(n,t,1e3),t.setTimeout(Math.round(.5*n.ra)+Math.round(.5*n.ra*Math.random())),Am(n.i,t),Nv(t,r,e)}function ep(n,e){n.j&&Pv({},function(t,r){zn(e,r,t)})}function ob(n,e,t){t=Math.min(n.l.length,t);var r=n.j?Zr(n.j.Oa,n.j,n):null;e:{var i=n.l;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].h,l.push("ofs="+a)):a=0:l.push("ofs="+a);let h=!0;for(let m=0;m<t;m++){let w=i[m].h;const D=i[m].g;if(w-=a,0>w)a=Math.max(0,i[m].h-100),h=!1;else try{Hv(D,l,"req"+w+"_")}catch(S){r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.l.splice(0,t),e.D=n,r}function Rm(n){n.g||n.u||(n.Y=1,Lf(n.Ga,n),n.A=0)}function Zv(n){return!(n.g||n.u||3<=n.A||(n.Y++,n.u=ml(Zr(n.Ga,n),Yv(n,n.A)),n.A++,0))}function ab(n){null!=n.B&&(Rt.clearTimeout(n.B),n.B=null)}function ub(n){n.g=new Qd(n,n.h,"rpc",n.Y),null===n.o&&(n.g.H=n.s),n.g.O=0;var e=fs(n.oa);zn(e,"RID","rpc"),zn(e,"SID",n.J),zn(e,"CI",n.N?"0":"1"),zn(e,"AID",n.U),ep(n,e),zn(e,"TYPE","xmlhttp"),n.o&&n.s&&Wv(e,n.o,n.s),n.K&&n.g.setTimeout(n.K);var t=n.g;n=n.la,t.K=1,t.v=qf(fs(e)),t.s=null,t.U=!0,iS(t,n)}function Nm(n){null!=n.v&&(Rt.clearTimeout(n.v),n.v=null)}function Oc(n,e){var t=null;if(n.g==e){Nm(n),ab(n),n.g=null;var r=2}else{if(!Vv(n.i,e))return;t=e.D,QI(n.i,e),r=1}if(n.I=e.N,0!=n.G)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var i=n.C;Qr(r=Em(),new jI(r,t,e,i)),Xf(n)}else Rm(n);else if(3==(i=e.o)||0==i&&0<n.I||!(1==r&&function ib(n,e){return!(YI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.l=e.D.concat(n.l),0):1==n.G||2==n.G||n.C>=(n.Xa?0:n.Ya)||(n.m=ml(Zr(n.Ha,n,e),Yv(n,n.C)),n.C++,0)))}(n,e)||2==r&&Zv(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:oo(n,5);break;case 4:oo(n,10);break;case 3:oo(n,6);break;default:oo(n,2)}}function Yv(n,e){let t=n.Pa+Math.floor(Math.random()*n.$a);return n.j||(t*=2),t*e}function oo(n,e){if(n.h.info("Error code "+e),2==e){var t=null;n.j&&(t=null);var r=Zr(n.jb,n);t||(t=new Pc("//www.google.com/images/cleardot.gif"),Rt.location&&"http"==Rt.location.protocol||Dm(t,"https"),qf(t)),function XI(n,e){const t=new Vf;if(Rt.Image){const r=new Image;r.onload=om(rh,t,r,"TestLoadImage: loaded",!0,e),r.onerror=om(rh,t,r,"TestLoadImage: error",!1,e),r.onabort=om(rh,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=om(rh,t,r,"TestLoadImage: timeout",!1,e),Rt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else zi(2);n.G=0,n.j&&n.j.va(e),yS(n),oh(n)}function yS(n){n.G=0,n.I=-1,n.j&&((0!=JI(n.i).length||0!=n.l.length)&&(n.i.i.length=0,Ps(n.l),n.l.length=0),n.j.ua())}function Qv(n,e,t){let r=function lS(n){return n instanceof Pc?fs(n):new Pc(n,void 0)}(t);if(""!=r.i)e&&Gf(r,e+"."+r.i),Sm(r,r.m);else{const i=Rt.location;r=function Lv(n,e,t,r){var i=new Pc(null,void 0);return n&&Dm(i,n),e&&Gf(i,e),t&&Sm(i,t),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,t)}return n.aa&&Rf(n.aa,function(i,a){zn(r,a,i)}),t=n.sa,(e=n.D)&&t&&zn(r,e,t),zn(r,"VER",n.ma),ep(n,r),r}function lb(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Pr(t&&n.Ba&&!n.qa?new zf({ib:!0}):n.qa)).L=n.H,e}function vS(){}function tp(){if(cu&&!(10<=Number(qD)))throw Error("Environmental error: no available transport.")}function ao(n,e){Br.call(this),this.g=new zv(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.P=n,(n=e&&e.httpHeadersOverwriteParam)&&!hs(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!hs(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new ah(this)}function Jv(n){Sv.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Pm(){Av.call(this),this.status=1}function ah(n){this.g=n}(Ge=Pr.prototype).ea=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():xv.g(),this.C=function HI(n){return n.h||(n.h=n.i())}(this.u?this.u:xv),this.g.onreadystatechange=Zr(this.Fa,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(a){return void kc(this,a)}n=t||"";const i=new Xd(this.headers);r&&Pv(r,function(a,l){i.set(l,a)}),r=function GD(n){e:{var e=mS;const t=n.length,r="string"==typeof n?n.split(""):n;for(let i=0;i<t;i++)if(i in r&&e.call(void 0,r[i],i,n)){e=i;break e}e=-1}return 0>e?null:"string"==typeof n?n.charAt(e):n[e]}(i.T()),t=Rt.FormData&&n instanceof Rt.FormData,!(0<=No(gS,e))||r||t||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(a,l){this.g.setRequestHeader(l,a)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{qv(this),0<this.B&&((this.K=function Qf(n){return cu&&function AI(){return function CI(n){var e=SI;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=dv(String(Pf)).split("."),t=dv("9").split("."),r=Math.max(e.length,t.length);for(let l=0;0==n&&l<r;l++){var i=e[l]||"",a=t[l]||"";do{if(i=/(\d*)(\D*)(.*)/.exec(i)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==i[0].length&&0==a[0].length)break;n=hv(0==i[1].length?0:parseInt(i[1],10),0==a[1].length?0:parseInt(a[1],10))||hv(0==i[2].length,0==a[2].length)||hv(i[2],a[2]),i=i[3],a=a[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Zr(this.pa,this)):this.A=Tv(this.pa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){kc(this,a)}},Ge.pa=function(){void 0!==nm&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Qr(this,"timeout"),this.abort(8))},Ge.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Qr(this,"complete"),Qr(this,"abort"),Gv(this))},Ge.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Gv(this,!0)),Pr.Z.M.call(this)},Ge.Fa=function(){this.s||(this.F||this.v||this.l?nb(this):this.cb())},Ge.cb=function(){nb(this)},Ge.ba=function(){try{return 2<fu(this)?this.g.status:-1}catch(n){return-1}},Ge.ga=function(){try{return this.g?this.g.responseText:""}catch(n){return""}},Ge.Qa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),tb(e)}},Ge.Da=function(){return this.m},Ge.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ge=zv.prototype).ma=8,Ge.G=1,Ge.hb=function(n){try{this.h.info("Origin Trials invoked: "+n)}catch(e){}},Ge.Ha=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.V=Math.floor(1e5*Math.random()),n=this.V++;const i=new Qd(this,this.h,n,void 0);let a=this.s;if(this.P&&(a?(a=Kd(a),fv(a,this.P)):a=this.P),null===this.o&&(i.H=a),this.ja)e:{for(var e=0,t=0;t<this.l.length;t++){var r=this.l[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.l.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=ob(this,i,e),zn(t=fs(this.F),"RID",n),zn(t,"CVER",22),this.D&&zn(t,"X-HTTP-Session-Id",this.D),ep(this,t),this.o&&a&&Wv(t,this.o,a),Am(this.i,i),this.Ra&&zn(t,"TYPE","init"),this.ja?(zn(t,"$req",e),zn(t,"SID","null"),i.$=!0,Nv(i,t,null)):Nv(i,t,e),this.G=2}}else 3==this.G&&(n?sb(this,n):0==this.l.length||Uv(this.i)||sb(this))},Ge.Ga=function(){if(this.u=null,ub(this),this.$&&!(this.L||null==this.g||0>=this.O)){var n=2*this.O;this.h.info("BP detection timer enabled: "+n),this.B=ml(Zr(this.bb,this),n)}},Ge.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,zi(10),Mc(this),ub(this))},Ge.ab=function(){null!=this.v&&(this.v=null,Mc(this),Zv(this),zi(19))},Ge.jb=function(n){n?(this.h.info("Successfully pinged google.com"),zi(2)):(this.h.info("Failed to ping google.com"),zi(1))},(Ge=vS.prototype).xa=function(){},Ge.wa=function(){},Ge.va=function(){},Ge.ua=function(){},Ge.Oa=function(){},tp.prototype.g=function(n,e){return new ao(n,e)},Yr(ao,Br),ao.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;n.Wa&&(n.h.info("Origin Trials enabled."),Lf(Zr(n.hb,n,e))),zi(0),n.W=e,n.aa=t||{},n.N=n.X,n.F=Qv(n,null,n.W),Xf(n)},ao.prototype.close=function(){Jf(this.g)},ao.prototype.u=function(n){if("string"==typeof n){var e={};e.__data__=n,Kv(this.g,e)}else this.v?((e={}).__data__=ym(n),Kv(this.g,e)):Kv(this.g,n)},ao.prototype.M=function(){this.g.j=null,delete this.j,Jf(this.g),delete this.g,ao.Z.M.call(this)},Yr(Jv,Sv),Yr(Pm,Av),Yr(ah,vS),ah.prototype.xa=function(){Qr(this.g,"a")},ah.prototype.wa=function(n){Qr(this.g,new Jv(n))},ah.prototype.va=function(n){Qr(this.g,new Pm(n))},ah.prototype.ua=function(){Qr(this.g,"b")},tp.prototype.createWebChannel=tp.prototype.g,ao.prototype.send=ao.prototype.u,ao.prototype.open=ao.prototype.m,ao.prototype.close=ao.prototype.close,Bf.NO_ERROR=0,Bf.TIMEOUT=8,Bf.HTTP_ERROR=6,Dv.COMPLETE="complete",Yd.EventType=hu,hu.OPEN="a",hu.CLOSE="b",hu.ERROR="c",hu.MESSAGE="d",Br.prototype.listen=Br.prototype.N,Pr.prototype.listenOnce=Pr.prototype.O,Pr.prototype.getLastError=Pr.prototype.La,Pr.prototype.getLastErrorCode=Pr.prototype.Da,Pr.prototype.getStatus=Pr.prototype.ba,Pr.prototype.getResponseJson=Pr.prototype.Qa,Pr.prototype.getResponseText=Pr.prototype.ga,Pr.prototype.send=Pr.prototype.ea;var wS=lu.createWebChannelTransport=function(){return new tp},ES=lu.getStatEventTarget=function(){return Em()},Xv=lu.ErrorCode=Bf,IS=lu.EventType=Dv,bS=lu.Event=gl,cb=lu.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},CS=lu.FetchXmlHttpFactory=zf,km=lu.WebChannel=Yd,TS=lu.XhrIo=Pr;const uh="@firebase/firestore";class Jr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Jr.UNAUTHENTICATED=new Jr(null),Jr.GOOGLE_CREDENTIALS=new Jr("google-credentials-uid"),Jr.FIRST_PARTY=new Jr("first-party-uid"),Jr.MOCK_USER=new Jr("mock-user");let Lc="9.6.7";const pu=new Ns.Yd("@firebase/firestore");function Mm(){return pu.logLevel}function Be(n,...e){if(pu.logLevel<=Ns.in.DEBUG){const t=e.map(e0);pu.debug(`Firestore (${Lc}): ${n}`,...t)}}function kr(n,...e){if(pu.logLevel<=Ns.in.ERROR){const t=e.map(e0);pu.error(`Firestore (${Lc}): ${n}`,...t)}}function np(n,...e){if(pu.logLevel<=Ns.in.WARN){const t=e.map(e0);pu.warn(`Firestore (${Lc}): ${n}`,...t)}}function e0(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch(t){return n}}function ct(n="Unexpected state"){const e=`FIRESTORE (${Lc}) INTERNAL ASSERTION FAILED: `+n;throw kr(e),new Error(e)}function Dt(n,e){n||ct()}function We(n,e){return n}const ge={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Me extends M.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class An{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class hb{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class t0{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Jr.UNAUTHENTICATED))}shutdown(){}}class rp{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class SS{constructor(e){this.t=e,this.currentUser=Jr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new An;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new An,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const w=l;e.enqueueRetryable((0,Ee.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},m=w=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(w=>m(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?m(w):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new An)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Dt("string"==typeof r.accessToken),new hb(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Dt(null===e||"string"==typeof e),new Jr(e)}}class AS{constructor(e,t,r){this.type="FirstParty",this.user=Jr.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",t);const i=e.auth.getAuthHeaderValueForFirstParty([]);i&&this.headers.set("Authorization",i),r&&this.headers.set("X-Goog-Iam-Authorization-Token",r)}}class xS{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new AS(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Jr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ip{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Om{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,t){const r=a=>{null!=a.error&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.p;return this.p=a.token,Be("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.g.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.g.getImmediate({optional:!0});a?i(a):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Dt("string"==typeof t.token),this.p=t.token,new ip(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class ks{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=r=>this.I(r),this.T=r=>t.writeSequenceNumber(r))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function fb(n){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}ks.A=-1;class n0{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=fb(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function Ht(n,e){return n<e?-1:n>e?1:0}function Fc(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function pb(n){return n+"\0"}class Xr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Me(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Me(ge.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Me(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Me(ge.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xr.fromMillis(Date.now())}static fromDate(e){return Xr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Xr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Ht(this.nanoseconds,e.nanoseconds):Ht(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class bt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new bt(e)}static min(){return new bt(new Xr(0,0))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Lm(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gu(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function r0(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Uc{constructor(e,t,r){void 0===t?t=0:t>e.length&&ct(),void 0===r?r=e.length-t:r>e.length-t&&ct(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Uc.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Uc?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class tn extends Uc{construct(e,t,r){return new tn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Me(ge.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new tn(t)}static emptyPath(){return new tn([])}}const RS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ei extends Uc{construct(e,t,r){return new ei(e,t,r)}static isValidIdentifier(e){return RS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ei.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ei(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Me(ge.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new Me(ge.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new Me(ge.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(a(),i++)}if(a(),l)throw new Me(ge.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ei(t)}static emptyPath(){return new ei([])}}class lh{constructor(e){this.fields=e,e.sort(ei.comparator)}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Fc(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Mr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Mr(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new Mr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ht(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Mr.EMPTY_BYTE_STRING=new Mr("");const s0=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function mu(n){if(Dt(!!n),"string"==typeof n){let e=0;const t=s0.exec(n);if(Dt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:gr(n.seconds),nanos:gr(n.nanos)}}function gr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function vl(n){return"string"==typeof n?Mr.fromBase64String(n):Mr.fromUint8Array(n)}function Fm(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=null==n?void 0:n.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function gb(n){const e=n.mapValue.fields.__previous_value__;return Fm(e)?gb(e):e}function ch(n){const e=mu(n.mapValue.fields.__local_write_time__.timestampValue);return new Xr(e.seconds,e.nanos)}class mb{constructor(e,t,r,i,a,l,h,m){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.useFetchStreams=m}}class Vc{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Vc("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Vc&&e.projectId===this.projectId&&e.database===this.database}}function wl(n){return null==n}function sp(n){return 0===n&&1/n==-1/0}function xi(n){return"number"==typeof n&&Number.isInteger(n)&&!sp(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Xe{constructor(e){this.path=e}static fromPath(e){return new Xe(tn.fromString(e))}static fromName(e){return new Xe(tn.fromString(e).popFirst(5))}static empty(){return new Xe(tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return tn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Xe(new tn(e.slice()))}}const PS={mapValue:{fields:{__type__:{stringValue:"__max___"}}}};function Bc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fm(n)?4:10:ct()}function ha(n,e){if(n===e)return!0;const t=Bc(n);if(t!==Bc(e))return!1;switch(t){case 0:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return ch(n).isEqual(ch(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=mu(r.timestampValue),l=mu(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,vl(n.bytesValue).isEqual(vl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return gr(r.geoPointValue.latitude)===gr(i.geoPointValue.latitude)&&gr(r.geoPointValue.longitude)===gr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return gr(r.integerValue)===gr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=gr(r.doubleValue),l=gr(i.doubleValue);return a===l?sp(a)===sp(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Fc(n.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Lm(a)!==Lm(l))return!1;for(const h in a)if(a.hasOwnProperty(h)&&(void 0===l[h]||!ha(a[h],l[h])))return!1;return!0}(n,e);default:return ct()}var i}function _u(n,e){return void 0!==(n.values||[]).find(t=>ha(t,e))}function dh(n,e){if(n===e)return 0;const t=Bc(n),r=Bc(e);if(t!==r)return Ht(t,r);switch(t){case 0:return 0;case 1:return Ht(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=gr(i.integerValue||i.doubleValue),h=gr(a.integerValue||a.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return Um(n.timestampValue,e.timestampValue);case 4:return Um(ch(n),ch(e));case 5:return Ht(n.stringValue,e.stringValue);case 6:return function(i,a){const l=vl(i),h=vl(a);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),h=a.split("/");for(let m=0;m<l.length&&m<h.length;m++){const w=Ht(l[m],h[m]);if(0!==w)return w}return Ht(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=Ht(gr(i.latitude),gr(a.latitude));return 0!==l?l:Ht(gr(i.longitude),gr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],h=a.values||[];for(let m=0;m<l.length&&m<h.length;++m){const w=dh(l[m],h[m]);if(w)return w}return Ht(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){const l=i.fields||{},h=Object.keys(l),m=a.fields||{},w=Object.keys(m);h.sort(),w.sort();for(let D=0;D<h.length&&D<w.length;++D){const S=Ht(h[D],w[D]);if(0!==S)return S;const P=dh(l[h[D]],m[w[D]]);if(0!==P)return P}return Ht(h.length,w.length)}(n.mapValue,e.mapValue);default:throw ct()}}function Um(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Ht(n,e);const t=mu(n),r=mu(e),i=Ht(t.seconds,r.seconds);return 0!==i?i:Ht(t.nanos,r.nanos)}function hh(n){return Vm(n)}function Vm(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=mu(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?vl(n.bytesValue).toBase64():"referenceValue"in n?Xe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Vm(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const h of i)l?l=!1:a+=",",a+=`${h}:${Vm(r.fields[h])}`;return a+"}"}(n.mapValue):ct();var e}function Bm(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function o0(n){return!!n&&"integerValue"in n}function fh(n){return!!n&&"arrayValue"in n}function a0(n){return!!n&&"nullValue"in n}function u0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function jc(n){return!!n&&"mapValue"in n}function Hc(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return gu(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=Hc(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Hc(n.arrayValue.values[t]);return e}return Object.assign({},n)}class Ki{constructor(e){this.value=e}static empty(){return new Ki({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!jc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Hc(t)}setAll(e){let t=ei.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=Hc(l):i.push(h.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());jc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];jc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){gu(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Ki(Hc(this.value))}}function l0(n){const e=[];return gu(n.fields,(t,r)=>{const i=new ei([t]);if(jc(r)){const a=l0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new lh(e)}class or{constructor(e,t,r,i,a,l){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.data=a,this.documentState=l}static newInvalidDocument(e){return new or(e,0,bt.min(),bt.min(),Ki.empty(),0)}static newFoundDocument(e,t,r){return new or(e,1,t,bt.min(),r,0)}static newNoDocument(e,t){return new or(e,2,t,bt.min(),Ki.empty(),0)}static newUnknownDocument(e,t){return new or(e,3,t,bt.min(),Ki.empty(),2)}convertToFoundDocument(e,t){return this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ki.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ki.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof or&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new or(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}let jm=(()=>{class n{constructor(t,r,i,a){this.indexId=t,this.collectionGroup=r,this.fields=i,this.indexState=a}}return n.UNKNOWN_ID=-1,n})();class $c{constructor(e,t){this.fieldPath=e,this.kind=t}}class ph{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new ph(0,Hm.min())}}class Hm{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Hm(bt.min(),Xe.empty(),-1)}}class c0{constructor(e,t=null,r=[],i=[],a=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=h,this.P=null}}function $m(n,e=null,t=[],r=[],i=null,a=null,l=null){return new c0(n,e,t,r,i,a,l)}function Gm(n){const e=We(n);if(null===e.P){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>{return(i=r).field.canonicalString()+i.op.toString()+hh(i.value);var i}).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),wl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hh(r)).join(",")),e.P=t}return e.P}function qm(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let i=0;i<n.orderBy.length;i++)if(!Ib(n.orderBy[i],e.orderBy[i]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let i=0;i<n.filters.length;i++)if((t=n.filters[i]).op!==(r=e.filters[i]).op||!t.field.isEqual(r.field)||!ha(t.value,r.value))return!1;var t,r;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Cb(n.startAt,e.startAt)&&Cb(n.endAt,e.endAt)}function op(n){return Xe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}class Ri extends class{}{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.v(e,t,r):new MS(e,t,r):"array-contains"===t?new OS(e,r):"in"===t?new wb(e,r):"not-in"===t?new LS(e,r):"array-contains-any"===t?new Eb(e,r):new Ri(e,t,r)}static v(e,t,r){return"in"===t?new _b(e,r):new yb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.V(dh(t,this.value)):null!==t&&Bc(this.value)===Bc(t)&&this.V(dh(t,this.value))}V(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ct()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class MS extends Ri{constructor(e,t,r){super(e,t,r),this.key=Xe.fromName(r.referenceValue)}matches(e){const t=Xe.comparator(e.key,this.key);return this.V(t)}}class _b extends Ri{constructor(e,t){super(e,"in",t),this.keys=vb(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class yb extends Ri{constructor(e,t){super(e,"not-in",t),this.keys=vb(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function vb(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Xe.fromName(r.referenceValue))}class OS extends Ri{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return fh(t)&&_u(t.arrayValue,this.value)}}class wb extends Ri{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&_u(this.value.arrayValue,t)}}class LS extends Ri{constructor(e,t){super(e,"not-in",t)}matches(e){if(_u(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!_u(this.value.arrayValue,t)}}class Eb extends Ri{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!fh(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>_u(this.value.arrayValue,r))}}class Gc{constructor(e,t){this.position=e,this.inclusive=t}}class qc{constructor(e,t="asc"){this.field=e,this.dir=t}}function Ib(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}function bb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Xe.comparator(Xe.fromName(l.referenceValue),t.key):dh(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function Cb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ha(n.position[t],e.position[t]))return!1;return!0}class El{constructor(e,t=null,r=[],i=[],a=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=h,this.endAt=m,this.D=null,this.C=null}}function d0(n,e,t,r,i,a,l,h){return new El(n,e,t,r,i,a,l,h)}function ap(n){return new El(n)}function h0(n){return!wl(n.limit)&&"F"===n.limitType}function f0(n){return!wl(n.limit)&&"L"===n.limitType}function Tb(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Db(n){for(const e of n.filters)if(e.S())return e.field;return null}function Sb(n){return null!==n.collectionGroup}function up(n){const e=We(n);if(null===e.D){e.D=[];const t=Db(e),r=Tb(e);if(null!==t&&null===r)t.isKeyField()||e.D.push(new qc(t)),e.D.push(new qc(ei.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.D.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new qc(ei.keyField(),a))}}}return e.D}function ko(n){const e=We(n);if(!e.C)if("F"===e.limitType)e.C=$m(e.path,e.collectionGroup,up(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of up(e))t.push(new qc(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new Gc(e.endAt.position,!e.endAt.inclusive):null,i=e.startAt?new Gc(e.startAt.position,!e.startAt.inclusive):null;e.C=$m(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e.C}function lp(n,e,t){return new El(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Wm(n,e){return qm(ko(n),ko(e))&&n.limitType===e.limitType}function zm(n){return`${Gm(ko(n))}|lt:${n.limitType}`}function Il(n){return`Query(target=${function kS(n){let e=n.path.canonicalString();return null!==n.collectionGroup&&(e+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(e+=`, filters: [${n.filters.map(t=>{return`${(r=t).field.canonicalString()} ${r.op} ${hh(r.value)}`;var r}).join(", ")}]`),wl(n.limit)||(e+=", limit: "+n.limit),n.orderBy.length>0&&(e+=`, orderBy: [${n.orderBy.map(t=>{return`${(r=t).field.canonicalString()} (${r.dir})`;var r}).join(", ")}]`),n.startAt&&(e+=", startAt: ",e+=n.startAt.inclusive?"b:":"a:",e+=n.startAt.position.map(t=>hh(t)).join(",")),n.endAt&&(e+=", endAt: ",e+=n.endAt.inclusive?"a:":"b:",e+=n.endAt.position.map(t=>hh(t)).join(",")),`Target(${e})`}(ko(n))}; limitType=${n.limitType})`}function Km(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Xe.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of t.explicitOrderBy)if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const h=bb(i,a,l);return i.inclusive?h<=0:h<0}(t.startAt,up(t),r)||t.endAt&&!function(i,a,l){const h=bb(i,a,l);return i.inclusive?h>=0:h>0}(t.endAt,up(t),r)));var t,r}function Ab(n){return(e,t)=>{let r=!1;for(const i of up(n)){const a=FS(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function FS(n,e,t){const r=n.field.isKeyField()?Xe.comparator(e.key,t.key):function(i,a,l){const h=a.data.field(i),m=l.data.field(i);return null!==h&&null!==m?dh(h,m):ct()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ct()}}function Zm(n,e){if(n.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:sp(e)?"-0":e}}function p0(n){return{integerValue:""+n}}function g0(n,e){return xi(e)?p0(e):Zm(n,e)}class cp{constructor(){this._=void 0}}function WN(n,e,t){return n instanceof Wc?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof gh?US(n,e):n instanceof mh?Rb(n,e):function(r,i){const a=dp(r,i),l=Nb(a)+Nb(r.k);return o0(a)&&o0(r.k)?p0(l):Zm(r.O,l)}(n,e)}function xb(n,e,t){return n instanceof gh?US(n,e):n instanceof mh?Rb(n,e):t}function dp(n,e){return n instanceof bl?o0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Wc extends cp{}class gh extends cp{constructor(e){super(),this.elements=e}}function US(n,e){const t=VS(e);for(const r of n.elements)t.some(i=>ha(i,r))||t.push(r);return{arrayValue:{values:t}}}class mh extends cp{constructor(e){super(),this.elements=e}}function Rb(n,e){let t=VS(e);for(const r of n.elements)t=t.filter(i=>!ha(i,r));return{arrayValue:{values:t}}}class bl extends cp{constructor(e,t){super(),this.O=e,this.k=t}}function Nb(n){return gr(n.integerValue||n.doubleValue)}function VS(n){return fh(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class hp{constructor(e,t){this.field=e,this.transform=t}}class BS{constructor(e,t){this.version=e,this.transformResults=t}}class ln{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ln}static exists(e){return new ln(void 0,e)}static updateTime(e){return new ln(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ym(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class _h{}function jS(n,e,t){n instanceof fp?function(r,i,a){const l=r.value.clone(),h=Pb(r.fieldTransforms,i,a.transformResults);l.setAll(h),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof Cl?function(r,i,a){if(!Ym(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Pb(r.fieldTransforms,i,a.transformResults),h=i.data;h.setAll(E0(r)),h.setAll(l),i.convertToFoundDocument(a.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function _0(n,e,t){var i;n instanceof fp?function(r,i,a){if(!Ym(r.precondition,i))return;const l=r.value.clone(),h=kb(r.fieldTransforms,a,i);l.setAll(h),i.convertToFoundDocument(w0(i),l).setHasLocalMutations()}(n,e,t):n instanceof Cl?function(r,i,a){if(!Ym(r.precondition,i))return;const l=kb(r.fieldTransforms,a,i),h=i.data;h.setAll(E0(r)),h.setAll(l),i.convertToFoundDocument(w0(i),h).setHasLocalMutations()}(n,e,t):Ym(n.precondition,i=e)&&i.convertToNoDocument(bt.min())}function y0(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=dp(r.transform,i||null);null!=a&&(null==t&&(t=Ki.empty()),t.set(r.field,a))}return t||null}function v0(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Fc(t,r,(i,a)=>function m0(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof gh&&r instanceof gh||t instanceof mh&&r instanceof mh?Fc(t.elements,r.elements,ha):t instanceof bl&&r instanceof bl?ha(t.k,r.k):t instanceof Wc&&r instanceof Wc);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}function w0(n){return n.isFoundDocument()?n.version:bt.min()}class fp extends _h{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}}class Cl extends _h{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}}function E0(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function Pb(n,e,t){const r=new Map;Dt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,h=e.data.field(a.field);r.set(a.field,xb(l,h,t[i]))}return r}function kb(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,WN(a,l,e))}return r}class zc extends _h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}}class Ms extends _h{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}}class HS{constructor(e){this.count=e}}var jr,nn;function I0(n){switch(n){default:return ct();case ge.CANCELLED:case ge.UNKNOWN:case ge.DEADLINE_EXCEEDED:case ge.RESOURCE_EXHAUSTED:case ge.INTERNAL:case ge.UNAVAILABLE:case ge.UNAUTHENTICATED:return!1;case ge.INVALID_ARGUMENT:case ge.NOT_FOUND:case ge.ALREADY_EXISTS:case ge.PERMISSION_DENIED:case ge.FAILED_PRECONDITION:case ge.ABORTED:case ge.OUT_OF_RANGE:case ge.UNIMPLEMENTED:case ge.DATA_LOSS:return!0}}function Mb(n){if(void 0===n)return kr("GRPC error has no .code"),ge.UNKNOWN;switch(n){case jr.OK:return ge.OK;case jr.CANCELLED:return ge.CANCELLED;case jr.UNKNOWN:return ge.UNKNOWN;case jr.DEADLINE_EXCEEDED:return ge.DEADLINE_EXCEEDED;case jr.RESOURCE_EXHAUSTED:return ge.RESOURCE_EXHAUSTED;case jr.INTERNAL:return ge.INTERNAL;case jr.UNAVAILABLE:return ge.UNAVAILABLE;case jr.UNAUTHENTICATED:return ge.UNAUTHENTICATED;case jr.INVALID_ARGUMENT:return ge.INVALID_ARGUMENT;case jr.NOT_FOUND:return ge.NOT_FOUND;case jr.ALREADY_EXISTS:return ge.ALREADY_EXISTS;case jr.PERMISSION_DENIED:return ge.PERMISSION_DENIED;case jr.FAILED_PRECONDITION:return ge.FAILED_PRECONDITION;case jr.ABORTED:return ge.ABORTED;case jr.OUT_OF_RANGE:return ge.OUT_OF_RANGE;case jr.UNIMPLEMENTED:return ge.UNIMPLEMENTED;case jr.DATA_LOSS:return ge.DATA_LOSS;default:return ct()}}(nn=jr||(jr={}))[nn.OK=0]="OK",nn[nn.CANCELLED=1]="CANCELLED",nn[nn.UNKNOWN=2]="UNKNOWN",nn[nn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",nn[nn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",nn[nn.NOT_FOUND=5]="NOT_FOUND",nn[nn.ALREADY_EXISTS=6]="ALREADY_EXISTS",nn[nn.PERMISSION_DENIED=7]="PERMISSION_DENIED",nn[nn.UNAUTHENTICATED=16]="UNAUTHENTICATED",nn[nn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",nn[nn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",nn[nn.ABORTED=10]="ABORTED",nn[nn.OUT_OF_RANGE=11]="OUT_OF_RANGE",nn[nn.UNIMPLEMENTED=12]="UNIMPLEMENTED",nn[nn.INTERNAL=13]="INTERNAL",nn[nn.UNAVAILABLE=14]="UNAVAILABLE",nn[nn.DATA_LOSS=15]="DATA_LOSS";class br{constructor(e,t){this.comparator=e,this.root=t||mi.EMPTY}insert(e,t){return new br(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,mi.BLACK,null,null))}remove(e){return new br(this.comparator,this.root.remove(e,this.comparator).copy(null,null,mi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pp(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pp(this.root,e,this.comparator,!1)}getReverseIterator(){return new pp(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pp(this.root,e,this.comparator,!0)}}class pp{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class mi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=null!=r?r:mi.RED,this.left=null!=i?i:mi.EMPTY,this.right=null!=a?a:mi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new mi(null!=e?e:this.key,null!=t?t:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return mi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return mi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ct();const e=this.left.check();if(e!==this.right.check())throw ct();return e+(this.isRed()?0:1)}}mi.EMPTY=null,mi.RED=!0,mi.BLACK=!1,mi.EMPTY=new class{constructor(){this.size=0}get key(){throw ct()}get value(){throw ct()}get color(){throw ct()}get left(){throw ct()}get right(){throw ct()}copy(n,e,t,r,i){return this}insert(n,e,t){return new mi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ar{constructor(e){this.comparator=e,this.data=new br(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new b0(this.data.getIterator())}getIteratorFrom(e){return new b0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof ar)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new ar(this.comparator);return t.data=e,t}}class b0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Kc(n){return n.hasNext()?n.getNext():void 0}const $S=new br(Xe.comparator);function uo(){return $S}const Ob=new br(Xe.comparator);function Zc(){return Ob}const C0=new br(Xe.comparator),Lb=new ar(Xe.comparator);function _n(...n){let e=Lb;for(const t of n)e=e.add(t);return e}const Fb=new ar(Ht);function gp(){return Fb}class mp{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t){const r=new Map;return r.set(e,_p.createSynthesizedTargetChangeForCurrentChange(e,t)),new mp(bt.min(),r,gp(),uo(),_n())}}class _p{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t){return new _p(Mr.EMPTY_BYTE_STRING,t,_n(),_n(),_n())}}class T0{constructor(e,t,r,i){this.M=e,this.removedTargetIds=t,this.key=r,this.$=i}}class GS{constructor(e,t){this.targetId=e,this.F=t}}class D0{constructor(e,t,r=Mr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Ub{constructor(){this.B=0,this.L=WS(),this.U=Mr.EMPTY_BYTE_STRING,this.q=!1,this.K=!0}get current(){return this.q}get resumeToken(){return this.U}get G(){return 0!==this.B}get j(){return this.K}W(e){e.approximateByteSize()>0&&(this.K=!0,this.U=e)}H(){let e=_n(),t=_n(),r=_n();return this.L.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:ct()}}),new _p(this.U,this.q,e,t,r)}J(){this.K=!1,this.L=WS()}Y(e,t){this.K=!0,this.L=this.L.insert(e,t)}X(e){this.K=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.K=!0,this.q=!0}}class qS{constructor(e){this.nt=e,this.st=new Map,this.it=uo(),this.rt=Vb(),this.ot=new ar(Ht)}ct(e){for(const t of e.M)e.$&&e.$.isFoundDocument()?this.ut(t,e.$):this.at(t,e.key,e.$);for(const t of e.removedTargetIds)this.at(t,e.key,e.$)}ht(e){this.forEachTarget(e,t=>{const r=this.lt(t);switch(e.state){case 0:this.ft(t)&&r.W(e.resumeToken);break;case 1:r.tt(),r.G||r.J(),r.W(e.resumeToken);break;case 2:r.tt(),r.G||this.removeTarget(t);break;case 3:this.ft(t)&&(r.et(),r.W(e.resumeToken));break;case 4:this.ft(t)&&(this.dt(t),r.W(e.resumeToken));break;default:ct()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.st.forEach((r,i)=>{this.ft(i)&&t(i)})}_t(e){const t=e.targetId,r=e.F.count,i=this.wt(t);if(i){const a=i.target;if(op(a))if(0===r){const l=new Xe(a.path);this.at(t,l,or.newNoDocument(l,bt.min()))}else Dt(1===r);else this.gt(t)!==r&&(this.dt(t),this.ot=this.ot.add(t))}}yt(e){const t=new Map;this.st.forEach((a,l)=>{const h=this.wt(l);if(h){if(a.current&&op(h.target)){const m=new Xe(h.target.path);null!==this.it.get(m)||this.It(l,m)||this.at(l,m,or.newNoDocument(m,e))}a.j&&(t.set(l,a.H()),a.J())}});let r=_n();this.rt.forEach((a,l)=>{let h=!0;l.forEachWhile(m=>{const w=this.wt(m);return!w||2===w.purpose||(h=!1,!1)}),h&&(r=r.add(a))}),this.it.forEach((a,l)=>l.setReadTime(e));const i=new mp(e,t,this.ot,this.it,r);return this.it=uo(),this.rt=Vb(),this.ot=new ar(Ht),i}ut(e,t){if(!this.ft(e))return;const r=this.It(e,t.key)?2:0;this.lt(e).Y(t.key,r),this.it=this.it.insert(t.key,t),this.rt=this.rt.insert(t.key,this.Et(t.key).add(e))}at(e,t,r){if(!this.ft(e))return;const i=this.lt(e);this.It(e,t)?i.Y(t,1):i.X(t),this.rt=this.rt.insert(t,this.Et(t).delete(e)),r&&(this.it=this.it.insert(t,r))}removeTarget(e){this.st.delete(e)}gt(e){const t=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let t=this.st.get(e);return t||(t=new Ub,this.st.set(e,t)),t}Et(e){let t=this.rt.get(e);return t||(t=new ar(Ht),this.rt=this.rt.insert(e,t)),t}ft(e){const t=null!==this.wt(e);return t||Be("WatchChangeAggregator","Detected inactive target",e),t}wt(e){const t=this.st.get(e);return t&&t.G?null:this.nt.Tt(e)}dt(e){this.st.set(e,new Ub),this.nt.getRemoteKeysForTarget(e).forEach(t=>{this.at(e,t,null)})}It(e,t){return this.nt.getRemoteKeysForTarget(e).has(t)}}function Vb(){return new br(Xe.comparator)}function WS(){return new br(Xe.comparator)}const zN={asc:"ASCENDING",desc:"DESCENDING"},KN={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class ZN{constructor(e,t){this.databaseId=e,this.N=t}}function Qm(n,e){return n.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bb(n,e){return n.N?e.toBase64():e.toUint8Array()}function Jm(n,e){return Qm(n,e.toTimestamp())}function ti(n){return Dt(!!n),bt.fromTimestamp(function(e){const t=mu(e);return new Xr(t.seconds,t.nanos)}(n))}function S0(n,e){return(t=n,new tn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function A0(n){const e=tn.fromString(n);return Dt(R0(e)),e}function Mo(n,e){return S0(n.databaseId,e.path)}function Oo(n,e){const t=A0(e);if(t.get(1)!==n.databaseId.projectId)throw new Me(ge.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Me(ge.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Xe(e_(t))}function yp(n,e){return S0(n.databaseId,e)}function Xm(n){const e=A0(n);return 4===e.length?tn.emptyPath():e_(e)}function vp(n){return new tn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function e_(n){return Dt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function t_(n,e,t){return{name:Mo(n,e),fields:t.value.mapValue.fields}}function wp(n,e,t){const r=Oo(n,e.name),i=ti(e.updateTime),a=new Ki({mapValue:{fields:e.fields}}),l=or.newFoundDocument(r,i,a);return t&&l.setHasCommittedMutations(),t?l.setHasCommittedMutations():l}function n_(n,e){let t;if(e instanceof fp)t={update:t_(n,e.key,e.value)};else if(e instanceof zc)t={delete:Mo(n,e.key)};else if(e instanceof Cl)t={update:t_(n,e.key,e.data),updateMask:JN(e.fieldMask)};else{if(!(e instanceof Ms))return ct();t={verify:Mo(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Wc)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof gh)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof mh)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof bl)return{fieldPath:a.field.canonicalString(),increment:l.k};throw ct()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:Jm(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:ct()),t;var i}function jb(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?ln.updateTime(ti(i.updateTime)):void 0!==i.exists?ln.exists(i.exists):ln.none():ln.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let h=null;"setToServerValue"in l?(Dt("REQUEST_TIME"===l.setToServerValue),h=new Wc):"appendMissingElements"in l?h=new gh(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new mh(l.removeAllFromArray.values||[]):"increment"in l?h=new bl(a,l.increment):ct();const m=ei.fromServerFormat(l.fieldPath);return new hp(m,h)}(n,i)):[];var i;if(e.update){const i=Oo(n,e.update.name),a=new Ki({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new lh((e.updateMask.fieldPaths||[]).map(w=>ei.fromServerFormat(w)));return new Cl(i,a,l,t,r)}return new fp(i,a,t,r)}if(e.delete){const i=Oo(n,e.delete);return new zc(i,t)}if(e.verify){const i=Oo(n,e.verify);return new Ms(i,t)}return ct()}function $b(n,e){return{documents:[yp(n,e.path)]}}function Gb(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=yp(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yp(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0===m.length)return;const w=m.map(D=>function(S){if("=="===S.op){if(u0(S.value))return{unaryFilter:{field:yh(S.field),op:"IS_NAN"}};if(a0(S.value))return{unaryFilter:{field:yh(S.field),op:"IS_NULL"}}}else if("!="===S.op){if(u0(S.value))return{unaryFilter:{field:yh(S.field),op:"IS_NOT_NAN"}};if(a0(S.value))return{unaryFilter:{field:yh(S.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:yh(S.field),op:zb(S.op),value:S.value}}}(D));return 1===w.length?w[0]:{compositeFilter:{op:"AND",filters:w}}}(e.filters);i&&(t.structuredQuery.where=i);const a=function(m){if(0!==m.length)return m.map(w=>{return{field:yh((D=w).field),direction:Wb(D.dir)};var D})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=(w=e.limit,n.N||wl(w)?w:{value:w});var w,h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function qb(n){let e=Xm(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Dt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let a=[];t.where&&(a=x0(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new qc(vh((S=D).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,wl(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new Gc((D=t.startAt).values||[],!!D.before));let w=null;return t.endAt&&(w=function(D){return new Gc(D.values||[],!D.before)}(t.endAt)),d0(e,i,l,a,h,"F",m,w)}function x0(n){return n?void 0!==n.unaryFilter?[r_(n)]:void 0!==n.fieldFilter?[Kb(n)]:void 0!==n.compositeFilter?n.compositeFilter.filters.map(e=>x0(e)).reduce((e,t)=>e.concat(t)):ct():[]}function Wb(n){return zN[n]}function zb(n){return KN[n]}function yh(n){return{fieldPath:n.canonicalString()}}function vh(n){return ei.fromServerFormat(n.fieldPath)}function Kb(n){return Ri.create(vh(n.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ct()}}(n.fieldFilter.op),n.fieldFilter.value)}function r_(n){switch(n.unaryFilter.op){case"IS_NAN":const e=vh(n.unaryFilter.field);return Ri.create(e,"==",{doubleValue:NaN});case"IS_NULL":const t=vh(n.unaryFilter.field);return Ri.create(t,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=vh(n.unaryFilter.field);return Ri.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=vh(n.unaryFilter.field);return Ri.create(i,"!=",{nullValue:"NULL_VALUE"});default:return ct()}}function JN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function R0(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function Cr(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Zb(e)),e=KS(n.get(t),e);return Zb(e)}function KS(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function Zb(n){return n+"\x01\x01"}function fa(n){const e=n.length;if(Dt(e>=2),2===e)return Dt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),tn.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&ct(),n.charAt(l+1)){case"\x01":const h=n.substring(a,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:ct()}a=l+2}return new tn(r)}class ZS{constructor(e,t){this.seconds=e,this.nanoseconds=t}}class lo{constructor(e,t,r){this.ownerId=e,this.allowTabSynchronization=t,this.leaseTimestampMs=r}}lo.store="owner",lo.key="owner";class Tl{constructor(e,t,r){this.userId=e,this.lastAcknowledgedBatchId=t,this.lastStreamToken=r}}Tl.store="mutationQueues",Tl.keyPath="userId";class Fn{constructor(e,t,r,i,a){this.userId=e,this.batchId=t,this.localWriteTimeMs=r,this.baseMutations=i,this.mutations=a}}Fn.store="mutations",Fn.keyPath="batchId",Fn.userMutationsIndex="userMutationsIndex",Fn.userMutationsKeyPath=["userId","batchId"];class Ni{constructor(){}static prefixForUser(e){return[e]}static prefixForPath(e,t){return[e,Cr(t)]}static key(e,t,r){return[e,Cr(t),r]}}Ni.store="documentMutations",Ni.PLACEHOLDER=new Ni;class YS{constructor(e,t){this.path=e,this.readTime=t}}class QS{constructor(e,t){this.path=e,this.version=t}}class mr{constructor(e,t,r,i,a,l){this.unknownDocument=e,this.noDocument=t,this.document=r,this.hasCommittedMutations=i,this.readTime=a,this.parentPath=l}}mr.store="remoteDocuments",mr.readTimeIndex="readTimeIndex",mr.readTimeIndexPath="readTime",mr.collectionReadTimeIndex="collectionReadTimeIndex",mr.collectionReadTimeIndexPath=["parentPath","readTime"];class pa{constructor(e){this.byteSize=e}}pa.store="remoteDocumentGlobal",pa.key="remoteDocumentGlobalKey";class ps{constructor(e,t,r,i,a,l,h){this.targetId=e,this.canonicalId=t,this.readTime=r,this.resumeToken=i,this.lastListenSequenceNumber=a,this.lastLimboFreeSnapshotVersion=l,this.query=h}}ps.store="targets",ps.keyPath="targetId",ps.queryTargetsIndexName="queryTargetsIndex",ps.queryTargetsKeyPath=["canonicalId","targetId"];class Pi{constructor(e,t,r){this.targetId=e,this.path=t,this.sequenceNumber=r}}Pi.store="targetDocuments",Pi.keyPath=["targetId","path"],Pi.documentTargetsIndex="documentTargetsIndex",Pi.documentTargetsKeyPath=["path","targetId"];class co{constructor(e,t,r,i){this.highestTargetId=e,this.highestListenSequenceNumber=t,this.lastRemoteSnapshotVersion=r,this.targetCount=i}}co.key="targetGlobalKey",co.store="targetGlobal";class wh{constructor(e,t){this.collectionId=e,this.parent=t}}wh.store="collectionParents",wh.keyPath=["collectionId","parent"];class Dl{constructor(e,t,r,i){this.clientId=e,this.updateTimeMs=t,this.networkEnabled=r,this.inForeground=i}}Dl.store="clientMetadata",Dl.keyPath="clientId";class Ep{constructor(e,t,r){this.bundleId=e,this.createTime=t,this.version=r}}Ep.store="bundles",Ep.keyPath="bundleId";class Eh{constructor(e,t,r){this.name=e,this.readTime=t,this.bundledQuery=r}}Eh.store="namedQueries",Eh.keyPath="name";class ho{constructor(e,t,r){this.indexId=e,this.collectionGroup=t,this.fields=r}}ho.store="indexConfiguration",ho.keyPath="indexId",ho.collectionGroupIndex="collectionGroupIndex",ho.collectionGroupIndexPath="collectionGroup";class Lo{constructor(e,t,r,i,a,l){this.indexId=e,this.uid=t,this.sequenceNumber=r,this.readTime=i,this.documentKey=a,this.largestBatchId=l}}Lo.store="indexState",Lo.keyPath=["indexId","uid"],Lo.sequenceNumberIndex="sequenceNumberIndex",Lo.sequenceNumberIndexPath=["uid","sequenceNumber"];class Fo{constructor(e,t,r,i,a){this.indexId=e,this.uid=t,this.arrayValue=r,this.directionalValue=i,this.documentKey=a}}Fo.store="indexEntries",Fo.keyPath=["indexId","uid","arrayValue","directionalValue","documentKey"],Fo.documentKeyIndex="documentKeyIndex",Fo.documentKeyIndexPath=["indexId","uid","documentKey"];class _i{constructor(e,t,r,i,a,l){this.userId=e,this.collectionPath=t,this.documentId=r,this.collectionGroup=i,this.largestBatchId=a,this.overlayMutation=l}}_i.store="documentOverlays",_i.keyPath=["userId","collectionPath","documentId"],_i.collectionPathOverlayIndex="collectionPathOverlayIndex",_i.collectionPathOverlayIndexPath=["userId","collectionPath","largestBatchId"],_i.collectionGroupOverlayIndex="collectionGroupOverlayIndex",_i.collectionGroupOverlayIndexPath=["userId","collectionGroup","largestBatchId"];const s=[Tl.store,Fn.store,Ni.store,mr.store,ps.store,lo.store,co.store,Pi.store,Dl.store,pa.store,wh.store,Ep.store,Eh.store],o=[...s,_i.store],u=[...o,ho.store,Lo.store,Fo.store],c="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class d{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class f{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ct(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new f((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof f?t:f.resolve(t)}catch(t){return f.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):f.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):f.reject(t)}static resolve(e){return new f((t,r)=>{t(e)})}static reject(e){return new f((t,r)=>{r(e)})}static waitFor(e){return new f((t,r)=>{let i=0,a=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++a,l&&a===i&&t()},m=>r(m))}),l=!0,a===i&&t()})}static or(e){let t=f.resolve(!1);for(const r of e)t=t.next(i=>i?f.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}}class y{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.At=new An,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{t.error?this.At.reject(new A(e,t.error)):this.At.resolve()},this.transaction.onerror=r=>{const i=Ie(r.target.error);this.At.reject(new A(e,i))}}static open(e,t,r,i){try{return new y(t,e.transaction(i,r))}catch(a){throw new A(t,a)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(Be("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}Pt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new F(t)}}class E{constructor(e,t,r){this.name=e,this.version=t,this.bt=r,12.2===E.vt((0,M.z$)())&&kr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Be("SimpleDb","Removing database:",e),$(window.indexedDB.deleteDatabase(e)).toPromise()}static Vt(){if(!(0,M.hl)())return!1;if(E.St())return!0;const e=(0,M.z$)(),t=E.vt(e),r=0<t&&t<10,i=E.Dt(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static Nt(e,t){return e.store(t)}static vt(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static Dt(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}xt(e){var t=this;return(0,Ee.Z)(function*(){return t.db||(Be("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new A(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new Me(ge.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new Me(ge.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new A(e,h))},a.onupgradeneeded=l=>{Be("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.bt.kt(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Be("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.Ot&&(t.db.onversionchange=r=>t.Ot(r)),t.db})()}Mt(e){this.Ot=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,Ee.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{a.db=yield a.xt(e);const m=y.open(a.db,e,l?"readonly":"readwrite",r),w=i(m).next(D=>(m.Pt(),D)).catch(D=>(m.abort(D),f.reject(D))).toPromise();return w.catch(()=>{}),yield m.Rt,w}catch(m){const w="FirebaseError"!==m.name&&h<3;if(Be("SimpleDb","Transaction failed with error:",m.message,"Retrying:",w),a.close(),!w)return Promise.reject(m)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class b{constructor(e){this.$t=e,this.Ft=!1,this.Bt=null}get isDone(){return this.Ft}get Lt(){return this.Bt}set cursor(e){this.$t=e}done(){this.Ft=!0}Ut(e){this.Bt=e}delete(){return $(this.$t.delete())}}class A extends Me{constructor(e,t){super(ge.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function x(n){return"IndexedDbTransactionError"===n.name}class F{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Be("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Be("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),$(r)}add(e){return Be("SimpleDb","ADD",this.store.name,e,e),$(this.store.add(e))}get(e){return $(this.store.get(e)).next(t=>(void 0===t&&(t=null),Be("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Be("SimpleDb","DELETE",this.store.name,e),$(this.store.delete(e))}count(){return Be("SimpleDb","COUNT",this.store.name),$(this.store.count())}qt(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.Kt(i,(l,h)=>{a.push(h)}).next(()=>a)}{const i=this.store.getAll(r.range);return new f((a,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{a(h.target.result)}})}}Gt(e,t){Be("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.jt=!1;const i=this.cursor(r);return this.Kt(i,(a,l,h)=>h.delete())}Qt(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.Kt(i,t)}Wt(e){const t=this.cursor({});return new f((r,i)=>{t.onerror=a=>{const l=Ie(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}Kt(e,t){const r=[];return new f((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new b(h),w=t(h.primaryKey,h.value,m);if(w instanceof f){const D=w.catch(S=>(m.done(),f.reject(S)));r.push(D)}m.isDone?i():null===m.Lt?h.continue():h.continue(m.Lt)}}).next(()=>f.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.jt?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function $(n){return new f((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=Ie(r.target.error);t(i)}})}let ee=!1;function Ie(n){const e=E.vt((0,M.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Me("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return ee||(ee=!0,setTimeout(()=>{throw r},0)),r}}return n}class Ve extends d{constructor(e,t){super(),this.zt=e,this.currentSequenceNumber=t}}function Ue(n,e){const t=We(n);return E.Nt(t.zt,e)}class nt{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&jS(a,e,r[i])}}applyToLocalView(e){for(const t of this.baseMutations)t.key.isEqual(e.key)&&_0(t,e,this.localWriteTime);for(const t of this.mutations)t.key.isEqual(e.key)&&_0(t,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(t=>{const r=e.get(t.key),i=r;this.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(bt.min())})}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_n())}isEqual(e){return this.batchId===e.batchId&&Fc(this.mutations,e.mutations,(t,r)=>v0(t,r))&&Fc(this.baseMutations,e.baseMutations,(t,r)=>v0(t,r))}}class Ae{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Dt(e.mutations.length===r.length);let i=C0;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Ae(e,t,r,i)}}class mt{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Nt{constructor(e,t,r,i,a=bt.min(),l=bt.min(),h=Mr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h}withSequenceNumber(e){return new Nt(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Nt(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Nt(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class pn{constructor(e){this.Ht=e}}function gs(n,e){let t;if(e.document)t=wp(n.Ht,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Xe.fromSegments(e.noDocument.path),i=vu(e.noDocument.readTime);t=or.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ct();{const r=Xe.fromSegments(e.unknownDocument.path),i=vu(e.unknownDocument.version);t=or.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(bp(e.readTime)),t}function Sl(n,e){const t=Ip(e.readTime),r=e.key.path.popLast().toArray();if(e.isFoundDocument()){const i={name:Mo(l=n.Ht,(h=e).key),fields:h.data.value.mapValue.fields,updateTime:Qm(l,h.version.toTimestamp())};return new mr(null,null,i,e.hasCommittedMutations,t,r)}var l,h;if(e.isNoDocument()){const i=e.key.path.toArray(),a=yu(e.version),l=e.hasCommittedMutations;return new mr(null,new YS(i,a),null,l,t,r)}if(e.isUnknownDocument()){const i=e.key.path.toArray(),a=yu(e.version);return new mr(new QS(i,a),null,null,!0,t,r)}return ct()}function Ip(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bp(n){const e=new Xr(n[0],n[1]);return bt.fromTimestamp(e)}function yu(n){const e=n.toTimestamp();return new ZS(e.seconds,e.nanoseconds)}function vu(n){const e=new Xr(n.seconds,n.nanoseconds);return bt.fromTimestamp(e)}function Al(n,e){const t=(e.baseMutations||[]).map(a=>jb(n.Ht,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>jb(n.Ht,a)),i=Xr.fromMillis(e.localWriteTimeMs);return new nt(e.batchId,i,t,r)}function Yc(n){const e=vu(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?vu(n.lastLimboFreeSnapshotVersion):bt.min();let r;var i;return void 0!==n.query.documents?(Dt(1===(i=n.query).documents.length),r=ko(ap(Xm(i.documents[0])))):r=ko(qb(n.query)),new Nt(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Mr.fromBase64String(n.resumeToken))}function i_(n,e){const t=yu(e.snapshotVersion),r=yu(e.lastLimboFreeSnapshotVersion);let i;i=op(e.target)?$b(n.Ht,e.target):Gb(n.Ht,e.target);const a=e.resumeToken.toBase64();return new ps(e.targetId,Gm(e.target),t,a,e.sequenceNumber,r,i)}function Cp(n){const e=qb({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?lp(e,e.limit,"L"):e}function Tp(n,e){return new mt(e.largestBatchId,jb(n.Ht,e.overlayMutation))}function XN(n,e){const t=e.path.lastSegment();return[n,Cr(e.path.popLast()),t]}class SO{getBundleMetadata(e,t){return eP(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:vu(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return eP(e).put({bundleId:(r=t).id,createTime:yu(ti(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tP(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:Cp(i.bundledQuery),readTime:vu(i.readTime)};var i})}saveNamedQuery(e,t){return tP(e).put({name:(r=t).name,readTime:yu(ti(r.readTime)),bundledQuery:r.bundledQuery});var r}}function eP(n){return Ue(n,Ep.store)}function tP(n){return Ue(n,Eh.store)}class JS{constructor(e,t){this.O=e,this.userId=t}static Jt(e,t){return new JS(e,t.uid||"")}getOverlay(e,t){return N0(e).get(XN(this.userId,t)).next(r=>r?Tp(this.O,r):null)}saveOverlays(e,t,r){const i=[];return r.forEach(a=>{const l=new mt(t,a);i.push(this.Yt(e,l))}),f.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Cr(l.getCollectionPath())));const a=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(N0(e).Gt(_i.collectionPathOverlayIndex,h))}),f.waitFor(a)}getOverlaysForCollection(e,t,r){const i=new Map,a=Cr(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return N0(e).qt(_i.collectionPathOverlayIndex,l).next(h=>{for(const m of h){const w=Tp(this.O,m);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=new Map;let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return N0(e).Qt({index:_i.collectionGroupOverlayIndex,range:h},(m,w,D)=>{const S=Tp(this.O,w);a.size<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>a)}Yt(e,t){return N0(e).put(function(r,i,a){const[l,h,m]=XN(i,a.mutation.key);return new _i(i,h,m,a.mutation.key.getCollectionGroup(),a.largestBatchId,n_(r.Ht,a.mutation))}(this.O,this.userId,t))}}function N0(n){return Ue(n,_i.store)}class Yb{constructor(){}Xt(e,t){this.Zt(e,t),t.te()}Zt(e,t){if("nullValue"in e)this.ee(t,5);else if("booleanValue"in e)this.ee(t,10),t.ne(e.booleanValue?1:0);else if("integerValue"in e)this.ee(t,15),t.ne(gr(e.integerValue));else if("doubleValue"in e){const r=gr(e.doubleValue);isNaN(r)?this.ee(t,13):(this.ee(t,15),sp(r)?t.ne(0):t.ne(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ee(t,20),"string"==typeof r?t.se(r):(t.se(`${r.seconds||""}`),t.ne(r.nanos||0))}else if("stringValue"in e)this.ie(e.stringValue,t),this.re(t);else if("bytesValue"in e)this.ee(t,30),t.oe(vl(e.bytesValue)),this.re(t);else if("referenceValue"in e)this.ce(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ee(t,45),t.ne(r.latitude||0),t.ne(r.longitude||0)}else"mapValue"in e?ha(e,PS)?this.ee(t,Number.MAX_SAFE_INTEGER):(this.ue(e.mapValue,t),this.re(t)):"arrayValue"in e?(this.ae(e.arrayValue,t),this.re(t)):ct()}ie(e,t){this.ee(t,25),this.he(e,t)}he(e,t){t.se(e)}ue(e,t){const r=e.fields||{};this.ee(t,55);for(const i of Object.keys(r))this.ie(i,t),this.Zt(r[i],t)}ae(e,t){const r=e.values||[];this.ee(t,50);for(const i of r)this.Zt(i,t)}ce(e,t){this.ee(t,37),Xe.fromName(e).path.forEach(r=>{this.ee(t,60),this.he(r,t)})}ee(e,t){e.ne(t)}re(e){e.ne(2)}}function AO(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function nP(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=AO(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}Yb.le=new Yb;class xO{constructor(){this.buffer=new Uint8Array(1024),this.position=0}fe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.de(r.value),r=t.next();this._e()}we(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.me(r.value),r=t.next();this.ge()}ye(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.de(r);else if(r<2048)this.de(960|r>>>6),this.de(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.de(480|r>>>12),this.de(128|63&r>>>6),this.de(128|63&r);else{const i=t.codePointAt(0);this.de(240|i>>>18),this.de(128|63&i>>>12),this.de(128|63&i>>>6),this.de(128|63&i)}}this._e()}pe(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.me(r);else if(r<2048)this.me(960|r>>>6),this.me(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.me(480|r>>>12),this.me(128|63&r>>>6),this.me(128|63&r);else{const i=t.codePointAt(0);this.me(240|i>>>18),this.me(128|63&i>>>12),this.me(128|63&i>>>6),this.me(128|63&i)}}this.ge()}Ie(e){const t=this.Ee(e),r=nP(t);this.Te(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Ae(e){const t=this.Ee(e),r=nP(t);this.Te(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}Re(){this.Pe(255),this.Pe(255)}be(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Te(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ve(){return this.buffer.slice(0,this.position)}Ee(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}de(e){const t=255&e;0===t?(this.Pe(0),this.Pe(255)):255===t?(this.Pe(255),this.Pe(0)):this.Pe(t)}me(e){const t=255&e;0===t?(this.ve(0),this.ve(255)):255===t?(this.ve(255),this.ve(0)):this.ve(e)}_e(){this.Pe(0),this.Pe(1)}ge(){this.ve(0),this.ve(1)}Pe(e){this.Te(1),this.buffer[this.position++]=e}ve(e){this.Te(1),this.buffer[this.position++]=~e}Te(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class RO{constructor(e){this.Se=e}oe(e){this.Se.fe(e)}se(e){this.Se.ye(e)}ne(e){this.Se.Ie(e)}te(){this.Se.Re()}}class NO{constructor(e){this.Se=e}oe(e){this.Se.we(e)}se(e){this.Se.pe(e)}ne(e){this.Se.Ae(e)}te(){this.Se.be()}}class rP{constructor(){this.Se=new xO,this.De=new RO(this.Se),this.Ce=new NO(this.Se)}seed(e){this.Se.seed(e)}Ne(e){return 0===e?this.De:this.Ce}Ve(){return this.Se.Ve()}reset(){this.Se.reset()}}class XS{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}}function eA(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=Xe.comparator(n.documentKey,e.documentKey),0!==t?t:(t=iP(n.arrayValue,e.arrayValue),0!==t?t:iP(n.directionalValue,e.directionalValue)))}function iP(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class PO{constructor(){this.xe=new tA}addToCollectionParentIndex(e,t){return this.xe.add(t),f.resolve()}getCollectionParents(e,t){return f.resolve(this.xe.getEntries(t))}addFieldIndex(e,t){return f.resolve()}deleteFieldIndex(e,t){return f.resolve()}getDocumentsMatchingTarget(e,t,r){return f.resolve(_n())}getFieldIndex(e,t){return f.resolve(null)}getFieldIndexes(e,t){return f.resolve([])}getNextCollectionGroupToUpdate(e){return f.resolve(null)}updateCollectionGroup(e,t,r){return f.resolve()}updateIndexEntries(e,t){return f.resolve()}}class tA{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new ar(tn.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ar(tn.comparator)).toArray()}}class kO{constructor(e){this.user=e,this.ke=new tA,this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.ke.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.ke.add(t)});const a={collectionId:r,parent:Cr(i)};return sP(e).put(a)}return f.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[pb(t),""],!1,!0);return sP(e).qt(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(fa(l.parent))}return r})}addFieldIndex(e,t){const r=Jb(e),i=new ho((a=t).indexId,a.collectionGroup,a.fields.map(l=>[l.fieldPath.canonicalString(),l.kind]));var a;return delete i.indexId,r.add(i).next()}deleteFieldIndex(e,t){const r=Jb(e),i=Xb(e),a=Qb(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t,r){return f.resolve(_n())}getFieldIndex(e,t){return f.resolve(null)}Oe(e,t){const r=new rP;for(const i of e.fields.filter(l=>2!==l.kind)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.Ne(i.kind);Yb.le.Xt(a,l)}return r.Ve()}Me(e){const t=new rP;return Yb.le.Xt(e,t.Ne(0)),t.Ve()}getFieldIndexes(e,t){const r=Jb(e),i=Xb(e);return(t?r.qt(ho.collectionGroupIndex,IDBKeyRange.bound(t,t)):r.qt()).next(a=>{const l=[];return f.forEach(a,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(w,D){const S=D?new ph(D.sequenceNumber,new Hm(vu(D.readTime),new Xe(fa(D.documentKey)),D.largestBatchId)):ph.empty(),P=w.fields.map(([U,q])=>new $c(ei.fromServerFormat(U),q));return new jm(w.indexId,w.collectionGroup,P,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>r.indexState.sequenceNumber-i.indexState.sequenceNumber),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=Jb(e),a=Xb(e);return this.$e(e).next(l=>i.qt(ho.collectionGroupIndex,IDBKeyRange.bound(t,t)).next(h=>f.forEach(h,m=>{return a.put(new Lo(m.indexId,this.user.uid||"",l,yu((P=r).readTime),Cr(P.documentKey.path),P.largestBatchId));var P})))}updateIndexEntries(e,t){const r=new Map;return f.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?f.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),f.forEach(h,m=>this.Fe(e,i,m).next(w=>{const D=this.Be(a,m);return w.isEqual(D)?f.resolve():this.Le(e,a,w,D)}))))})}Ue(e,t,r){return Qb(e).put(new Fo(r.indexId,this.uid,r.arrayValue,r.directionalValue,Cr(t.key.path)))}qe(e,t,r){return Qb(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,Cr(t.key.path)])}Fe(e,t,r){const i=Qb(e);let a=new ar(eA);return i.Qt({index:Fo.documentKeyIndex,range:IDBKeyRange.only([r.indexId,this.uid,Cr(t.path)])},(l,h)=>{a=a.add(new XS(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>a)}Be(e,t){let r=new ar(eA);const i=this.Oe(t,e);if(null==i)return r;const a=t.fields.find(h=>2===h.kind);if(null!=a){const l=e.data.field(a.fieldPath);if(fh(l))for(const h of l.arrayValue.values||[])r=r.add(new XS(t.indexId,e.key,this.Me(h),i))}else r=r.add(new XS(t.indexId,e.key,new Uint8Array,i));return r}Le(e,t,r,i){Be("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const a=[];return function(l,h,m,w,D){const S=l.getIterator(),P=h.getIterator();let U=Kc(S),q=Kc(P);for(;U||q;){let ve=!1,ke=!1;if(U&&q){const tt=m(U,q);tt<0?ke=!0:tt>0&&(ve=!0)}else null!=U?ke=!0:ve=!0;ve?(w(q),q=Kc(P)):ke?(D(U),U=Kc(S)):(U=Kc(S),q=Kc(P))}}(r,i,eA,l=>{a.push(this.Ue(e,t,l))},l=>{a.push(this.qe(e,t,l))}),f.waitFor(a)}$e(e){let t=1;return Xb(e).Qt({index:Lo.sequenceNumberIndex,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}}function sP(n){return Ue(n,wh.store)}function Qb(n){return Ue(n,Fo.store)}function Jb(n){return Ue(n,ho.store)}function Xb(n){return Ue(n,Lo.store)}const oP={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class fo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new fo(e,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function aP(n,e,t){const r=n.store(Fn.store),i=n.store(Ni.store),a=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.Qt({range:l},(D,S,P)=>(h++,P.delete()));a.push(m.next(()=>{Dt(1===h)}));const w=[];for(const D of t.mutations){const S=Ni.key(e,D.key.path,t.batchId);a.push(i.delete(S)),w.push(D.key)}return f.waitFor(a).next(()=>w)}function eC(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ct();e=n.noDocument}return JSON.stringify(e).length}fo.DEFAULT_COLLECTION_PERCENTILE=10,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,fo.DEFAULT=new fo(41943040,fo.DEFAULT_COLLECTION_PERCENTILE,fo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),fo.DISABLED=new fo(-1,0,0);class nA{constructor(e,t,r,i){this.userId=e,this.O=t,this.indexManager=r,this.referenceDelegate=i,this.Ke={}}static Jt(e,t,r,i){Dt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new nA(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ih(e).Qt({index:Fn.userMutationsIndex,range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=s_(e),l=Ih(e);return l.add({}).next(h=>{Dt("number"==typeof h);const m=new nt(h,t,r,i),w=function(P,U,q){const ve=q.baseMutations.map(tt=>n_(P.Ht,tt)),ke=q.mutations.map(tt=>n_(P.Ht,tt));return new Fn(U,q.batchId,q.localWriteTime.toMillis(),ve,ke)}(this.O,this.userId,m),D=[];let S=new ar((P,U)=>Ht(P.canonicalString(),U.canonicalString()));for(const P of i){const U=Ni.key(this.userId,P.key.path,h);S=S.add(P.key.path.popLast()),D.push(l.put(w)),D.push(a.put(U,Ni.PLACEHOLDER))}return S.forEach(P=>{D.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Ke[h]=m.keys()}),f.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return Ih(e).get(t).next(r=>r?(Dt(r.userId===this.userId),Al(this.O,r)):null)}Ge(e,t){return this.Ke[t]?f.resolve(this.Ke[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Ke[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return Ih(e).Qt({index:Fn.userMutationsIndex,range:i},(l,h,m)=>{h.userId===this.userId&&(Dt(h.batchId>=r),a=Al(this.O,h)),m.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return Ih(e).Qt({index:Fn.userMutationsIndex,range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ih(e).qt(Fn.userMutationsIndex,t).next(r=>r.map(i=>Al(this.O,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=Ni.prefixForPath(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return s_(e).Qt({range:i},(l,h,m)=>{const[w,D,S]=l,P=fa(D);if(w===this.userId&&t.path.isEqual(P))return Ih(e).get(S).next(U=>{if(!U)throw ct();Dt(U.userId===this.userId),a.push(Al(this.O,U))});m.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ar(Ht);const i=[];return t.forEach(a=>{const l=Ni.prefixForPath(this.userId,a.path),h=IDBKeyRange.lowerBound(l),m=s_(e).Qt({range:h},(w,D,S)=>{const[P,U,q]=w,ve=fa(U);P===this.userId&&a.path.isEqual(ve)?r=r.add(q):S.done()});i.push(m)}),f.waitFor(i).next(()=>this.je(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=Ni.prefixForPath(this.userId,r),l=IDBKeyRange.lowerBound(a);let h=new ar(Ht);return s_(e).Qt({range:l},(m,w,D)=>{const[S,P,U]=m,q=fa(P);S===this.userId&&r.isPrefixOf(q)?q.length===i&&(h=h.add(U)):D.done()}).next(()=>this.je(e,h))}je(e,t){const r=[],i=[];return t.forEach(a=>{i.push(Ih(e).get(a).next(l=>{if(null===l)throw ct();Dt(l.userId===this.userId),r.push(Al(this.O,l))}))}),f.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return aP(e.zt,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Qe(t.batchId)}),f.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Qe(e){delete this.Ke[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return f.resolve();const r=IDBKeyRange.lowerBound(Ni.prefixForUser(this.userId)),i=[];return s_(e).Qt({range:r},(a,l,h)=>{if(a[0]===this.userId){const m=fa(a[1]);i.push(m)}else h.done()}).next(()=>{Dt(0===i.length)})})}containsKey(e,t){return uP(e,this.userId,t)}We(e){return lP(e).get(this.userId).next(t=>t||new Tl(this.userId,-1,""))}}function uP(n,e,t){const r=Ni.prefixForPath(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return s_(n).Qt({range:a,jt:!0},(h,m,w)=>{const[D,S,P]=h;D===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function Ih(n){return Ue(n,Fn.store)}function s_(n){return Ue(n,Ni.store)}function lP(n){return Ue(n,Tl.store)}class Dp{constructor(e){this.ze=e}next(){return this.ze+=2,this.ze}static He(){return new Dp(0)}static Je(){return new Dp(-1)}}class MO{constructor(e,t){this.referenceDelegate=e,this.O=t}allocateTargetId(e){return this.Ye(e).next(t=>{const r=new Dp(t.highestTargetId);return t.highestTargetId=r.next(),this.Xe(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Ye(e).next(t=>bt.fromTimestamp(new Xr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Ye(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Ye(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.Xe(e,i)))}addTargetData(e,t){return this.Ze(e,t).next(()=>this.Ye(e).next(r=>(r.targetCount+=1,this.tn(t,r),this.Xe(e,r))))}updateTargetData(e,t){return this.Ze(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>o_(e).delete(t.targetId)).next(()=>this.Ye(e)).next(r=>(Dt(r.targetCount>0),r.targetCount-=1,this.Xe(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return o_(e).Qt((l,h)=>{const m=Yc(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,a.push(this.removeTargetData(e,m)))}).next(()=>f.waitFor(a)).next(()=>i)}forEachTarget(e,t){return o_(e).Qt((r,i)=>{const a=Yc(i);t(a)})}Ye(e){return cP(e).get(co.key).next(t=>(Dt(null!==t),t))}Xe(e,t){return cP(e).put(co.key,t)}Ze(e,t){return o_(e).put(i_(this.O,t))}tn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Ye(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Gm(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return o_(e).Qt({range:i,index:ps.queryTargetsIndexName},(l,h,m)=>{const w=Yc(h);qm(t,w.target)&&(a=w,m.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=bh(e);return t.forEach(l=>{const h=Cr(l.path);i.push(a.put(new Pi(r,h))),i.push(this.referenceDelegate.addReference(e,r,l))}),f.waitFor(i)}removeMatchingKeys(e,t,r){const i=bh(e);return f.forEach(t,a=>{const l=Cr(a.path);return f.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=bh(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=bh(e);let a=_n();return i.Qt({range:r,jt:!0},(l,h,m)=>{const w=fa(l[1]),D=new Xe(w);a=a.add(D)}).next(()=>a)}containsKey(e,t){const r=Cr(t.path),i=IDBKeyRange.bound([r],[pb(r)],!1,!0);let a=0;return bh(e).Qt({index:Pi.documentTargetsIndex,jt:!0,range:i},([l,h],m,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}Tt(e,t){return o_(e).get(t).next(r=>r?Yc(r):null)}}function o_(n){return Ue(n,ps.store)}function cP(n){return Ue(n,co.store)}function bh(n){return Ue(n,Pi.store)}function Sp(n){return rA.apply(this,arguments)}function rA(){return rA=(0,Ee.Z)(function*(n){if(n.code!==ge.FAILED_PRECONDITION||n.message!==c)throw n;Be("LocalStore","Unexpectedly lost primary lease")}),rA.apply(this,arguments)}function dP([n,e],[t,r]){const i=Ht(n,t);return 0===i?Ht(e,r):i}class OO{constructor(e){this.en=e,this.buffer=new ar(dP),this.nn=0}sn(){return++this.nn}rn(e){const t=[e,this.sn()];if(this.buffer.size<this.en)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();dP(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class LO{constructor(e,t){this.garbageCollector=e,this.asyncQueue=t,this.on=!1,this.cn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.un(e)}stop(){this.cn&&(this.cn.cancel(),this.cn=null)}get started(){return null!==this.cn}un(e){var t=this;const r=this.on?3e5:6e4;Be("LruGarbageCollector",`Garbage collection scheduled in ${r}ms`),this.cn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",r,(0,Ee.Z)(function*(){t.cn=null,t.on=!0;try{yield e.collectGarbage(t.garbageCollector)}catch(i){x(i)?Be("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",i):yield Sp(i)}yield t.un(e)}))}}class FO{constructor(e,t){this.an=e,this.params=t}calculateTargetCount(e,t){return this.an.hn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return f.resolve(ks.A);const r=new OO(t);return this.an.forEachTarget(e,i=>r.rn(i.sequenceNumber)).next(()=>this.an.ln(e,i=>r.rn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.an.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.an.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),f.resolve(oP)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),oP):this.fn(e,t))}getCacheSize(e){return this.an.getCacheSize(e)}fn(e,t){let r,i,a,l,h,m,w;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),Mm()<=Ns.in.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${a} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(w-m)+`ms\nTotal Duration: ${w-D}ms`),f.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class UO{constructor(e,t){this.db=e,this.garbageCollector=new FO(this,t)}hn(e){const t=this.dn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}dn(e){let t=0;return this.ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}ln(e,t){return this._n(e,(r,i)=>t(i))}addReference(e,t,r){return tC(e,r)}removeReference(e,t,r){return tC(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return tC(e,t)}wn(e,t){return function(r,i){let a=!1;return lP(r).Wt(l=>uP(r,l,i).next(h=>(h&&(a=!0),f.resolve(!h)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this._n(e,(l,h)=>{if(h<=t){const m=this.wn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,bt.min()),bh(e).delete([0,Cr(l.path)])))});i.push(m)}}).next(()=>f.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return tC(e,t)}_n(e,t){const r=bh(e);let i,a=ks.A;return r.Qt({index:Pi.documentTargetsIndex},([l,h],{path:m,sequenceNumber:w})=>{0===l?(a!==ks.A&&t(new Xe(fa(i)),a),a=w,i=m):a=ks.A}).next(()=>{a!==ks.A&&t(new Xe(fa(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function tC(n,e){return bh(n).put((r=n.currentSequenceNumber,new Pi(0,Cr(e.path),r)));var r}class a_{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={}}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0!==i){for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t])}else this.inner[r]=[[e,t]]}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),!0;return!1}forEach(e){gu(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return r0(this.inner)}}class hP{constructor(){this.changes=new a_(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,or.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?f.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class VO{constructor(e){this.O=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Ch(e).put(nC(t),r)}removeEntry(e,t){const r=Ch(e),i=nC(t);return r.delete(i)}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.mn(e,r)))}getEntry(e,t){return Ch(e).get(nC(t)).next(r=>this.gn(t,r))}yn(e,t){return Ch(e).get(nC(t)).next(r=>({document:this.gn(t,r),size:eC(r)}))}getEntries(e,t){let r=uo();return this.pn(e,t,(i,a)=>{const l=this.gn(i,a);r=r.insert(i,l)}).next(()=>r)}In(e,t){let r=uo(),i=new br(Xe.comparator);return this.pn(e,t,(a,l)=>{const h=this.gn(a,l);r=r.insert(a,h),i=i.insert(a,eC(l))}).next(()=>({documents:r,En:i}))}pn(e,t,r){if(t.isEmpty())return f.resolve();const i=IDBKeyRange.bound(t.first().path.toArray(),t.last().path.toArray()),a=t.getIterator();let l=a.getNext();return Ch(e).Qt({range:i},(h,m,w)=>{const D=Xe.fromSegments(h);for(;l&&Xe.comparator(l,D)<0;)r(l,null),l=a.getNext();l&&l.isEqual(D)&&(r(l,m),l=a.hasNext()?a.getNext():null),l?w.Ut(l.path.toArray()):w.done()}).next(()=>{for(;l;)r(l,null),l=a.hasNext()?a.getNext():null})}getAll(e,t,r){let i=uo();const a=t.length+1,l={};if(r.isEqual(bt.min())){const h=t.toArray();l.range=IDBKeyRange.lowerBound(h)}else{const h=t.toArray(),m=Ip(r);l.range=IDBKeyRange.lowerBound([h,m],!0),l.index=mr.collectionReadTimeIndex}return Ch(e).Qt(l,(h,m,w)=>{if(h.length!==a)return;const D=this.gn(Xe.fromSegments(h),m);t.isPrefixOf(D.key.path)?i=i.insert(D.key,D):w.done()}).next(()=>i)}newChangeBuffer(e){return new BO(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return fP(e).get(pa.key).next(t=>(Dt(!!t),t))}mn(e,t){return fP(e).put(pa.key,t)}gn(e,t){if(t){const r=gs(this.O,t);if(!r.isNoDocument()||!r.version.isEqual(bt.min()))return r}return or.newInvalidDocument(e)}}class BO extends hP{constructor(e,t){super(),this.Tn=e,this.trackRemovals=t,this.An=new a_(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new ar((a,l)=>Ht(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const h=this.An.get(a);if(l.isValidDocument()){const m=Sl(this.Tn.O,l);i=i.add(a.path.popLast()),r+=eC(m)-h,t.push(this.Tn.addEntry(e,a,m))}else if(r-=h,this.trackRemovals){const m=Sl(this.Tn.O,l.convertToNoDocument(bt.min()));t.push(this.Tn.addEntry(e,a,m))}else t.push(this.Tn.removeEntry(e,a))}),i.forEach(a=>{t.push(this.Tn.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.Tn.updateMetadata(e,r)),f.waitFor(t)}getFromCache(e,t){return this.Tn.yn(e,t).next(r=>(this.An.set(t,r.size),r.document))}getAllFromCache(e,t){return this.Tn.In(e,t).next(({documents:r,En:i})=>(i.forEach((a,l)=>{this.An.set(a,l)}),r))}}function fP(n){return Ue(n,pa.store)}function Ch(n){return Ue(n,mr.store)}function nC(n){return n.path.toArray()}class jO{constructor(e){this.O=e}kt(e,t,r,i){const a=new y("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore(lo.store),(h=e).createObjectStore(Tl.store,{keyPath:Tl.keyPath}),h.createObjectStore(Fn.store,{keyPath:Fn.keyPath,autoIncrement:!0}).createIndex(Fn.userMutationsIndex,Fn.userMutationsKeyPath,{unique:!0}),h.createObjectStore(Ni.store),pP(e),function(h){h.createObjectStore(mr.store)}(e));let l=f.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore(Pi.store),h.deleteObjectStore(ps.store),h.deleteObjectStore(co.store)}(e),pP(e)),l=l.next(()=>function(h){const m=h.store(co.store),w=new co(0,0,bt.min().toTimestamp(),0);return m.put(co.key,w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store(Fn.store).qt().next(w=>{h.deleteObjectStore(Fn.store),h.createObjectStore(Fn.store,{keyPath:Fn.keyPath,autoIncrement:!0}).createIndex(Fn.userMutationsIndex,Fn.userMutationsKeyPath,{unique:!0});const D=m.store(Fn.store),S=w.map(P=>D.put(P));return f.waitFor(S)})}(e,a))),l=l.next(()=>{!function(h){h.createObjectStore(Dl.store,{keyPath:Dl.keyPath})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Rn(a))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore(pa.store)}(e),this.Pn(a)))),r<7&&i>=7&&(l=l.next(()=>this.bn(a))),r<8&&i>=8&&(l=l.next(()=>this.vn(e,a))),r<9&&i>=9&&(l=l.next(()=>{(function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")})(e),function(h){const m=h.objectStore(mr.store);m.createIndex(mr.readTimeIndex,mr.readTimeIndexPath,{unique:!1}),m.createIndex(mr.collectionReadTimeIndex,mr.collectionReadTimeIndexPath,{unique:!1})}(t)})),r<10&&i>=10&&(l=l.next(()=>this.Vn(a))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore(Ep.store,{keyPath:Ep.keyPath})})(e),function(h){h.createObjectStore(Eh.store,{keyPath:Eh.keyPath})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore(_i.store,{keyPath:_i.keyPath});m.createIndex(_i.collectionPathOverlayIndex,_i.collectionPathOverlayIndexPath,{unique:!1}),m.createIndex(_i.collectionGroupOverlayIndex,_i.collectionGroupOverlayIndexPath,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>{!function(h){h.createObjectStore(ho.store,{keyPath:ho.keyPath,autoIncrement:!0}).createIndex(ho.collectionGroupIndex,ho.collectionGroupIndexPath,{unique:!1}),h.createObjectStore(Lo.store,{keyPath:Lo.keyPath}).createIndex(Lo.sequenceNumberIndex,Lo.sequenceNumberIndexPath,{unique:!1}),h.createObjectStore(Fo.store,{keyPath:Fo.keyPath}).createIndex(Fo.documentKeyIndex,Fo.documentKeyIndexPath,{unique:!1})}(e)})),l}Pn(e){let t=0;return e.store(mr.store).Qt((r,i)=>{t+=eC(i)}).next(()=>{const r=new pa(t);return e.store(pa.store).put(pa.key,r)})}Rn(e){const t=e.store(Tl.store),r=e.store(Fn.store);return t.qt().next(i=>f.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.qt(Fn.userMutationsIndex,l).next(h=>f.forEach(h,m=>{Dt(m.userId===a.userId);const w=Al(this.O,m);return aP(e,a.userId,w).next(()=>{})}))}))}bn(e){const t=e.store(Pi.store),r=e.store(mr.store);return e.store(co.store).get(co.key).next(i=>{const a=[];return r.Qt((l,h)=>{const m=new tn(l),w=[0,Cr(m)];a.push(t.get(w).next(D=>D?f.resolve():t.put(new Pi(0,Cr(m),i.highestListenSequenceNumber))))}).next(()=>f.waitFor(a))})}vn(e,t){e.createObjectStore(wh.store,{keyPath:wh.keyPath});const r=t.store(wh.store),i=new tA,a=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:Cr(m)})}};return t.store(mr.store).Qt({jt:!0},(l,h)=>{const m=new tn(l);return a(m.popLast())}).next(()=>t.store(Ni.store).Qt({jt:!0},([l,h,m],w)=>{const D=fa(h);return a(D.popLast())}))}Vn(e){const t=e.store(ps.store);return t.Qt((r,i)=>{const a=Yc(i),l=i_(this.O,a);return t.put(l)})}}function pP(n){n.createObjectStore(Pi.store,{keyPath:Pi.keyPath}).createIndex(Pi.documentTargetsIndex,Pi.documentTargetsKeyPath,{unique:!0}),n.createObjectStore(ps.store,{keyPath:ps.keyPath}).createIndex(ps.queryTargetsIndexName,ps.queryTargetsKeyPath,{unique:!0}),n.createObjectStore(co.store)}const iA="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class sA{constructor(e,t,r,i,a,l,h,m,w,D,S=12){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Sn=a,this.window=l,this.document=h,this.Dn=w,this.Cn=D,this.schemaVersion=S,this.Nn=null,this.xn=!1,this.isPrimary=!1,this.networkEnabled=!0,this.kn=null,this.inForeground=!1,this.On=null,this.Mn=null,this.$n=Number.NEGATIVE_INFINITY,this.Fn=P=>Promise.resolve(),!sA.Vt())throw new Me(ge.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new UO(this,i),this.Bn=t+"main",this.O=new pn(m),this.Ln=new E(this.Bn,this.schemaVersion,new jO(this.O)),this.Un=new MO(this.referenceDelegate,this.O),this.qn=new VO(this.O),this.Kn=new SO,this.window&&this.window.localStorage?this.Gn=this.window.localStorage:(this.Gn=null,!1===D&&kr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.jn().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Me(ge.FAILED_PRECONDITION,iA);return this.Qn(),this.Wn(),this.zn(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Un.getHighestSequenceNumber(e))}).then(e=>{this.Nn=new ks(e,this.Dn)}).then(()=>{this.xn=!0}).catch(e=>(this.Ln&&this.Ln.close(),Promise.reject(e)))}Hn(e){var t=this;return this.Fn=function(){var r=(0,Ee.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.Ln.Mt(function(){var t=(0,Ee.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Sn.enqueueAndForget((0,Ee.Z)(function*(){t.started&&(yield t.jn())})))}jn(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>rC(e).put(new Dl(this.clientId,Date.now(),this.networkEnabled,this.inForeground)).next(()=>{if(this.isPrimary)return this.Jn(e).next(t=>{t||(this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)))})}).next(()=>this.Yn(e)).next(t=>this.isPrimary&&!t?this.Xn(e).next(()=>!1):!!t&&this.Zn(e).next(()=>!0))).catch(e=>{if(x(e))return Be("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Be("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Sn.enqueueRetryable(()=>this.Fn(e)),this.isPrimary=e})}Jn(e){return P0(e).get(lo.key).next(t=>f.resolve(this.ts(t)))}es(e){return rC(e).delete(this.clientId)}ns(){var e=this;return(0,Ee.Z)(function*(){if(e.isPrimary&&!e.ss(e.$n,18e5)){e.$n=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=Ue(r,Dl.store);return i.qt().next(a=>{const l=e.rs(a,18e5),h=a.filter(m=>-1===l.indexOf(m));return f.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e.Gn)for(const r of t)e.Gn.removeItem(e.os(r.clientId))}})()}zn(){this.Mn=this.Sn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.jn().then(()=>this.ns()).then(()=>this.zn()))}ts(e){return!!e&&e.ownerId===this.clientId}Yn(e){return this.Cn?f.resolve(!0):P0(e).get(lo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)){if(this.ts(t)&&this.networkEnabled)return!0;if(!this.ts(t)){if(!t.allowTabSynchronization)throw new Me(ge.FAILED_PRECONDITION,iA);return!1}}return!(!this.networkEnabled||!this.inForeground)||rC(e).qt().next(r=>void 0===this.rs(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,h=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&h)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Be("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ee.Z)(function*(){e.xn=!1,e.us(),e.Mn&&(e.Mn.cancel(),e.Mn=null),e.hs(),e.ls(),yield e.Ln.runTransaction("shutdown","readwrite",[lo.store,Dl.store],t=>{const r=new Ve(t,ks.A);return e.Xn(r).next(()=>e.es(r))}),e.Ln.close(),e.fs()})()}rs(e,t){return e.filter(r=>this.ss(r.updateTimeMs,t)&&!this.cs(r.clientId))}ds(){return this.runTransaction("getActiveClients","readonly",e=>rC(e).qt().next(t=>this.rs(t,18e5).map(r=>r.clientId)))}get started(){return this.xn}getMutationQueue(e,t){return nA.Jt(e,this.O,t,this.referenceDelegate)}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getIndexManager(e){return new kO(e)}getDocumentOverlayCache(e){return JS.Jt(this.O,e)}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=13===(l=this.schemaVersion)?u:12===l?o:11===l?s:void ct();var l;let h;return this.Ln.runTransaction(e,i,a,m=>(h=new Ve(m,this.Nn?this.Nn.next():ks.A),"readwrite-primary"===t?this.Jn(h).next(w=>!!w||this.Yn(h)).next(w=>{if(!w)throw kr(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Sn.enqueueRetryable(()=>this.Fn(!1)),new Me(ge.FAILED_PRECONDITION,c);return r(h)}).next(w=>this.Zn(h).next(()=>w)):this._s(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}_s(e){return P0(e).get(lo.key).next(t=>{if(null!==t&&this.ss(t.leaseTimestampMs,5e3)&&!this.cs(t.ownerId)&&!this.ts(t)&&!(this.Cn||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Me(ge.FAILED_PRECONDITION,iA)})}Zn(e){const t=new lo(this.clientId,this.allowTabSynchronization,Date.now());return P0(e).put(lo.key,t)}static Vt(){return E.Vt()}Xn(e){const t=P0(e);return t.get(lo.key).next(r=>this.ts(r)?(Be("IndexedDbPersistence","Releasing primary lease."),t.delete(lo.key)):f.resolve())}ss(e,t){const r=Date.now();return!(e<r-t||e>r&&(kr(`Detected an update time that is in the future: ${e} > ${r}`),1))}Qn(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.On=()=>{this.Sn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.jn()))},this.document.addEventListener("visibilitychange",this.On),this.inForeground="visible"===this.document.visibilityState)}hs(){this.On&&(this.document.removeEventListener("visibilitychange",this.On),this.On=null)}Wn(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.kn=()=>{this.us(),(0,M.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Sn.enterRestrictedMode(!0),this.Sn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.kn))}ls(){this.kn&&(this.window.removeEventListener("pagehide",this.kn),this.kn=null)}cs(e){var t;try{const r=null!==(null===(t=this.Gn)||void 0===t?void 0:t.getItem(this.os(e)));return Be("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return kr("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}us(){if(this.Gn)try{this.Gn.setItem(this.os(this.clientId),String(Date.now()))}catch(e){kr("Failed to set zombie client id.",e)}}fs(){if(this.Gn)try{this.Gn.removeItem(this.os(this.clientId))}catch(e){}}os(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function P0(n){return Ue(n,lo.store)}function rC(n){return Ue(n,Dl.store)}function oA(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class HO{constructor(e,t){this.progress=e,this.ws=t}}class $O{constructor(e,t,r){this.qn=e,this.gs=t,this.indexManager=r}ys(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKey(e,t).next(r=>this.ps(e,t,r))}ps(e,t,r){return this.qn.getEntry(e,t).next(i=>{for(const a of r)a.applyToLocalView(i);return i})}Is(e,t){e.forEach((r,i)=>{for(const a of t)a.applyToLocalView(i)})}Es(e,t){return this.qn.getEntries(e,t).next(r=>this.Ts(e,r).next(()=>r))}Ts(e,t){return this.gs.getAllMutationBatchesAffectingDocumentKeys(e,t).next(r=>this.Is(t,r))}As(e,t,r){return Xe.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.Rs(e,t.path):Sb(t)?this.Ps(e,t,r):this.bs(e,t,r);var i}Rs(e,t){return this.ys(e,new Xe(t)).next(r=>{let i=Zc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}Ps(e,t,r){const i=t.collectionGroup;let a=Zc();return this.indexManager.getCollectionParents(e,i).next(l=>f.forEach(l,h=>{const m=(w=t,D=h.child(i),new El(D,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,D;return this.bs(e,m,r).next(w=>{w.forEach((D,S)=>{a=a.insert(D,S)})})}).next(()=>a))}bs(e,t,r){let i;return this.qn.getAll(e,t.path,r).next(a=>(i=a,this.gs.getAllMutationBatchesAffectingQuery(e,t))).next(a=>{for(const l of a)for(const h of l.mutations){const m=h.key;let w=i.get(m);null==w&&(w=or.newInvalidDocument(m),i=i.insert(m,w)),_0(h,w,l.localWriteTime),w.isFoundDocument()||(i=i.remove(m))}}).next(()=>(i.forEach((a,l)=>{Km(t,l)||(i=i.remove(a))}),i))}}class aA{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.vs=r,this.Vs=i}static Ss(e,t){let r=_n(),i=_n();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new aA(e,t.fromCache,r,i)}}class gP{Ds(e){this.Cs=e}As(e,t,r,i){return 0===(a=t).filters.length&&null===a.limit&&null==a.startAt&&null==a.endAt&&(0===a.explicitOrderBy.length||1===a.explicitOrderBy.length&&a.explicitOrderBy[0].field.isKeyField())||r.isEqual(bt.min())?this.Ns(e,t):this.Cs.Es(e,i).next(a=>{const l=this.xs(t,a);return(h0(t)||f0(t))&&this.ks(t.limitType,l,i,r)?this.Ns(e,t):(Mm()<=Ns.in.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Il(t)),this.Cs.As(e,t,r).next(h=>(l.forEach(m=>{h=h.insert(m.key,m)}),h)))});var a}xs(e,t){let r=new ar(Ab(e));return t.forEach((i,a)=>{Km(e,a)&&(r=r.add(a))}),r}ks(e,t,r,i){if(r.size!==t.size)return!0;const a="F"===e?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Ns(e,t){return Mm()<=Ns.in.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Il(t)),this.Cs.As(e,t,bt.min())}}class GO{constructor(e,t,r,i){this.persistence=e,this.Os=t,this.O=i,this.Ms=new br(Ht),this.$s=new a_(a=>Gm(a),qm),this.Fs=bt.min(),this.Bs=e.getRemoteDocumentCache(),this.Un=e.getTargetCache(),this.Kn=e.getBundleCache(),this.Ls(r)}Ls(e){this.indexManager=this.persistence.getIndexManager(e),this.gs=this.persistence.getMutationQueue(e,this.indexManager),this.Us=new $O(this.Bs,this.gs,this.indexManager),this.Bs.setIndexManager(this.indexManager),this.Os.Ds(this.Us)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function mP(n,e,t,r){return new GO(n,e,t,r)}function _P(n,e){return uA.apply(this,arguments)}function uA(){return uA=(0,Ee.Z)(function*(n,e){const t=We(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.gs.getAllMutationBatches(r).next(a=>(i=a,t.Ls(e),t.gs.getAllMutationBatches(r))).next(a=>{const l=[],h=[];let m=_n();for(const w of i){l.push(w.batchId);for(const D of w.mutations)m=m.add(D.key)}for(const w of a){h.push(w.batchId);for(const D of w.mutations)m=m.add(D.key)}return t.Us.Es(r,m).next(w=>({qs:w,removedBatchIds:l,addedBatchIds:h}))})})}),uA.apply(this,arguments)}function qO(n,e){const t=We(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Bs.newChangeBuffer({trackRemovals:!0});return function(l,h,m,w){const D=m.batch,S=D.keys();let P=f.resolve();return S.forEach(U=>{P=P.next(()=>w.getEntry(h,U)).next(q=>{const ve=m.docVersions.get(U);Dt(null!==ve),q.version.compareTo(ve)<0&&(D.applyToRemoteDocument(q,m),q.isValidDocument()&&(q.setReadTime(m.commitVersion),w.addEntry(q)))})}),P.next(()=>l.gs.removeMutationBatch(h,D))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.gs.performConsistencyCheck(r)).next(()=>t.Us.Es(r,i))})}function yP(n){const e=We(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Un.getLastRemoteSnapshotVersion(t))}function WO(n,e){const t=We(n),r=e.snapshotVersion;let i=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Bs.newChangeBuffer({trackRemovals:!0});i=t.Ms;const h=[];e.targetChanges.forEach((w,D)=>{const S=i.get(D);if(!S)return;h.push(t.Un.removeMatchingKeys(a,w.removedDocuments,D).next(()=>t.Un.addMatchingKeys(a,w.addedDocuments,D)));let P=S.withSequenceNumber(a.currentSequenceNumber);var U,q,ve;e.targetMismatches.has(D)?P=P.withResumeToken(Mr.EMPTY_BYTE_STRING,bt.min()).withLastLimboFreeSnapshotVersion(bt.min()):w.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(w.resumeToken,r)),i=i.insert(D,P),q=P,ve=w,(0===(U=S).resumeToken.approximateByteSize()||q.snapshotVersion.toMicroseconds()-U.snapshotVersion.toMicroseconds()>=3e8||ve.addedDocuments.size+ve.modifiedDocuments.size+ve.removedDocuments.size>0)&&h.push(t.Un.updateTargetData(a,P))});let m=uo();if(e.documentUpdates.forEach(w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(a,w))}),h.push(vP(a,l,e.documentUpdates).next(w=>{m=w})),!r.isEqual(bt.min())){const w=t.Un.getLastRemoteSnapshotVersion(a).next(D=>t.Un.setTargetsMetadata(a,a.currentSequenceNumber,r));h.push(w)}return f.waitFor(h).next(()=>l.apply(a)).next(()=>t.Us.Ts(a,m)).next(()=>m)}).then(a=>(t.Ms=i,a))}function vP(n,e,t){let r=_n();return t.forEach(i=>r=r.add(i)),e.getEntries(n,r).next(i=>{let a=uo();return t.forEach((l,h)=>{const m=i.get(l);h.isNoDocument()&&h.version.isEqual(bt.min())?(e.removeEntry(l,h.readTime),a=a.insert(l,h)):!m.isValidDocument()||h.version.compareTo(m.version)>0||0===h.version.compareTo(m.version)&&m.hasPendingWrites?(e.addEntry(h),a=a.insert(l,h)):Be("LocalStore","Ignoring outdated watch update for ",l,". Current version:",m.version," Watch version:",h.version)}),a})}function zO(n,e){const t=We(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.gs.getNextMutationBatchAfterBatchId(r,e)))}function u_(n,e){const t=We(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Un.getTargetData(r,e).next(a=>a?(i=a,f.resolve(i)):t.Un.allocateTargetId(r).next(l=>(i=new Nt(e,l,0,r.currentSequenceNumber),t.Un.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ms.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(r.targetId,r),t.$s.set(e,r.targetId)),r})}function l_(n,e,t){return lA.apply(this,arguments)}function lA(){return lA=(0,Ee.Z)(function*(n,e,t){const r=We(n),i=r.Ms.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!x(l))throw l;Be("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ms=r.Ms.remove(e),r.$s.delete(i.target)}),lA.apply(this,arguments)}function iC(n,e,t){const r=We(n);let i=bt.min(),a=_n();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,w){const D=We(h),S=D.$s.get(w);return void 0!==S?f.resolve(D.Ms.get(S)):D.Un.getTargetData(m,w)}(r,l,ko(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Un.getMatchingKeysForTargetId(l,h.targetId).next(m=>{a=m})}).next(()=>r.Os.As(l,e,t?i:bt.min(),t?a:_n())).next(h=>({documents:h,Ks:a})))}function wP(n,e){const t=We(n),r=We(t.Un),i=t.Ms.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.Tt(a,e).next(l=>l?l.target:null))}function EP(n){const e=We(n);return e.persistence.runTransaction("Get new document changes","readonly",t=>function(r,i,a){const l=We(r);let h=uo(),m=Ip(a);const w=Ch(i),D=IDBKeyRange.lowerBound(m,!0);return w.Qt({index:mr.readTimeIndex,range:D},(S,P)=>{const U=gs(l.O,P);h=h.insert(U.key,U),m=P.readTime}).next(()=>({ws:h,readTime:bp(m)}))}(e.Bs,t,e.Fs)).then(({ws:t,readTime:r})=>(e.Fs=r,t))}function cA(){return cA=(0,Ee.Z)(function*(n){const e=We(n);return e.persistence.runTransaction("Synchronize last document change read time","readonly",t=>function(r){const i=Ch(r);let a=bt.min();return i.Qt({index:mr.readTimeIndex,reverse:!0},(l,h,m)=>{h.readTime&&(a=bp(h.readTime)),m.done()}).next(()=>a)}(t)).then(t=>{e.Fs=t})}),cA.apply(this,arguments)}function dA(){return dA=(0,Ee.Z)(function*(n,e,t,r){const i=We(n);let a=_n(),l=uo();for(const w of t){const D=e.Gs(w.metadata.name);w.document&&(a=a.add(D));const S=e.js(w);S.setReadTime(e.Qs(w.metadata.readTime)),l=l.insert(D,S)}const h=i.Bs.newChangeBuffer({trackRemovals:!0}),m=yield u_(i,(w=r,ko(ap(tn.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>vP(w,h,l).next(D=>(h.apply(w),D)).next(D=>i.Un.removeMatchingKeysForTargetId(w,m.targetId).next(()=>i.Un.addMatchingKeys(w,a,m.targetId)).next(()=>i.Us.Ts(w,D)).next(()=>D)))}),dA.apply(this,arguments)}function YO(n,e){return hA.apply(this,arguments)}function hA(){return hA=(0,Ee.Z)(function*(n,e,t=_n()){const r=yield u_(n,ko(Cp(e.bundledQuery))),i=We(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=ti(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.Kn.saveNamedQuery(a,e);const h=r.withResumeToken(Mr.EMPTY_BYTE_STRING,l);return i.Ms=i.Ms.insert(h.targetId,h),i.Un.updateTargetData(a,h).next(()=>i.Un.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Un.addMatchingKeys(a,t,r.targetId)).next(()=>i.Kn.saveNamedQuery(a,e))})}),hA.apply(this,arguments)}class QO{constructor(e){this.O=e,this.Ws=new Map,this.zs=new Map}getBundleMetadata(e,t){return f.resolve(this.Ws.get(t))}saveBundleMetadata(e,t){var r;return this.Ws.set(t.id,{id:(r=t).id,version:r.version,createTime:ti(r.createTime)}),f.resolve()}getNamedQuery(e,t){return f.resolve(this.zs.get(t))}saveNamedQuery(e,t){return this.zs.set(t.name,{name:(r=t).name,query:Cp(r.bundledQuery),readTime:ti(r.readTime)}),f.resolve();var r}}class JO{constructor(){this.overlays=new br(Xe.comparator),this.Hs=new Map}getOverlay(e,t){return f.resolve(this.overlays.get(t))}saveOverlays(e,t,r){return r.forEach(i=>{this.Yt(e,t,i)}),f.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.Hs.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.Hs.delete(r)),f.resolve()}getOverlaysForCollection(e,t,r){const i=new Map,a=t.length+1,l=new Xe(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,w=m.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&m.largestBatchId>r&&i.set(m.getKey(),m)}return f.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new br((w,D)=>w-D);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let D=a.get(w.largestBatchId);null===D&&(D=new Map,a=a.insert(w.largestBatchId,D)),D.set(w.getKey(),w)}}const h=new Map,m=a.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((w,D)=>h.set(D,w)),!(h.size>=i)););return f.resolve(h)}Yt(e,t,r){if(null===r)return;const i=this.overlays.get(r.key);null!==i&&this.Hs.get(i.largestBatchId).delete(r.key),this.overlays=this.overlays.insert(r.key,new mt(t,r));let a=this.Hs.get(t);void 0===a&&(a=new Set,this.Hs.set(t,a)),a.add(r.key)}}class fA{constructor(){this.Js=new ar(ki.Ys),this.Xs=new ar(ki.Zs)}isEmpty(){return this.Js.isEmpty()}addReference(e,t){const r=new ki(e,t);this.Js=this.Js.add(r),this.Xs=this.Xs.add(r)}ti(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ei(new ki(e,t))}ni(e,t){e.forEach(r=>this.removeReference(r,t))}si(e){const t=new Xe(new tn([])),r=new ki(t,e),i=new ki(t,e+1),a=[];return this.Xs.forEachInRange([r,i],l=>{this.ei(l),a.push(l.key)}),a}ii(){this.Js.forEach(e=>this.ei(e))}ei(e){this.Js=this.Js.delete(e),this.Xs=this.Xs.delete(e)}ri(e){const t=new Xe(new tn([])),r=new ki(t,e),i=new ki(t,e+1);let a=_n();return this.Xs.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ki(e,0),r=this.Js.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ki{constructor(e,t){this.key=e,this.oi=t}static Ys(e,t){return Xe.comparator(e.key,t.key)||Ht(e.oi,t.oi)}static Zs(e,t){return Ht(e.oi,t.oi)||Xe.comparator(e.key,t.key)}}class XO{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.gs=[],this.ci=1,this.ui=new ar(ki.Ys)}checkEmpty(e){return f.resolve(0===this.gs.length)}addMutationBatch(e,t,r,i){const a=this.ci;this.ci++;const l=new nt(a,t,r,i);this.gs.push(l);for(const h of i)this.ui=this.ui.add(new ki(h.key,a)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return f.resolve(l)}lookupMutationBatch(e,t){return f.resolve(this.ai(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.hi(t+1),a=i<0?0:i;return f.resolve(this.gs.length>a?this.gs[a]:null)}getHighestUnacknowledgedBatchId(){return f.resolve(0===this.gs.length?-1:this.ci-1)}getAllMutationBatches(e){return f.resolve(this.gs.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ki(t,0),i=new ki(t,Number.POSITIVE_INFINITY),a=[];return this.ui.forEachInRange([r,i],l=>{const h=this.ai(l.oi);a.push(h)}),f.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new ar(Ht);return t.forEach(i=>{const a=new ki(i,0),l=new ki(i,Number.POSITIVE_INFINITY);this.ui.forEachInRange([a,l],h=>{r=r.add(h.oi)})}),f.resolve(this.li(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Xe.isDocumentKey(a)||(a=a.child(""));const l=new ki(new Xe(a),0);let h=new ar(Ht);return this.ui.forEachWhile(m=>{const w=m.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(h=h.add(m.oi)),!0)},l),f.resolve(this.li(h))}li(e){const t=[];return e.forEach(r=>{const i=this.ai(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Dt(0===this.fi(t.batchId,"removed")),this.gs.shift();let r=this.ui;return f.forEach(t.mutations,i=>{const a=new ki(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.ui=r})}Qe(e){}containsKey(e,t){const r=new ki(t,0),i=this.ui.firstAfterOrEqual(r);return f.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return f.resolve()}fi(e,t){return this.hi(e)}hi(e){return 0===this.gs.length?0:e-this.gs[0].batchId}ai(e){const t=this.hi(e);return t<0||t>=this.gs.length?null:this.gs[t]}}class eL{constructor(e){this.di=e,this.docs=new br(Xe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.di(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return f.resolve(r?r.document.mutableCopy():or.newInvalidDocument(t))}getEntries(e,t){let r=uo();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():or.newInvalidDocument(i))}),f.resolve(r)}getAll(e,t,r){let i=uo();const a=new Xe(t.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:h,value:{document:m}}=l.getNext();if(!t.isPrefixOf(h.path))break;h.path.length>t.length+1||m.readTime.compareTo(r)<=0||(i=i.insert(m.key,m.mutableCopy()))}return f.resolve(i)}_i(e,t){return f.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new tL(this)}getSize(e){return f.resolve(this.size)}}class tL extends hP{constructor(e){super(),this.Tn=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.Tn.addEntry(e,i)):this.Tn.removeEntry(r)}),f.waitFor(t)}getFromCache(e,t){return this.Tn.getEntry(e,t)}getAllFromCache(e,t){return this.Tn.getEntries(e,t)}}class nL{constructor(e){this.persistence=e,this.wi=new a_(t=>Gm(t),qm),this.lastRemoteSnapshotVersion=bt.min(),this.highestTargetId=0,this.mi=0,this.gi=new fA,this.targetCount=0,this.yi=Dp.He()}forEachTarget(e,t){return this.wi.forEach((r,i)=>t(i)),f.resolve()}getLastRemoteSnapshotVersion(e){return f.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return f.resolve(this.mi)}allocateTargetId(e){return this.highestTargetId=this.yi.next(),f.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.mi&&(this.mi=t),f.resolve()}Ze(e){this.wi.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.yi=new Dp(t),this.highestTargetId=t),e.sequenceNumber>this.mi&&(this.mi=e.sequenceNumber)}addTargetData(e,t){return this.Ze(t),this.targetCount+=1,f.resolve()}updateTargetData(e,t){return this.Ze(t),f.resolve()}removeTargetData(e,t){return this.wi.delete(t.target),this.gi.si(t.targetId),this.targetCount-=1,f.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.wi.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.wi.delete(l),a.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),f.waitFor(a).next(()=>i)}getTargetCount(e){return f.resolve(this.targetCount)}getTargetData(e,t){const r=this.wi.get(t)||null;return f.resolve(r)}addMatchingKeys(e,t,r){return this.gi.ti(t,r),f.resolve()}removeMatchingKeys(e,t,r){this.gi.ni(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),f.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.gi.si(t),f.resolve()}getMatchingKeysForTargetId(e,t){const r=this.gi.ri(t);return f.resolve(r)}containsKey(e,t){return f.resolve(this.gi.containsKey(t))}}class rL{constructor(e,t){this.pi={},this.overlays={},this.Nn=new ks(0),this.xn=!1,this.xn=!0,this.referenceDelegate=e(this),this.Un=new nL(this),this.indexManager=new PO,this.qn=new eL(r=>this.referenceDelegate.Ii(r)),this.O=new pn(t),this.Kn=new QO(this.O)}start(){return Promise.resolve()}shutdown(){return this.xn=!1,Promise.resolve()}get started(){return this.xn}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new JO,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.pi[e.toKey()];return r||(r=new XO(t,this.referenceDelegate),this.pi[e.toKey()]=r),r}getTargetCache(){return this.Un}getRemoteDocumentCache(){return this.qn}getBundleCache(){return this.Kn}runTransaction(e,t,r){Be("MemoryPersistence","Starting transaction:",e);const i=new iL(this.Nn.next());return this.referenceDelegate.Ei(),r(i).next(a=>this.referenceDelegate.Ti(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Ai(e,t){return f.or(Object.values(this.pi).map(r=>()=>r.containsKey(e,t)))}}class iL extends d{constructor(e){super(),this.currentSequenceNumber=e}}class pA{constructor(e){this.persistence=e,this.Ri=new fA,this.Pi=null}static bi(e){return new pA(e)}get vi(){if(this.Pi)return this.Pi;throw ct()}addReference(e,t,r){return this.Ri.addReference(r,t),this.vi.delete(r.toString()),f.resolve()}removeReference(e,t,r){return this.Ri.removeReference(r,t),this.vi.add(r.toString()),f.resolve()}markPotentiallyOrphaned(e,t){return this.vi.add(t.toString()),f.resolve()}removeTarget(e,t){this.Ri.si(t.targetId).forEach(i=>this.vi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.vi.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Ei(){this.Pi=new Set}Ti(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return f.forEach(this.vi,r=>{const i=Xe.fromPath(r);return this.Vi(e,i).next(a=>{a||t.removeEntry(i,bt.min())})}).next(()=>(this.Pi=null,t.apply(e)))}updateLimboDocument(e,t){return this.Vi(e,t).next(r=>{r?this.vi.delete(t.toString()):this.vi.add(t.toString())})}Ii(e){return 0}Vi(e,t){return f.or([()=>f.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}function IP(n,e){return`firestore_clients_${n}_${e}`}function bP(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function gA(n,e){return`firestore_targets_${n}_${e}`}class sC{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static Si(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Me(i.error.code,i.error.message))),l?new sC(e,t,i.state,a):(kr("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class k0{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Si(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Me(r.error.code,r.error.message))),a?new k0(e,r.state,i):(kr("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}Di(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class oC{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Si(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=gp();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=xi(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new oC(e,a):(kr("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class mA{constructor(e,t){this.clientId=e,this.onlineState=t}static Si(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new mA(t.clientId,t.onlineState):(kr("SharedClientState",`Failed to parse online state: ${e}`),null)}}class _A{constructor(){this.activeTargetIds=gp()}Ci(e){this.activeTargetIds=this.activeTargetIds.add(e)}Ni(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Di(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class yA{constructor(e,t,r,i,a){this.window=e,this.Sn=t,this.persistenceKey=r,this.xi=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ki=this.Oi.bind(this),this.Mi=new br(Ht),this.started=!1,this.$i=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.Fi=IP(this.persistenceKey,this.xi),this.Bi=`firestore_sequence_number_${this.persistenceKey}`,this.Mi=this.Mi.insert(this.xi,new _A),this.Li=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Ui=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.qi=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.Ki=`firestore_online_state_${this.persistenceKey}`,this.Gi=function(h){return`firestore_bundle_loaded_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this.ki)}static Vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.syncEngine.ds();for(const i of t){if(i===e.xi)continue;const a=e.getItem(IP(e.persistenceKey,i));if(a){const l=oC.Si(i,a);l&&(e.Mi=e.Mi.insert(l.clientId,l))}}e.ji();const r=e.storage.getItem(e.Ki);if(r){const i=e.Qi(r);i&&e.Wi(i)}for(const i of e.$i)e.Oi(i);e.$i=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Bi,JSON.stringify(e))}getAllActiveQueryTargets(){return this.zi(this.Mi)}isActiveQueryTarget(e){let t=!1;return this.Mi.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Hi(e,"pending")}updateMutationState(e,t,r){this.Hi(e,t,r),this.Ji(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(gA(this.persistenceKey,e));if(r){const i=k0.Si(e,r);i&&(t=i.state)}}return this.Yi.Ci(e),this.ji(),t}removeLocalQueryTarget(e){this.Yi.Ni(e),this.ji()}isLocalQueryTarget(e){return this.Yi.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(gA(this.persistenceKey,e))}updateQueryState(e,t,r){this.Xi(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Ji(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Zi(e)}notifyBundleLoaded(){this.tr()}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ki),this.removeItem(this.Fi),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Be("SharedClientState","READ",e,t),t}setItem(e,t){Be("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Be("SharedClientState","REMOVE",e),this.storage.removeItem(e)}Oi(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Be("SharedClientState","EVENT",r.key,r.newValue),r.key===this.Fi)return void kr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Sn.enqueueRetryable((0,Ee.Z)(function*(){if(t.started){if(null!==r.key)if(t.Li.test(r.key)){if(null==r.newValue){const i=t.er(r.key);return t.nr(i,null)}{const i=t.sr(r.key,r.newValue);if(i)return t.nr(i.clientId,i)}}else if(t.Ui.test(r.key)){if(null!==r.newValue){const i=t.ir(r.key,r.newValue);if(i)return t.rr(i)}}else if(t.qi.test(r.key)){if(null!==r.newValue){const i=t.cr(r.key,r.newValue);if(i)return t.ur(i)}}else if(r.key===t.Ki){if(null!==r.newValue){const i=t.Qi(r.newValue);if(i)return t.Wi(i)}}else if(r.key===t.Bi){const i=function(a){let l=ks.A;if(null!=a)try{const h=JSON.parse(a);Dt("number"==typeof h),l=h}catch(h){kr("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==ks.A&&t.sequenceNumberHandler(i)}else if(r.key===t.Gi)return t.syncEngine.ar()}else t.$i.push(r)}))}}get Yi(){return this.Mi.get(this.xi)}ji(){this.setItem(this.Fi,this.Yi.Di())}Hi(e,t,r){const i=new sC(this.currentUser,e,t,r),a=bP(this.persistenceKey,this.currentUser,e);this.setItem(a,i.Di())}Ji(e){const t=bP(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Zi(e){this.storage.setItem(this.Ki,JSON.stringify({clientId:this.xi,onlineState:e}))}Xi(e,t,r){const i=gA(this.persistenceKey,e),a=new k0(e,t,r);this.setItem(i,a.Di())}tr(){this.setItem(this.Gi,"value-not-used")}er(e){const t=this.Li.exec(e);return t?t[1]:null}sr(e,t){const r=this.er(e);return oC.Si(r,t)}ir(e,t){const r=this.Ui.exec(e),i=Number(r[1]);return sC.Si(new Jr(void 0!==r[2]?r[2]:null),i,t)}cr(e,t){const r=this.qi.exec(e),i=Number(r[1]);return k0.Si(i,t)}Qi(e){return mA.Si(e)}rr(e){var t=this;return(0,Ee.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.hr(e.batchId,e.state,e.error);Be("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}ur(e){return this.syncEngine.lr(e.targetId,e.state,e.error)}nr(e,t){const r=t?this.Mi.insert(e,t):this.Mi.remove(e),i=this.zi(this.Mi),a=this.zi(r),l=[],h=[];return a.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{a.has(m)||h.push(m)}),this.syncEngine.dr(l,h).then(()=>{this.Mi=r})}Wi(e){this.Mi.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}zi(e){let t=gp();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class CP{constructor(){this._r=new _A,this.wr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this._r.Ci(e),this.wr[e]||"not-current"}updateQueryState(e,t,r){this.wr[e]=t}removeLocalQueryTarget(e){this._r.Ni(e)}isLocalQueryTarget(e){return this._r.activeTargetIds.has(e)}clearQueryState(e){delete this.wr[e]}getAllActiveQueryTargets(){return this._r.activeTargetIds}isActiveQueryTarget(e){return this._r.activeTargetIds.has(e)}start(){return this._r=new _A,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(){}}class sL{mr(e){}shutdown(){}}class TP{constructor(){this.gr=()=>this.yr(),this.pr=()=>this.Ir(),this.Er=[],this.Tr()}mr(e){this.Er.push(e)}shutdown(){window.removeEventListener("online",this.gr),window.removeEventListener("offline",this.pr)}Tr(){window.addEventListener("online",this.gr),window.addEventListener("offline",this.pr)}yr(){Be("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Er)e(0)}Ir(){Be("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Er)e(1)}static Vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const oL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class aL{constructor(e){this.Ar=e.Ar,this.Rr=e.Rr}Pr(e){this.br=e}vr(e){this.Vr=e}onMessage(e){this.Sr=e}close(){this.Rr()}send(e){this.Ar(e)}Dr(){this.br()}Cr(e){this.Vr(e)}Nr(e){this.Sr(e)}}class uL extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.kr=(e.ssl?"https":"http")+"://"+e.host,this.Or="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}Mr(e,t,r,i,a){const l=this.$r(e,t);Be("RestConnection","Sending: ",l,r);const h={};return this.Fr(h,i,a),this.Br(e,l,h,r).then(m=>(Be("RestConnection","Received: ",m),m),m=>{throw np("RestConnection",`${e} failed with error: `,m,"url: ",l,"request:",r),m})}Lr(e,t,r,i,a){return this.Mr(e,t,r,i,a)}Fr(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Lc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}$r(e,t){return`${this.kr}/v1/${t}:${oL[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}Br(e,t,r,i){return new Promise((a,l)=>{const h=new TS;h.listenOnce(IS.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Xv.NO_ERROR:const w=h.getResponseJson();Be("Connection","XHR received:",JSON.stringify(w)),a(w);break;case Xv.TIMEOUT:Be("Connection",'RPC "'+e+'" timed out'),l(new Me(ge.DEADLINE_EXCEEDED,"Request time out"));break;case Xv.HTTP_ERROR:const D=h.getStatus();if(Be("Connection",'RPC "'+e+'" failed with status:',D,"response text:",h.getResponseText()),D>0){const S=h.getResponseJson().error;if(S&&S.status&&S.message){const P=function(U){const q=U.toLowerCase().replace(/_/g,"-");return Object.values(ge).indexOf(q)>=0?q:ge.UNKNOWN}(S.status);l(new Me(P,S.message))}else l(new Me(ge.UNKNOWN,"Server responded with status "+h.getStatus()))}else l(new Me(ge.UNAVAILABLE,"Connection failed."));break;default:ct()}}finally{Be("Connection",'RPC "'+e+'" completed.')}});const m=JSON.stringify(i);h.send(t,"POST",m,r,15)})}Ur(e,t,r){const i=[this.kr,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=wS(),l=ES(),h={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(h.xmlHttpFactory=new CS({})),this.Fr(h.initMessageHeaders,t,r),(0,M.uI)()||(0,M.b$)()||(0,M.d)()||(0,M.w1)()||(0,M.Mn)()||(0,M.ru)()||(h.httpHeadersOverwriteParam="$httpHeaders");const m=i.join("");Be("Connection","Creating WebChannel: "+m,h);const w=a.createWebChannel(m,h);let D=!1,S=!1;const P=new aL({Ar:q=>{S?Be("Connection","Not sending because WebChannel is closed:",q):(D||(Be("Connection","Opening WebChannel transport."),w.open(),D=!0),Be("Connection","WebChannel sending:",q),w.send(q))},Rr:()=>w.close()}),U=(q,ve,ke)=>{q.listen(ve,tt=>{try{ke(tt)}catch(vt){setTimeout(()=>{throw vt},0)}})};return U(w,km.EventType.OPEN,()=>{S||Be("Connection","WebChannel transport opened.")}),U(w,km.EventType.CLOSE,()=>{S||(S=!0,Be("Connection","WebChannel transport closed"),P.Cr())}),U(w,km.EventType.ERROR,q=>{S||(S=!0,np("Connection","WebChannel transport errored:",q),P.Cr(new Me(ge.UNAVAILABLE,"The operation could not be completed")))}),U(w,km.EventType.MESSAGE,q=>{var ve;if(!S){const ke=q.data[0];Dt(!!ke);const tt=ke,vt=tt.error||(null===(ve=tt[0])||void 0===ve?void 0:ve.error);if(vt){Be("Connection","WebChannel received error:",vt);const It=vt.status;let dt=function(Li){const Bh=jr[Li];if(void 0!==Bh)return Mb(Bh)}(It),vn=vt.message;void 0===dt&&(dt=ge.INTERNAL,vn="Unknown error status: "+It+" with message "+vt.message),S=!0,P.Cr(new Me(dt,vn)),w.close()}else Be("Connection","WebChannel received:",ke),P.Nr(ke)}}),U(l,bS.STAT_EVENT,q=>{q.stat===cb.PROXY?Be("Connection","Detected buffering proxy"):q.stat===cb.NOPROXY&&Be("Connection","Detected no buffering proxy")}),setTimeout(()=>{P.Dr()},0),P}}function DP(){return"undefined"!=typeof window?window:null}function aC(){return"undefined"!=typeof document?document:null}function M0(n){return new ZN(n,!0)}class vA{constructor(e,t,r=1e3,i=1.5,a=6e4){this.Sn=e,this.timerId=t,this.qr=r,this.Kr=i,this.Gr=a,this.jr=0,this.Qr=null,this.Wr=Date.now(),this.reset()}reset(){this.jr=0}zr(){this.jr=this.Gr}Hr(e){this.cancel();const t=Math.floor(this.jr+this.Jr()),r=Math.max(0,Date.now()-this.Wr),i=Math.max(0,t-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.jr} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Qr=this.Sn.enqueueAfterDelay(this.timerId,i,()=>(this.Wr=Date.now(),e())),this.jr*=this.Kr,this.jr<this.qr&&(this.jr=this.qr),this.jr>this.Gr&&(this.jr=this.Gr)}Yr(){null!==this.Qr&&(this.Qr.skipDelay(),this.Qr=null)}cancel(){null!==this.Qr&&(this.Qr.cancel(),this.Qr=null)}Jr(){return(Math.random()-.5)*this.jr}}class SP{constructor(e,t,r,i,a,l,h,m){this.Sn=e,this.Xr=r,this.Zr=i,this.eo=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.no=0,this.so=null,this.io=null,this.stream=null,this.ro=new vA(e,t)}oo(){return 1===this.state||5===this.state||this.co()}co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.uo()}stop(){var e=this;return(0,Ee.Z)(function*(){e.oo()&&(yield e.close(0))})()}ao(){this.state=0,this.ro.reset()}ho(){this.co()&&null===this.so&&(this.so=this.Sn.enqueueAfterDelay(this.Xr,6e4,()=>this.lo()))}fo(e){this._o(),this.stream.send(e)}lo(){var e=this;return(0,Ee.Z)(function*(){if(e.co())return e.close(0)})()}_o(){this.so&&(this.so.cancel(),this.so=null)}wo(){this.io&&(this.io.cancel(),this.io=null)}close(e,t){var r=this;return(0,Ee.Z)(function*(){r._o(),r.wo(),r.ro.cancel(),r.no++,4!==e?r.ro.reset():t&&t.code===ge.RESOURCE_EXHAUSTED?(kr(t.toString()),kr("Using maximum backoff delay to prevent overloading the backend."),r.ro.zr()):t&&t.code===ge.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.mo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.vr(t)})()}mo(){}auth(){this.state=1;const e=this.yo(this.no),t=this.no;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.no===t&&this.po(r,i)},r=>{e(()=>{const i=new Me(ge.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Io(i)})})}po(e,t){const r=this.yo(this.no);this.stream=this.Eo(e,t),this.stream.Pr(()=>{r(()=>(this.state=2,this.io=this.Sn.enqueueAfterDelay(this.Zr,1e4,()=>(this.co()&&(this.state=3),Promise.resolve())),this.listener.Pr()))}),this.stream.vr(i=>{r(()=>this.Io(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}uo(){var e=this;this.state=5,this.ro.Hr((0,Ee.Z)(function*(){e.state=0,e.start()}))}Io(e){return Be("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}yo(e){return t=>{this.Sn.enqueueAndForget(()=>this.no===e?t():(Be("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class lL extends SP{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.O=a}Eo(e,t){return this.eo.Ur("Listen",e,t)}onMessage(e){this.ro.reset();const t=function QN(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:ct(),i=e.targetChange.targetIds||[],a=function(m,w){return m.N?(Dt(void 0===w||"string"==typeof w),Mr.fromBase64String(w||"")):(Dt(void 0===w||w instanceof Uint8Array),Mr.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const w=void 0===m.code?ge.UNKNOWN:Mb(m.code);return new Me(w,m.message||"")}(l);t=new D0(r,i,a,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Oo(n,r.document.name),a=ti(r.document.updateTime),l=new Ki({mapValue:{fields:r.document.fields}}),h=or.newFoundDocument(i,a,l);t=new T0(r.targetIds||[],r.removedTargetIds||[],h.key,h)}else if("documentDelete"in e){const r=e.documentDelete,i=Oo(n,r.document),a=r.readTime?ti(r.readTime):bt.min(),l=or.newNoDocument(i,a);t=new T0([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Oo(n,r.document);t=new T0([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return ct();{const r=e.filter,a=new HS(r.count||0);t=new GS(r.targetId,a)}}var m;return t}(this.O,e),r=function(i){if(!("targetChange"in i))return bt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?bt.min():a.readTime?ti(a.readTime):bt.min()}(e);return this.listener.To(t,r)}Ao(e){const t={};t.database=vp(this.O),t.addTarget=function(i,a){let l;const h=a.target;return l=op(h)?{documents:$b(i,h)}:{query:Gb(i,h)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0?l.resumeToken=Bb(i,a.resumeToken):a.snapshotVersion.compareTo(bt.min())>0&&(l.readTime=Qm(i,a.snapshotVersion.toTimestamp())),l}(this.O,e);const r=function zS(n,e){const t=function(r,i){switch(i){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ct()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.fo(t)}Ro(e){const t={};t.database=vp(this.O),t.removeTarget=e,this.fo(t)}}class cL extends SP{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.O=a,this.Po=!1}get bo(){return this.Po}start(){this.Po=!1,this.lastStreamToken=void 0,super.start()}mo(){this.Po&&this.vo([])}Eo(e,t){return this.eo.Ur("Write",e,t)}onMessage(e){if(Dt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Po){this.ro.reset();const t=function Hb(n,e){return n&&n.length>0?(Dt(void 0!==e),n.map(t=>function(r,i){let a=ti(r.updateTime?r.updateTime:i);return a.isEqual(bt.min())&&(a=ti(i)),new BS(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=ti(e.commitTime);return this.listener.Vo(r,t)}return Dt(!e.writeResults||0===e.writeResults.length),this.Po=!0,this.listener.So()}Do(){const e={};e.database=vp(this.O),this.fo(e)}vo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>n_(this.O,r))};this.fo(t)}}class dL extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.eo=r,this.O=i,this.Co=!1}No(){if(this.Co)throw new Me(ge.FAILED_PRECONDITION,"The client has already been terminated.")}Mr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Mr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ge.UNKNOWN,i.toString())})}Lr(e,t,r){return this.No(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.eo.Lr(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ge.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Me(ge.UNKNOWN,i.toString())})}terminate(){this.Co=!0}}class hL{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.xo=0,this.ko=null,this.Oo=!0}Mo(){0===this.xo&&(this.$o("Unknown"),this.ko=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ko=null,this.Fo("Backend didn't respond within 10 seconds."),this.$o("Offline"),Promise.resolve())))}Bo(e){"Online"===this.state?this.$o("Unknown"):(this.xo++,this.xo>=1&&(this.Lo(),this.Fo(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.$o("Offline")))}set(e){this.Lo(),this.xo=0,"Online"===e&&(this.Oo=!1),this.$o(e)}$o(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}Fo(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.Oo?(kr(t),this.Oo=!1):Be("OnlineStateTracker",t)}Lo(){null!==this.ko&&(this.ko.cancel(),this.ko=null)}}class fL{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Uo=[],this.qo=new Map,this.Ko=new Set,this.Go=[],this.jo=a,this.jo.mr(h=>{r.enqueueAndForget((0,Ee.Z)(function*(){var m;Th(l)&&(Be("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,Ee.Z)(function*(w){const D=We(w);D.Ko.add(4),yield c_(D),D.Qo.set("Unknown"),D.Ko.delete(4),yield O0(D)}),function(w){return m.apply(this,arguments)})(l))}))}),this.Qo=new hL(r,i)}}function O0(n){return wA.apply(this,arguments)}function wA(){return wA=(0,Ee.Z)(function*(n){if(Th(n))for(const e of n.Go)yield e(!0)}),wA.apply(this,arguments)}function c_(n){return EA.apply(this,arguments)}function EA(){return EA=(0,Ee.Z)(function*(n){for(const e of n.Go)yield e(!1)}),EA.apply(this,arguments)}function uC(n,e){const t=We(n);t.qo.has(e.targetId)||(t.qo.set(e.targetId,e),CA(t)?bA(t):h_(t).co()&&IA(t,e))}function L0(n,e){const t=We(n),r=h_(t);t.qo.delete(e),r.co()&&AP(t,e),0===t.qo.size&&(r.co()?r.ho():Th(t)&&t.Qo.set("Unknown"))}function IA(n,e){n.Wo.Z(e.targetId),h_(n).Ao(e)}function AP(n,e){n.Wo.Z(e),h_(n).Ro(e)}function bA(n){n.Wo=new qS({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),Tt:e=>n.qo.get(e)||null}),h_(n).start(),n.Qo.Mo()}function CA(n){return Th(n)&&!h_(n).oo()&&n.qo.size>0}function Th(n){return 0===We(n).Ko.size}function xP(n){n.Wo=void 0}function pL(n){return TA.apply(this,arguments)}function TA(){return TA=(0,Ee.Z)(function*(n){n.qo.forEach((e,t)=>{IA(n,e)})}),TA.apply(this,arguments)}function gL(n,e){return DA.apply(this,arguments)}function DA(){return DA=(0,Ee.Z)(function*(n,e){xP(n),CA(n)?(n.Qo.Bo(e),bA(n)):n.Qo.set("Unknown")}),DA.apply(this,arguments)}function mL(n,e,t){return SA.apply(this,arguments)}function SA(){return SA=(0,Ee.Z)(function*(n,e,t){if(n.Qo.set("Online"),e instanceof D0&&2===e.state&&e.cause)try{yield(r=(0,Ee.Z)(function*(i,a){const l=a.cause;for(const h of a.targetIds)i.qo.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.qo.delete(h),i.Wo.removeTarget(h))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Be("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield lC(n,r)}else if(e instanceof T0?n.Wo.ct(e):e instanceof GS?n.Wo._t(e):n.Wo.ht(e),!t.isEqual(bt.min()))try{const r=yield yP(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Wo.yt(a);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const w=i.qo.get(m);w&&i.qo.set(m,w.withResumeToken(h.resumeToken,a))}}),l.targetMismatches.forEach(h=>{const m=i.qo.get(h);if(!m)return;i.qo.set(h,m.withResumeToken(Mr.EMPTY_BYTE_STRING,m.snapshotVersion)),AP(i,h);const w=new Nt(m.target,h,1,m.sequenceNumber);IA(i,w)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Be("RemoteStore","Failed to raise snapshot:",r),yield lC(n,r)}var r}),SA.apply(this,arguments)}function lC(n,e,t){return AA.apply(this,arguments)}function AA(){return AA=(0,Ee.Z)(function*(n,e,t){if(!x(e))throw e;n.Ko.add(1),yield c_(n),n.Qo.set("Offline"),t||(t=()=>yP(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ee.Z)(function*(){Be("RemoteStore","Retrying IndexedDB access"),yield t(),n.Ko.delete(1),yield O0(n)}))}),AA.apply(this,arguments)}function RP(n,e){return e().catch(t=>lC(n,t,e))}function d_(n){return xA.apply(this,arguments)}function xA(){return xA=(0,Ee.Z)(function*(n){const e=We(n),t=Dh(e);let r=e.Uo.length>0?e.Uo[e.Uo.length-1].batchId:-1;for(;_L(e);)try{const i=yield zO(e.localStore,r);if(null===i){0===e.Uo.length&&t.ho();break}r=i.batchId,yL(e,i)}catch(i){yield lC(e,i)}NP(e)&&PP(e)}),xA.apply(this,arguments)}function _L(n){return Th(n)&&n.Uo.length<10}function yL(n,e){n.Uo.push(e);const t=Dh(n);t.co()&&t.bo&&t.vo(e.mutations)}function NP(n){return Th(n)&&!Dh(n).oo()&&n.Uo.length>0}function PP(n){Dh(n).start()}function vL(n){return RA.apply(this,arguments)}function RA(){return RA=(0,Ee.Z)(function*(n){Dh(n).Do()}),RA.apply(this,arguments)}function wL(n){return NA.apply(this,arguments)}function NA(){return NA=(0,Ee.Z)(function*(n){const e=Dh(n);for(const t of n.Uo)e.vo(t.mutations)}),NA.apply(this,arguments)}function EL(n,e,t){return PA.apply(this,arguments)}function PA(){return PA=(0,Ee.Z)(function*(n,e,t){const r=n.Uo.shift(),i=Ae.from(r,e,t);yield RP(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield d_(n)}),PA.apply(this,arguments)}function IL(n,e){return kA.apply(this,arguments)}function kA(){return kA=(0,Ee.Z)(function*(n,e){var t;e&&Dh(n).bo&&(yield(t=(0,Ee.Z)(function*(r,i){if(I0(a=i.code)&&a!==ge.ABORTED){const l=r.Uo.shift();Dh(r).ao(),yield RP(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield d_(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),NP(n)&&PP(n)}),kA.apply(this,arguments)}function kP(n,e){return MA.apply(this,arguments)}function MA(){return MA=(0,Ee.Z)(function*(n,e){const t=We(n);t.asyncQueue.verifyOperationInProgress(),Be("RemoteStore","RemoteStore received new credentials");const r=Th(t);t.Ko.add(3),yield c_(t),r&&t.Qo.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.Ko.delete(3),yield O0(t)}),MA.apply(this,arguments)}function OA(n,e){return LA.apply(this,arguments)}function LA(){return LA=(0,Ee.Z)(function*(n,e){const t=We(n);e?(t.Ko.delete(2),yield O0(t)):e||(t.Ko.add(2),yield c_(t),t.Qo.set("Unknown"))}),LA.apply(this,arguments)}function h_(n){return n.zo||(n.zo=function(e,t,r){const i=We(e);return i.No(),new lL(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:pL.bind(null,n),vr:gL.bind(null,n),To:mL.bind(null,n)}),n.Go.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.zo.ao(),CA(n)?bA(n):n.Qo.set("Unknown")):(yield n.zo.stop(),xP(n))});return function(t){return e.apply(this,arguments)}}())),n.zo}function Dh(n){return n.Ho||(n.Ho=function(e,t,r){const i=We(e);return i.No(),new cL(t,i.eo,i.authCredentials,i.appCheckCredentials,i.O,r)}(n.datastore,n.asyncQueue,{Pr:vL.bind(null,n),vr:IL.bind(null,n),So:wL.bind(null,n),Vo:EL.bind(null,n)}),n.Go.push(function(){var e=(0,Ee.Z)(function*(t){t?(n.Ho.ao(),yield d_(n)):(yield n.Ho.stop(),n.Uo.length>0&&(Be("RemoteStore",`Stopping write stream with ${n.Uo.length} pending writes`),n.Uo=[]))});return function(t){return e.apply(this,arguments)}}())),n.Ho}class FA{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new An,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,h=new FA(e,t,l,i,a);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Me(ge.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function f_(n,e){if(kr("AsyncQueue",`${e}: ${n}`),x(n))return new Me(ge.UNAVAILABLE,`${e}: ${n}`);throw n}class p_{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Xe.comparator(t.key,r.key):(t,r)=>Xe.comparator(t.key,r.key),this.keyedMap=Zc(),this.sortedSet=new br(this.comparator)}static emptySet(e){return new p_(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof p_)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new p_;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class MP{constructor(){this.Jo=new br(Xe.comparator)}track(e){const t=e.doc.key,r=this.Jo.get(t);r?0!==e.type&&3===r.type?this.Jo=this.Jo.insert(t,e):3===e.type&&1!==r.type?this.Jo=this.Jo.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Jo=this.Jo.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Jo=this.Jo.remove(t):1===e.type&&2===r.type?this.Jo=this.Jo.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Jo=this.Jo.insert(t,{type:2,doc:e.doc}):ct():this.Jo=this.Jo.insert(t,e)}Yo(){const e=[];return this.Jo.inorderTraversal((t,r)=>{e.push(r)}),e}}class g_{constructor(e,t,r,i,a,l,h,m){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m}static fromInitialDocuments(e,t,r,i){const a=[];return t.forEach(l=>{a.push({type:0,doc:l})}),new g_(e,t,p_.emptySet(t),a,r,i,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Wm(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class bL{constructor(){this.Xo=void 0,this.listeners=[]}}class CL{constructor(){this.queries=new a_(e=>zm(e),Wm),this.onlineState="Unknown",this.Zo=new Set}}function UA(n,e){return VA.apply(this,arguments)}function VA(){return VA=(0,Ee.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new bL),i)try{a.Xo=yield t.onListen(r)}catch(l){const h=f_(l,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,a),a.listeners.push(e),e.tc(t.onlineState),a.Xo&&e.ec(a.Xo)&&HA(t)}),VA.apply(this,arguments)}function BA(n,e){return jA.apply(this,arguments)}function jA(){return jA=(0,Ee.Z)(function*(n,e){const t=We(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),jA.apply(this,arguments)}function TL(n,e){const t=We(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.ec(i)&&(r=!0);l.Xo=i}}r&&HA(t)}function DL(n,e,t){const r=We(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function HA(n){n.Zo.forEach(e=>{e.next()})}class $A{constructor(e,t,r){this.query=e,this.nc=t,this.sc=!1,this.ic=null,this.onlineState="Unknown",this.options=r||{}}ec(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new g_(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let t=!1;return this.sc?this.rc(e)&&(this.nc.next(e),t=!0):this.oc(e,this.onlineState)&&(this.cc(e),t=!0),this.ic=e,t}onError(e){this.nc.error(e)}tc(e){this.onlineState=e;let t=!1;return this.ic&&!this.sc&&this.oc(this.ic,e)&&(this.cc(this.ic),t=!0),t}oc(e,t){return!e.fromCache||!(this.options.uc&&"Offline"!==t||e.docs.isEmpty()&&"Offline"!==t)}rc(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.ic&&this.ic.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}cc(e){e=g_.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.sc=!0,this.nc.next(e)}}class SL{constructor(e,t){this.payload=e,this.byteLength=t}ac(){return"metadata"in this.payload}}class OP{constructor(e){this.O=e}Gs(e){return Oo(this.O,e)}js(e){return e.metadata.exists?wp(this.O,e.document,!1):or.newNoDocument(this.Gs(e.metadata.name),this.Qs(e.metadata.readTime))}Qs(e){return ti(e)}}class AL{constructor(e,t,r){this.hc=e,this.localStore=t,this.O=r,this.queries=[],this.documents=[],this.progress=LP(e)}lc(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;return e.payload.namedQuery?this.queries.push(e.payload.namedQuery):e.payload.documentMetadata?(this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++t):e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++t),t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}fc(e){const t=new Map,r=new OP(this.O);for(const i of e)if(i.metadata.queries){const a=r.Gs(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||_n()).add(a);t.set(l,h)}}return t}complete(){var e=this;return(0,Ee.Z)(function*(){const t=yield function ZO(n,e,t,r){return dA.apply(this,arguments)}(e.localStore,new OP(e.O),e.documents,e.hc.id),r=e.fc(e.documents);for(const i of e.queries)yield YO(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",new HO(Object.assign({},e.progress),t)})()}}function LP(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class FP{constructor(e){this.key=e}}class UP{constructor(e){this.key=e}}class VP{constructor(e,t){this.query=e,this.dc=t,this._c=null,this.current=!1,this.wc=_n(),this.mutatedKeys=_n(),this.mc=Ab(e),this.gc=new p_(this.mc)}get yc(){return this.dc}Ic(e,t){const r=t?t.Ec:new MP,i=t?t.gc:this.gc;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m=h0(this.query)&&i.size===this.query.limit?i.last():null,w=f0(this.query)&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const P=i.get(D),U=Km(this.query,S)?S:null,q=!!P&&this.mutatedKeys.has(P.key),ve=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let ke=!1;P&&U?P.data.isEqual(U.data)?q!==ve&&(r.track({type:3,doc:U}),ke=!0):this.Tc(P,U)||(r.track({type:2,doc:U}),ke=!0,(m&&this.mc(U,m)>0||w&&this.mc(U,w)<0)&&(h=!0)):!P&&U?(r.track({type:0,doc:U}),ke=!0):P&&!U&&(r.track({type:1,doc:P}),ke=!0,(m||w)&&(h=!0)),ke&&(U?(l=l.add(U),a=ve?a.add(D):a.delete(D)):(l=l.delete(D),a=a.delete(D)))}),h0(this.query)||f0(this.query))for(;l.size>this.query.limit;){const D=h0(this.query)?l.last():l.first();l=l.delete(D.key),a=a.delete(D.key),r.track({type:1,doc:D})}return{gc:l,Ec:r,ks:h,mutatedKeys:a}}Tc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.gc;this.gc=e.gc,this.mutatedKeys=e.mutatedKeys;const a=e.Ec.Yo();a.sort((w,D)=>function(S,P){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ct()}};return U(S)-U(P)}(w.type,D.type)||this.mc(w.doc,D.doc)),this.Ac(r);const l=t?this.Rc():[],h=0===this.wc.size&&this.current?1:0,m=h!==this._c;return this._c=h,0!==a.length||m?{snapshot:new g_(this.query,e.gc,i,a,e.mutatedKeys,0===h,m,!1),Pc:l}:{Pc:l}}tc(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({gc:this.gc,Ec:new MP,mutatedKeys:this.mutatedKeys,ks:!1},!1)):{Pc:[]}}bc(e){return!this.dc.has(e)&&!!this.gc.has(e)&&!this.gc.get(e).hasLocalMutations}Ac(e){e&&(e.addedDocuments.forEach(t=>this.dc=this.dc.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.dc=this.dc.delete(t)),this.current=e.current)}Rc(){if(!this.current)return[];const e=this.wc;this.wc=_n(),this.gc.forEach(r=>{this.bc(r.key)&&(this.wc=this.wc.add(r.key))});const t=[];return e.forEach(r=>{this.wc.has(r)||t.push(new UP(r))}),this.wc.forEach(r=>{e.has(r)||t.push(new FP(r))}),t}vc(e){this.dc=e.Ks,this.wc=_n();const t=this.Ic(e.documents);return this.applyChanges(t,!0)}Vc(){return g_.fromInitialDocuments(this.query,this.gc,this.mutatedKeys,0===this._c)}}class xL{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class RL{constructor(e){this.key=e,this.Sc=!1}}class NL{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.Dc={},this.Cc=new a_(h=>zm(h),Wm),this.Nc=new Map,this.xc=new Set,this.kc=new br(Xe.comparator),this.Oc=new Map,this.Mc=new fA,this.$c={},this.Fc=new Map,this.Bc=Dp.Je(),this.onlineState="Unknown",this.Lc=void 0}get isPrimaryClient(){return!0===this.Lc}}function PL(n,e){return GA.apply(this,arguments)}function GA(){return GA=(0,Ee.Z)(function*(n,e){const t=fx(n);let r,i;const a=t.Cc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.Vc();else{const l=yield u_(t.localStore,ko(e));t.isPrimaryClient&&uC(t.remoteStore,l);const h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield qA(t,e,r,"current"===h)}return i}),GA.apply(this,arguments)}function qA(n,e,t,r){return WA.apply(this,arguments)}function WA(){return WA=(0,Ee.Z)(function*(n,e,t,r){n.Uc=(D,S,P)=>{return(U=(0,Ee.Z)(function*(q,ve,ke,tt){let vt=ve.view.Ic(ke);vt.ks&&(vt=yield iC(q.localStore,ve.query,!1).then(({documents:vn})=>ve.view.Ic(vn,vt)));const It=tt&&tt.targetChanges.get(ve.targetId),dt=ve.view.applyChanges(vt,q.isPrimaryClient,It);return nx(q,ve.targetId,dt.Pc),dt.snapshot}),function(q,ve,ke,tt){return U.apply(this,arguments)})(n,D,S,P);var U};const i=yield iC(n.localStore,e,!0),a=new VP(e,i.Ks),l=a.Ic(i.documents),h=_p.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState),m=a.applyChanges(l,n.isPrimaryClient,h);nx(n,t,m.Pc);const w=new xL(e,t,a);return n.Cc.set(e,w),n.Nc.has(t)?n.Nc.get(t).push(e):n.Nc.set(t,[e]),m.snapshot}),WA.apply(this,arguments)}function kL(n,e){return zA.apply(this,arguments)}function zA(){return zA=(0,Ee.Z)(function*(n,e){const t=We(n),r=t.Cc.get(e),i=t.Nc.get(r.targetId);if(i.length>1)return t.Nc.set(r.targetId,i.filter(a=>!Wm(a,e))),void t.Cc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield l_(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),L0(t.remoteStore,r.targetId),m_(t,r.targetId)}).catch(Sp))):(m_(t,r.targetId),yield l_(t.localStore,r.targetId,!0))}),zA.apply(this,arguments)}function KA(){return KA=(0,Ee.Z)(function*(n,e,t){const r=px(n);try{const i=yield function(a,l){const h=We(a),m=Xr.now(),w=l.reduce((S,P)=>S.add(P.key),_n());let D;return h.persistence.runTransaction("Locally write mutations","readwrite",S=>h.Us.Es(S,w).next(P=>{D=P;const U=[];for(const q of l){const ve=y0(q,D.get(q.key));null!=ve&&U.push(new Cl(q.key,ve,l0(ve.value.mapValue),ln.exists(!0)))}return h.gs.addMutationBatch(S,m,U,l)})).then(S=>(S.applyToLocalDocumentSet(D),{batchId:S.batchId,changes:D}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,h){let m=a.$c[a.currentUser.toKey()];m||(m=new br(Ht)),m=m.insert(l,h),a.$c[a.currentUser.toKey()]=m}(r,i.batchId,t),yield Qc(r,i.changes),yield d_(r.remoteStore)}catch(i){const a=f_(i,"Failed to persist write");t.reject(a)}}),KA.apply(this,arguments)}function BP(n,e){return ZA.apply(this,arguments)}function ZA(){return ZA=(0,Ee.Z)(function*(n,e){const t=We(n);try{const r=yield WO(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.Oc.get(a);l&&(Dt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.Sc=!0:i.modifiedDocuments.size>0?Dt(l.Sc):i.removedDocuments.size>0&&(Dt(l.Sc),l.Sc=!1))}),yield Qc(t,r,e)}catch(r){yield Sp(r)}}),ZA.apply(this,arguments)}function jP(n,e,t){const r=We(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.Cc.forEach((a,l)=>{const h=l.view.tc(e);h.snapshot&&i.push(h.snapshot)}),function(a,l){const h=We(a);h.onlineState=l;let m=!1;h.queries.forEach((w,D)=>{for(const S of D.listeners)S.tc(l)&&(m=!0)}),m&&HA(h)}(r.eventManager,e),i.length&&r.Dc.To(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function OL(n,e,t){return YA.apply(this,arguments)}function YA(){return YA=(0,Ee.Z)(function*(n,e,t){const r=We(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.Oc.get(e),a=i&&i.key;if(a){let l=new br(Xe.comparator);l=l.insert(a,or.newNoDocument(a,bt.min()));const h=_n().add(a),m=new mp(bt.min(),new Map,new ar(Ht),l,h);yield BP(r,m),r.kc=r.kc.remove(a),r.Oc.delete(e),rx(r)}else yield l_(r.localStore,e,!1).then(()=>m_(r,e,t)).catch(Sp)}),YA.apply(this,arguments)}function LL(n,e){return QA.apply(this,arguments)}function QA(){return QA=(0,Ee.Z)(function*(n,e){const t=We(n),r=e.batch.batchId;try{const i=yield qO(t.localStore,e);tx(t,r,null),ex(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Qc(t,i)}catch(i){yield Sp(i)}}),QA.apply(this,arguments)}function FL(n,e,t){return JA.apply(this,arguments)}function JA(){return JA=(0,Ee.Z)(function*(n,e,t){const r=We(n);try{const i=yield function(a,l){const h=We(a);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let w;return h.gs.lookupMutationBatch(m,l).next(D=>(Dt(null!==D),w=D.keys(),h.gs.removeMutationBatch(m,D))).next(()=>h.gs.performConsistencyCheck(m)).next(()=>h.Us.Es(m,w))})}(r.localStore,e);tx(r,e,t),ex(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Qc(r,i)}catch(i){yield Sp(i)}}),JA.apply(this,arguments)}function XA(){return XA=(0,Ee.Z)(function*(n,e){const t=We(n);Th(t.remoteStore)||Be("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=We(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.gs.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Fc.get(r)||[];i.push(e),t.Fc.set(r,i)}catch(r){const i=f_(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),XA.apply(this,arguments)}function ex(n,e){(n.Fc.get(e)||[]).forEach(t=>{t.resolve()}),n.Fc.delete(e)}function tx(n,e,t){const r=We(n);let i=r.$c[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.$c[r.currentUser.toKey()]=i}}function m_(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.Nc.get(e))n.Cc.delete(r),t&&n.Dc.qc(r,t);n.Nc.delete(e),n.isPrimaryClient&&n.Mc.si(e).forEach(r=>{n.Mc.containsKey(r)||HP(n,r)})}function HP(n,e){n.xc.delete(e.path.canonicalString());const t=n.kc.get(e);null!==t&&(L0(n.remoteStore,t),n.kc=n.kc.remove(e),n.Oc.delete(t),rx(n))}function nx(n,e,t){for(const r of t)r instanceof FP?(n.Mc.addReference(r.key,e),VL(n,r)):r instanceof UP?(Be("SyncEngine","Document no longer in limbo: "+r.key),n.Mc.removeReference(r.key,e),n.Mc.containsKey(r.key)||HP(n,r.key)):ct()}function VL(n,e){const t=e.key,r=t.path.canonicalString();n.kc.get(t)||n.xc.has(r)||(Be("SyncEngine","New document in limbo: "+t),n.xc.add(r),rx(n))}function rx(n){for(;n.xc.size>0&&n.kc.size<n.maxConcurrentLimboResolutions;){const e=n.xc.values().next().value;n.xc.delete(e);const t=new Xe(tn.fromString(e)),r=n.Bc.next();n.Oc.set(r,new RL(t)),n.kc=n.kc.insert(t,r),uC(n.remoteStore,new Nt(ko(ap(t.path)),r,2,ks.A))}}function Qc(n,e,t){return ix.apply(this,arguments)}function ix(){return ix=(0,Ee.Z)(function*(n,e,t){const r=We(n),i=[],a=[],l=[];var h;r.Cc.isEmpty()||(r.Cc.forEach((h,m)=>{l.push(r.Uc(m,e,t).then(w=>{if(w){r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,w.fromCache?"not-current":"current"),i.push(w);const D=aA.Ss(m.targetId,w);a.push(D)}}))}),yield Promise.all(l),r.Dc.To(i),yield(h=(0,Ee.Z)(function*(m,w){const D=We(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>f.forEach(w,P=>f.forEach(P.vs,U=>D.persistence.referenceDelegate.addReference(S,P.targetId,U)).next(()=>f.forEach(P.Vs,U=>D.persistence.referenceDelegate.removeReference(S,P.targetId,U)))))}catch(S){if(!x(S))throw S;Be("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const U=D.Ms.get(P),ve=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);D.Ms=D.Ms.insert(P,ve)}}}),function(m,w){return h.apply(this,arguments)})(r.localStore,a))}),ix.apply(this,arguments)}function BL(n,e){return sx.apply(this,arguments)}function sx(){return sx=(0,Ee.Z)(function*(n,e){const t=We(n);if(!t.currentUser.isEqual(e)){Be("SyncEngine","User change. New user:",e.toKey());const r=yield _P(t.localStore,e);t.currentUser=e,(i=t).Fc.forEach(l=>{l.forEach(h=>{h.reject(new Me(ge.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Fc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Qc(t,r.qs)}var i}),sx.apply(this,arguments)}function jL(n,e){const t=We(n),r=t.Oc.get(e);if(r&&r.Sc)return _n().add(r.key);{let i=_n();const a=t.Nc.get(e);if(!a)return i;for(const l of a){const h=t.Cc.get(l);i=i.unionWith(h.view.yc)}return i}}function HL(n,e){return ox.apply(this,arguments)}function ox(){return ox=(0,Ee.Z)(function*(n,e){const t=We(n),r=yield iC(t.localStore,e.query,!0),i=e.view.vc(r);return t.isPrimaryClient&&nx(t,e.targetId,i.Pc),i}),ox.apply(this,arguments)}function $L(n){return ax.apply(this,arguments)}function ax(){return ax=(0,Ee.Z)(function*(n){const e=We(n);return EP(e.localStore).then(t=>Qc(e,t))}),ax.apply(this,arguments)}function GL(n,e,t,r){return ux.apply(this,arguments)}function ux(){return ux=(0,Ee.Z)(function*(n,e,t,r){const i=We(n),a=yield function(l,h){const m=We(l),w=We(m.gs);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>w.Ge(D,h).next(S=>S?m.Us.Es(D,S):f.resolve(null)))}(i.localStore,e);var h;null!==a?("pending"===t?yield d_(i.remoteStore):"acknowledged"===t||"rejected"===t?(tx(i,e,r||null),ex(i,e),h=e,We(We(i.localStore).gs).Qe(h)):ct(),yield Qc(i,a)):Be("SyncEngine","Cannot apply mutation batch with id: "+e)}),ux.apply(this,arguments)}function lx(){return lx=(0,Ee.Z)(function*(n,e){const t=We(n);if(fx(t),px(t),!0===e&&!0!==t.Lc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield $P(t,r.toArray());t.Lc=!0,yield OA(t.remoteStore,!0);for(const a of i)uC(t.remoteStore,a)}else if(!1===e&&!1!==t.Lc){const r=[];let i=Promise.resolve();t.Nc.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(m_(t,l),l_(t.localStore,l,!0))),L0(t.remoteStore,l)}),yield i,yield $P(t,r),function(a){const l=We(a);l.Oc.forEach((h,m)=>{L0(l.remoteStore,m)}),l.Mc.ii(),l.Oc=new Map,l.kc=new br(Xe.comparator)}(t),t.Lc=!1,yield OA(t.remoteStore,!1)}}),lx.apply(this,arguments)}function $P(n,e,t){return cx.apply(this,arguments)}function cx(){return cx=(0,Ee.Z)(function*(n,e,t){const r=We(n),i=[],a=[];for(const l of e){let h;const m=r.Nc.get(l);if(m&&0!==m.length){h=yield u_(r.localStore,ko(m[0]));for(const w of m){const D=r.Cc.get(w),S=yield HL(r,D);S.snapshot&&a.push(S.snapshot)}}else{const w=yield wP(r.localStore,l);h=yield u_(r.localStore,w),yield qA(r,GP(w),l,!1)}i.push(h)}return r.Dc.To(a),i}),cx.apply(this,arguments)}function GP(n){return d0(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function WL(n){const e=We(n);return We(We(e.localStore).persistence).ds()}function zL(n,e,t,r){return dx.apply(this,arguments)}function dx(){return dx=(0,Ee.Z)(function*(n,e,t,r){const i=We(n);if(i.Lc)Be("SyncEngine","Ignoring unexpected query state notification.");else if(i.Nc.has(e))switch(t){case"current":case"not-current":{const a=yield EP(i.localStore),l=mp.createSynthesizedRemoteEventForCurrentChange(e,"current"===t);yield Qc(i,a,l);break}case"rejected":yield l_(i.localStore,e,!0),m_(i,e,r);break;default:ct()}}),dx.apply(this,arguments)}function KL(n,e,t){return hx.apply(this,arguments)}function hx(){return hx=(0,Ee.Z)(function*(n,e,t){const r=fx(n);if(r.Lc){for(const i of e){if(r.Nc.has(i)){Be("SyncEngine","Adding an already active target "+i);continue}const a=yield wP(r.localStore,i),l=yield u_(r.localStore,a);yield qA(r,GP(a),l.targetId,!1),uC(r.remoteStore,l)}for(const i of t)r.Nc.has(i)&&(yield l_(r.localStore,i,!1).then(()=>{L0(r.remoteStore,i),m_(r,i)}).catch(Sp))}}),hx.apply(this,arguments)}function fx(n){const e=We(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=BP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=jL.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=OL.bind(null,e),e.Dc.To=TL.bind(null,e.eventManager),e.Dc.qc=DL.bind(null,e.eventManager),e}function px(n){const e=We(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=LL.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FL.bind(null,e),e}class qP{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ee.Z)(function*(){t.O=M0(e.databaseInfo.databaseId),t.sharedClientState=t.Gc(e),t.persistence=t.jc(e),yield t.persistence.start(),t.gcScheduler=t.Qc(e),t.localStore=t.Wc(e)})()}Qc(e){return null}Wc(e){return mP(this.persistence,new gP,e.initialUser,this.O)}jc(e){return new rL(pA.bi,this.O)}Gc(e){return new CP}terminate(){var e=this;return(0,Ee.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class WP extends qP{constructor(e,t,r){super(),this.zc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e),yield function KO(n){return cA.apply(this,arguments)}(r.localStore),yield r.zc.initialize(r,e),yield px(r.zc.syncEngine),yield d_(r.zc.remoteStore),yield r.persistence.Hn(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(r.localStore),Promise.resolve()))})()}Wc(e){return mP(this.persistence,new gP,e.initialUser,this.O)}Qc(e){return new LO(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}jc(e){const t=oA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?fo.withCacheSize(this.cacheSizeBytes):fo.DEFAULT;return new sA(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DP(),aC(),this.O,this.sharedClientState,!!this.forceOwnership)}Gc(e){return new CP}}class YL extends WP{constructor(e,t){super(e,t,!1),this.zc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ee.Z)(function*(){yield t().call(r,e);const i=r.zc.syncEngine;r.sharedClientState instanceof yA&&(r.sharedClientState.syncEngine={hr:GL.bind(null,i),lr:zL.bind(null,i),dr:KL.bind(null,i),ds:WL.bind(null,i),ar:$L.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Hn(function(){var a=(0,Ee.Z)(function*(l){yield function qL(n,e){return lx.apply(this,arguments)}(r.zc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start(r.localStore):l||r.gcScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}Gc(e){const t=DP();if(!yA.Vt(t))throw new Me(ge.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=oA(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new yA(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class gx{initialize(e,t){var r=this;return(0,Ee.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>jP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=BL.bind(null,r.syncEngine),yield OA(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CL}createDatastore(e){const t=M0(e.databaseInfo.databaseId),r=new uL(e.databaseInfo);return new dL(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=h=>jP(this.syncEngine,h,0),l=TP.Vt()?new TP:new sL,new fL(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,h,m,w){const D=new NL(r,i,a,l,h,m);return w&&(D.Lc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ee.Z)(function*(t){const r=We(t);Be("RemoteStore","RemoteStore shutting down."),r.Ko.add(5),yield c_(r),r.jo.shutdown(),r.Qo.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function zP(n,e=10240){let t=0;return{read:()=>(0,Ee.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ee.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class cC{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Hc(this.observer.next,e)}error(e){this.observer.error?this.Hc(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}Jc(){this.muted=!0}Hc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class QL{constructor(e,t){this.Yc=e,this.O=t,this.metadata=new An,this.buffer=new Uint8Array,this.Xc=new TextDecoder("utf-8"),this.Zc().then(r=>{r&&r.ac()?this.metadata.resolve(r.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==r?void 0:r.payload)}`))},r=>this.metadata.reject(r))}close(){return this.Yc.cancel()}getMetadata(){var e=this;return(0,Ee.Z)(function*(){return e.metadata.promise})()}Kc(){var e=this;return(0,Ee.Z)(function*(){return yield e.getMetadata(),e.Zc()})()}Zc(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.tu();if(null===t)return null;const r=e.Xc.decode(t),i=Number(r);isNaN(i)&&e.eu(`length string (${r}) is not valid number`);const a=yield e.nu(i);return new SL(JSON.parse(a),t.length+i)})()}su(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}tu(){var e=this;return(0,Ee.Z)(function*(){for(;e.su()<0&&!(yield e.iu()););if(0===e.buffer.length)return null;const t=e.su();t<0&&e.eu("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}nu(e){var t=this;return(0,Ee.Z)(function*(){for(;t.buffer.length<e;)(yield t.iu())&&t.eu("Reached the end of bundle when more is expected.");const r=t.Xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}eu(e){throw this.Yc.cancel(),new Error(`Invalid bundle format: ${e}`)}iu(){var e=this;return(0,Ee.Z)(function*(){const t=yield e.Yc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class JL{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ee.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Me(ge.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,Ee.Z)(function*(a,l){const h=We(a),m=vp(h.O)+"/documents",w={documents:l.map(U=>Mo(h.O,U))},D=yield h.Lr("BatchGetDocuments",m,w),S=new Map;D.forEach(U=>{const q=function YN(n,e){return"found"in e?function(t,r){Dt(!!r.found);const i=Oo(t,r.found.name),a=ti(r.found.updateTime),l=new Ki({mapValue:{fields:r.found.fields}});return or.newFoundDocument(i,a,l)}(n,e):"missing"in e?function(t,r){Dt(!!r.missing),Dt(!!r.readTime);const i=Oo(t,r.missing),a=ti(r.readTime);return or.newNoDocument(i,a)}(n,e):ct()}(h.O,U);S.set(q.key.toString(),q)});const P=[];return l.forEach(U=>{const q=S.get(U.toString());Dt(!!q),P.push(q)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new zc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ee.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Xe.fromPath(i);e.mutations.push(new Ms(a,e.precondition(a)))}),yield(r=(0,Ee.Z)(function*(i,a){const l=We(i),h=vp(l.O)+"/documents",m={writes:a.map(w=>n_(l.O,w))};yield l.Mr("Commit",h,m)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ct();t=bt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Me(ge.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?ln.updateTime(t):ln.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(bt.min()))throw new Me(ge.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ln.updateTime(t)}return ln.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class XL{constructor(e,t,r,i){this.asyncQueue=e,this.datastore=t,this.updateFunction=r,this.deferred=i,this.ru=5,this.ro=new vA(this.asyncQueue,"transaction_retry")}run(){this.ru-=1,this.ou()}ou(){var e=this;this.ro.Hr((0,Ee.Z)(function*(){const t=new JL(e.datastore),r=e.cu(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.uu(a)}))}).catch(i=>{e.uu(i)})}))}cu(e){try{const t=this.updateFunction(e);return!wl(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}uu(e){this.ru>0&&this.au(e)?(this.ru-=1,this.asyncQueue.enqueueAndForget(()=>(this.ou(),Promise.resolve()))):this.deferred.reject(e)}au(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||!I0(t)}return!1}}class eF{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Jr.UNAUTHENTICATED,this.clientId=n0.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,Ee.Z)(function*(h){Be("FirestoreClient","Received user=",h.uid),yield a.authCredentialListener(h),a.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Be("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,Ee.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Me(ge.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new An;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=f_(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function KP(n,e){return mx.apply(this,arguments)}function mx(){return mx=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Be("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,Ee.Z)(function*(a){r.isEqual(a)||(yield _P(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),mx.apply(this,arguments)}function ZP(n,e){return _x.apply(this,arguments)}function _x(){return _x=(0,Ee.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield yx(n);Be("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>kP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>kP(e.remoteStore,a)),n.onlineComponents=e}),_x.apply(this,arguments)}function yx(n){return vx.apply(this,arguments)}function vx(){return vx=(0,Ee.Z)(function*(n){return n.offlineComponents||(Be("FirestoreClient","Using default OfflineComponentProvider"),yield KP(n,new qP)),n.offlineComponents}),vx.apply(this,arguments)}function dC(n){return wx.apply(this,arguments)}function wx(){return wx=(0,Ee.Z)(function*(n){return n.onlineComponents||(Be("FirestoreClient","Using default OnlineComponentProvider"),yield ZP(n,new gx)),n.onlineComponents}),wx.apply(this,arguments)}function YP(n){return yx(n).then(e=>e.persistence)}function Ex(n){return yx(n).then(e=>e.localStore)}function QP(n){return dC(n).then(e=>e.remoteStore)}function Ix(n){return dC(n).then(e=>e.syncEngine)}function __(n){return bx.apply(this,arguments)}function bx(){return bx=(0,Ee.Z)(function*(n){const e=yield dC(n),t=e.eventManager;return t.onListen=PL.bind(null,e.syncEngine),t.onUnlisten=kL.bind(null,e.syncEngine),t}),bx.apply(this,arguments)}function JP(n,e,t={}){const r=new An;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,h,m){const w=new cC({next:S=>{a.enqueueAndForget(()=>BA(i,D));const P=S.docs.has(l);!P&&S.fromCache?m.reject(new Me(ge.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&h&&"server"===h.source?m.reject(new Me(ge.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new $A(ap(l.path),w,{includeMetadataChanges:!0,uc:!0});return UA(i,D)}(yield __(n),n.asyncQueue,e,t,r)})),r.promise}function XP(n,e,t={}){const r=new An;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function(i,a,l,h,m){const w=new cC({next:S=>{a.enqueueAndForget(()=>BA(i,D)),S.fromCache&&"server"===h.source?m.reject(new Me(ge.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new $A(l,w,{includeMetadataChanges:!0,uc:!0});return UA(i,D)}(yield __(n),n.asyncQueue,e,t,r)})),r.promise}const ek=new Map;function Cx(n,e,t){if(!t)throw new Me(ge.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function tk(n,e,t,r){if(!0===e&&!0===r)throw new Me(ge.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function nk(n){if(!Xe.isDocumentKey(n))throw new Me(ge.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function rk(n){if(Xe.isDocumentKey(n))throw new Me(ge.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function hC(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ct()}function rn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Me(ge.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=hC(n);throw new Me(ge.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ik(n,e){if(e<=0)throw new Me(ge.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class sk{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Me(ge.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Me(ge.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,tk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class F0{constructor(e,t,r){this._authCredentials=t,this._appCheckCredentials=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new sk({}),this._settingsFrozen=!1,e instanceof Vc?this._databaseId=e:(this._app=e,this._databaseId=function(i){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new Me(ge.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Vc(i.options.projectId)}(e))}get app(){if(!this._app)throw new Me(ge.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Me(ge.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new sk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new t0;switch(t.type){case"gapi":const r=t.client;return Dt(!("object"!=typeof r||null===r||!r.auth||!r.auth.getAuthHeaderValueForFirstParty)),new xS(r,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Me(ge.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ek.get(e);t&&(Be("ComponentProvider","Removing Datastore"),ek.delete(e),t.terminate())}(this),Promise.resolve()}}class ur{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xl(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ur(this.firestore,e,this._key)}}class ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ms(this.firestore,e,this._query)}}class xl extends ms{constructor(e,t,r){super(e,t,ap(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ur(this.firestore,null,new Xe(e))}withConverter(e){return new xl(this.firestore,e,this._path)}}function ok(n,e,...t){if(n=(0,M.m9)(n),Cx("collection","path",e),n instanceof F0){const r=tn.fromString(e,...t);return rk(r),new xl(n,null,r)}{if(!(n instanceof ur||n instanceof xl))throw new Me(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return rk(r),new xl(n.firestore,null,r)}}function fC(n,e,...t){if(n=(0,M.m9)(n),1===arguments.length&&(e=n0.R()),Cx("doc","path",e),n instanceof F0){const r=tn.fromString(e,...t);return nk(r),new ur(n,null,new Xe(r))}{if(!(n instanceof ur||n instanceof xl))throw new Me(ge.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(tn.fromString(e,...t));return nk(r),new ur(n.firestore,n instanceof xl?n.converter:null,new Xe(r))}}function ak(n,e){return n=(0,M.m9)(n),e=(0,M.m9)(e),(n instanceof ur||n instanceof xl)&&(e instanceof ur||e instanceof xl)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function uk(n,e){return n=(0,M.m9)(n),e=(0,M.m9)(e),n instanceof ms&&e instanceof ms&&n.firestore===e.firestore&&Wm(n._query,e._query)&&n.converter===e.converter}class dF{constructor(){this.hu=Promise.resolve(),this.lu=[],this.fu=!1,this.du=[],this._u=null,this.wu=!1,this.mu=!1,this.gu=[],this.ro=new vA(this,"async_queue_retry"),this.yu=()=>{const t=aC();t&&Be("AsyncQueue","Visibility state changed to "+t.visibilityState),this.ro.Yr()};const e=aC();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.yu)}get isShuttingDown(){return this.fu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.Iu(e)}enterRestrictedMode(e){if(!this.fu){this.fu=!0,this.mu=e||!1;const t=aC();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.yu)}}enqueue(e){if(this.pu(),this.fu)return new Promise(()=>{});const t=new An;return this.Iu(()=>this.fu&&this.mu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.lu.push(e),this.Eu()))}Eu(){var e=this;return(0,Ee.Z)(function*(){if(0!==e.lu.length){try{yield e.lu[0](),e.lu.shift(),e.ro.reset()}catch(t){if(!x(t))throw t;Be("AsyncQueue","Operation failed with retryable error: "+t)}e.lu.length>0&&e.ro.Hr(()=>e.Eu())}})()}Iu(e){const t=this.hu.then(()=>(this.wu=!0,e().catch(r=>{throw this._u=r,this.wu=!1,kr("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.wu=!1,r))));return this.hu=t,t}enqueueAfterDelay(e,t,r){this.pu(),this.gu.indexOf(e)>-1&&(t=0);const i=FA.createAndSchedule(this,e,t,r,a=>this.Tu(a));return this.du.push(i),i}pu(){this._u&&ct()}verifyOperationInProgress(){}Au(){var e=this;return(0,Ee.Z)(function*(){let t;do{t=e.hu,yield t}while(t!==e.hu)})()}Ru(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}Pu(e){return this.Au().then(()=>{this.du.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Au()})}bu(e){this.gu.push(e)}Tu(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function Tx(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class hF{constructor(){this._progressObserver={},this._taskCompletionResolver=new An,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class _r extends F0{constructor(e,t,r){super(e,t,r),this.type="firestore",this._queue=new dF,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||lk(this),this._firestoreClient.terminate()}}function ni(n){return n._firestoreClient||lk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function lk(n){var e;const t=n._freezeSettings(),r=(a=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new mb(n._databaseId,a,n._persistenceKey,(h=t).host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,h.useFetchStreams));var a,h;n._firestoreClient=new eF(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ck(n,e,t){const r=new An;return n.asyncQueue.enqueue((0,Ee.Z)(function*(){try{yield KP(n,t),yield ZP(n,e),r.resolve()}catch(i){if(!("FirebaseError"===(a=i).name?a.code===ge.FAILED_PRECONDITION||a.code===ge.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&a instanceof DOMException)||22===a.code||20===a.code||11===a.code))throw i;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+i),r.reject(i)}var a})).then(()=>r.promise)}function dk(n){if(n._initialized||n._terminated)throw new Me(ge.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Jc{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Me(ge.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ei(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Rl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rl(Mr.fromBase64String(e))}catch(t){throw new Me(ge.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rl(Mr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Ap{constructor(e){this._methodName=e}}class pC{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Me(ge.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Me(ge.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Ht(this._lat,e._lat)||Ht(this._long,e._long)}}const IF=/^__.*__$/;class bF{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms):new fp(e,this.data,t,this.fieldTransforms)}}class hk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Cl(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function fk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ct()}}class gC{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.O=r,this.ignoreUndefinedProperties=i,void 0===a&&this.vu(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get Vu(){return this.settings.Vu}Su(e){return new gC(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.O,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Du(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.Nu(e),i}xu(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.Su({path:r,Cu:!1});return i.vu(),i}ku(e){return this.Su({path:void 0,Cu:!0})}Ou(e){return yC(e,this.settings.methodName,this.settings.Mu||!1,this.path,this.settings.$u)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Nu(this.path.get(e))}Nu(e){if(0===e.length)throw this.Ou("Document fields must not be empty");if(fk(this.Vu)&&IF.test(e))throw this.Ou('Document fields cannot begin and end with "__"')}}class CF{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.O=r||M0(e)}Fu(e,t,r,i=!1){return new gC({Vu:e,methodName:t,$u:r,path:ei.emptyPath(),Cu:!1,Mu:i},this.databaseId,this.O,this.ignoreUndefinedProperties)}}function xp(n){const e=n._freezeSettings(),t=M0(n._databaseId);return new CF(n._databaseId,!!e.ignoreUndefinedProperties,t)}function mC(n,e,t,r,i,a={}){const l=n.Fu(a.merge||a.mergeFields?2:0,e,t,i);xx("Data must be an object, but it was:",l,r);const h=mk(r,l);let m,w;if(a.merge)m=new lh(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const D=[];for(const S of a.mergeFields){const P=Rx(e,S,t);if(!l.contains(P))throw new Me(ge.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);yk(D,P)||D.push(P)}m=new lh(D),w=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,w=l.fieldTransforms;return new bF(new Ki(h),m,w)}class U0 extends Ap{_toFieldTransform(e){if(2!==e.Vu)throw e.Ou(1===e.Vu?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof U0}}function pk(n,e,t){return new gC({Vu:3,$u:e.settings.$u,methodName:n._methodName,Cu:t},e.databaseId,e.O,e.ignoreUndefinedProperties)}class Dx extends Ap{_toFieldTransform(e){return new hp(e.path,new Wc)}isEqual(e){return e instanceof Dx}}class TF extends Ap{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=pk(this,e,!0),r=this.Bu.map(a=>Rp(a,t)),i=new gh(r);return new hp(e.path,i)}isEqual(e){return this===e}}class DF extends Ap{constructor(e,t){super(e),this.Bu=t}_toFieldTransform(e){const t=pk(this,e,!0),r=this.Bu.map(a=>Rp(a,t)),i=new mh(r);return new hp(e.path,i)}isEqual(e){return this===e}}class SF extends Ap{constructor(e,t){super(e),this.Lu=t}_toFieldTransform(e){const t=new bl(e.O,g0(e.O,this.Lu));return new hp(e.path,t)}isEqual(e){return this===e}}function Sx(n,e,t,r){const i=n.Fu(1,e,t);xx("Data must be an object, but it was:",i,r);const a=[],l=Ki.empty();gu(r,(m,w)=>{const D=_C(e,m,t);w=(0,M.m9)(w);const S=i.xu(D);if(w instanceof U0)a.push(D);else{const P=Rp(w,S);null!=P&&(a.push(D),l.set(D,P))}});const h=new lh(a);return new hk(l,h,i.fieldTransforms)}function Ax(n,e,t,r,i,a){const l=n.Fu(1,e,t),h=[Rx(e,r,t)],m=[i];if(a.length%2!=0)throw new Me(ge.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)h.push(Rx(e,a[P])),m.push(a[P+1]);const w=[],D=Ki.empty();for(let P=h.length-1;P>=0;--P)if(!yk(w,h[P])){const U=h[P];let q=m[P];q=(0,M.m9)(q);const ve=l.xu(U);if(q instanceof U0)w.push(U);else{const ke=Rp(q,ve);null!=ke&&(w.push(U),D.set(U,ke))}}const S=new lh(w);return new hk(D,S,l.fieldTransforms)}function gk(n,e,t,r=!1){return Rp(t,n.Fu(r?4:3,e))}function Rp(n,e){if(_k(n=(0,M.m9)(n)))return xx("Unsupported field value:",e,n),mk(n,e);if(n instanceof Ap)return function(t,r){if(!fk(r.Vu))throw r.Ou(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Ou(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Cu&&4!==e.Vu)throw e.Ou("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let h=Rp(l,r.ku(a));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,M.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return g0(r.O,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Xr.fromDate(t);return{timestampValue:Qm(r.O,i)}}if(t instanceof Xr){const i=new Xr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Qm(r.O,i)}}if(t instanceof pC)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Rl)return{bytesValue:Bb(r.O,t._byteString)};if(t instanceof ur){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r.Ou(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:S0(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.Ou(`Unsupported field value: ${hC(t)}`)}(n,e)}function mk(n,e){const t={};return r0(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gu(n,(r,i)=>{const a=Rp(i,e.Du(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function _k(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Xr||n instanceof pC||n instanceof Rl||n instanceof ur||n instanceof Ap)}function xx(n,e,t){if(!_k(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=hC(t);throw e.Ou("an object"===r?n+" a custom object":n+" "+r)}var r}function Rx(n,e,t){if((e=(0,M.m9)(e))instanceof Jc)return e._internalPath;if("string"==typeof e)return _C(n,e);throw yC("Field path arguments must be of type string or ",n,!1,void 0,t)}const AF=new RegExp("[~\\*/\\[\\]]");function _C(n,e,t){if(e.search(AF)>=0)throw yC(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Jc(...e.split("."))._internalPath}catch(r){throw yC(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function yC(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(a||l)&&(m+=" (found",a&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new Me(ge.INVALID_ARGUMENT,h+n+m)}function yk(n,e){return n.some(t=>t.isEqual(e))}class V0{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new ur(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new xF(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(vC("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class xF extends V0{data(){return super.data()}}function vC(n,e){return"string"==typeof e?_C(n,e):e instanceof Jc?e._internalPath:e._delegate._internalPath}class Np{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Xc extends V0{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new B0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(vC("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class B0 extends Xc{data(e={}){return super.data(e)}}class Sh{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Np(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new B0(this._firestore,this._userDataWriter,r.key,r,new Np(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Me(ge.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new B0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Np(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new B0(r._firestore,r._userDataWriter,l.doc.key,l.doc,new Np(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,w=-1;return 0!==l.type&&(m=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:RF(l.type),doc:h,oldIndex:m,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function RF(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ct()}}function vk(n,e){return n instanceof Xc&&e instanceof Xc?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Sh&&e instanceof Sh&&n._firestore===e._firestore&&uk(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}function wk(n){if(f0(n)&&0===n.explicitOrderBy.length)throw new Me(ge.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class j0{}function Ah(n,...e){for(const t of e)n=t._apply(n);return n}class NF extends j0{constructor(e,t,r){super(),this.Uu=e,this.qu=t,this.Ku=r,this.type="where"}_apply(e){const t=xp(e.firestore),r=function(i,a,l,h,m,w,D){let S;if(m.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){Dk(D,w);const U=[];for(const q of D)U.push(Tk(h,i,q));S={arrayValue:{values:U}}}else S=Tk(h,i,D)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||Dk(D,w),S=gk(l,"where",D,"in"===w||"not-in"===w);const P=Ri.create(m,w,S);return function(U,q){if(q.S()){const ke=Db(U);if(null!==ke&&!ke.isEqual(q.field))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${ke.toString()}' and '${q.field.toString()}'`);const tt=Tb(U);null!==tt&&Sk(0,q.field,tt)}const ve=function(ke,tt){for(const vt of ke.filters)if(tt.indexOf(vt.op)>=0)return vt.op;return null}(U,function(ke){switch(ke){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(q.op));if(null!==ve)throw new Me(ge.INVALID_ARGUMENT,ve===q.op?`Invalid query. You cannot use more than one '${q.op.toString()}' filter.`:`Invalid query. You cannot use '${q.op.toString()}' filters with '${ve.toString()}' filters.`)}(i,P),P}(e._query,0,t,e.firestore._databaseId,this.Uu,this.qu,this.Ku);return new ms(e.firestore,e.converter,function(i,a){const l=i.filters.concat([a]);return new El(i.path,i.collectionGroup,i.explicitOrderBy.slice(),l,i.limit,i.limitType,i.startAt,i.endAt)}(e._query,r))}}class kF extends j0{constructor(e,t){super(),this.Uu=e,this.Gu=t,this.type="orderBy"}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new qc(i,a);return function(h,m){if(null===Tb(h)){const w=Db(h);null!==w&&Sk(0,w,m.field)}}(r,l),l}(e._query,this.Uu,this.Gu);return new ms(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new El(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class Ek extends j0{constructor(e,t,r){super(),this.type=e,this.ju=t,this.Qu=r}_apply(e){return new ms(e.firestore,e.converter,lp(e._query,this.ju,this.Qu))}}class Ik extends j0{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=Ck(e,this.type,this.Wu,this.zu);return new ms(e.firestore,e.converter,(i=t,new El((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class bk extends j0{constructor(e,t,r){super(),this.type=e,this.Wu=t,this.zu=r}_apply(e){const t=Ck(e,this.type,this.Wu,this.zu);return new ms(e.firestore,e.converter,(i=t,new El((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Ck(n,e,t,r){if(t[0]=(0,M.m9)(t[0]),t[0]instanceof V0)return function(i,a,l,h,m){if(!h)throw new Me(ge.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const D of up(i))if(D.field.isKeyField())w.push(Bm(a,h.key));else{const S=h.data.field(D.field);if(Fm(S))throw new Me(ge.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=D.field.canonicalString();throw new Me(ge.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(S)}return new Gc(w,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=xp(n.firestore);return function(a,l,h,m,w,D){const S=a.explicitOrderBy;if(w.length>S.length)throw new Me(ge.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<w.length;U++){const q=w[U];if(S[U].field.isKeyField()){if("string"!=typeof q)throw new Me(ge.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof q}`);if(!Sb(a)&&-1!==q.indexOf("/"))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${q}' contains a slash.`);const ve=a.path.child(tn.fromString(q));if(!Xe.isDocumentKey(ve))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${ve}' is not because it contains an odd number of segments.`);const ke=new Xe(ve);P.push(Bm(l,ke))}else{const ve=gk(h,m,q);P.push(ve)}}return new Gc(P,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Tk(n,e,t){if("string"==typeof(t=(0,M.m9)(t))){if(""===t)throw new Me(ge.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Sb(e)&&-1!==t.indexOf("/"))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(tn.fromString(t));if(!Xe.isDocumentKey(r))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bm(n,new Xe(r))}if(t instanceof ur)return Bm(n,t._key);throw new Me(ge.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${hC(t)}.`)}function Dk(n,e){if(!Array.isArray(n)||0===n.length)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Me(ge.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Sk(n,e,t){if(!t.isEqual(e))throw new Me(ge.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Nx{convertValue(e,t="none"){switch(Bc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return gr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(vl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ct()}}convertObject(e,t){const r={};return gu(e.fields,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new pC(gr(e.latitude),gr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=gb(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(ch(e));default:return null}}convertTimestamp(e){const t=mu(e);return new Xr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=tn.fromString(e);Dt(R0(r));const i=new Vc(r.get(1),r.get(3)),a=new Xe(r.popFirst(5));return i.isEqual(t)||kr(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function wC(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class jF extends Nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}class Ak{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=xp(e)}set(e,t,r){this._verifyNotCommitted();const i=xh(e,this._firestore),a=wC(i.converter,t,r),l=mC(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,ln.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=xh(e,this._firestore);let l;return l="string"==typeof(t=(0,M.m9)(t))||t instanceof Jc?Ax(this._dataReader,"WriteBatch.update",a._key,t,r,i):Sx(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,ln.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=xh(e,this._firestore);return this._mutations=this._mutations.concat(new zc(t._key,ln.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Me(ge.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function xh(n,e){if((n=(0,M.m9)(n)).firestore!==e)throw new Me(ge.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Pp extends Nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rl(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ur(this.firestore,null,t)}}function xk(n,e,t){n=rn(n,ur);const r=rn(n.firestore,_r),i=wC(n.converter,e,t);return y_(r,[mC(xp(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,ln.none())])}function Rk(n,e,t,...r){n=rn(n,ur);const i=rn(n.firestore,_r),a=xp(i);let l;return l="string"==typeof(e=(0,M.m9)(e))||e instanceof Jc?Ax(a,"updateDoc",n._key,e,t,r):Sx(a,"updateDoc",n._key,e),y_(i,[l.toMutation(n._key,ln.exists(!0))])}function Nk(n,...e){var t,r,i;n=(0,M.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||Tx(e[l])||(a=e[l],l++);const h={includeMetadataChanges:a.includeMetadataChanges};if(Tx(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,w,D;if(n instanceof ur)w=rn(n.firestore,_r),D=ap(n._key.path),m={next:S=>{e[l]&&e[l](Px(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=rn(n,ms);w=rn(S.firestore,_r),D=S._query;const P=new Pp(w);m={next:U=>{e[l]&&e[l](new Sh(w,P,S,U))},error:e[l+1],complete:e[l+2]},wk(n._query)}return function(S,P,U,q){const ve=new cC(q),ke=new $A(P,ve,U);return S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return UA(yield __(S),ke)})),()=>{ve.Jc(),S.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return BA(yield __(S),ke)}))}}(ni(w),D,h,m)}function y_(n,e){return function(t,r){const i=new An;return t.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function ML(n,e,t){return KA.apply(this,arguments)}(yield Ix(t),r,i)})),i.promise}(ni(n),e)}function Px(n,e,t){const r=t.docs.get(e._key),i=new Pp(n);return new Xc(n,i,e._key,r,new Np(t.hasPendingWrites,t.fromCache),e.converter)}class QF extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xp(e)}get(e){const t=xh(e,this._firestore),r=new jF(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return ct();const a=i[0];if(a.isFoundDocument())return new V0(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new V0(this._firestore,r,t._key,null,t.converter);throw ct()})}set(e,t,r){const i=xh(e,this._firestore),a=wC(i.converter,t,r),l=mC(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=xh(e,this._firestore);let l;return l="string"==typeof(t=(0,M.m9)(t))||t instanceof Jc?Ax(this._dataReader,"Transaction.update",a._key,t,r,i):Sx(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=xh(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=xh(e,this._firestore),r=new Pp(this._firestore);return super.get(e).then(i=>new Xc(this._firestore,r,t._key,i._document,new Np(!1,!1),t.converter))}}function kx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Me("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function kk(){if("undefined"==typeof Uint8Array)throw new Me("unimplemented","Uint8Arrays are not available in this environment.")}function Mk(){if(!function NS(){return"undefined"!=typeof atob}())throw new Me("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Lc=Ln.SDK_VERSION,(0,Ln._registerComponent)(new eo.wA("firestore",(t,{options:r})=>{const i=t.getProvider("app").getImmediate(),a=new _r(i,new SS(t.getProvider("auth-internal")),new Om(t.getProvider("app-check-internal")));return r=Object.assign({useFetchStreams:e},r),a._setSettings(r),a},"PUBLIC")),(0,Ln.registerVersion)(uh,"3.4.5",n),(0,Ln.registerVersion)(uh,"3.4.5","esm2017")}();class H0{constructor(e){this._delegate=e}static fromBase64String(e){return Mk(),new H0(Rl.fromBase64String(e))}static fromUint8Array(e){return kk(),new H0(Rl.fromUint8Array(e))}toBase64(){return Mk(),this._delegate.toBase64()}toUint8Array(){return kk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Mx(n){return function oU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class aU{enableIndexedDbPersistence(e,t){return function pF(n,e){dk(n=rn(n,_r));const t=ni(n),r=n._freezeSettings(),i=new gx;return ck(t,i,new WP(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function gF(n){dk(n=rn(n,_r));const e=ni(n),t=n._freezeSettings(),r=new gx;return ck(e,r,new YL(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function mF(n){if(n._initialized&&!n._terminated)throw new Me(ge.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new An;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ee.Z)(function*(){try{yield(t=(0,Ee.Z)(function*(r){if(!E.Vt())return Promise.resolve();const i=r+"main";yield E.delete(i)}),function(r){return t.apply(this,arguments)})(oA(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Ok{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Vc||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&np("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function lF(n,e,t,r={}){var i;const a=(n=rn(n,F0))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==e&&np("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},a),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=Jr.MOCK_USER;else{l=(0,M.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Me(ge.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new Jr(m)}n._authCredentials=new rp(new hb(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function yF(n){return function tF(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield YP(n),t=yield QP(n);return e.setNetworkEnabled(!0),function(r){const i=We(r);return i.Ko.delete(0),O0(i)}(t)}))}(ni(n=rn(n,_r)))}(this._delegate)}disableNetwork(){return function vF(n){return function nF(n){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){const e=yield YP(n),t=yield QP(n);return e.setNetworkEnabled(!1),(r=(0,Ee.Z)(function*(i){const a=We(i);a.Ko.add(0),yield c_(a),a.Qo.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ni(n=rn(n,_r)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,tk("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _F(n){return function(e){const t=new An;return e.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return function UL(n,e){return XA.apply(this,arguments)}(yield Ix(e),t)})),t.promise}(ni(n=rn(n,_r)))}(this._delegate)}onSnapshotsInSync(e){return function YF(n,e){return function sF(n,e){const t=new cC(e);return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield __(n),i=t,We(r).Zo.add(i),void i.next();var r,i})),()=>{t.Jc(),n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return r=yield __(n),i=t,void We(r).Zo.delete(i);var r,i}))}}(ni(n=rn(n,_r)),Tx(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Me("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new v_(this,ok(this._delegate,e))}catch(t){throw Os(t,"collection()","Firestore.collection()")}}doc(e){try{return new ga(this,fC(this._delegate,e))}catch(t){throw Os(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ls(this,function cF(n,e){if(n=rn(n,F0),Cx("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Me(ge.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ms(n,null,(t=e,new El(tn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Os(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function JF(n,e){return function oF(n,e){const t=new An;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){const r=yield(i=n,dC(i).then(a=>a.datastore));var i;new XL(n.asyncQueue,r,e,t).run()})),t.promise}(ni(n=rn(n,_r)),t=>e(new QF(n,t)))}(this._delegate,t=>e(new Lk(this,t)))}batch(){return ni(this._delegate),new Fk(new Ak(this._delegate,e=>y_(this._delegate,e)))}loadBundle(e){return function wF(n,e){const t=ni(n=rn(n,_r)),r=new hF;return function aF(n,e,t,r){const i=function(a,l){let h;return h="string"==typeof a?(new TextEncoder).encode(a):a,m=function(m,w){if(m instanceof Uint8Array)return zP(m,w);if(m instanceof ArrayBuffer)return zP(new Uint8Array(m),w);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new QL(m,l);var m}(t,M0(e));n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){!function ZL(n,e,t){const r=We(n);var i;(i=(0,Ee.Z)(function*(a,l,h){try{const m=yield l.getMetadata();if(yield function(P,U){const q=We(P),ve=ti(U.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",ke=>q.Kn.getBundleMetadata(ke,U.id)).then(ke=>!!ke&&ke.createTime.compareTo(ve)>=0)}(a.localStore,m))return yield l.close(),void h._completeWith((P=m,{taskState:"Success",documentsLoaded:P.totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}));h._updateProgress(LP(m));const w=new AL(m,a.localStore,l.O);let D=yield l.Kc();for(;D;){const P=yield w.lc(D);P&&h._updateProgress(P),D=yield l.Kc()}const S=yield w.complete();yield Qc(a,S.ws,void 0),yield function(P,U){const q=We(P);return q.persistence.runTransaction("Save bundle","readwrite",ve=>q.Kn.saveBundleMetadata(ve,U))}(a.localStore,m),h._completeWith(S.progress)}catch(m){np("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m)}var P}),function(a,l,h){return i.apply(this,arguments)})(r,e,t).then(()=>{r.sharedClientState.notifyBundleLoaded()})}(yield Ix(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function EF(n,e){return function uF(n,e){return n.asyncQueue.enqueue((0,Ee.Z)(function*(){return function(t,r){const i=We(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.Kn.getNamedQuery(a,r))}(yield Ex(n),e)}))}(ni(n=rn(n,_r)),e).then(t=>t?new ms(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ls(this,t):null)}}class EC extends Nx{constructor(e){super(),this.firestore=e}convertBytes(e){return new H0(new Rl(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return ga.forKey(t,this.firestore,null)}}class Lk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}get(e){const t=Mp(e);return this._delegate.get(t).then(r=>new $0(this._firestore,new Xc(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=Mp(e);return r?(kx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Mp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Mp(e);return this._delegate.delete(t),this}}class Fk{constructor(e){this._delegate=e}set(e,t,r){const i=Mp(e);return r?(kx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=Mp(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=Mp(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class kp{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new B0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new G0(this._firestore,r),null!=t?t:{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=kp.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new kp(e,new EC(e),t),i.set(t,a)),a}}kp.INSTANCES=new WeakMap;class ga{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Me("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new ga(t,new ur(t._delegate,r,new Xe(e)))}static forKey(e,t,r){return new ga(t,new ur(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new v_(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new v_(this.firestore,ok(this._delegate,e))}catch(t){throw Os(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,M.m9)(e))instanceof ur&&ak(this._delegate,e)}set(e,t){t=kx("DocumentReference.set",t);try{return t?xk(this._delegate,e,t):xk(this._delegate,e)}catch(r){throw Os(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Rk(this._delegate,e):Rk(this._delegate,e,t,...r)}catch(i){throw Os(i,"updateDoc()","DocumentReference.update()")}}delete(){return function KF(n){return y_(rn(n.firestore,_r),[new zc(n._key,ln.none())])}(this._delegate)}onSnapshot(...e){const t=Uk(e),r=Vk(e,i=>new $0(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Nk(this._delegate,t,r)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function $F(n){n=rn(n,ur);const e=rn(n.firestore,_r),t=ni(e),r=new Pp(e);return function rF(n,e){const t=new An;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const h=yield function(m,w){const D=We(m);return D.persistence.runTransaction("read document","readonly",S=>D.Us.ys(S,w))}(i,a);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new Me(ge.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=f_(h,`Failed to get document '${a} from cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield Ex(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Xc(e,r,n._key,i,new Np(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===(null==e?void 0:e.source)?function GF(n){n=rn(n,ur);const e=rn(n.firestore,_r);return JP(ni(e),n._key,{source:"server"}).then(t=>Px(e,n,t))}(this._delegate):function HF(n){n=rn(n,ur);const e=rn(n.firestore,_r);return JP(ni(e),n._key).then(t=>Px(e,n,t))}(this._delegate),t.then(r=>new $0(this.firestore,new Xc(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new ga(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Os(n,e,t){return n.message=n.message.replace(e,t),n}function Uk(n){for(const e of n)if("object"==typeof e&&!Mx(e))return e;return{}}function Vk(n,e){var t,r;let i;return i=Mx(n[0])?n[0]:Mx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class $0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new ga(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return vk(this._delegate,e._delegate)}}class G0 extends $0{data(e){const t=this._delegate.data(e);return function DS(n,e){n||ct()}(void 0!==t),t}}class Ls{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new EC(e)}where(e,t,r){try{return new Ls(this.firestore,Ah(this._delegate,function PF(n,e,t){const r=e,i=vC("where",n);return new NF(i,r,t)}(e,t,r)))}catch(i){throw Os(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ls(this.firestore,Ah(this._delegate,function MF(n,e="asc"){const t=e,r=vC("orderBy",n);return new kF(r,t)}(e,t)))}catch(r){throw Os(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ls(this.firestore,Ah(this._delegate,function OF(n){return ik("limit",n),new Ek("limit",n,"F")}(e)))}catch(t){throw Os(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ls(this.firestore,Ah(this._delegate,function LF(n){return ik("limitToLast",n),new Ek("limitToLast",n,"L")}(e)))}catch(t){throw Os(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ls(this.firestore,Ah(this._delegate,function FF(...n){return new Ik("startAt",n,!0)}(...e)))}catch(t){throw Os(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ls(this.firestore,Ah(this._delegate,function UF(...n){return new Ik("startAfter",n,!1)}(...e)))}catch(t){throw Os(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ls(this.firestore,Ah(this._delegate,function VF(...n){return new bk("endBefore",n,!1)}(...e)))}catch(t){throw Os(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ls(this.firestore,Ah(this._delegate,function BF(...n){return new bk("endAt",n,!0)}(...e)))}catch(t){throw Os(t,"endAt()","Query.endAt()")}}isEqual(e){return uk(this._delegate,e._delegate)}get(e){let t;return t="cache"===(null==e?void 0:e.source)?function WF(n){n=rn(n,ms);const e=rn(n.firestore,_r),t=ni(e),r=new Pp(e);return function iF(n,e){const t=new An;return n.asyncQueue.enqueueAndForget((0,Ee.Z)(function*(){return(r=(0,Ee.Z)(function*(i,a,l){try{const h=yield iC(i,a,!0),m=new VP(a,h.Ks),w=m.Ic(h.documents),D=m.applyChanges(w,!1);l.resolve(D.snapshot)}catch(h){const m=f_(h,`Failed to execute query '${a} against cache`);l.reject(m)}}),function(i,a,l){return r.apply(this,arguments)})(yield Ex(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Sh(e,r,n,i))}(this._delegate):"server"===(null==e?void 0:e.source)?function zF(n){n=rn(n,ms);const e=rn(n.firestore,_r),t=ni(e),r=new Pp(e);return XP(t,n._query,{source:"server"}).then(i=>new Sh(e,r,n,i))}(this._delegate):function qF(n){n=rn(n,ms);const e=rn(n.firestore,_r),t=ni(e),r=new Pp(e);return wk(n._query),XP(t,n._query).then(i=>new Sh(e,r,n,i))}(this._delegate),t.then(r=>new Ox(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Uk(e),r=Vk(e,i=>new Ox(this.firestore,new Sh(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Nk(this._delegate,t,r)}withConverter(e){return new Ls(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}class lU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new G0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class Ox{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ls(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new G0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new G0(this._firestore,r))})}isEqual(e){return vk(this._delegate,e._delegate)}}class v_ extends Ls{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new ga(this.firestore,e):null}doc(e){try{return new ga(this.firestore,void 0===e?fC(this._delegate):fC(this._delegate,e))}catch(t){throw Os(t,"doc()","CollectionReference.doc()")}}add(e){return function ZF(n,e){const t=rn(n.firestore,_r),r=fC(n),i=wC(n.converter,e);return y_(t,[mC(xp(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,ln.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new ga(this.firestore,t))}isEqual(e){return ak(this._delegate,e._delegate)}withConverter(e){return new v_(this.firestore,this._delegate.withConverter(e?kp.getInstance(this.firestore,e):null))}}function Mp(n){return rn(n,ur)}class Lx{constructor(...e){this._delegate=new Jc(...e)}static documentId(){return new Lx(ei.keyField().canonicalString())}isEqual(e){return(e=(0,M.m9)(e))instanceof Jc&&this._delegate._internalPath.isEqual(e._internalPath)}}class Op{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eU(){return new Dx("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Op(e)}static delete(){const e=function XF(){return new U0("deleteField")}();return e._methodName="FieldValue.delete",new Op(e)}static arrayUnion(...e){const t=function tU(...n){return new TF("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Op(t)}static arrayRemove(...e){const t=function nU(...n){return new DF("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Op(t)}static increment(e){const t=function rU(n){return new SF("increment",n)}(e);return t._methodName="FieldValue.increment",new Op(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cU={Firestore:Ok,GeoPoint:pC,Timestamp:Xr,Blob:H0,Transaction:Lk,WriteBatch:Fk,DocumentReference:ga,DocumentSnapshot:$0,Query:Ls,QueryDocumentSnapshot:G0,QuerySnapshot:Ox,CollectionReference:v_,FieldPath:Lx,FieldValue:Op,setLogLevel:function uU(n){!function db(n){pu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Bk(n,e){return function fU(n,e=$g.z){return new Pn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{null!=r&&r()}})}(n,e)}function Fx(n,e){return Bk(n,e).pipe((0,gt.U)(t=>({payload:t,type:"query"})))}function IC(n,e){return Fx(n,e).pipe(bo(void 0),tm(),(0,gt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(D=>D.doc.ref.isEqual(l.ref)),w=null==t?void 0:t.payload.docs.find(D=>D.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),a}))}function jk(n,e,t){return IC(n,t).pipe(Ei((r,i)=>function gU(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function mU(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return Ux(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Ux(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Ux(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),BD(),(0,gt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function Ux(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function Hk(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hU(n){(function dU(n,e){n.INTERNAL.registerComponent(new eo.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},cU)))})(n,(e,t)=>new Ok(e,t,new aU)),n.registerVersion("@firebase/firestore-compat","0.1.14")}(Vd.Z);class $k{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=IC(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,gt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(bo(void 0),tm(),qn(([r,i])=>i.length>0||!r),(0,gt.U)(([r,i])=>i),un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ei((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Hk(e);return jk(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Fx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),un.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(un.iC)}add(e){return this.ref.add(e)}doc(e){return new Gk(this.ref.doc(e),this.afs)}}class Gk{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=zk(r,t);return new $k(i,a,this.afs)}snapshotChanges(){return function pU(n,e){return Bk(n,e).pipe(bo(void 0),tm(),(0,gt.U)(([t,r])=>r.exists?(null==t?void 0:t.exists)?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,gt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,En.D)(this.ref.get(e)).pipe(un.iC)}}class _U{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?IC(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),qn(t=>t.length>0),un.iC):IC(this.query,this.afs.schedulers.outsideAngular).pipe(un.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ei((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=Hk(e);return jk(this.query,t,this.afs.schedulers.outsideAngular).pipe(un.iC)}valueChanges(e={}){return Fx(this.query,this.afs.schedulers.outsideAngular).pipe((0,gt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),un.iC)}get(e){return(0,En.D)(this.query.get(e)).pipe(un.iC)}}const qk=new p.OlP("angularfire2.enableFirestorePersistence"),Wk=new p.OlP("angularfire2.firestore.persistenceSettings"),yU=new p.OlP("angularfire2.firestore.settings"),vU=new p.OlP("angularfire2.firestore.use-emulator");function zk(n,e=(t=>t)){return{query:e(n),ref:n}}let Kk=(()=>{class n{constructor(t,r,i,a,l,h,m,w,D,S,P,U,q,ve,ke,tt,vt){this.schedulers=m;const It=(0,Vr.on)(t,h,r),dt=D;S&&Hg(It,h,P,q,ve,ke,U,tt),[this.firestore,this.persistenceEnabled$]=(0,Vr.cc)(`${It.name}.firestore`,"AngularFirestore",It.name,()=>{const vn=h.runOutsideAngular(()=>It.firestore());if(a&&vn.settings(a),dt&&vn.useEmulator(...dt),i&&!Pa(l)){const Li=()=>{try{return(0,En.D)(vn.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(Bh){return"undefined"!=typeof console&&console.warn(Bh),et(!1)}};return[vn,h.runOutsideAngular(Li)]}return[vn,et(!1)]},[a,dt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=zk(i,r),h=this.schedulers.ngZone.run(()=>a);return new $k(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new _U(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new Gk(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vr.Dh),p.LFG(Vr.xv,8),p.LFG(qk,8),p.LFG(yU,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(un.HU),p.LFG(Wk,8),p.LFG(vU,8),p.LFG(to,8),p.LFG(Py,8),p.LFG(ky,8),p.LFG(If,8),p.LFG(vE,8),p.LFG(My,8),p.LFG(jg,8),p.LFG(ds,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),wU=(()=>{class n{constructor(){Ud.Z.registerVersion("angularfire",un.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:qk,useValue:!0},{provide:Wk,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[Kk]}),n})();var EU=O(5032);const Zk="@firebase/database";let Vx="";function Qk(n){Vx=n}class CU{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,M.Pz)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,M.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class TU{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,M.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const Jk=function(n){try{if("undefined"!=typeof window&&void 0!==window[n]){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new CU(e)}}catch(e){}return new TU},Lp=Jk("localStorage"),Bx=Jk("sessionStorage"),w_=new Ns.Yd("@firebase/database"),Xk=function(){let n=1;return function(){return n++}}(),eM=function(n){const e=(0,M.dS)(n),t=new M.gQ;t.update(e);const r=t.digest();return M.US.encodeByteArray(r)},q0=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=q0.apply(null,r):e+="object"==typeof r?(0,M.Pz)(r):r,e+=" "}return e};let Fp=null,tM=!0;const nM=function(n,e){(0,M.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(w_.logLevel=Ns.in.VERBOSE,Fp=w_.log.bind(w_),e&&Bx.set("logging_enabled",!0)):"function"==typeof n?Fp=n:(Fp=null,Bx.remove("logging_enabled"))},Mi=function(...n){if(!0===tM&&(tM=!1,null===Fp&&!0===Bx.get("logging_enabled")&&nM(!0)),Fp){const e=q0.apply(null,n);Fp(e)}},W0=function(n){return function(...e){Mi(n,...e)}},jx=function(...n){const e="FIREBASE INTERNAL ERROR: "+q0(...n);w_.error(e)},Nl=function(...n){const e=`FIREBASE FATAL ERROR: ${q0(...n)}`;throw w_.error(e),new Error(e)},Fs=function(...n){const e="FIREBASE WARNING: "+q0(...n);w_.warn(e)},bC=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},ed="[MIN_NAME]",Pl="[MAX_NAME]",Up=function(n,e){if(n===e)return 0;if(n===ed||e===Pl)return-1;if(e===ed||n===Pl)return 1;{const t=CC(n),r=CC(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},AU=function(n,e){return n===e?0:n<e?-1:1},z0=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,M.Pz)(e))},Hx=function(n){if("object"!=typeof n||null===n)return(0,M.Pz)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,M.Pz)(e[r]),t+=":",t+=Hx(n[e[r]]);return t+="}",t},rM=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Oi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const iM=function(n){(0,M.hu)(!bC(n),"Invalid JSON number");const r=1023;let i,a,l,h,m;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(m=52;m;m-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const D=w.join("");let S="";for(m=0;m<64;m+=8){let P=parseInt(D.substr(m,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},PU=new RegExp("^-?(0*)\\d{1,10}$"),sM=-2147483648,$x=2147483647,CC=function(n){if(PU.test(n)){const e=Number(n);if(e>=sM&&e<=$x)return e}return null},E_=function(n){try{n()}catch(e){setTimeout(()=>{throw Fs("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},K0=function(n,e){const t=setTimeout(n,e);return"object"==typeof t&&t.unref&&t.unref(),t};class MU{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=null==t?void 0:t.getImmediate({optional:!0}),this.appCheck||null==t||t.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Fs(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class OU{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Mi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Fs(e)}}let Z0=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const cM=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,hM="websocket",fM="long_polling";class qx{constructor(e,t,r,i,a=!1,l="",h=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lp.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lp.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function pM(n,e,t){let r;if((0,M.hu)("string"==typeof e,"typeof type must == string"),(0,M.hu)("object"==typeof t,"typeof params must == object"),e===hM)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==fM)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function FU(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Oi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class UU{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,M.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,M.p$)(this.counters_)}}const Wx={},zx={};function Kx(n){const e=n.toString();return Wx[e]||(Wx[e]=new UU),Wx[e]}class BU{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&E_(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class I_{constructor(e,t,r,i,a,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=W0(e),this.stats_=Kx(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),pM(t,fM,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new BU(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,M.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Zx((...a)=>{const[l,h,m,w,D]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,h]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&cM.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){I_.forceAllow_=!0}static forceDisallow(){I_.forceDisallow_=!0}static isAvailable(){return!((0,M.Yr)()||!I_.forceAllow_&&(I_.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,M.Pz)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,M.h$)(t),i=rM(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,M.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,M.Pz)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Zx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,M.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=Xk(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Zx.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Mi("frame writing exception"),h.stack&&Mi(h.stack),Mi(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Mi("No IE domain setting required")}catch(t){const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,M.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Mi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch(r){}},Math.floor(1))}}let Y0=null;"undefined"!=typeof MozWebSocket?Y0=MozWebSocket:"undefined"!=typeof WebSocket&&(Y0=WebSocket);let Q0=(()=>{class n{constructor(t,r,i,a,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=W0(this.connId),this.stats_=Kx(r),this.connURL=n.connectionURL_(r,h,m,a),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a){const l={v:"5"};return!(0,M.Yr)()&&"undefined"!=typeof location&&location.hostname&&cM.test(location.hostname)&&(l.r="f"),r&&(l.s=r),i&&(l.ls=i),a&&(l.ac=a),pM(t,hM,l)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lp.set("previous_websocket_failure",!0);try{if((0,M.Yr)()){const a={headers:{"User-Agent":`Firebase/5/${Vx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(a.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(a.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(a.proxy={origin:h}),this.mySock=new Y0(this.connURL,[],a)}else this.mySock=new Y0(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Y0&&!n.forceDisallow_}static previouslyFailed(){return Lp.isInMemoryStorage||!0===Lp.get("previous_websocket_failure")}markConnectionHealthy(){Lp.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,M.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,M.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,M.Pz)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=rM(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})();class Yx{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[I_,Q0]}initTransports_(e){const t=Q0&&Q0.isAvailable();let r=t&&!Q0.previouslyFailed();if(e.webSocketOnly&&(t||Fs("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[Q0];else{const i=this.transports_=[];for(const a of Yx.ALL_TRANSPORTS)a&&a.isAvailable()&&i.push(a)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class SM{constructor(e,t,r,i,a,l,h,m,w,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=w,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=W0("c:"+this.id+":"),this.transportManager_=new Yx(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=K0(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=z0("t",e),r=z0("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=z0("t",e),r=z0("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=z0("t",e);if("d"in e){const r=e.d;if("h"===t)this.onHandshake_(r);else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?jx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):jx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Fs("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),K0(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):K0(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lp.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class AM{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class xM{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,M.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,M.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class DC extends xM{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,M.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new DC}getInitialEvent(e){return(0,M.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Cn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function yn(){return new Cn("")}function Gt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Rh(n){return n.pieces_.length-n.pieceNum_}function Un(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Cn(n.pieces_,e)}function Jx(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function J0(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function PM(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Cn(e,0)}function yr(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Cn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Cn(t,0)}function qt(n){return n.pieceNum_>=n.pieces_.length}function Us(n,e){const t=Gt(n),r=Gt(e);if(null===t)return e;if(t===r)return Us(Un(n),Un(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function u2(n,e){const t=J0(n,0),r=J0(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=Up(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function Xx(n,e){if(Rh(n)!==Rh(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ma(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Rh(n)>Rh(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class l2{constructor(e,t){this.errorPrefix_=t,this.parts_=J0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,M.ug)(this.parts_[r]);kM(this)}}function kM(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Vp(n))}function Vp(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class eR extends xM{constructor(){let e,t;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new eR}getInitialEvent(e){return(0,M.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const X0=1e3;let AC,Bp=(()=>{class n extends AM{constructor(t,r,i,a,l,h,m,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=W0("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=X0,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,M.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");eR.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&DC.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,M.Pz)(l)),(0,M.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new M.BH,i={p:t._path.toString(),q:t._queryObject},a={action:"g",request:i,onComplete:h=>{const m=h.d;"ok"===h.s?(this.onDataUpdate_(i.p,m,!1,null),r.resolve(m)):r.reject(m)}};this.outstandingGets_.push(a),this.outstandingGetCount_++;const l=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const h=this.outstandingGets_[l];void 0===h||a!==h||(delete this.outstandingGets_[l],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+l+" timed out on connection"),r.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(l),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,M.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,M.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const w=m.d,D=m.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,a),t.onComplete&&t.onComplete(D,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,M.r3)(t,"w")){const i=(0,M.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Fs(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,M.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,M.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,h=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,M.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{a&&setTimeout(()=>{a(h.s,h.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,M.Pz)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):jx("Unrecognized action received from server: "+(0,M.Pz)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,M.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=X0,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=X0,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=X0),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,Ee.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,w=null;const D=function(){w?w.close():(m=!0,a())};t.realtime_={close:D,sendRequest:function(U){(0,M.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,q]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);m?Mi("getToken() completed but was canceled"):(Mi("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=q&&q.token,w=new SM(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,ve=>{Fs(ve+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(U){t.log_("Failed to get token: "+U),m||(t.repoInfo_.nodeAdmin&&Fs(U),D())}}})()}interrupt(t){Mi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Mi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,M.xb)(this.interruptReasons_)&&(this.reconnectDelay_=X0,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>Hx(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Cn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){Mi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Mi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,M.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Vx.replace(/\./g,"-")]=1,(0,M.uI)()?t["framework.cordova"]=1:(0,M.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=DC.getInstance().currentlyOnline();return(0,M.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class Kt{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new Kt(e,t)}}class SC{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new Kt(ed,e),i=new Kt(ed,t);return 0!==this.compare(r,i)}minPost(){return Kt.MIN}}class LM extends SC{static get __EMPTY_NODE(){return AC}static set __EMPTY_NODE(e){AC=e}compare(e,t){return Up(e.name,t.name)}isDefinedOn(e){throw(0,M.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return Kt.MIN}maxPost(){return new Kt(Pl,AC)}makePost(e,t){return(0,M.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new Kt(e,AC)}toString(){return".key"}}const kl=new LM;class xC{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(e=e,l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let nR,wu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=null!=i?i:n.RED,this.left=null!=a?a:po.EMPTY_NODE,this.right=null!=l?l:po.EMPTY_NODE}copy(t,r,i,a,l){return new n(null!=t?t:this.key,null!=r?r:this.value,null!=i?i:this.color,null!=a?a:this.left,null!=l?l:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return po.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return po.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class po{constructor(e,t=po.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new po(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,wu.BLACK,null,null))}remove(e){return new po(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new xC(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new xC(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new xC(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new xC(this.root_,null,this.comparator_,!0,e)}}function y2(n,e){return Up(n.name,e.name)}function tR(n,e){return Up(n,e)}po.EMPTY_NODE=new class _2{copy(e,t,r,i,a){return this}insert(e,t,r){return new wu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const FM=function(n){return"number"==typeof n?"number:"+iM(n):"string:"+n},UM=function(n){if(n.isLeafNode()){const e=n.val();(0,M.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,M.r3)(e,".sv"),"Priority must be a string or number.")}else(0,M.hu)(n===nR||n.isEmpty(),"priority of unexpected type.");(0,M.hu)(n===nR||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let VM,BM,jM,b_=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,M.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),UM(this.priorityNode_)}static set __childrenNodeConstructor(t){VM=t}static get __childrenNodeConstructor(){return VM}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qt(t)?this:".priority"===Gt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Gt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,M.hu)(".priority"!==i||1===Rh(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Un(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+FM(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?iM(this.value_):this.value_,this.lazyHash_=eM(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,M.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,M.hu)(a>=0,"Unknown leaf type: "+r),(0,M.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const Kn=new class I2 extends SC{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?Up(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return Kt.MIN}maxPost(){return new Kt(Pl,new b_("[PRIORITY-POST]",jM))}makePost(e,t){const r=BM(e);return new Kt(t,new b_("[PRIORITY-POST]",r))}toString(){return".priority"}},b2=Math.log(2);class C2{constructor(e){this.count=parseInt(Math.log(e+1)/b2,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const RC=function(n,e,t,r){n.sort(e);const i=function(m,w){const D=w-m;let S,P;if(0===D)return null;if(1===D)return S=n[m],P=t?t(S):S,new wu(P,S.node,wu.BLACK,null,null);{const U=parseInt(D/2,10)+m,q=i(m,U),ve=i(U+1,w);return S=n[U],P=t?t(S):S,new wu(P,S.node,wu.BLACK,q,ve)}},h=function(m){let w=null,D=null,S=n.length;const P=function(q,ve){const ke=S-q,tt=S;S-=q;const vt=i(ke+1,tt),It=n[ke],dt=t?t(It):It;U(new wu(dt,It.node,ve,null,vt))},U=function(q){w?(w.left=q,w=q):(D=q,w=q)};for(let q=0;q<m.count;++q){const ve=m.nextBitIsOne(),ke=Math.pow(2,m.count-(q+1));ve?P(ke,wu.BLACK):(P(ke,wu.BLACK),P(ke,wu.RED))}return D}(new C2(n.length));return new po(r||e,h)};let rR;const C_={};class td{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,M.hu)(C_&&Kn,"ChildrenNode.ts has not been loaded"),rR=rR||new td({".priority":C_},{".priority":Kn}),rR}get(e){const t=(0,M.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof po?t:null}hasIndex(e){return(0,M.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,M.hu)(e!==kl,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(Kt.Wrap);let h,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();h=i?RC(r,e.getCompare()):C_;const m=e.toString(),w=Object.assign({},this.indexSet_);w[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new td(D,w)}addToIndexes(e,t){const r=(0,M.UI)(this.indexes_,(i,a)=>{const l=(0,M.DV)(this.indexSet_,a);if((0,M.hu)(l,"Missing index implementation for "+a),i===C_){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(Kt.Wrap);let w=m.getNext();for(;w;)w.name!==e.name&&h.push(w),w=m.getNext();return h.push(e),RC(h,l.getCompare())}return C_}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new Kt(e.name,h))),m.insert(e,e.node)}});return new td(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,M.UI)(this.indexes_,i=>{if(i===C_)return i;{const a=t.get(e.name);return a?i.remove(new Kt(e.name,a)):i}});return new td(r,this.indexSet_)}}let ew,Vt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&UM(this.priorityNode_),this.children_.isEmpty()&&(0,M.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return ew||(ew=new n(new po(tR),null,td.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||ew}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?ew:r}}getChild(t){const r=Gt(t);return null===r?this:this.getImmediateChild(r).getChild(Un(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,M.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new Kt(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=a.isEmpty()?ew:this.priorityNode_;return new n(a,h,l)}}updateChild(t,r){const i=Gt(t);if(null===i)return r;{(0,M.hu)(".priority"!==Gt(t)||1===Rh(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(Un(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(Kn,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?a=Math.max(a,Number(h)):l=!1}),!t&&l&&a<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+FM(this.getPriority().val())+":"),this.forEachChild(Kn,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":eM(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new Kt(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new Kt(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new Kt(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,Kt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,Kt.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===tw?-1:0}withIndex(t){if(t===kl||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===kl||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(Kn),a=r.getIterator(Kn);let l=i.getNext(),h=a.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=a.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===kl?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const tw=new class T2 extends Vt{constructor(){super(new po(tR),Vt.EMPTY_NODE,td.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Vt.EMPTY_NODE}isEmpty(){return!1}};function Tr(n,e=null){if(null===n)return Vt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,M.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new b_(n,Tr(e));if(n instanceof Array){let t=Vt.EMPTY_NODE;return Oi(n,(r,i)=>{if((0,M.r3)(n,r)&&"."!==r.substring(0,1)){const a=Tr(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Tr(e))}{const t=[];let r=!1;if(Oi(n,(l,h)=>{if("."!==l.substring(0,1)){const m=Tr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new Kt(l,m)))}}),0===t.length)return Vt.EMPTY_NODE;const a=RC(t,y2,l=>l.name,tR);if(r){const l=RC(t,Kn.getCompare());return new Vt(a,Tr(e),new td({".priority":l},{".priority":Kn}))}return new Vt(a,Tr(e),td.Default)}}Object.defineProperties(Kt,{MIN:{value:new Kt(ed,Vt.EMPTY_NODE)},MAX:{value:new Kt(Pl,tw)}}),LM.__EMPTY_NODE=Vt.EMPTY_NODE,b_.__childrenNodeConstructor=Vt,function v2(n){nR=n}(tw),function E2(n){jM=n}(tw),function w2(n){BM=n}(Tr);class iR extends SC{constructor(e){super(),this.indexPath_=e,(0,M.hu)(!qt(e)&&".priority"!==Gt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?Up(e.name,t.name):a}makePost(e,t){const r=Tr(e),i=Vt.EMPTY_NODE.updateChild(this.indexPath_,r);return new Kt(t,i)}maxPost(){const e=Vt.EMPTY_NODE.updateChild(this.indexPath_,tw);return new Kt(Pl,e)}toString(){return J0(this.indexPath_,0).join("/")}}const sR=new class S2 extends SC{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Up(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return Kt.MIN}maxPost(){return Kt.MAX}makePost(e,t){const r=Tr(e);return new Kt(t,r)}toString(){return".value"}},T_="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",A2=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=T_.charAt(t%64),t=Math.floor(t/64);(0,M.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=T_.charAt(e[i]);return(0,M.hu)(20===l.length,"nextPushId: Length should be 20."),l}}(),GM=function(n){if(n===""+$x)return"-";const e=CC(n);if(null!=e)return""+(e+1);const t=new Array(n.length);for(let l=0;l<t.length;l++)t[l]=n.charAt(l);if(t.length<786)return t.push("-"),t.join("");let r=t.length-1;for(;r>=0&&"z"===t[r];)r--;if(-1===r)return Pl;const a=T_.charAt(T_.indexOf(t[r])+1);return t[r]=a,t.slice(0,r+1).join("")},qM=function(n){if(n===""+sM)return ed;const e=CC(n);if(null!=e)return""+(e-1);const t=new Array(n.length);for(let r=0;r<t.length;r++)t[r]=n.charAt(r);return"-"===t[t.length-1]?1===t.length?""+$x:(delete t[t.length-1],t.join("")):(t[t.length-1]=T_.charAt(T_.indexOf(t[t.length-1])-1),t.join("")+"z".repeat(786-t.length))};function WM(n){return{type:"value",snapshotNode:n}}function D_(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function nw(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function rw(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class aR{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,M.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(nw(t,h)):(0,M.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(D_(t,r)):l.trackChildChange(rw(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(Kn,(i,a)=>{t.hasChild(i)||r.trackChildChange(nw(i,a))}),t.isLeafNode()||t.forEachChild(Kn,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(rw(i,a,l))}else r.trackChildChange(D_(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Vt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class iw{constructor(e){this.indexedFilter_=new aR(e.getIndex()),this.index_=e.getIndex(),this.startPost_=iw.getStartPost_(e),this.endPost_=iw.getEndPost_(e)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){return this.index_.compare(this.getStartPost(),e)<=0&&this.index_.compare(e,this.getEndPost())<=0}updateChild(e,t,r,i,a,l){return this.matches(new Kt(t,r))||(r=Vt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Vt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Vt.EMPTY_NODE);const a=this;return t.forEachChild(Kn,(l,h)=>{a.matches(new Kt(l,h))||(i=i.updateImmediateChild(l,Vt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class R2{constructor(e){this.rangedFilter_=new iw(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft()}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new Kt(t,r))||(r=Vt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Vt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=Vt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const h=a.getNext();let m;if(m=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),h)<=0:this.index_.compare(h,this.rangedFilter_.getEndPost())<=0,!m)break;i=i.updateImmediateChild(h.name,h.node),l++}}else{let a,l,h,m;if(i=t.withIndex(this.index_),i=i.updatePriority(Vt.EMPTY_NODE),this.reverse_){m=i.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),l=this.rangedFilter_.getStartPost();const S=this.index_.getCompare();h=(P,U)=>S(U,P)}else m=i.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),l=this.rangedFilter_.getEndPost(),h=this.index_.getCompare();let w=0,D=!1;for(;m.hasNext();){const S=m.getNext();!D&&h(a,S)<=0&&(D=!0),D&&w<this.limit_&&h(S,l)<=0?w++:i=i.updateImmediateChild(S.name,Vt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,U)=>S(U,P)}else l=this.index_.getCompare();const h=e;(0,M.hu)(h.numChildren()===this.limit_,"");const m=new Kt(t,r),w=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||h.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:l(P,m);if(D&&!r.isEmpty()&&U>=0)return null!=a&&a.trackChildChange(rw(t,r,S)),h.updateImmediateChild(t,r);{null!=a&&a.trackChildChange(nw(t,S));const ve=h.updateImmediateChild(t,Vt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(null!=a&&a.trackChildChange(D_(P.name,P.node)),ve.updateImmediateChild(P.name,P.node)):ve}}return r.isEmpty()?e:D&&l(w,m)>=0?(null!=a&&(a.trackChildChange(nw(w.name,w.node)),a.trackChildChange(D_(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(w.name,Vt.EMPTY_NODE)):e}}class NC{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Kn}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,M.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,M.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ed}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,M.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,M.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Pl}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,M.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Kn}copy(){const e=new NC;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function uR(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function lR(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function PC(n,e){const t=n.copy();return t.index_=e,t}function zM(n){const e={};if(n.isDefault())return e;let t;return n.index_===Kn?t="$priority":n.index_===sR?t="$value":n.index_===kl?t="$key":((0,M.hu)(n.index_ instanceof iR,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,M.Pz)(t),n.startSet_&&(e.startAt=(0,M.Pz)(n.indexStartValue_),n.startNameSet_&&(e.startAt+=","+(0,M.Pz)(n.indexStartName_))),n.endSet_&&(e.endAt=(0,M.Pz)(n.indexEndValue_),n.endNameSet_&&(e.endAt+=","+(0,M.Pz)(n.indexEndName_))),n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function KM(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_)),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_)),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==Kn&&(e.i=n.index_.toString()),e}class kC extends AM{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=W0("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,M.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=kC.getListenId_(e,r),h={};this.listens_[l]=h;const m=zM(e._queryParams);this.restRequest_(a+".json",m,(w,D)=>{let S=D;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,M.DV)(this.listens_,l)===h){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=kC.getListenId_(e,t);delete this.listens_[r]}get(e){const t=zM(e._queryParams),r=e._path.toString(),i=new M.BH;return this.restRequest_(r+".json",t,(a,l)=>{let h=l;404===a&&(h=null,a=null),null===a?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,M.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,M.cI)(h.responseText)}catch(w){Fs("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&Fs("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class L2{constructor(){this.rootNode_=Vt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function MC(){return{value:null,children:new Map}}function S_(n,e,t){if(qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Gt(e);n.children.has(r)||n.children.set(r,MC()),S_(n.children.get(r),e=Un(e),t)}}function cR(n,e){if(qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(Kn,(r,i)=>{S_(n,new Cn(r),i)}),cR(n,e)}}if(n.children.size>0){const t=Gt(e);return e=Un(e),n.children.has(t)&&cR(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function dR(n,e,t){null!==n.value?t(e,n.value):function F2(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{dR(i,new Cn(e.toString()+"/"+r),t)})}class U2{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Oi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class j2{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new U2(e);const r=1e4+2e4*Math.random();K0(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Oi(e,(i,a)=>{a>0&&(0,M.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),K0(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var _a=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(_a||(_a={})),_a))();function pR(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class OC{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=_a.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,M.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Cn(e));return new OC(yn(),t,this.revert)}}return(0,M.hu)(Gt(this.path)===e,"operationForChild called for unrelated child."),new OC(Un(this.path),this.affectedTree,this.revert)}}class sw{constructor(e,t){this.source=e,this.path=t,this.type=_a.LISTEN_COMPLETE}operationForChild(e){return qt(this.path)?new sw(this.source,yn()):new sw(this.source,Un(this.path))}}class jp{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=_a.OVERWRITE}operationForChild(e){return qt(this.path)?new jp(this.source,yn(),this.snap.getImmediateChild(e)):new jp(this.source,Un(this.path),this.snap)}}class A_{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=_a.MERGE}operationForChild(e){if(qt(this.path)){const t=this.children.subtree(new Cn(e));return t.isEmpty()?null:t.value?new jp(this.source,yn(),t.value):new A_(this.source,yn(),t)}return(0,M.hu)(Gt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new A_(this.source,Un(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Nh{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Gt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class H2{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function ow(n,e,t,r,i,a){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function q2(n,e,t){if(null==e.childName||null==t.childName)throw(0,M.g5)("Should only compare child_ events.");const r=new Kt(e.childName,e.snapshotNode),i=new Kt(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function G2(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,a);i.forEach(w=>{w.respondsTo(h.type)&&e.push(w.createEvent(m,n.query_))})})}function LC(n,e){return{eventCache:n,serverCache:e}}function aw(n,e,t,r){return LC(new Nh(e,t,r),n.serverCache)}function YM(n,e,t,r){return LC(n.eventCache,new Nh(e,t,r))}function FC(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Hp(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let gR;class Zn{constructor(e,t=(()=>(gR||(gR=new po(AU)),gR))()){this.value=e,this.children=t}static fromObject(e){let t=new Zn(null);return Oi(e,(r,i)=>{t=t.set(new Cn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:yn(),value:this.value};if(qt(e))return null;{const r=Gt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(Un(e),t);return null!=a?{path:yr(new Cn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qt(e))return this;{const t=Gt(e),r=this.children.get(t);return null!==r?r.subtree(Un(e)):new Zn(null)}}set(e,t){if(qt(e))return new Zn(t,this.children);{const r=Gt(e),a=(this.children.get(r)||new Zn(null)).set(Un(e),t),l=this.children.insert(r,a);return new Zn(this.value,l)}}remove(e){if(qt(e))return this.children.isEmpty()?new Zn(null):new Zn(null,this.children);{const t=Gt(e),r=this.children.get(t);if(r){const i=r.remove(Un(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new Zn(null):new Zn(this.value,a)}return this}}get(e){if(qt(e))return this.value;{const t=Gt(e),r=this.children.get(t);return r?r.get(Un(e)):null}}setTree(e,t){if(qt(e))return t;{const r=Gt(e),a=(this.children.get(r)||new Zn(null)).setTree(Un(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new Zn(this.value,l)}}fold(e){return this.fold_(yn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(yr(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,yn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(qt(e))return null;{const a=Gt(e),l=this.children.get(a);return l?l.findOnPath_(Un(e),yr(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,yn(),t)}foreachOnPath_(e,t,r){if(qt(e))return this;{this.value&&r(t,this.value);const i=Gt(e),a=this.children.get(i);return a?a.foreachOnPath_(Un(e),yr(t,i),r):new Zn(null)}}foreach(e){this.foreach_(yn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(yr(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Eu{constructor(e){this.writeTree_=e}static empty(){return new Eu(new Zn(null))}}function uw(n,e,t){if(qt(e))return new Eu(new Zn(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=Us(i,e);return a=a.updateChild(l,t),new Eu(n.writeTree_.set(i,a))}{const i=new Zn(t),a=n.writeTree_.setTree(e,i);return new Eu(a)}}}function mR(n,e,t){let r=n;return Oi(t,(i,a)=>{r=uw(r,yr(e,i),a)}),r}function QM(n,e){if(qt(e))return Eu.empty();{const t=n.writeTree_.setTree(e,new Zn(null));return new Eu(t)}}function _R(n,e){return null!=$p(n,e)}function $p(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Us(t.path,e)):null}function JM(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Kn,(r,i)=>{e.push(new Kt(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new Kt(r,i.value))}),e}function Ph(n,e){if(qt(e))return n;{const t=$p(n,e);return new Eu(null!=t?new Zn(t):n.writeTree_.subtree(e))}}function yR(n){return n.writeTree_.isEmpty()}function x_(n,e){return XM(yn(),n.writeTree_,e)}function XM(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,M.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=XM(yr(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(yr(n,".priority"),r)),t}}function UC(n,e){return i1(e,n)}function Q2(n,e){if(n.snap)return ma(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ma(yr(n.path,t),e))return!0;return!1}function X2(n){return n.visible}function e1(n,e,t){let r=Eu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let h;if(a.snap)ma(t,l)?(h=Us(t,l),r=uw(r,h,a.snap)):ma(l,t)&&(h=Us(l,t),r=uw(r,yn(),a.snap.getChild(h)));else{if(!a.children)throw(0,M.g5)("WriteRecord should have .snap or .children");if(ma(t,l))h=Us(t,l),r=mR(r,h,a.children);else if(ma(l,t))if(h=Us(l,t),qt(h))r=mR(r,yn(),a.children);else{const m=(0,M.DV)(a.children,Gt(h));if(m){const w=m.getChild(Un(h));r=uw(r,yn(),w)}}}}}return r}function t1(n,e,t,r,i){if(r||i){const a=Ph(n.visibleWrites,e);return!i&&yR(a)?t:i||null!=t||_R(a,yn())?x_(e1(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(ma(w.path,e)||ma(e,w.path))},e),t||Vt.EMPTY_NODE):null}{const a=$p(n.visibleWrites,e);if(null!=a)return a;{const l=Ph(n.visibleWrites,e);return yR(l)?t:null!=t||_R(l,yn())?x_(l,t||Vt.EMPTY_NODE):null}}}function VC(n,e,t,r){return t1(n.writeTree,n.treePath,e,t,r)}function vR(n,e){return function eV(n,e,t){let r=Vt.EMPTY_NODE;const i=$p(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Kn,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=Ph(n.visibleWrites,e);return t.forEachChild(Kn,(l,h)=>{const m=x_(Ph(a,new Cn(l)),h);r=r.updateImmediateChild(l,m)}),JM(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return JM(Ph(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function n1(n,e,t,r){return function tV(n,e,t,r,i){(0,M.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=yr(e,t);if(_R(n.visibleWrites,a))return null;{const l=Ph(n.visibleWrites,a);return yR(l)?i.getChild(t):x_(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function BC(n,e){return function rV(n,e){return $p(n.visibleWrites,e)}(n.writeTree,yr(n.treePath,e))}function wR(n,e,t){return function nV(n,e,t,r){const i=yr(e,t),a=$p(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?x_(Ph(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function r1(n,e){return i1(yr(n.treePath,e),n.writeTree)}function i1(n,e){return{treePath:n,writeTree:e}}class aV{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,M.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,M.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,rw(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,nw(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,D_(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,M.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,rw(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const s1=new class uV{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class ER{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Nh(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return wR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Hp(this.viewCache_),a=function oV(n,e,t,r,i,a){return function iV(n,e,t,r,i,a,l){let h;const m=Ph(n.visibleWrites,e),w=$p(m,yn());if(null!=w)h=w;else{if(null==t)return[];h=x_(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),P=a?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let U=P.getNext();for(;U&&D.length<i;)0!==S(U,r)&&D.push(U),U=P.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function o1(n,e,t,r,i,a){const l=e.eventCache;if(null!=BC(r,t))return e;{let h,m;if(qt(t))if((0,M.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=Hp(e),S=vR(r,w instanceof Vt?w:Vt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=VC(r,Hp(e));h=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Gt(t);if(".priority"===w){(0,M.hu)(1===Rh(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=n1(r,t,D,m);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Un(t);let S;if(l.isCompleteForChild(w)){m=e.serverCache.getNode();const P=n1(r,t,l.getNode(),m);S=null!=P?l.getNode().getImmediateChild(w).updateChild(D,P):l.getNode().getImmediateChild(w)}else S=wR(r,w,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),w,S,D,i,a):l.getNode()}}return aw(e,h,l.isFullyInitialized()||qt(t),n.filter.filtersNodes())}}function jC(n,e,t,r,i,a,l,h){const m=e.serverCache;let w;const D=l?n.filter:n.filter.getIndexedFilter();if(qt(t))w=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const U=m.getNode().updateChild(t,r);w=D.updateFullNode(m.getNode(),U,null)}else{const U=Gt(t);if(!m.isCompleteForPath(t)&&Rh(t)>1)return e;const q=Un(t),ke=m.getNode().getImmediateChild(U).updateChild(q,r);w=".priority"===U?D.updatePriority(m.getNode(),ke):D.updateChild(m.getNode(),U,ke,q,s1,null)}const S=YM(e,w,m.isFullyInitialized()||qt(t),D.filtersNodes());return o1(n,S,t,i,new ER(i,S,a),h)}function IR(n,e,t,r,i,a,l){const h=e.eventCache;let m,w;const D=new ER(i,e,a);if(qt(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=aw(e,w,!0,n.filter.filtersNodes());else{const S=Gt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),m=aw(e,w,h.isFullyInitialized(),h.isFiltered());else{const P=Un(t),U=h.getNode().getImmediateChild(S);let q;if(qt(P))q=r;else{const ve=D.getCompleteChild(S);q=null!=ve?".priority"===Jx(P)&&ve.getChild(PM(P)).isEmpty()?ve:ve.updateChild(P,r):Vt.EMPTY_NODE}m=U.equals(q)?e:aw(e,n.filter.updateChild(h.getNode(),S,q,P,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function a1(n,e){return n.eventCache.isCompleteForChild(e)}function u1(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function bR(n,e,t,r,i,a,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,m=e;w=qt(t)?r:new Zn(null).setTree(t,r);const D=e.serverCache.getNode();return w.children.inorderTraversal((S,P)=>{if(D.hasChild(S)){const q=u1(0,e.serverCache.getNode().getImmediateChild(S),P);m=jC(n,m,new Cn(S),q,i,a,l,h)}}),w.children.inorderTraversal((S,P)=>{const U=!e.serverCache.isCompleteForChild(S)&&void 0===P.value;if(!D.hasChild(S)&&!U){const ve=u1(0,e.serverCache.getNode().getImmediateChild(S),P);m=jC(n,m,new Cn(S),ve,i,a,l,h)}}),m}class _V{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new aR(r.getIndex()),a=function N2(n){return n.loadsAllData()?new aR(n.getIndex()):n.hasLimit()?new R2(n):new iw(n)}(r);this.processor_=function lV(n){return{filter:n}}(a);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(Vt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(Vt.EMPTY_NODE,h.getNode(),null),D=new Nh(m,l.isFullyInitialized(),i.filtersNodes()),S=new Nh(w,h.isFullyInitialized(),a.filtersNodes());this.viewCache_=LC(S,D),this.eventGenerator_=new H2(this.query_)}get query(){return this.query_}}function wV(n,e){const t=Hp(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qt(e)&&!t.getImmediateChild(Gt(e)).isEmpty())?t.getChild(e):null}function l1(n){return 0===n.eventRegistrations_.length}function c1(n,e,t){const r=[];if(t){(0,M.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function d1(n,e,t,r){e.type===_a.MERGE&&null!==e.source.queryId&&((0,M.hu)(Hp(n.viewCache_),"We should always have a full cache before handling merges"),(0,M.hu)(FC(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function dV(n,e,t,r,i){const a=new aV;let l,h;if(t.type===_a.OVERWRITE){const w=t;w.source.fromUser?l=IR(n,e,w.path,w.snap,r,i,a):((0,M.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered()&&!qt(w.path),l=jC(n,e,w.path,w.snap,r,i,h,a))}else if(t.type===_a.MERGE){const w=t;w.source.fromUser?l=function fV(n,e,t,r,i,a,l){let h=e;return r.foreach((m,w)=>{const D=yr(t,m);a1(e,Gt(D))&&(h=IR(n,h,D,w,i,a,l))}),r.foreach((m,w)=>{const D=yr(t,m);a1(e,Gt(D))||(h=IR(n,h,D,w,i,a,l))}),h}(n,e,w.path,w.children,r,i,a):((0,M.hu)(w.source.fromServer,"Unknown source."),h=w.source.tagged||e.serverCache.isFiltered(),l=bR(n,e,w.path,w.children,r,i,h,a))}else if(t.type===_a.ACK_USER_WRITE){const w=t;l=w.revert?function mV(n,e,t,r,i,a){let l;if(null!=BC(r,t))return e;{const h=new ER(r,e,i),m=e.eventCache.getNode();let w;if(qt(t)||".priority"===Gt(t)){let D;if(e.serverCache.isFullyInitialized())D=VC(r,Hp(e));else{const S=e.serverCache.getNode();(0,M.hu)(S instanceof Vt,"serverChildren would be complete if leaf node"),D=vR(r,S)}D=D,w=n.filter.updateFullNode(m,D,a)}else{const D=Gt(t);let S=wR(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),w=null!=S?n.filter.updateChild(m,D,S,Un(t),h,a):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,Vt.EMPTY_NODE,Un(t),h,a):m,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=VC(r,Hp(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=BC(r,yn()),aw(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function pV(n,e,t,r,i,a,l){if(null!=BC(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(qt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return jC(n,e,t,m.getNode().getChild(t),i,a,h,l);if(qt(t)){let w=new Zn(null);return m.getNode().forEachChild(kl,(D,S)=>{w=w.set(new Cn(D),S)}),bR(n,e,t,w,i,a,h,l)}return e}{let w=new Zn(null);return r.foreach((D,S)=>{const P=yr(t,D);m.isCompleteForPath(P)&&(w=w.set(D,m.getNode().getChild(P)))}),bR(n,e,t,w,i,a,h,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==_a.LISTEN_COMPLETE)throw(0,M.g5)("Unknown operation type: "+t.type);l=function gV(n,e,t,r,i){const a=e.serverCache;return o1(n,YM(e,a.getNode(),a.isFullyInitialized()||qt(t),a.isFiltered()),t,r,s1,i)}(n,e,t.path,r,a)}const m=a.getChanges();return function hV(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=FC(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(WM(FC(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function cV(n,e){(0,M.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,M.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,M.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,h1(n,a.changes,a.viewCache.eventCache.getNode(),null)}function h1(n,e,t,r){return function $2(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function x2(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),ow(n,i,"child_removed",e,r,t),ow(n,i,"child_added",e,r,t),ow(n,i,"child_moved",a,r,t),ow(n,i,"child_changed",e,r,t),ow(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let HC,GC;class f1{constructor(){this.views=new Map}}function CR(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,M.hu)(null!=a,"SyncTree gave us an op for an invalid query."),d1(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(d1(l,e,t,r));return a}}function p1(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=VC(t,i?r:null),m=!1;h?m=!0:r instanceof Vt?(h=vR(t,r),m=!1):(h=Vt.EMPTY_NODE,m=!1);const w=LC(new Nh(h,m,!1),new Nh(r,i,!1));return new _V(e,w)}return l}function g1(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function kh(n,e){let t=null;for(const r of n.views.values())t=t||wV(r,e);return t}function m1(n,e){return e._queryParams.loadsAllData()?$C(n):n.views.get(e._queryIdentifier)}function _1(n,e){return null!=m1(n,e)}function Mh(n){return null!=$C(n)}function $C(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let RV=1;class y1{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Zn(null),this.pendingWriteTree_=function sV(){return{visibleWrites:Eu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function TR(n,e,t,r,i){return function z2(n,e,t,r,i){(0,M.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=uw(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?R_(n,new jp({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Oh(n,e,t=!1){const r=function Z2(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function Y2(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,M.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&Q2(h,r.path)?i=!1:ma(r.path,h.path)&&(a=!0)),l--}return!!i&&(a?(function J2(n){n.visibleWrites=e1(n.allWrites,X2,yn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=QM(n.visibleWrites,r.path):Oi(r.children,m=>{n.visibleWrites=QM(n.visibleWrites,yr(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let a=new Zn(null);return null!=r.snap?a=a.set(yn(),!0):Oi(r.children,l=>{a=a.set(new Cn(l),!0)}),R_(n,new OC(r.path,a,t))}return[]}function lw(n,e,t){return R_(n,new jp({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function DR(n,e,t,r){const i=e._path,a=n.syncPointTree_.get(i);let l=[];if(a&&("default"===e._queryIdentifier||_1(a,e))){const h=function SV(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const h=Mh(n);if("default"===i)for(const[m,w]of n.views.entries())l=l.concat(c1(w,t,r)),l1(w)&&(n.views.delete(m),w.query._queryParams.loadsAllData()||a.push(w.query));else{const m=n.views.get(i);m&&(l=l.concat(c1(m,t,r)),l1(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||a.push(m.query)))}return h&&!Mh(n)&&a.push(new(function CV(){return(0,M.hu)(HC,"Reference.ts has not been loaded"),HC}())(e._repo,e._path)),{removed:a,events:l}}(a,e,t,r);(function TV(n){return 0===n.views.size})(a)&&(n.syncPointTree_=n.syncPointTree_.remove(i));const m=h.removed;l=h.events;const w=-1!==m.findIndex(S=>S._queryParams.loadsAllData()),D=n.syncPointTree_.findOnPath(i,(S,P)=>Mh(P));if(w&&!D){const S=n.syncPointTree_.subtree(i);if(!S.isEmpty()){const P=function UV(n){return n.fold((e,t,r)=>{if(t&&Mh(t))return[$C(t)];{let i=[];return t&&(i=g1(t)),Oi(r,(a,l)=>{i=i.concat(l)}),i}})}(S);for(let U=0;U<P.length;++U){const q=P[U],ve=q.query,ke=I1(n,q);n.listenProvider_.startListening(cw(ve),WC(n,ve),ke.hashFn,ke.onComplete)}}}!D&&m.length>0&&!r&&(w?n.listenProvider_.stopListening(cw(e),null):m.forEach(S=>{const P=n.queryToTagMap.get(zC(S));n.listenProvider_.stopListening(cw(S),P)})),function VV(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=zC(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,m)}return l}function v1(n,e,t){const r=e._path;let i=null,a=!1;n.syncPointTree_.foreachOnPath(r,(S,P)=>{const U=Us(S,r);i=i||kh(P,U),a=a||Mh(P)});let h,l=n.syncPointTree_.get(r);l?(a=a||Mh(l),i=i||kh(l,yn())):(l=new f1,n.syncPointTree_=n.syncPointTree_.set(r,l)),null!=i?h=!0:(h=!1,i=Vt.EMPTY_NODE,n.syncPointTree_.subtree(r).foreachChild((P,U)=>{const q=kh(U,yn());q&&(i=i.updateImmediateChild(P,q))}));const m=_1(l,e);if(!m&&!e._queryParams.loadsAllData()){const S=zC(e);(0,M.hu)(!n.queryToTagMap.has(S),"View does not exist, but we have a tag");const P=function BV(){return RV++}();n.queryToTagMap.set(S,P),n.tagToQueryMap.set(P,S)}let D=function DV(n,e,t,r,i,a){const l=p1(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function EV(n,e){n.eventRegistrations_.push(e)}(l,t),function IV(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(Kn,(a,l)=>{r.push(D_(a,l))}),t.isFullyInitialized()&&r.push(WM(t.getNode())),h1(n,r,t.getNode(),e)}(l,t)}(l,e,t,UC(n.pendingWriteTree_,r),i,h);if(!m&&!a){const S=m1(l,e);D=D.concat(function jV(n,e,t){const r=e._path,i=WC(n,e),a=I1(n,t),l=n.listenProvider_.startListening(cw(e),i,a.hashFn,a.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,M.hu)(!Mh(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((w,D,S)=>{if(!qt(w)&&D&&Mh(D))return[$C(D).query];{let P=[];return D&&(P=P.concat(g1(D).map(U=>U.query))),Oi(S,(U,q)=>{P=P.concat(q)}),P}});for(let w=0;w<m.length;++w){const D=m[w];n.listenProvider_.stopListening(cw(D),WC(n,D))}}return l}(n,e,S))}return D}function qC(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,h)=>{const w=kh(h,Us(l,e));if(w)return w});return t1(i,e,a,t,!0)}function R_(n,e){return w1(e,n.syncPointTree_,null,UC(n.pendingWriteTree_,yn()))}function w1(n,e,t,r){if(qt(n.path))return E1(n,e,t,r);{const i=e.get(yn());null==t&&null!=i&&(t=kh(i,yn()));let a=[];const l=Gt(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const w=t?t.getImmediateChild(l):null,D=r1(r,l);a=a.concat(w1(h,m,w,D))}return i&&(a=a.concat(CR(i,n,r,t))),a}}function E1(n,e,t,r){const i=e.get(yn());null==t&&null!=i&&(t=kh(i,yn()));let a=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,w=r1(r,l),D=n.operationForChild(l);D&&(a=a.concat(E1(D,h,m,w)))}),i&&(a=a.concat(CR(i,n,r,t))),a}function I1(n,e){const t=e.query,r=WC(n,t);return{hashFn:()=>(function yV(n){return n.viewCache_.serverCache.getNode()}(e)||Vt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function MV(n,e,t){const r=SR(n,t);if(r){const i=AR(r),a=i.path,l=i.queryId,h=Us(a,e);return xR(n,a,new sw(pR(l),h))}return[]}(n,t._path,r):function kV(n,e){return R_(n,new sw({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function NU(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return DR(n,t,null,a)}}}}function WC(n,e){const t=zC(e);return n.queryToTagMap.get(t)}function zC(n){return n._path.toString()+"$"+n._queryIdentifier}function SR(n,e){return n.tagToQueryMap.get(e)}function AR(n){const e=n.indexOf("$");return(0,M.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Cn(n.substr(0,e))}}function xR(n,e,t){const r=n.syncPointTree_.get(e);return(0,M.hu)(r,"Missing sync point for query tag that we're tracking"),CR(r,t,UC(n.pendingWriteTree_,e),null)}function cw(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function xV(){return(0,M.hu)(GC,"Reference.ts has not been loaded"),GC}())(n._repo,n._path):n}class RR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new RR(t)}node(){return this.node_}}class NR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=yr(this.path_,e);return new NR(this.syncTree_,t)}node(){return qC(this.syncTree_,this.path_)}}const b1=function(n,e,t){return n&&"object"==typeof n?((0,M.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?$V(n[".sv"],e,t):"object"==typeof n[".sv"]?GV(n[".sv"],e):void(0,M.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},$V=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,M.hu)(!1,"Unexpected server value: "+n)},GV=function(n,e,t){n.hasOwnProperty("increment")||(0,M.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,M.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,M.hu)(null!=i,"Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},C1=function(n,e,t,r){return kR(e,new NR(t,n),r)},PR=function(n,e,t){return kR(n,new RR(e),t)};function kR(n,e,t){const r=n.getPriority().val(),i=b1(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,h=b1(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new b_(h,Tr(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new b_(i))),l.forEachChild(Kn,(h,m)=>{const w=kR(m,e.getImmediateChild(h),t);w!==m&&(a=a.updateImmediateChild(h,w))}),a}}class MR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function KC(n,e){let t=e instanceof Cn?e:new Cn(e),r=n,i=Gt(t);for(;null!==i;){const a=(0,M.DV)(r.node.children,i)||{children:{},childCount:0};r=new MR(i,r,a),t=Un(t),i=Gt(t)}return r}function Gp(n){return n.node.value}function OR(n,e){n.node.value=e,LR(n)}function T1(n){return n.node.childCount>0}function ZC(n,e){Oi(n.node.children,(t,r)=>{e(new MR(t,n,r))})}function D1(n,e,t,r){t&&!r&&e(n),ZC(n,i=>{D1(i,e,!0,r)}),t&&r&&e(n)}function dw(n){return new Cn(null===n.parent?n.name:dw(n.parent)+"/"+n.name)}function LR(n){null!==n.parent&&function zV(n,e,t){const r=function qV(n){return void 0===Gp(n)&&!T1(n)}(t),i=(0,M.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,LR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,LR(n))}(n.parent,n.name,n)}const KV=/[\[\].#$\/\u0000-\u001F\u007F]/,ZV=/[\[\].#$\u0000-\u001F\u007F]/,FR=10485760,YC=function(n){return"string"==typeof n&&0!==n.length&&!KV.test(n)},S1=function(n){return"string"==typeof n&&0!==n.length&&!ZV.test(n)},hw=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!bC(n)||n&&"object"==typeof n&&(0,M.r3)(n,".sv")},Ml=function(n,e,t,r){r&&void 0===e||fw((0,M.gK)(n,"value"),e,t)},fw=function(n,e,t){const r=t instanceof Cn?new l2(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Vp(r));if("function"==typeof e)throw new Error(n+"contains a function "+Vp(r)+" with contents = "+e.toString());if(bC(e))throw new Error(n+"contains "+e.toString()+" "+Vp(r));if("string"==typeof e&&e.length>FR/3&&(0,M.ug)(e)>FR)throw new Error(n+"contains a string greater than "+FR+" utf8 bytes "+Vp(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Oi(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!YC(l)))throw new Error(n+" contains an invalid key ("+l+") "+Vp(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function c2(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,M.ug)(e),kM(n)})(r,l),fw(n,h,r),function d2(n){const e=n.parts_.pop();n.byteLength_-=(0,M.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+Vp(r)+" in addition to actual children.")}},A1=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,M.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Oi(e,(l,h)=>{const m=new Cn(l);if(fw(i,h,yr(t,m)),".priority"===Jx(m)&&!hw(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=J0(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!YC(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(u2);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ma(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},UR=function(n,e,t){if(!t||void 0!==e){if(bC(e))throw new Error((0,M.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!hw(e))throw new Error((0,M.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},pw=function(n,e,t,r){if(!(r&&void 0===t||YC(t)))throw new Error((0,M.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},gw=function(n,e,t,r){if(!(r&&void 0===t||S1(t)))throw new Error((0,M.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ya=function(n,e){if(".info"===Gt(e))throw new Error(n+" failed = Can't modify data under /.info/")},x1=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!YC(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),S1(n)}(t))throw new Error((0,M.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class XV{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function QC(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!Xx(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function VR(n,e,t){QC(n,t),R1(n,r=>Xx(r,e))}function va(n,e,t){QC(n,t),R1(n,r=>ma(r,e)||ma(e,r))}function R1(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(eB(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function eB(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Fp&&Mi("event: "+t.toString()),E_(r)}}}const N1="repo_interrupt";class nB{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XV,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=MC(),this.transactionQueueTree_=new MR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function P1(n){const t=n.infoData_.getNode(new Cn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function mw(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:P1(n)})}function k1(n,e,t,r,i){n.dataUpdateCount++;const a=new Cn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,M.UI)(t,w=>Tr(w));l=function LV(n,e,t,r){const i=SR(n,r);if(i){const a=AR(i),l=a.path,h=a.queryId,m=Us(l,e),w=Zn.fromObject(t);return xR(n,l,new A_(pR(h),m,w))}return[]}(n.serverSyncTree_,a,m,i)}else{const m=Tr(t);l=function OV(n,e,t,r){const i=SR(n,r);if(null!=i){const a=AR(i),l=a.path,h=a.queryId,m=Us(l,e);return xR(n,l,new jp(pR(h),m,t))}return[]}(n.serverSyncTree_,a,m,i)}else if(r){const m=(0,M.UI)(t,w=>Tr(w));l=function PV(n,e,t){const r=Zn.fromObject(t);return R_(n,new A_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,m)}else{const m=Tr(t);l=lw(n.serverSyncTree_,a,m)}let h=a;l.length>0&&(h=P_(n,a)),va(n.eventQueue_,h,l)}function M1(n,e){BR(n,"connected",e),!1===e&&function aB(n){N_(n,"onDisconnectEvents");const e=mw(n),t=MC();dR(n.onDisconnect_,yn(),(i,a)=>{const l=C1(i,a,n.serverSyncTree_,e);S_(t,i,l)});let r=[];dR(t,yn(),(i,a)=>{r=r.concat(lw(n.serverSyncTree_,i,a));const l=GR(n,i);P_(n,l)}),n.onDisconnect_=MC(),va(n.eventQueue_,yn(),r)}(n)}function BR(n,e,t){const r=new Cn("/.info/"+e),i=Tr(t);n.infoData_.updateSnapshot(r,i);const a=lw(n.infoSyncTree_,r,i);va(n.eventQueue_,r,a)}function JC(n){return n.nextWriteId_++}function jR(n,e,t,r,i){N_(n,"set",{path:e.toString(),value:t,priority:r});const a=mw(n),l=Tr(t,r),h=qC(n.serverSyncTree_,e),m=PR(l,h,a),w=JC(n),D=TR(n.serverSyncTree_,e,m,w,!0);QC(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(P,U)=>{const q="ok"===P;q||Fs("set at "+e+" failed: "+P);const ve=Oh(n.serverSyncTree_,w,!q);va(n.eventQueue_,e,ve),Lh(0,i,P,U)});const S=GR(n,e);P_(n,S),va(n.eventQueue_,S,[])}function uB(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&cR(n.onDisconnect_,e),Lh(0,t,r,i)})}function O1(n,e,t,r){const i=Tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&S_(n.onDisconnect_,e,i),Lh(0,r,a,l)})}function HR(n,e,t){let r;r=".info"===Gt(e._path)?DR(n.infoSyncTree_,e,t):DR(n.serverSyncTree_,e,t),VR(n.eventQueue_,e._path,r)}function L1(n){n.persistentConnection_&&n.persistentConnection_.interrupt(N1)}function N_(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Mi(t,...e)}function Lh(n,e,t,r){e&&E_(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function $R(n,e,t){return qC(n.serverSyncTree_,e,t)||Vt.EMPTY_NODE}function XC(n,e=n.transactionQueueTree_){if(e||eT(n,e),Gp(e)){const t=U1(n,e);(0,M.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function pB(n,e,t){const r=t.map(w=>w.currentWriteId),i=$R(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const D=t[w];(0,M.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=Us(e,D.path);a=a.updateChild(S,D.currentOutputSnapshotRaw)}const h=a.val(!0),m=e;n.server_.put(m.toString(),h,w=>{N_(n,"transaction put response",{path:m.toString(),status:w});let D=[];if("ok"===w){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,D=D.concat(Oh(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();eT(n,KC(n.transactionQueueTree_,e)),XC(n,n.transactionQueueTree_),va(n.eventQueue_,e,D);for(let P=0;P<S.length;P++)E_(S[P])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Fs("transaction at "+m.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}P_(n,e)}},l)}(n,dw(e),t)}else T1(e)&&ZC(e,t=>{XC(n,t)})}function P_(n,e){const t=F1(n,e),r=dw(t);return function gB(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],w=Us(t,m.path);let S,D=!1;if((0,M.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(Oh(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=25)D=!0,S="maxretry",i=i.concat(Oh(n.serverSyncTree_,m.currentWriteId,!0));else{const P=$R(n,m.path,l);m.currentInputSnapshot=P;const U=e[h].update(P.val());if(void 0!==U){fw("transaction failed: Data returned ",U,m.path);let q=Tr(U);"object"==typeof U&&null!=U&&(0,M.r3)(U,".priority")||(q=q.updatePriority(P.getPriority()));const ke=m.currentWriteId,tt=mw(n),vt=PR(q,P,tt);m.currentOutputSnapshotRaw=q,m.currentOutputSnapshotResolved=vt,m.currentWriteId=JC(n),l.splice(l.indexOf(ke),1),i=i.concat(TR(n.serverSyncTree_,m.path,vt,m.currentWriteId,m.applyLocally)),i=i.concat(Oh(n.serverSyncTree_,ke,!0))}else D=!0,S="nodata",i=i.concat(Oh(n.serverSyncTree_,m.currentWriteId,!0))}va(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}eT(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)E_(r[h]);XC(n,n.transactionQueueTree_)}(n,U1(n,t),r),r}function F1(n,e){let t,r=n.transactionQueueTree_;for(t=Gt(e);null!==t&&void 0===Gp(r);)r=KC(r,t),t=Gt(e=Un(e));return r}function U1(n,e){const t=[];return V1(n,e,t),t.sort((r,i)=>r.order-i.order),t}function V1(n,e,t){const r=Gp(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);ZC(e,i=>{V1(n,i,t)})}function eT(n,e){const t=Gp(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,OR(e,t.length>0?t:void 0)}ZC(e,r=>{eT(n,r)})}function GR(n,e){const t=dw(F1(n,e)),r=KC(n.transactionQueueTree_,e);return function WV(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{qR(n,i)}),qR(n,r),D1(r,i=>{qR(n,i)}),t}function qR(n,e){const t=Gp(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,M.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,M.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Oh(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?OR(e,void 0):t.length=a+1,va(n.eventQueue_,dw(e),i);for(let l=0;l<r.length;l++)E_(r[l])}}const WR=function(n,e){const t=yB(n),r=t.namespace;return"firebase.com"===t.domain&&Nl(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Nl("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Fs("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new qx(t.host,t.secure,r,e,"ws"===t.scheme||"wss"===t.scheme,"",r!==t.subdomain),path:new Cn(t.pathString)}},yB=function(n){let e="",t="",r="",i="",a="",l=!0,h="https",m=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(h=n.substring(0,w-1),n=n.substring(w+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function mB(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(a){}e+="/"+i}return e}(n.substring(D,S)));const P=function _B(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Fs(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:a}};class B1{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,M.Pz)(this.snapshot.exportVal())}}class j1{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class H1{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,M.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class $1{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new M.BH;return uB(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){ya("OnDisconnect.remove",this._path);const e=new M.BH;return O1(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){ya("OnDisconnect.set",this._path),Ml("OnDisconnect.set",e,this._path,!1);const t=new M.BH;return O1(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){ya("OnDisconnect.setWithPriority",this._path),Ml("OnDisconnect.setWithPriority",e,this._path,!1),UR("OnDisconnect.setWithPriority",t,!1);const r=new M.BH;return function lB(n,e,t,r,i){const a=Tr(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,h)=>{"ok"===l&&S_(n.onDisconnect_,e,a),Lh(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){ya("OnDisconnect.update",this._path),A1("OnDisconnect.update",e,this._path,!1);const t=new M.BH;return function cB(n,e,t,r){if((0,M.xb)(t))return Mi("onDisconnect().update() called with empty data.  Don't do anything."),void Lh(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Oi(t,(l,h)=>{const m=Tr(h);S_(n.onDisconnect_,yr(e,l),m)}),Lh(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class go{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return qt(this._path)?null:Jx(this._path)}get ref(){return new wa(this._repo,this._path)}get _queryIdentifier(){const e=KM(this._queryParams),t=Hx(e);return"{}"===t?"default":t}get _queryObject(){return KM(this._queryParams)}isEqual(e){if(!((e=(0,M.m9)(e))instanceof go))return!1;const t=this._repo===e._repo,r=Xx(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function a2(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function tT(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Fh(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===kl){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==ed)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Pl)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===Kn){if(null!=e&&!hw(e)||null!=t&&!hw(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,M.hu)(n.getIndex()instanceof iR||n.getIndex()===sR,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function nT(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class wa extends go{constructor(e,t){super(e,t,new NC,!1)}get parent(){const e=PM(this._path);return null===e?null:new wa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class qp{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Cn(e),r=Wp(this.ref,e);return new qp(this._node.getChild(t),r,Kn)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new qp(i,Wp(this.ref,r),Kn)))}hasChild(e){const t=new Cn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function G1(n,e){return(n=(0,M.m9)(n))._checkNotDeleted("ref"),void 0!==e?Wp(n._root,e):n._root}function q1(n,e){(n=(0,M.m9)(n))._checkNotDeleted("refFromURL");const t=WR(e,n._repo.repoInfo_.nodeAdmin);x1("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Nl("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),G1(n,t.path.toString())}function Wp(n,e){return null===Gt((n=(0,M.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),gw("child","path",t,!1)):gw("child","path",e,!1),new wa(n._repo,yr(n._path,e));var t}function zR(n,e){n=(0,M.m9)(n),ya("set",n._path),Ml("set",e,n._path,!1);const t=new M.BH;return jR(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function bB(n,e){A1("update",e,n._path,!1);const t=new M.BH;return function oB(n,e,t,r){N_(n,"update",{path:e.toString(),value:t});let i=!0;const a=mw(n),l={};if(Oi(t,(h,m)=>{i=!1,l[h]=C1(yr(e,h),Tr(m),n.serverSyncTree_,a)}),i)Mi("update() called with empty data.  Don't do anything."),Lh(0,r,"ok",void 0);else{const h=JC(n),m=function NV(n,e,t,r){!function K2(n,e,t,r){(0,M.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=mR(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Zn.fromObject(t);return R_(n,new A_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);QC(n.eventQueue_,m),n.server_.merge(e.toString(),t,(w,D)=>{const S="ok"===w;S||Fs("update at "+e+" failed: "+w);const P=Oh(n.serverSyncTree_,h,!S),U=P.length>0?P_(n,e):e;va(n.eventQueue_,U,P),Lh(0,r,w,D)}),Oi(t,w=>{const D=GR(n,yr(e,w));P_(n,D)}),va(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function CB(n){return function sB(n,e){const t=function FV(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,D)=>{const S=Us(w,t);r=r||kh(D,S)});let i=n.syncPointTree_.get(t);i?r=r||kh(i,yn()):(i=new f1,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new Nh(r,!0,!1):null;return function vV(n){return FC(n.viewCache_)}(p1(i,e,UC(n.pendingWriteTree_,e._path),a?l.getNode():Vt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=t?Promise.resolve(t):n.server_.get(e).then(r=>{const i=Tr(r).withIndex(e._queryParams.getIndex()),a=lw(n.serverSyncTree_,e._path,i);return VR(n.eventQueue_,e._path,a),Promise.resolve(i)},r=>(N_(n,"get for query "+(0,M.Pz)(e)+" failed: "+r),Promise.reject(new Error(r))))}((n=(0,M.m9)(n))._repo,n).then(e=>new qp(e,new wa(n._repo,n._path),n._queryParams.getIndex()))}class rT{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new B1("value",this,new qp(e.snapshotNode,new wa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new j1(this,e,t):null}matches(e){return e instanceof rT&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class iT{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new j1(this,e,t):null}createEvent(e,t){(0,M.hu)(null!=e.childName,"Child events should have a childName.");const r=Wp(new wa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new B1(e.type,this,new qp(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof iT&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function _w(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const m=t,w=(D,S)=>{HR(n._repo,n,h),m(D,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new H1(t,a||void 0),h="value"===e?new rT(l):new iT(e,l);return function dB(n,e,t){let r;r=".info"===Gt(e._path)?v1(n.infoSyncTree_,e,t):v1(n.serverSyncTree_,e,t),VR(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>HR(n._repo,n,h)}function KR(n,e,t,r){return _w(n,"value",e,t,r)}function W1(n,e,t,r){return _w(n,"child_added",e,t,r)}function z1(n,e,t,r){return _w(n,"child_changed",e,t,r)}function K1(n,e,t,r){return _w(n,"child_moved",e,t,r)}function Z1(n,e,t,r){return _w(n,"child_removed",e,t,r)}function Y1(n,e,t){let r=null;const i=t?new H1(t):null;"value"===e?r=new rT(i):e&&(r=new iT(e,i)),HR(n._repo,n,r)}class Iu{}class Q1 extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ml("endAt",this._value,e._path,!0);const t=lR(e._queryParams,this._value,this._key);if(nT(t),Fh(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new go(e._repo,e._path,t,e._orderByCalled)}}class DB extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ml("endBefore",this._value,e._path,!1);const t=function O2(n,e,t){let r,i;return n.index_===kl?("string"==typeof e&&(e=qM(e)),i=lR(n,e,t)):(r=null==t?ed:qM(t),i=lR(n,e,r)),i.endBeforeSet_=!0,i}(e._queryParams,this._value,this._key);if(nT(t),Fh(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new go(e._repo,e._path,t,e._orderByCalled)}}class J1 extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ml("startAt",this._value,e._path,!0);const t=uR(e._queryParams,this._value,this._key);if(nT(t),Fh(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new go(e._repo,e._path,t,e._orderByCalled)}}class xB extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ml("startAfter",this._value,e._path,!1);const t=function M2(n,e,t){let r;if(n.index_===kl)"string"==typeof e&&(e=GM(e)),r=uR(n,e,t);else{let i;i=null==t?Pl:GM(t),r=uR(n,e,i)}return r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(nT(t),Fh(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new go(e._repo,e._path,t,e._orderByCalled)}}class NB extends Iu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new go(e._repo,e._path,function P2(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class kB extends Iu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new go(e._repo,e._path,function k2(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class OB extends Iu{constructor(e){super(),this._path=e}_apply(e){tT(e,"orderByChild");const t=new Cn(this._path);if(qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new iR(t),i=PC(e._queryParams,r);return Fh(i),new go(e._repo,e._path,i,!0)}}class FB extends Iu{_apply(e){tT(e,"orderByKey");const t=PC(e._queryParams,kl);return Fh(t),new go(e._repo,e._path,t,!0)}}class VB extends Iu{_apply(e){tT(e,"orderByPriority");const t=PC(e._queryParams,Kn);return Fh(t),new go(e._repo,e._path,t,!0)}}class jB extends Iu{_apply(e){tT(e,"orderByValue");const t=PC(e._queryParams,sR);return Fh(t),new go(e._repo,e._path,t,!0)}}class $B extends Iu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ml("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Q1(this._value,this._key)._apply(new J1(this._value,this._key)._apply(e))}}function bu(n,...e){let t=(0,M.m9)(n);for(const r of e)t=r._apply(t);return t}(function bV(n){(0,M.hu)(!HC,"__referenceConstructor has already been defined"),HC=n})(wa),function AV(n){(0,M.hu)(!GC,"__referenceConstructor has already been defined"),GC=n}(wa);const ZR={};function eO(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Nl("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Mi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,w,l=WR(a,i),h=l.repoInfo;"undefined"!=typeof process&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(m=!0,a=`http://${w}?ns=${h.namespace}`,l=WR(a,i),h=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new Z0(Z0.OWNER):new OU(n.name,n.options,e);x1("Invalid Firebase Database URL",l),qt(l.path)||Nl("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function KB(n,e,t,r){let i=ZR[e.name];i||(i={},ZR[e.name]=i);let a=i[n.toURLString()];return a&&Nl("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new nB(n,false,t,r),i[n.toURLString()]=a,a}(h,n,D,new MU(n.name,t));return new YB(S,n)}class YB{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function rB(n,e,t){if(n.stats_=Kx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new kC(n.repoInfo_,(r,i,a,l)=>{k1(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>M1(n,!0),0);else{if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,M.Pz)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Bp(n.repoInfo_,e,(r,i,a,l)=>{k1(n,r,i,a,l)},r=>{M1(n,r)},r=>{!function iB(n,e){Oi(e,(t,r)=>{BR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function VU(n,e){const t=n.toString();return zx[t]||(zx[t]=e()),zx[t]}(n.repoInfo_,()=>new j2(n.stats_,n.server_)),n.infoData_=new L2,n.infoSyncTree_=new y1({startListening:(r,i,a,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=lw(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),BR(n,"connected",!1),n.serverSyncTree_=new y1({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(h,m)=>{const w=l(h,m);va(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new wa(this._repo,yn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function zB(n,e){const t=ZR[e];(!t||t[n.key]!==n)&&Nl(`Database ${e}(${n.repoInfo_}) has already been deleted.`),L1(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Nl("Cannot call "+e+" on a deleted database.")}}function ej(n,e){nM(n,e)}const nj={".sv":"timestamp"};class sj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Bp.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Bp.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function tj(n){Qk(Ln.SDK_VERSION),(0,Ln._registerComponent)(new eo.wA("database",(e,{instanceIdentifier:t})=>eO(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,Ln.registerVersion)(Zk,"0.12.5",n),(0,Ln.registerVersion)(Zk,"0.12.5","esm2017")}();const lj=new Ns.Yd("@firebase/database-compat"),tO=function(n){lj.warn("FIREBASE WARNING: "+n)};class hj{constructor(e){this._delegate=e}cancel(e){(0,M.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,M.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,M.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,M.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,M.Dv)("OnDisconnect.set",1,2,arguments.length),(0,M.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,M.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,M.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,M.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,tO("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,M.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class fj{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,M.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Uh{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,M.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,M.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,M.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,M.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,M.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),gw("DataSnapshot.child","path",e,!1),new Uh(this._database,this._delegate.child(e))}hasChild(e){return(0,M.Dv)("DataSnapshot.hasChild",1,1,arguments.length),gw("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,M.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,M.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,M.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Uh(this._database,t)))}hasChildren(){return(0,M.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,M.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,M.Dv)("DataSnapshot.ref",0,0,arguments.length),new Uo(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class Zi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,M.Dv)("Query.on",2,4,arguments.length),(0,M.Wj)("Query.on","callback",t,!1);const l=Zi.getCancelAndContextArgs_("Query.on",r,i),h=(w,D)=>{t.call(l.context,new Uh(this.database,w),D)};h.userCallback=t,h.context=l.context;const m=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return KR(this._delegate,h,m),t;case"child_added":return W1(this._delegate,h,m),t;case"child_removed":return Z1(this._delegate,h,m),t;case"child_changed":return z1(this._delegate,h,m),t;case"child_moved":return K1(this._delegate,h,m),t;default:throw new Error((0,M.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,M.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,M.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,M.Wj)("Query.off","callback",t,!0),(0,M.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,Y1(this._delegate,e,i)}else Y1(this._delegate,e)}get(){return CB(this._delegate).then(e=>new Uh(this.database,e))}once(e,t,r,i){(0,M.Dv)("Query.once",1,4,arguments.length),(0,M.Wj)("Query.once","callback",t,!0);const a=Zi.getCancelAndContextArgs_("Query.once",r,i),l=new M.BH,h=(w,D)=>{const S=new Uh(this.database,w);t&&t.call(a.context,S,D),l.resolve(S)};h.userCallback=t,h.context=a.context;const m=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":KR(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":W1(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":Z1(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":z1(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":K1(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,M.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,M.Dv)("Query.limitToFirst",1,1,arguments.length),new Zi(this.database,bu(this._delegate,function PB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new NB(n)}(e)))}limitToLast(e){return(0,M.Dv)("Query.limitToLast",1,1,arguments.length),new Zi(this.database,bu(this._delegate,function MB(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kB(n)}(e)))}orderByChild(e){return(0,M.Dv)("Query.orderByChild",1,1,arguments.length),new Zi(this.database,bu(this._delegate,function LB(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return gw("orderByChild","path",n,!1),new OB(n)}(e)))}orderByKey(){return(0,M.Dv)("Query.orderByKey",0,0,arguments.length),new Zi(this.database,bu(this._delegate,function UB(){return new FB}()))}orderByPriority(){return(0,M.Dv)("Query.orderByPriority",0,0,arguments.length),new Zi(this.database,bu(this._delegate,function BB(){return new VB}()))}orderByValue(){return(0,M.Dv)("Query.orderByValue",0,0,arguments.length),new Zi(this.database,bu(this._delegate,function HB(){return new jB}()))}startAt(e=null,t){return(0,M.Dv)("Query.startAt",0,2,arguments.length),new Zi(this.database,bu(this._delegate,function AB(n=null,e){return pw("startAt","key",e,!0),new J1(n,e)}(e,t)))}startAfter(e=null,t){return(0,M.Dv)("Query.startAfter",0,2,arguments.length),new Zi(this.database,bu(this._delegate,function RB(n,e){return pw("startAfter","key",e,!0),new xB(n,e)}(e,t)))}endAt(e=null,t){return(0,M.Dv)("Query.endAt",0,2,arguments.length),new Zi(this.database,bu(this._delegate,function TB(n,e){return pw("endAt","key",e,!0),new Q1(n,e)}(e,t)))}endBefore(e=null,t){return(0,M.Dv)("Query.endBefore",0,2,arguments.length),new Zi(this.database,bu(this._delegate,function SB(n,e){return pw("endBefore","key",e,!0),new DB(n,e)}(e,t)))}equalTo(e,t){return(0,M.Dv)("Query.equalTo",1,2,arguments.length),new Zi(this.database,bu(this._delegate,function GB(n,e){return pw("equalTo","key",e,!0),new $B(n,e)}(e,t)))}toString(){return(0,M.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,M.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,M.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof Zi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,M.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,M.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,M.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Uo(this.database,new wa(this._delegate._repo,this._delegate._path))}}class Uo extends Zi{constructor(e,t){super(e,new go(t._repo,t._path,new NC,!1)),this.database=e,this._delegate=t}getKey(){return(0,M.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,M.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Uo(this.database,Wp(this._delegate,e))}getParent(){(0,M.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Uo(this.database,e):null}getRoot(){return(0,M.Dv)("Reference.root",0,0,arguments.length),new Uo(this.database,this._delegate.root)}set(e,t){(0,M.Dv)("Reference.set",1,2,arguments.length),(0,M.Wj)("Reference.set","onComplete",t,!0);const r=zR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,M.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,tO("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}ya("Reference.update",this._delegate._path),(0,M.Wj)("Reference.update","onComplete",t,!0);const r=bB(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,M.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,M.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function IB(n,e,t){if(ya("setWithPriority",n._path),Ml("setWithPriority",e,n._path,!1),UR("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new M.BH;return jR(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,M.Dv)("Reference.remove",0,1,arguments.length),(0,M.Wj)("Reference.remove","onComplete",e,!0);const t=function wB(n){return ya("remove",n._path),zR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,M.Dv)("Reference.transaction",1,3,arguments.length),(0,M.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,M.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,M.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function oj(n,e,t){var r;if(n=(0,M.m9)(n),ya("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=null==t?void 0:t.applyLocally)||void 0===r||r,a=new M.BH,h=KR(n,()=>{});return function fB(n,e,t,r,i,a){N_(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:Xk(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=$R(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{fw("transaction failed: Data returned ",m,l.path),l.status=0;const w=KC(n.transactionQueueTree_,e),D=Gp(w)||[];let S;D.push(l),OR(w,D),"object"==typeof m&&null!==m&&(0,M.r3)(m,".priority")?(S=(0,M.DV)(m,".priority"),(0,M.hu)(hw(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(qC(n.serverSyncTree_,e)||Vt.EMPTY_NODE).getPriority().val();const P=mw(n),U=Tr(m,S),q=PR(U,h,P);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=q,l.currentWriteId=JC(n);const ve=TR(n.serverSyncTree_,e,q,l.currentWriteId,l.applyLocally);va(n.eventQueue_,e,ve),XC(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,w,D)=>{let S=null;m?a.reject(m):(S=new qp(D,new wa(n._repo,n._path),Kn),a.resolve(new sj(w,S)))},h,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new fj(a.committed,new Uh(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,M.Dv)("Reference.setPriority",1,2,arguments.length),(0,M.Wj)("Reference.setPriority","onComplete",t,!0);const r=function EB(n,e){n=(0,M.m9)(n),ya("setPriority",n._path),UR("setPriority",e,!1);const t=new M.BH;return jR(n._repo,yr(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,M.Dv)("Reference.push",0,2,arguments.length),(0,M.Wj)("Reference.push","onComplete",t,!0);const r=function vB(n,e){n=(0,M.m9)(n),ya("push",n._path),Ml("push",e,n._path,!0);const t=P1(n._repo),r=A2(t),i=Wp(n,r),a=Wp(n,r);let l;return l=null!=e?zR(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Uo(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new Uo(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return ya("Reference.onDisconnect",this._delegate._path),new hj(new $1(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class yw{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(e,t,r={}){!function QB(n,e,t,r={}){(n=(0,M.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Nl("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Nl('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new Z0(Z0.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,M.Sg)(r.mockUserToken,n.app.options.projectId);a=new Z0(l)}!function WB(n,e,t,r){n.repoInfo_=new qx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,M.Dv)("database.ref",0,1,arguments.length),e instanceof Uo){const t=q1(this._delegate,e.toString());return new Uo(this,t)}{const t=G1(this._delegate,e);return new Uo(this,t)}}refFromURL(e){(0,M.Dv)("database.refFromURL",1,1,arguments.length);const r=q1(this._delegate,e);return new Uo(this,r)}goOffline(){return(0,M.Dv)("database.goOffline",0,0,arguments.length),function JB(n){(n=(0,M.m9)(n))._checkNotDeleted("goOffline"),L1(n._repo)}(this._delegate)}goOnline(){return(0,M.Dv)("database.goOnline",0,0,arguments.length),function XB(n){(n=(0,M.m9)(n))._checkNotDeleted("goOnline"),function hB(n){n.persistentConnection_&&n.persistentConnection_.resume(N1)}(n._repo)}(this._delegate)}}yw.ServerValue={TIMESTAMP:function rj(){return nj}(),increment:n=>function ij(n){return{".sv":{increment:n}}}(n)};var gj=Object.freeze({__proto__:null,initStandalone:function pj({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){Qk(t);const l=new eo.zt("auth-internal",new eo.H0("database-standalone"));return l.setComponent(new eo.wA("auth-internal",()=>r,"PRIVATE")),{instance:new yw(eO(n,l,void 0,e,a),n),namespace:i}}});const mj=yw.ServerValue;function nO(n){return null==n}function rO(n){return"function"==typeof n.set}function iO(n,e){return rO(e)?e:n.ref(e)}function sO(n,e){if(function yj(n){return"string"==typeof n}(n))return e.stringCase();if(rO(n))return e.firebaseCase();if(function vj(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function vw(n,e,t="on",r=$g.z){return new Pn.y(i=>{let a=null;return a=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,gt.U)(i=>{const{snapshot:a,prevKey:l}=i;let h=null;return a.exists()&&(h=a.key),{type:e,payload:a,prevKey:l,key:h}}),(0,Dg.B)())}function oO(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function Ij(n,e){const{payload:t,prevKey:r,key:i}=e,a=oO(n,i),l=function Ej(n,e){if(nO(e))return 0;{const t=oO(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const w={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const h=n[a-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(a>-1){const h=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function aO(n){return(nO(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function uO(n,e,t){return function wj(n,e,t){return vw(n,"value","once",t).pipe(Sn(r=>{const i=[et(r)];return e.forEach(a=>i.push(vw(n,a,"on",t))),(0,Cg.T)(...i).pipe(Ei(Ij,[]))}),BD())}(n,e=aO(e),t)}function lO(n,e,t){const r=(e=aO(e)).map(i=>vw(n,i,"on",t));return(0,Cg.T)(...r)}function cO(n,e){return function(r,i){return sO(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function Dj(n){return function(t){return t?sO(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function dO(n,e){return function(){return vw(n,"value","on",e)}}!function _j(n){n.INTERNAL.registerComponent(new eo.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new yw(i,r)},"PUBLIC").setServiceProps({Reference:Uo,Query:Zi,Database:yw,DataSnapshot:Uh,enableLogging:ej,INTERNAL:gj,ServerValue:mj}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.1.5")}(Vd.Z);const xj=new p.OlP("angularfire2.realtimeDatabaseURL"),Rj=new p.OlP("angularfire2.database.use-emulator");let k_=(()=>{class n{constructor(t,r,i,a,l,h,m,w,D,S,P,U,q,ve,ke){this.schedulers=h;const tt=m,vt=(0,Vr.on)(t,l,r);w&&Hg(vt,l,D,P,U,q,S,ve),this.database=(0,Vr.cc)(`${vt.name}.database.${i}`,"AngularFireDatabase",vt.name,()=>{const It=l.runOutsideAngular(()=>vt.database(i||void 0));return tt&&It.useEmulator(...tt),It},[tt])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>iO(this.database,t));let a=i;return r&&(a=r(i)),function Sj(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:cO(r,"update"),set:cO(r,"set"),push:i=>r.push(i),remove:Dj(r),snapshotChanges:i=>uO(n,i,t).pipe(un.iC),stateChanges:i=>lO(n,i,t).pipe(un.iC),auditTrail:i=>function bj(n,e,t){return function Tj(n,e,t){return function Cj(n,e){return vw(n,"value","on",e).pipe((0,gt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function IU(...n){const e=(0,Bu.jO)(n);return(0,Rr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Ys.Xf)(n[m]).subscribe((0,fn.x)(r,w=>{a[m]=w,!h&&!l[m]&&(l[m]=!0,(h=l.every(os.y))&&(l=null))},EU.Z));t.subscribe((0,fn.x)(r,m=>{if(h){const w=[m,...a];r.next(e?e(...w):w)}}))})}(e),(0,gt.U)(([i,a])=>{const l=i.lastKeyToLoad,h=a.map(m=>m.key);return{actions:a,lastKeyToLoad:l,loadedKeys:h}}),function bU(n){return(0,Rr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,fn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,gt.U)(i=>i.actions))}(n,lO(n,e).pipe(Ei((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(un.iC),valueChanges:(i,a)=>uO(n,i,t).pipe((0,gt.U)(h=>h.map(m=>a&&a.idField?Object.assign(Object.assign({},m.payload.val()),{[a.idField]:m.key}):m.payload.val())),un.iC)}}(a,this)}object(t){return function Aj(n,e){return{query:n,snapshotChanges:()=>dO(n,e.schedulers.outsideAngular)().pipe(un.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>dO(n,e.schedulers.outsideAngular)().pipe(un.iC,(0,gt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>iO(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Vr.Dh),p.LFG(Vr.xv,8),p.LFG(xj,8),p.LFG(p.Lbi),p.LFG(p.R0b),p.LFG(un.HU),p.LFG(Rj,8),p.LFG(to,8),p.LFG(Py,8),p.LFG(ky,8),p.LFG(If,8),p.LFG(vE,8),p.LFG(My,8),p.LFG(jg,8),p.LFG(ds,8))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Nj=(()=>{class n{constructor(){Ud.Z.registerVersion("angularfire",un.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[k_]}),n})();const hO_firebase={apiKey:"AIzaSyDEB5qdpI_D371iICJlHKfU67Op1e5JVeA",authDomain:"smartfridgeapp-wvu.firebaseapp.com",databaseURL:"https://smartfridgeapp-wvu-default-rtdb.firebaseio.com",projectId:"smartfridgeapp-wvu",storageBucket:"smartfridgeapp-wvu.appspot.com",messagingSenderId:"21386787655",appId:"1:21386787655:web:cb406f9a8c8ffbaf5faa62",measurementId:"G-YFLKE7K46T"};var Pj=O(4929);let Ea=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(a=>{a&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail(),this.SetUserData(i.user)}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}GoogleAuth(){return this.AuthLogin(new Pj.N).then(t=>{this.router.navigate(["dashboard"])})}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(r=>{this.router.navigate(["dashboard"]),this.SetUserData(r.user)}).catch(r=>{window.alert(r)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}goToPantryItems(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["pantry-items"])})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Kk),p.LFG(to),p.LFG(pi),p.LFG(p.R0b))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),kj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ea))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-sign-in"]],decls:25,vars:0,consts:[["tabindex","0",1,"container-fluid",2,"background-color","#2b2a2a","font-family","Times New Roman","font-size","18px","height","100%"],[1,"row","my-auto","mx-auto",2,"width","100%","height","100px"],[1,"text-white","my-auto"],["tabindex","0",1,"row",2,"background-color","#2b2a2a","font-family","Times New Roman","font-size","18px"],[1,"col-6","my-auto"],[1,"row","mx-auto",2,"width","100%","height","700px"],["src","./assets/WVU.png","alt","...",1,"img-fluid","mx-auto","my-auto",2,"height","50%","width","50%"],[1,"col-6","justify-content-center"],["tabindex","0",1,"displayTable",2,"background-color","#2b2a2a","font-family","Times New Roman","font-size","18px"],["tabindex","0",1,"displayTableCell",2,"background-color","#2b2a2a","font-family","Times New Roman","font-size","18px"],[1,"authBlock",2,"background-color","#2b2a2a"],[1,"text-white"],["tabindex","0",1,"formGroup",2,"background-color","#2b2a2a","font-family","Times New Roman","font-size","18px"],["type","text","placeholder","Email","required","",1,"formControl"],["userName",""],[1,"formGroup"],["type","password","placeholder","Password","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btn-outline-warning",2,"background-color","#e4b123",3,"click"],[1,"forgotPassword"],["routerLink","/forgot-password",2,"color","#e39d10"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"h3",2),p._uU(3," WVU - Samrt Pantry Project"),p.qZA()(),p.TgZ(4,"div",3)(5,"div",4)(6,"div",5),p._UZ(7,"img",6),p.qZA()(),p.TgZ(8,"div",7)(9,"div",8)(10,"div",9)(11,"div",10)(12,"h3",11),p._uU(13,"Sign In"),p.qZA(),p.TgZ(14,"div",12),p._UZ(15,"input",13,14),p.qZA(),p.TgZ(17,"div",15),p._UZ(18,"input",16,17),p.qZA(),p.TgZ(20,"div",15)(21,"input",18),p.NdJ("click",function(){p.CHM(i);const l=p.MAs(16),h=p.MAs(19);return r.authService.SignIn(l.value,h.value)}),p.qZA()(),p.TgZ(22,"div",19)(23,"span",20),p._uU(24,"Forgot Password?"),p.qZA()()()()()()()()}},directives:[ru],styles:[""]}),n})(),Mj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ea))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-sign-up"]],decls:26,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],["type","button",1,"btn","googleBtn",3,"click"],[1,"fab","fa-google-plus-g"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Sign Up"),p.qZA(),p.TgZ(5,"div",3),p._UZ(6,"input",4,5),p.qZA(),p.TgZ(8,"div",3),p._UZ(9,"input",6,7),p.qZA(),p.TgZ(11,"div",3)(12,"input",8),p.NdJ("click",function(){p.CHM(i);const l=p.MAs(7),h=p.MAs(10);return r.authService.SignUp(l.value,h.value)}),p.qZA()(),p.TgZ(13,"div",3)(14,"span",9)(15,"span",10),p._uU(16,"Or"),p.qZA()()(),p.TgZ(17,"div",3)(18,"button",11),p.NdJ("click",function(){return r.authService.GoogleAuth()}),p._UZ(19,"i",12),p._uU(20," Continue with Google "),p.qZA()()(),p.TgZ(21,"div",13)(22,"span"),p._uU(23,"Already have an account? "),p.TgZ(24,"span",14),p._uU(25,"Log In"),p.qZA()()()()()}},directives:[ru],styles:[""]}),n})();function Oj(n,e){if(1&n&&(p.TgZ(0,"div",8)(1,"div",27)(2,"div",28),p._UZ(3,"img",29),p.TgZ(4,"div",30)(5,"h1"),p._uU(6,"Hello: "),p.TgZ(7,"strong"),p._uU(8),p.qZA()(),p.TgZ(9,"p"),p._uU(10,"User ID: "),p.TgZ(11,"strong"),p._uU(12),p.qZA()(),p.TgZ(13,"p"),p._uU(14,"Email: "),p.TgZ(15,"strong"),p._uU(16),p.qZA()(),p.TgZ(17,"p"),p._uU(18,"Email Verified: "),p.TgZ(19,"strong"),p._uU(20),p.qZA()()()()()()),2&n){const t=e.ngIf;p.xp6(3),p.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",p.LSH),p.s9C("alt",t.displayName),p.xp6(5),p.Oqu(t.displayName?t.displayName:"User"),p.xp6(4),p.Oqu(t.uid),p.xp6(4),p.Oqu(t.email),p.xp6(4),p.Oqu(t.emailVerified)}}let Ol=(()=>{class n{constructor(t,r){this.authService=t,this.afAuth=r,this.baseURL="https://smartfridgeapp-wvu-default-rtdb.firebaseio.com/",this.childURL="/pantry-items/4cS4jkHhubh6ZjcZ4hMCtxuRGqb2/-NFqRnti5ZyFIpBCW_yx.json",n.something="",this.afAuth.authState.subscribe(i=>{i?(this.userData=i,n.something=i.uid,console.log(n.something),localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ea),p.Y36(to))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-dashboard"]],decls:33,vars:1,consts:[[1,"container-fliud","bg-light"],["tabindex","0",1,"navbar","fixed-top","flex-md-nowrap","p-0","shadow",2,"background-color","#2b2a2a","font-family","Times New Roman"],[1,"row","ms-1"],[1,"col-4"],["src","assets/WVU.png",1,"brand-logo",2,"height","60px","width","60px"],[1,"col-8"],[1,"text-warning","my-auto"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],["routerLink","/pantry-items",1,"nav-item"],[1,"nav-link"],["xmlns","http://www.w3.org/2000/svg","width","16","height","16","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-safe"],["d","M1 1.5A1.5 1.5 0 0 1 2.5 0h12A1.5 1.5 0 0 1 16 1.5v13a1.5 1.5 0 0 1-1.5 1.5h-12A1.5 1.5 0 0 1 1 14.5V13H.5a.5.5 0 0 1 0-1H1V8.5H.5a.5.5 0 0 1 0-1H1V4H.5a.5.5 0 0 1 0-1H1V1.5zM2.5 1a.5.5 0 0 0-.5.5v13a.5.5 0 0 0 .5.5h12a.5.5 0 0 0 .5-.5v-13a.5.5 0 0 0-.5-.5h-12z"],["d","M13.5 6a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3a.5.5 0 0 1 .5-.5zM4.828 4.464a.5.5 0 0 1 .708 0l1.09 1.09a3.003 3.003 0 0 1 3.476 0l1.09-1.09a.5.5 0 1 1 .707.708l-1.09 1.09c.74 1.037.74 2.44 0 3.476l1.09 1.09a.5.5 0 1 1-.707.708l-1.09-1.09a3.002 3.002 0 0 1-3.476 0l-1.09 1.09a.5.5 0 1 1-.708-.708l1.09-1.09a3.003 3.003 0 0 1 0-3.476l-1.09-1.09a.5.5 0 0 1 0-.708zM6.95 6.586a2 2 0 1 0 2.828 2.828A2 2 0 0 0 6.95 6.586z"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3),p._UZ(4,"img",4),p.qZA(),p.TgZ(5,"div",5)(6,"h5",6),p._uU(7,"WVU-Smart Pantry Project"),p.qZA()()()(),p.TgZ(8,"div",7)(9,"div",8)(10,"nav",9)(11,"div",10)(12,"ul",11)(13,"li",12)(14,"a",13),p._UZ(15,"i",14),p._uU(16,"User Profile "),p.qZA()(),p.TgZ(17,"li",15)(18,"a",16),p.O4$(),p.TgZ(19,"svg",17),p._UZ(20,"path",18)(21,"path",19),p.qZA(),p._uU(22," My Pantry "),p.qZA()(),p.kcU(),p.TgZ(23,"li",12)(24,"a",20),p.NdJ("click",function(){return r.authService.SignOut()}),p._UZ(25,"i",21),p._uU(26,"Log out "),p.qZA()()()()(),p.TgZ(27,"main",22)(28,"div",23)(29,"div",24)(30,"h1",25),p._uU(31,"User Profile"),p.qZA()(),p.YNc(32,Oj,21,6,"div",26),p.qZA()()()()()),2&t&&(p.xp6(32),p.Q6J("ngIf",r.authService.userData))},directives:[ru,tr],styles:[""]}),n})(),Lj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ea))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=p.EpF();p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Reset Password"),p.qZA(),p.TgZ(5,"p",3),p._uU(6," Please enter your email address to request a password reset. "),p.qZA(),p.TgZ(7,"div",4),p._UZ(8,"input",5,6),p.qZA(),p.TgZ(10,"div",4)(11,"input",7),p.NdJ("click",function(){p.CHM(i);const l=p.MAs(9);return r.authService.ForgotPassword(l.value)}),p.qZA()()(),p.TgZ(12,"div",8)(13,"span"),p._uU(14,"Go back to ? "),p.TgZ(15,"span",9),p._uU(16,"Log In"),p.qZA()()()()()}},directives:[ru],styles:[""]}),n})();function Fj(n,e){if(1&n&&(p.TgZ(0,"div",4)(1,"p",9),p._uU(2," We have sent a confirmation email to "),p.TgZ(3,"strong"),p._uU(4),p.qZA(),p._uU(5,". "),p.qZA(),p.TgZ(6,"p",9),p._uU(7," Please check your email and click on the link to verfiy your email address. "),p.qZA()()),2&n){const t=e.ngIf;p.xp6(4),p.Oqu(t.email)}}let Uj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(Ea))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-verify-email"]],decls:15,vars:1,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"],[1,"text-center"]],template:function(t,r){1&t&&(p.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p._uU(4,"Thank You for Registering"),p.qZA(),p.YNc(5,Fj,8,1,"div",3),p.TgZ(6,"div",4)(7,"button",5),p.NdJ("click",function(){return r.authService.SendVerificationMail()}),p._UZ(8,"i",6),p._uU(9," Resend Verification Email "),p.qZA()()(),p.TgZ(10,"div",7)(11,"span"),p._uU(12,"Go back to?"),p.TgZ(13,"span",8),p._uU(14," Sign in"),p.qZA()()()()()),2&t&&(p.xp6(5),p.Q6J("ngIf",r.authService.userData))},directives:[tr,ru],styles:[""]}),n})(),ww=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(Ea),p.LFG(pi))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class fO{}class pO{}class nd{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?this.lazyInit="string"==typeof e?()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),a=i.toLowerCase(),l=t.slice(r+1).trim();this.maybeSetNormalizedName(i,a),this.headers.has(a)?this.headers.get(a).push(l):this.headers.set(a,[l])}})}:()=>{this.headers=new Map,Object.keys(e).forEach(t=>{let r=e[t];const i=t.toLowerCase();"string"==typeof r&&(r=[r]),r.length>0&&(this.headers.set(i,r),this.maybeSetNormalizedName(t,i))})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof nd?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new nd;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof nd?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const a=e.value;if(a){let l=this.headers.get(t);if(!l)return;l=l.filter(h=>-1===a.indexOf(h)),0===l.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,l)}else this.headers.delete(t),this.normalizedNames.delete(t)}}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class Vj{encodeKey(e){return gO(e)}encodeValue(e){return gO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const jj=/%(\d[a-f0-9])/gi,Hj={40:"@","3A":":",24:"$","2C":",","3B":";","2B":"+","3D":"=","3F":"?","2F":"/"};function gO(n){return encodeURIComponent(n).replace(jj,(e,t)=>{var r;return null!==(r=Hj[t])&&void 0!==r?r:e})}function mO(n){return`${n}`}class Vh{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new Vj,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Bj(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const a=i.indexOf("="),[l,h]=-1==a?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,a)),e.decodeValue(i.slice(a+1))],m=t.get(l)||[];m.push(h),t.set(l,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t];this.map.set(t,Array.isArray(r)?r:[r])})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(a=>{t.push({param:r,value:a,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new Vh({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(mO(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(mO(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class $j{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function _O(n){return"undefined"!=typeof ArrayBuffer&&n instanceof ArrayBuffer}function yO(n){return"undefined"!=typeof Blob&&n instanceof Blob}function vO(n){return"undefined"!=typeof FormData&&n instanceof FormData}class Ew{constructor(e,t,r,i){let a;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function Gj(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,a=i):a=r,a&&(this.reportProgress=!!a.reportProgress,this.withCredentials=!!a.withCredentials,a.responseType&&(this.responseType=a.responseType),a.headers&&(this.headers=a.headers),a.context&&(this.context=a.context),a.params&&(this.params=a.params)),this.headers||(this.headers=new nd),this.context||(this.context=new $j),this.params){const l=this.params.toString();if(0===l.length)this.urlWithParams=t;else{const h=t.indexOf("?");this.urlWithParams=t+(-1===h?"?":h<t.length-1?"&":"")+l}}else this.params=new Vh,this.urlWithParams=t}serializeBody(){return null===this.body?null:_O(this.body)||yO(this.body)||vO(this.body)||function qj(n){return"undefined"!=typeof URLSearchParams&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Vh?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||vO(this.body)?null:yO(this.body)?this.body.type||null:_O(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Vh?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){var t;const r=e.method||this.method,i=e.url||this.url,a=e.responseType||this.responseType,l=void 0!==e.body?e.body:this.body,h=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,m=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let w=e.headers||this.headers,D=e.params||this.params;const S=null!==(t=e.context)&&void 0!==t?t:this.context;return void 0!==e.setHeaders&&(w=Object.keys(e.setHeaders).reduce((P,U)=>P.set(U,e.setHeaders[U]),w)),e.setParams&&(D=Object.keys(e.setParams).reduce((P,U)=>P.set(U,e.setParams[U]),D)),new Ew(r,i,l,{params:D,headers:w,context:S,reportProgress:m,responseType:a,withCredentials:h})}}var ri=(()=>((ri=ri||{})[ri.Sent=0]="Sent",ri[ri.UploadProgress=1]="UploadProgress",ri[ri.ResponseHeader=2]="ResponseHeader",ri[ri.DownloadProgress=3]="DownloadProgress",ri[ri.Response=4]="Response",ri[ri.User=5]="User",ri))();class YR{constructor(e,t=200,r="OK"){this.headers=e.headers||new nd,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class QR extends YR{constructor(e={}){super(e),this.type=ri.ResponseHeader}clone(e={}){return new QR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class sT extends YR{constructor(e={}){super(e),this.type=ri.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new sT({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class wO extends YR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function JR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let M_=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let a;if(t instanceof Ew)a=t;else{let m,w;m=i.headers instanceof nd?i.headers:new nd(i.headers),i.params&&(w=i.params instanceof Vh?i.params:new Vh({fromObject:i.params})),a=new Ew(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:w,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const l=et(a).pipe(ci(m=>this.handler.handle(m)));if(t instanceof Ew||"events"===i.observe)return l;const h=l.pipe(qn(m=>m instanceof sT));switch(i.observe||"body"){case"body":switch(a.responseType){case"arraybuffer":return h.pipe((0,gt.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return h.pipe((0,gt.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return h.pipe((0,gt.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return h.pipe((0,gt.U)(m=>m.body))}case"response":return h;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new Vh).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,JR(i,r))}post(t,r,i={}){return this.request("POST",t,JR(i,r))}put(t,r,i={}){return this.request("PUT",t,JR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(fO))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();class EO{constructor(e,t){this.next=e,this.interceptor=t}handle(e){return this.interceptor.intercept(e,this.next)}}const IO=new p.OlP("HTTP_INTERCEPTORS");let Wj=(()=>{class n{intercept(t,r){return r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const zj=/^\)\]\}',?\n/;let bO=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Pn.y(r=>{const i=this.xhrFactory.build();if(i.open(t.method,t.urlWithParams),t.withCredentials&&(i.withCredentials=!0),t.headers.forEach((U,q)=>i.setRequestHeader(U,q.join(","))),t.headers.has("Accept")||i.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const U=t.detectContentTypeHeader();null!==U&&i.setRequestHeader("Content-Type",U)}if(t.responseType){const U=t.responseType.toLowerCase();i.responseType="json"!==U?U:"text"}const a=t.serializeBody();let l=null;const h=()=>{if(null!==l)return l;const U=i.statusText||"OK",q=new nd(i.getAllResponseHeaders()),ve=function Kj(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(i)||t.url;return l=new QR({headers:q,status:i.status,statusText:U,url:ve}),l},m=()=>{let{headers:U,status:q,statusText:ve,url:ke}=h(),tt=null;204!==q&&(tt=void 0===i.response?i.responseText:i.response),0===q&&(q=tt?200:0);let vt=q>=200&&q<300;if("json"===t.responseType&&"string"==typeof tt){const It=tt;tt=tt.replace(zj,"");try{tt=""!==tt?JSON.parse(tt):null}catch(dt){tt=It,vt&&(vt=!1,tt={error:dt,text:tt})}}vt?(r.next(new sT({body:tt,headers:U,status:q,statusText:ve,url:ke||void 0})),r.complete()):r.error(new wO({error:tt,headers:U,status:q,statusText:ve,url:ke||void 0}))},w=U=>{const{url:q}=h(),ve=new wO({error:U,status:i.status||0,statusText:i.statusText||"Unknown Error",url:q||void 0});r.error(ve)};let D=!1;const S=U=>{D||(r.next(h()),D=!0);let q={type:ri.DownloadProgress,loaded:U.loaded};U.lengthComputable&&(q.total=U.total),"text"===t.responseType&&!!i.responseText&&(q.partialText=i.responseText),r.next(q)},P=U=>{let q={type:ri.UploadProgress,loaded:U.loaded};U.lengthComputable&&(q.total=U.total),r.next(q)};return i.addEventListener("load",m),i.addEventListener("error",w),i.addEventListener("timeout",w),i.addEventListener("abort",w),t.reportProgress&&(i.addEventListener("progress",S),null!==a&&i.upload&&i.upload.addEventListener("progress",P)),i.send(a),r.next({type:ri.Sent}),()=>{i.removeEventListener("error",w),i.removeEventListener("abort",w),i.removeEventListener("load",m),i.removeEventListener("timeout",w),t.reportProgress&&(i.removeEventListener("progress",S),null!==a&&i.upload&&i.upload.removeEventListener("progress",P)),i.readyState!==i.DONE&&i.abort()}})}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(dn))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();const XR=new p.OlP("XSRF_COOKIE_NAME"),eN=new p.OlP("XSRF_HEADER_NAME");class CO{}let Zj=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=ba(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(le),p.LFG(p.Lbi),p.LFG(XR))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),tN=(()=>{class n{constructor(t,r){this.tokenService=t,this.headerName=r}intercept(t,r){const i=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||i.startsWith("http://")||i.startsWith("https://"))return r.handle(t);const a=this.tokenService.getToken();return null!==a&&!t.headers.has(this.headerName)&&(t=t.clone({headers:t.headers.set(this.headerName,a)})),r.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(CO),p.LFG(eN))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Yj=(()=>{class n{constructor(t,r){this.backend=t,this.injector=r,this.chain=null}handle(t){if(null===this.chain){const r=this.injector.get(IO,[]);this.chain=r.reduceRight((i,a)=>new EO(i,a),this.backend)}return this.chain.handle(t)}}return n.\u0275fac=function(t){return new(t||n)(p.LFG(pO),p.LFG(p.zs3))},n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),Qj=(()=>{class n{static disable(){return{ngModule:n,providers:[{provide:tN,useClass:Wj}]}}static withOptions(t={}){return{ngModule:n,providers:[t.cookieName?{provide:XR,useValue:t.cookieName}:[],t.headerName?{provide:eN,useValue:t.headerName}:[]]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[tN,{provide:IO,useExisting:tN,multi:!0},{provide:CO,useClass:Zj},{provide:XR,useValue:"XSRF-TOKEN"},{provide:eN,useValue:"X-XSRF-TOKEN"}]}),n})(),Jj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({providers:[M_,{provide:fO,useClass:Yj},bO,{provide:pO,useExisting:bO}],imports:[[Qj.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),n})();function Xj(n,e){1&n&&(p.TgZ(0,"p"),p._uU(1,"Failed fetching info from remote server "),p.qZA())}function eH(n,e){if(1&n&&(p.TgZ(0,"div")(1,"div",15)(2,"div",16)(3,"div",17)(4,"div",18)(5,"ul",19)(6,"li",7)(7,"a",20),p.O4$(),p.TgZ(8,"svg",21),p._UZ(9,"path",22),p.qZA()()()()()(),p.kcU(),p.TgZ(10,"div",23)(11,"nav",24)(12,"div",25)(13,"ul",19)(14,"li",7)(15,"a",26),p._uU(16,"Pantry Items"),p.qZA()(),p.TgZ(17,"li",7)(18,"a",27),p._uU(19,"Other Items"),p.qZA()(),p.TgZ(20,"li",7)(21,"a",28),p._uU(22,"Shopping List"),p.qZA()(),p.TgZ(23,"li",7)(24,"a",29),p._uU(25,"My Recipes"),p.qZA()()()()()(),p.TgZ(26,"div",17)(27,"div",18)(28,"ul",30)(29,"li",7)(30,"a",31),p.O4$(),p.TgZ(31,"svg",32),p._UZ(32,"path",33)(33,"path",34),p.qZA(),p.kcU(),p.TgZ(34,"span",35),p._uU(35),p.qZA()()()()()()()()()),2&n){const t=p.oxw();p.xp6(35),p.hij(" ",t.myName,"")}}let oT=(()=>{class n{constructor(t,r,i,a){this.http=t,this.authService=r,this.afAuth=i,this.db=a,this.printingUID=Ol.something,this.fullURL="my-info/"+this.printingUID,this.myColor="green",this.myName=""}ngOnInit(){console.log("sending get request to the server"),this.getUserInfo(),console.log("Showing User Info"),this.showUserInfo()}getUserInfo(){return console.log("im here "+this.printingUID),this.http.get("https://smartfridgeapp-wvu-default-rtdb.firebaseio.com/my-info/"+this.printingUID+"/Name.json")}showUserInfo(){this.getUserInfo().subscribe(t=>{console.log(t),this.myName=t})}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(M_),p.Y36(Ea),p.Y36(to),p.Y36(k_))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-top-navbar"]],decls:23,vars:2,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarTogglerDemo01","aria-controls","navbarTogglerDemo01","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarTogglerDemo01",1,"collapse","navbar-collapse"],["href","#",1,"navbar-brand"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],["href","#",1,"nav-link"],["href","#","tabindex","-1","aria-disabled","true",1,"nav-link","disabled"],[1,"d-flex"],["type","search","placeholder","Search","aria-label","Search",1,"form-control","me-2"],["type","submit",1,"btn","btn-outline-success"],[4,"ngIf"],[1,"container-fluid",2,"background-color","#2b2a2a","width","auto"],[1,"row"],[1,"col-4"],[1,"container-fluid",2,"background-color","#2b2a2a","height","72px"],[1,"nav","nav-pills","navbar-expand"],["routerLink","/dashboard",1,"nav-link","text-white"],["xmlns","http://www.w3.org/2000/svg","width","25","height","25","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-arrow-left-circle"],["fill-rule","evenodd","d","M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8zm15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H11.5z"],[1,"col","justify-content-center",2,"background-color","#2b2a2a"],[1,"nav-bar","navbar-expand",2,"background-color","#2b2a2a"],[1,"container-fluid","justify-content-center",2,"background-color","#2b2a2a","height","100%"],["routerLink","/pantry-items","routerLinkActive","active",1,"nav-link","text-white"],["routerLink","/other-items","routerLinkActive","active",1,"nav-link","text-white"],["routerLink","/shopping-list","routerLinkActive","active",1,"nav-link","text-white"],["routerLink","/my-recipes","routerLinkActive","active",1,"nav-link","text-white"],[1,"nav","nav-pills","navbar-expand","justify-content-end"],["type","button","id","dropdownMenuButton1","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"nav-link","text-white"],["xmlns","http://www.w3.org/2000/svg","width","22","height","22","fill","currentColor","viewBox","0 0 16 16",1,"bi","bi-person-circle"],["d","M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0z"],["fill-rule","evenodd","d","M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8zm8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1z"],[1,"tab-space"]],template:function(t,r){1&t&&(p.TgZ(0,"nav",0)(1,"div",1)(2,"button",2),p._UZ(3,"span",3),p.qZA(),p.TgZ(4,"div",4)(5,"a",5),p._uU(6,"Hidden brand"),p.qZA(),p.TgZ(7,"ul",6)(8,"li",7)(9,"a",8),p._uU(10,"Home"),p.qZA()(),p.TgZ(11,"li",7)(12,"a",9),p._uU(13,"Link"),p.qZA()(),p.TgZ(14,"li",7)(15,"a",10),p._uU(16,"Disabled"),p.qZA()()(),p.TgZ(17,"form",11),p._UZ(18,"input",12),p.TgZ(19,"button",13),p._uU(20,"Search"),p.qZA()()()()(),p.YNc(21,Xj,2,0,"p",14),p.YNc(22,eH,36,1,"div",14)),2&t&&(p.xp6(21),p.Q6J("ngIf",null==r.myName),p.xp6(1),p.Q6J("ngIf",null!=r.myName))},directives:[tr,yg,Bw],styles:[".nav-pills.nav-links.active[_ngcontent-%COMP%]{background-color:#626262}"]}),n})();function tH(n,e){if(1&n&&(p.TgZ(0,"div")(1,"td")(2,"span",9),p._uU(3),p.qZA()()()),2&n){const t=p.oxw().$implicit;p.xp6(3),p.Oqu(t.D_WeightPercentage)}}function nH(n,e){if(1&n&&(p.TgZ(0,"div")(1,"td")(2,"span",10),p._uU(3),p.qZA()()()),2&n){const t=p.oxw().$implicit;p.xp6(3),p.Oqu(t.D_WeightPercentage)}}function rH(n,e){if(1&n&&(p.TgZ(0,"tbody",7)(1,"tr")(2,"td",7),p._uU(3),p.qZA(),p.TgZ(4,"td"),p._uU(5),p.qZA(),p.TgZ(6,"td"),p._uU(7),p.qZA(),p.YNc(8,tH,4,1,"div",8),p.YNc(9,nH,4,1,"div",8),p.qZA()()),2&n){const t=e.$implicit,r=p.oxw();p.xp6(3),p.Oqu(t.A_Name),p.xp6(2),p.Oqu(t.B_Brand),p.xp6(2),p.Oqu(t.C_ExpirationDate),p.xp6(1),p.Q6J("ngIf",1==t.D_WeightPercentage[0]&&0==t.D_WeightPercentage[1]),p.xp6(1),p.Q6J("ngIf","red"==r.remainingColor)}}let iH=(()=>{class n{constructor(t,r,i,a){this.http=t,this.authService=r,this.afAuth=i,this.db=a,this.printingUID=Ol.something,this.remainingColor="red",this.percentage=0,this.fullURL="pantry-items/"+this.printingUID}getAll(){return this.db.list(this.fullURL).snapshotChanges().pipe((0,gt.U)(t=>t.map(r=>Object.assign(Object.assign({},r.payload.val()),{id:r.payload.key}))))}ngOnInit(){this.getAll().subscribe(h=>this.item=h),console.log(Ol.something);const r=new Date("2022-12-14");console.log(r);const i=r.toUTCString();console.log("this is faham "+i),r.getTime();const l=Math.floor(r.getTime()/1e3);console.log(l+" this is unix")}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(M_),p.Y36(Ea),p.Y36(to),p.Y36(k_))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-pantry-items"]],decls:18,vars:1,consts:[[1,"text-center","mb-5","mt-5"],[1,"bg-light","mb-0"],[1,"container","justify-content-center"],[1,"container"],["Id","table-hover",1,"tabletable-striped","table","table-hover","background-color-dark","text-dark"],["scope","col"],["class"," text-dark",4,"ngFor","ngForOf"],[1,"text-dark"],[4,"ngIf"],[1,"badge","bg-success","rounded-pill"],[1,"badge","bg-danger","rounded-pill"]],template:function(t,r){1&t&&(p._UZ(0,"app-top-navbar"),p.TgZ(1,"h1",0),p._uU(2,"My Pantry Items "),p.qZA(),p.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),p._uU(10,"Name"),p.qZA(),p.TgZ(11,"th",5),p._uU(12,"Brand"),p.qZA(),p.TgZ(13,"th",5),p._uU(14,"Expiration Date"),p.qZA(),p.TgZ(15,"th",5),p._uU(16,"Remaining Amount"),p.qZA()()(),p.YNc(17,rH,10,5,"tbody",6),p.qZA()()()()),2&t&&(p.xp6(17),p.Q6J("ngForOf",r.item))},directives:[oT,Tn,tr],encapsulation:2}),n})();function sH(n,e){if(1&n&&(p.TgZ(0,"tbody",7)(1,"tr")(2,"td",7),p._uU(3),p.qZA(),p.TgZ(4,"td"),p._uU(5),p.qZA()()()),2&n){const t=e.$implicit;p.xp6(3),p.Oqu(t.A_Name),p.xp6(2),p.Oqu(t.B_Brand)}}let oH=(()=>{class n{constructor(t,r,i,a){this.http=t,this.authService=r,this.afAuth=i,this.db=a,this.printingUID=Ol.something,this.fullURL="shopping-list/"+this.printingUID}getAll(){return this.db.list(this.fullURL).snapshotChanges().pipe((0,gt.U)(t=>t.map(r=>Object.assign(Object.assign({},r.payload.val()),{id:r.payload.key}))))}ngOnInit(){this.getAll().subscribe(t=>this.item=t),console.log(Ol.something)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(M_),p.Y36(Ea),p.Y36(to),p.Y36(k_))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-shopping-list"]],decls:14,vars:1,consts:[[1,"text-center","mb-5","mt-5"],[1,"bg-light","mb-0"],[1,"container","justify-content-center"],[1,"container"],["Id","table-hover",1,"tabletable-striped","table","table-hover","background-color-dark","text-dark"],["scope","col"],["class"," text-dark",4,"ngFor","ngForOf"],[1,"text-dark"]],template:function(t,r){1&t&&(p._UZ(0,"app-top-navbar"),p.TgZ(1,"h1",0),p._uU(2,"My Shopping List "),p.qZA(),p.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"table",4)(7,"thead")(8,"tr")(9,"th",5),p._uU(10,"Name"),p.qZA(),p.TgZ(11,"th",5),p._uU(12,"Brand"),p.qZA()()(),p.YNc(13,sH,6,2,"tbody",6),p.qZA()()()()),2&t&&(p.xp6(13),p.Q6J("ngForOf",r.item))},directives:[oT,Tn],encapsulation:2}),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function aH(n,e){if(1&n&&(p.TgZ(0,"tbody",8)(1,"tr")(2,"td",8),p._uU(3),p.qZA(),p.TgZ(4,"td"),p._uU(5),p.qZA(),p.TgZ(6,"td"),p._uU(7),p.qZA()()()),2&n){const t=e.$implicit;p.xp6(3),p.Oqu(t.A_Name),p.xp6(2),p.Oqu(t.B_Brand),p.xp6(2),p.Oqu(t.C_ExpirationDate)}}let uH=(()=>{class n{constructor(t,r,i,a){this.http=t,this.authService=r,this.afAuth=i,this.db=a,this.printingUID=Ol.something,this.fullURL="non-pantry-items/"+this.printingUID}getAll(){return this.db.list(this.fullURL).snapshotChanges().pipe((0,gt.U)(t=>t.map(r=>Object.assign(Object.assign({},r.payload.val()),{id:r.payload.key}))))}ngOnInit(){this.getAll().subscribe(t=>this.item=t),console.log(Ol.something)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(M_),p.Y36(Ea),p.Y36(to),p.Y36(k_))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-other-items"]],decls:17,vars:1,consts:[[1,"container-fluid",2,"width","100%","height","100%"],[1,"text-center","mb-5","mt-5"],[1,"bg-light","mb-0"],[1,"container","justify-content-center"],[1,"container"],["Id","table-hover",1,"tabletable-striped","table","table-hover","background-color-dark","text-dark"],["scope","col"],["class"," text-dark",4,"ngFor","ngForOf"],[1,"text-dark"]],template:function(t,r){1&t&&(p._UZ(0,"app-top-navbar"),p.TgZ(1,"div",0)(2,"h1",1),p._uU(3,"Other Items "),p.qZA(),p.TgZ(4,"div",2)(5,"div",3)(6,"div",4)(7,"table",5)(8,"thead")(9,"tr")(10,"th",6),p._uU(11,"Name"),p.qZA(),p.TgZ(12,"th",6),p._uU(13,"Brand"),p.qZA(),p.TgZ(14,"th",6),p._uU(15,"Expiration Date"),p.qZA()()(),p.YNc(16,aH,8,3,"tbody",7),p.qZA()()()()()),2&t&&(p.xp6(16),p.Q6J("ngForOf",r.item))},directives:[oT,Tn],encapsulation:2}),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})();function lH(n,e){if(1&n&&(p.TgZ(0,"div",4),p._UZ(1,"img",5),p.TgZ(2,"div",6)(3,"h3",7),p._uU(4),p.qZA(),p.TgZ(5,"p",8),p._uU(6),p.qZA(),p.TgZ(7,"p",8),p._uU(8),p.qZA(),p.TgZ(9,"p",8),p._uU(10),p.qZA(),p.TgZ(11,"a",9),p._uU(12,"mk"),p.qZA(),p.TgZ(13,"div",10)(14,"button",11),p._uU(15,"View Recipe"),p.qZA()()()()),2&n){const t=e.$implicit;p.xp6(1),p.s9C("src",t.G_ImagePath,p.LSH),p.xp6(3),p.Oqu(t.A_RecipeName),p.xp6(2),p.hij(" Calories: ",t.D_Calories," Cal"),p.xp6(2),p.hij(" Coocking Time: ",t.C_CookingTime," mins"),p.xp6(2),p.hij(" Servings: ",t.E_Servings," servings")}}const cH=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:kj},{path:"register-user",component:Mj},{path:"dashboard",component:Ol,canActivate:[ww]},{path:"forgot-password",component:Lj},{path:"verify-email-address",component:Uj},{path:"pantry-items",component:iH,canActivate:[ww]},{path:"shopping-list",component:oH,canActivate:[ww]},{path:"other-items",component:uH,canActivate:[ww]},{path:"my-recipes",component:(()=>{class n{constructor(t,r,i,a){this.http=t,this.authService=r,this.afAuth=i,this.db=a,this.printingUID=Ol.something,this.branchURL="/recipes/global/",this.recipeNum=1,this.fullURL=this.branchURL,console.log(this.fullURL)}getAll(){return this.db.list(this.fullURL).snapshotChanges().pipe((0,gt.U)(t=>t.map(r=>Object.assign(Object.assign({},r.payload.val()),{id:r.payload.key}))))}ngOnInit(){console.log(this.db.list("recipes")),this.getAll().subscribe(t=>this.recipe=t),console.log(Ol.something)}}return n.\u0275fac=function(t){return new(t||n)(p.Y36(M_),p.Y36(Ea),p.Y36(to),p.Y36(k_))},n.\u0275cmp=p.Xpm({type:n,selectors:[["app-my-recipes"]],decls:6,vars:1,consts:[[1,"container-fluid",2,"width","80%"],[1,"text-center","mb-5","mt-5"],[1,"card-group","justify-content-center"],["class","cards border border-dark border-2 me-4 mb-5","style","width: 24rem;",4,"ngFor","ngForOf"],[1,"cards","border","border-dark","border-2","me-4","mb-5",2,"width","24rem"],["alt","...",1,"card-img-top",2,"height","350px","width","378px",3,"src"],[1,"card-body","justify-content-center"],[1,"card-num","text-center","fw-bold"],[1,"card-title","text-center"],["href","#",1,"visually-hidden-focusable","stretched-link","text-center"],[1,"d-grid","gap-2"],["type","button","routerLink","",1,"btn","btn-warning"]],template:function(t,r){1&t&&(p._UZ(0,"app-top-navbar"),p.TgZ(1,"div",0)(2,"h1",1),p._uU(3,"My Recipes "),p.qZA(),p.TgZ(4,"div",2),p.YNc(5,lH,16,5,"div",3),p.qZA()()),2&t&&(p.xp6(5),p.Q6J("ngForOf",r.recipe))},directives:[oT,Tn,ru],styles:[".cards[_ngcontent-%COMP%]:hover{box-shadow:5px 6px 6px 2px #000;transform:scale(1.1)}"]}),n.\u0275prov=p.Yz7({token:n,factory:n.\u0275fac}),n})(),canActivate:[ww]}];let dH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n}),n.\u0275inj=p.cJS({imports:[[Ww.forRoot(cH)],Ww]}),n})(),hH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=p.oAB({type:n,bootstrap:[_f]}),n.\u0275inj=p.cJS({providers:[Ea],imports:[[Ba,Vr.hO.initializeApp(hO_firebase),wE,wU,gI,Nj,dH,Jj]]}),n})();Ou().bootstrapModule(hH).catch(n=>console.error(n))},5867:(at,De,O)=>{"use strict";O.d(De,{Mq:()=>p.getApp,C6:()=>p.getApps});var p=O(9681);(0,p.registerVersion)("firebase","9.6.7","app")},127:(at,De,O)=>{"use strict";O.d(De,{Z:()=>p.Z});var p=O(3942);p.Z.registerVersion("firebase","9.6.7","app-compat")},5881:(at,De,O)=>{"use strict";O.r(De);var p=O(5861),B=O(3942),k=O(4929),ae=O(2090),le=(O(9681),O(1877),O(4859));function ue(){return window}function H(){return(H=(0,p.Z)(function*(oe,Z,z){var Te;const{BuildInfo:qe}=ue();(0,k.ap)(Z.sessionId,"AuthEvent did not contain a session ID");const ot=yield ce(Z.sessionId),At={};return(0,k.aq)()?At.ibi=qe.packageName:(0,k.ar)()?At.apn=qe.packageName:(0,k.as)(oe,"operation-not-supported-in-this-environment"),qe.displayName&&(At.appDisplayName=qe.displayName),At.sessionId=ot,(0,k.at)(oe,z,Z.type,void 0,null!==(Te=Z.eventId)&&void 0!==Te?Te:void 0,At)})).apply(this,arguments)}function He(){return(He=(0,p.Z)(function*(oe){const{BuildInfo:Z}=ue(),z={};(0,k.aq)()?z.iosBundleId=Z.packageName:(0,k.ar)()?z.androidPackageName=Z.packageName:(0,k.as)(oe,"operation-not-supported-in-this-environment"),yield(0,k.au)(oe,z)})).apply(this,arguments)}function je(){return(je=(0,p.Z)(function*(oe,Z,z){const{cordova:Te}=ue();let qe=()=>{};try{yield new Promise((ot,At)=>{let Bt=null;function Ot(){var Lt;ot();const Lr=null===(Lt=Te.plugins.browsertab)||void 0===Lt?void 0:Lt.close;"function"==typeof Lr&&Lr(),"function"==typeof(null==z?void 0:z.close)&&z.close()}function Bn(){Bt||(Bt=window.setTimeout(()=>{At((0,k.av)(oe,"redirect-cancelled-by-user"))},2e3))}function ii(){"visible"===(null==document?void 0:document.visibilityState)&&Bn()}Z.addPassiveListener(Ot),document.addEventListener("resume",Bn,!1),(0,k.ar)()&&document.addEventListener("visibilitychange",ii,!1),qe=()=>{Z.removePassiveListener(Ot),document.removeEventListener("resume",Bn,!1),document.removeEventListener("visibilitychange",ii,!1),Bt&&window.clearTimeout(Bt)}})}finally{qe()}})).apply(this,arguments)}function ce(oe){return Re.apply(this,arguments)}function Re(){return(Re=(0,p.Z)(function*(oe){const Z=Ne(oe),z=yield crypto.subtle.digest("SHA-256",Z);return Array.from(new Uint8Array(z)).map(qe=>qe.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Ne(oe){if((0,k.ap)(/[0-9a-zA-Z]+/.test(oe),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(oe);const Z=new ArrayBuffer(oe.length),z=new Uint8Array(Z);for(let Te=0;Te<oe.length;Te++)z[Te]=oe.charCodeAt(Te);return z}class Ce extends k.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(Z=>{this.resolveInialized=Z})}addPassiveListener(Z){this.passiveListeners.add(Z)}removePassiveListener(Z){this.passiveListeners.delete(Z)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(Z){return this.resolveInialized(),this.passiveListeners.forEach(z=>z(Z)),super.onEvent(Z)}initialized(){var Z=this;return(0,p.Z)(function*(){yield Z.initPromise})()}}function re(oe){return Qe.apply(this,arguments)}function Qe(){return(Qe=(0,p.Z)(function*(oe){const Z=yield fe()._get(ye(oe));return Z&&(yield fe()._remove(ye(oe))),Z})).apply(this,arguments)}function pe(){const oe=[],Z="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let z=0;z<20;z++){const Te=Math.floor(Math.random()*Z.length);oe.push(Z.charAt(Te))}return oe.join("")}function fe(){return(0,k.ax)(k.b)}function ye(oe){return(0,k.ay)("authEvent",oe.config.apiKey,oe.name)}function wt(oe){if(!(null==oe?void 0:oe.includes("?")))return{};const[Z,...z]=oe.split("?");return(0,ae.zd)(z.join("?"))}function it(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,k.av)("no-auth-event")}}function $t(){var oe;return(null===(oe=null==self?void 0:self.location)||void 0===oe?void 0:oe.protocol)||null}function In(oe=(0,ae.z$)()){return!("file:"!==$t()&&"ionic:"!==$t()||!oe.toLowerCase().match(/iphone|ipad|ipod|android/))}function yi(){try{const oe=self.localStorage,Z=k.aG();if(oe)return oe.setItem(Z,"1"),oe.removeItem(Z),!function Yi(oe=(0,ae.z$)()){return function Yn(){return(0,ae.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Dr(oe=(0,ae.z$)()){return/Edge\/\d+/.test(oe)}(oe)}()||(0,ae.hl)()}catch(oe){return Ui()&&(0,ae.hl)()}return!1}function Ui(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function Vn(){return(function en(){return"http:"===$t()||"https:"===$t()}()||(0,ae.ru)()||In())&&!function Fi(){return(0,ae.b$)()||(0,ae.UG)()}()&&yi()&&!Ui()}function Qi(){return In()&&"undefined"!=typeof document}function Or(){return(Or=(0,p.Z)(function*(){return!!Qi()&&new Promise(oe=>{const Z=setTimeout(()=>{oe(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(Z),oe(!0)})})})).apply(this,arguments)}const Wt={LOCAL:"local",NONE:"none",SESSION:"session"},Sr=k.aw,ht="persistence";function Ct(oe){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,p.Z)(function*(oe){yield oe._initializationPromise;const Z=St(),z=k.ay(ht,oe.config.apiKey,oe.name);Z&&Z.setItem(z,oe._getPersistence())})).apply(this,arguments)}function St(){var oe;try{return(null===(oe=function xn(){return"undefined"!=typeof window?window:null}())||void 0===oe?void 0:oe.sessionStorage)||null}catch(Z){return null}}const st=k.aw;class Je{constructor(){this.browserResolver=k.ax(k.k),this.cordovaResolver=k.ax(class Rn{constructor(){this._redirectPersistence=k.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=k.aA}_initialize(Z){var z=this;return(0,p.Z)(function*(){const Te=Z._key();let qe=z.eventManagers.get(Te);return qe||(qe=new Ce(Z),z.eventManagers.set(Te,qe),z.attachCallbackListeners(Z,qe)),qe})()}_openPopup(Z){(0,k.as)(Z,"operation-not-supported-in-this-environment")}_openRedirect(Z,z,Te,qe){var ot=this;return(0,p.Z)(function*(){!function Q(oe){var Z,z,Te,qe,ot,At,Bt,Ot,Bn,ii;const Lt=ue();(0,k.aw)("function"==typeof(null===(Z=null==Lt?void 0:Lt.universalLinks)||void 0===Z?void 0:Z.subscribe),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,k.aw)(void 0!==(null===(z=null==Lt?void 0:Lt.BuildInfo)||void 0===z?void 0:z.packageName),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,k.aw)("function"==typeof(null===(ot=null===(qe=null===(Te=null==Lt?void 0:Lt.cordova)||void 0===Te?void 0:Te.plugins)||void 0===qe?void 0:qe.browsertab)||void 0===ot?void 0:ot.openUrl),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aw)("function"==typeof(null===(Ot=null===(Bt=null===(At=null==Lt?void 0:Lt.cordova)||void 0===At?void 0:At.plugins)||void 0===Bt?void 0:Bt.browsertab)||void 0===Ot?void 0:Ot.isAvailable),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,k.aw)("function"==typeof(null===(ii=null===(Bn=null==Lt?void 0:Lt.cordova)||void 0===Bn?void 0:Bn.InAppBrowser)||void 0===ii?void 0:ii.open),oe,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(Z);const At=yield ot._initialize(Z);yield At.initialized(),At.resetRedirect(),(0,k.aB)(),yield ot._originValidation(Z);const Bt=function we(oe,Z,z=null){return{type:Z,eventId:z,urlResponse:null,sessionId:pe(),postBody:null,tenantId:oe.tenantId,error:(0,k.av)(oe,"no-auth-event")}}(Z,Te,qe);yield function ze(oe,Z){return fe()._set(ye(oe),Z)}(Z,Bt);const Ot=yield function G(oe,Z,z){return H.apply(this,arguments)}(Z,Bt,z),Bn=yield function xe(oe){const{cordova:Z}=ue();return new Promise(z=>{Z.plugins.browsertab.isAvailable(Te=>{let qe=null;Te?Z.plugins.browsertab.openUrl(oe):qe=Z.InAppBrowser.open(oe,(0,k.ao)()?"_blank":"_system","location=yes"),z(qe)})})}(Ot);return function Le(oe,Z,z){return je.apply(this,arguments)}(Z,At,Bn)})()}_isIframeWebStorageSupported(Z,z){throw new Error("Method not implemented.")}_originValidation(Z){const z=Z._key();return this.originValidationPromises[z]||(this.originValidationPromises[z]=function ne(oe){return He.apply(this,arguments)}(Z)),this.originValidationPromises[z]}attachCallbackListeners(Z,z){const{universalLinks:Te,handleOpenURL:qe,BuildInfo:ot}=ue(),At=setTimeout((0,p.Z)(function*(){yield re(Z),z.onEvent(it())}),500),Bt=function(){var ii=(0,p.Z)(function*(Lt){clearTimeout(At);const Lr=yield re(Z);let Ji=null;Lr&&(null==Lt?void 0:Lt.url)&&(Ji=function X(oe,Z){var z,Te;const qe=function de(oe){const Z=wt(oe),z=Z.link?decodeURIComponent(Z.link):void 0,Te=wt(z).link,qe=Z.deep_link_id?decodeURIComponent(Z.deep_link_id):void 0;return wt(qe).link||qe||Te||z||oe}(Z);if(qe.includes("/__/auth/callback")){const ot=wt(qe),At=ot.firebaseError?function Fe(oe){try{return JSON.parse(oe)}catch(Z){return null}}(decodeURIComponent(ot.firebaseError)):null,Bt=null===(Te=null===(z=null==At?void 0:At.code)||void 0===z?void 0:z.split("auth/"))||void 0===Te?void 0:Te[1],Ot=Bt?(0,k.av)(Bt):null;return Ot?{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,error:Ot,urlResponse:null,sessionId:null,postBody:null}:{type:oe.type,eventId:oe.eventId,tenantId:oe.tenantId,sessionId:oe.sessionId,urlResponse:qe,postBody:null}}return null}(Lr,Lt.url)),z.onEvent(Ji||it())});return function(Lr){return ii.apply(this,arguments)}}();void 0!==Te&&"function"==typeof Te.subscribe&&Te.subscribe(null,Bt);const Ot=qe,Bn=`${ot.packageName.toLowerCase()}://`;ue().handleOpenURL=function(){var ii=(0,p.Z)(function*(Lt){if(Lt.toLowerCase().startsWith(Bn)&&Bt({url:Lt}),"function"==typeof Ot)try{Ot(Lt)}catch(Lr){console.error(Lr)}});return function(Lt){return ii.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=k.a,this._completeRedirectFn=k.aA}_initialize(Z){var z=this;return(0,p.Z)(function*(){return yield z.selectUnderlyingResolver(),z.assertedUnderlyingResolver._initialize(Z)})()}_openPopup(Z,z,Te,qe){var ot=this;return(0,p.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openPopup(Z,z,Te,qe)})()}_openRedirect(Z,z,Te,qe){var ot=this;return(0,p.Z)(function*(){return yield ot.selectUnderlyingResolver(),ot.assertedUnderlyingResolver._openRedirect(Z,z,Te,qe)})()}_isIframeWebStorageSupported(Z,z){this.assertedUnderlyingResolver._isIframeWebStorageSupported(Z,z)}_originValidation(Z){return this.assertedUnderlyingResolver._originValidation(Z)}get _shouldInitProactively(){return Qi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return st(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var Z=this;return(0,p.Z)(function*(){if(Z.underlyingResolver)return;const z=yield function pt(){return Or.apply(this,arguments)}();Z.underlyingResolver=z?Z.cordovaResolver:Z.browserResolver})()}}function Vs(oe){return oe.unwrap()}function jt(oe){return Qn(oe)}function Qn(oe){const{_tokenResponse:Z}=oe instanceof ae.ZR?oe.customData:oe;if(!Z)return null;if(!(oe instanceof ae.ZR)&&"temporaryProof"in Z&&"phoneNumber"in Z)return k.P.credentialFromResult(oe);const z=Z.providerId;if(!z||z===k.o.PASSWORD)return null;let Te;switch(z){case k.o.GOOGLE:Te=k.N;break;case k.o.FACEBOOK:Te=k.M;break;case k.o.GITHUB:Te=k.Q;break;case k.o.TWITTER:Te=k.V;break;default:const{oauthIdToken:qe,oauthAccessToken:ot,oauthTokenSecret:At,pendingToken:Bt,nonce:Ot}=Z;return ot||At||qe||Bt?Bt?z.startsWith("saml.")?k.aJ._create(z,Bt):k.I._fromParams({providerId:z,signInMethod:z,pendingToken:Bt,idToken:qe,accessToken:ot}):new k.T(z).credential({idToken:qe,accessToken:ot,rawNonce:Ot}):null}return oe instanceof ae.ZR?Te.credentialFromError(oe):Te.credentialFromResult(oe)}function wn(oe,Z){return Z.catch(z=>{throw z instanceof ae.ZR&&function Bs(oe,Z){var z;const Te=null===(z=Z.customData)||void 0===z?void 0:z._tokenResponse;if("auth/multi-factor-auth-required"===Z.code)Z.resolver=new K(oe,k.am(oe,Z));else if(Te){const qe=Qn(Z),ot=Z;qe&&(ot.credential=qe,ot.tenantId=Te.tenantId||void 0,ot.email=Te.email||void 0,ot.phoneNumber=Te.phoneNumber||void 0)}}(oe,z),z}).then(z=>{const qe=z.user;return{operationType:z.operationType,credential:jt(z),additionalUserInfo:k.ak(z),user:be.getOrCreate(qe)}})}function j(oe,Z){return W.apply(this,arguments)}function W(){return(W=(0,p.Z)(function*(oe,Z){const z=yield Z;return{verificationId:z.verificationId,confirm:Te=>wn(oe,z.confirm(Te))}})).apply(this,arguments)}class K{constructor(Z,z){this.resolver=z,this.auth=function _s(oe){return oe.wrapped()}(Z)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(Z){return wn(Vs(this.auth),this.resolver.resolveSignIn(Z))}}class be{constructor(Z){this._delegate=Z,this.multiFactor=k.an(Z)}static getOrCreate(Z){return be.USER_MAP.has(Z)||be.USER_MAP.set(Z,new be(Z)),be.USER_MAP.get(Z)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(Z){return this._delegate.getIdTokenResult(Z)}getIdToken(Z){return this._delegate.getIdToken(Z)}linkAndRetrieveDataWithCredential(Z){return this.linkWithCredential(Z)}linkWithCredential(Z){var z=this;return(0,p.Z)(function*(){return wn(z.auth,k.Y(z._delegate,Z))})()}linkWithPhoneNumber(Z,z){var Te=this;return(0,p.Z)(function*(){return j(Te.auth,k.l(Te._delegate,Z,z))})()}linkWithPopup(Z){var z=this;return(0,p.Z)(function*(){return wn(z.auth,k.d(z._delegate,Z,Je))})()}linkWithRedirect(Z){var z=this;return(0,p.Z)(function*(){return yield Ct(k.aC(z.auth)),k.g(z._delegate,Z,Je)})()}reauthenticateAndRetrieveDataWithCredential(Z){return this.reauthenticateWithCredential(Z)}reauthenticateWithCredential(Z){var z=this;return(0,p.Z)(function*(){return wn(z.auth,k.Z(z._delegate,Z))})()}reauthenticateWithPhoneNumber(Z,z){return j(this.auth,k.r(this._delegate,Z,z))}reauthenticateWithPopup(Z){return wn(this.auth,k.e(this._delegate,Z,Je))}reauthenticateWithRedirect(Z){var z=this;return(0,p.Z)(function*(){return yield Ct(k.aC(z.auth)),k.h(z._delegate,Z,Je)})()}sendEmailVerification(Z){return k.aa(this._delegate,Z)}unlink(Z){var z=this;return(0,p.Z)(function*(){return yield k.aj(z._delegate,Z),z})()}updateEmail(Z){return k.af(this._delegate,Z)}updatePassword(Z){return k.ag(this._delegate,Z)}updatePhoneNumber(Z){return k.u(this._delegate,Z)}updateProfile(Z){return k.ae(this._delegate,Z)}verifyBeforeUpdateEmail(Z,z){return k.ab(this._delegate,Z,z)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}be.USER_MAP=new WeakMap;const ie=k.aw;let Ke=(()=>{class oe{constructor(z,Te){if(this.app=z,Te.isInitialized())return this._delegate=Te.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:qe}=z.options;ie(qe,"invalid-api-key",{appName:z.name}),ie(qe,"invalid-api-key",{appName:z.name});const ot="undefined"!=typeof window?Je:void 0;this._delegate=Te.initialize({options:{persistence:zt(qe,z.name),popupRedirectResolver:ot}}),this._delegate._updateErrorMap(k.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?be.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(z){this._delegate.languageCode=z}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(z){this._delegate.tenantId=z}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(z,Te){k.E(this._delegate,z,Te)}applyActionCode(z){return k.a1(this._delegate,z)}checkActionCode(z){return k.a2(this._delegate,z)}confirmPasswordReset(z,Te){return k.a0(this._delegate,z,Te)}createUserWithEmailAndPassword(z,Te){var qe=this;return(0,p.Z)(function*(){return wn(qe._delegate,k.a4(qe._delegate,z,Te))})()}fetchProvidersForEmail(z){return this.fetchSignInMethodsForEmail(z)}fetchSignInMethodsForEmail(z){return k.a9(this._delegate,z)}isSignInWithEmailLink(z){return k.a7(this._delegate,z)}getRedirectResult(){var z=this;return(0,p.Z)(function*(){ie(Vn(),z._delegate,"operation-not-supported-in-this-environment");const Te=yield k.j(z._delegate,Je);return Te?wn(z._delegate,Promise.resolve(Te)):{credential:null,user:null}})()}addFrameworkForLogging(z){!function lr(oe,Z){(0,k.aC)(oe)._logFramework(Z)}(this._delegate,z)}onAuthStateChanged(z,Te,qe){const{next:ot,error:At,complete:Bt}=ft(z,Te,qe);return this._delegate.onAuthStateChanged(ot,At,Bt)}onIdTokenChanged(z,Te,qe){const{next:ot,error:At,complete:Bt}=ft(z,Te,qe);return this._delegate.onIdTokenChanged(ot,At,Bt)}sendSignInLinkToEmail(z,Te){return k.a6(this._delegate,z,Te)}sendPasswordResetEmail(z,Te){return k.$(this._delegate,z,Te||void 0)}setPersistence(z){var Te=this;return(0,p.Z)(function*(){let qe;switch(function lt(oe,Z){Sr(Object.values(Wt).includes(Z),oe,"invalid-persistence-type"),(0,ae.b$)()?Sr(Z!==Wt.SESSION,oe,"unsupported-persistence-type"):(0,ae.UG)()?Sr(Z===Wt.NONE,oe,"unsupported-persistence-type"):Ui()?Sr(Z===Wt.NONE||Z===Wt.LOCAL&&(0,ae.hl)(),oe,"unsupported-persistence-type"):Sr(Z===Wt.NONE||yi(),oe,"unsupported-persistence-type")}(Te._delegate,z),z){case Wt.SESSION:qe=k.a;break;case Wt.LOCAL:qe=(yield k.ax(k.i)._isAvailable())?k.i:k.b;break;case Wt.NONE:qe=k.K;break;default:return k.as("argument-error",{appName:Te._delegate.name})}return Te._delegate.setPersistence(qe)})()}signInAndRetrieveDataWithCredential(z){return this.signInWithCredential(z)}signInAnonymously(){return wn(this._delegate,k.W(this._delegate))}signInWithCredential(z){return wn(this._delegate,k.X(this._delegate,z))}signInWithCustomToken(z){return wn(this._delegate,k._(this._delegate,z))}signInWithEmailAndPassword(z,Te){return wn(this._delegate,k.a5(this._delegate,z,Te))}signInWithEmailLink(z,Te){return wn(this._delegate,k.a8(this._delegate,z,Te))}signInWithPhoneNumber(z,Te){return j(this._delegate,k.s(this._delegate,z,Te))}signInWithPopup(z){var Te=this;return(0,p.Z)(function*(){return ie(Vn(),Te._delegate,"operation-not-supported-in-this-environment"),wn(Te._delegate,k.c(Te._delegate,z,Je))})()}signInWithRedirect(z){var Te=this;return(0,p.Z)(function*(){return ie(Vn(),Te._delegate,"operation-not-supported-in-this-environment"),yield Ct(Te._delegate),k.f(Te._delegate,z,Je)})()}updateCurrentUser(z){return this._delegate.updateCurrentUser(z)}verifyPasswordResetCode(z){return k.a3(this._delegate,z)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return oe.Persistence=Wt,oe})();function ft(oe,Z,z){let Te=oe;"function"!=typeof oe&&({next:Te,error:Z,complete:z}=oe);const qe=Te;return{next:At=>qe(At&&be.getOrCreate(At)),error:Z,complete:z}}function zt(oe,Z){const z=function cr(oe,Z){const z=St();if(!z)return[];const Te=k.ay(ht,oe,Z);switch(z.getItem(Te)){case Wt.NONE:return[k.K];case Wt.LOCAL:return[k.i,k.a];case Wt.SESSION:return[k.a];default:return[]}}(oe,Z);if("undefined"!=typeof self&&!z.includes(k.i)&&z.push(k.i),"undefined"!=typeof window)for(const Te of[k.b,k.a])z.includes(Te)||z.push(Te);return z.includes(k.K)||z.push(k.K),z}class on{constructor(){this.providerId="phone",this._delegate=new k.P(Vs(B.Z.auth()))}static credential(Z,z){return k.P.credential(Z,z)}verifyPhoneNumber(Z,z){return this._delegate.verifyPhoneNumber(Z,z)}unwrap(){return this._delegate}}on.PHONE_SIGN_IN_METHOD=k.P.PHONE_SIGN_IN_METHOD,on.PROVIDER_ID=k.P.PROVIDER_ID;const Jn=k.aw;class dr{constructor(Z,z,Te=B.Z.app()){var qe;Jn(null===(qe=Te.options)||void 0===qe?void 0:qe.apiKey,"invalid-api-key",{appName:Te.name}),this._delegate=new k.R(Z,z,Te.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Xn(oe){oe.INTERNAL.registerComponent(new le.wA("auth-compat",Z=>{const z=Z.getProvider("app-compat").getImmediate(),Te=Z.getProvider("auth");return new Ke(z,Te)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:k.A.EMAIL_SIGNIN,PASSWORD_RESET:k.A.PASSWORD_RESET,RECOVER_EMAIL:k.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:k.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:k.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:k.A.VERIFY_EMAIL}},EmailAuthProvider:k.L,FacebookAuthProvider:k.M,GithubAuthProvider:k.Q,GoogleAuthProvider:k.N,OAuthProvider:k.T,SAMLAuthProvider:k.U,PhoneAuthProvider:on,PhoneMultiFactorGenerator:k.m,RecaptchaVerifier:dr,TwitterAuthProvider:k.V,Auth:Ke,AuthCredential:k.G,Error:ae.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),oe.registerVersion("@firebase/auth-compat","0.2.9")}(B.Z)},2940:function(at,De){!function(O){"use strict";function p(Q){return Array.prototype.slice.call(Q)}function B(Q){return new Promise(function(ce,Re){Q.onsuccess=function(){ce(Q.result)},Q.onerror=function(){Re(Q.error)}})}function k(Q,ce,Re){var Ne,he=new Promise(function(Ce,we){B(Ne=Q[ce].apply(Q,Re)).then(Ce,we)});return he.request=Ne,he}function ae(Q,ce,Re){var Ne=k(Q,ce,Re);return Ne.then(function(he){if(he)return new G(he,Ne.request)})}function se(Q,ce,Re){Re.forEach(function(Ne){Object.defineProperty(Q.prototype,Ne,{get:function(){return this[ce][Ne]},set:function(he){this[ce][Ne]=he}})})}function me(Q,ce,Re,Ne){Ne.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return k(this[ce],he,arguments)})})}function le(Q,ce,Re,Ne){Ne.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return this[ce][he].apply(this[ce],arguments)})})}function ue(Q,ce,Re,Ne){Ne.forEach(function(he){he in Re.prototype&&(Q.prototype[he]=function(){return ae(this[ce],he,arguments)})})}function _e(Q){this._index=Q}function G(Q,ce){this._cursor=Q,this._request=ce}function H(Q){this._store=Q}function ne(Q){this._tx=Q,this.complete=new Promise(function(ce,Re){Q.oncomplete=function(){ce()},Q.onerror=function(){Re(Q.error)},Q.onabort=function(){Re(Q.error)}})}function He(Q,ce,Re){this._db=Q,this.oldVersion=ce,this.transaction=new ne(Re)}function xe(Q){this._db=Q}se(_e,"_index",["name","keyPath","multiEntry","unique"]),me(_e,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),ue(_e,"_index",IDBIndex,["openCursor","openKeyCursor"]),se(G,"_cursor",["direction","key","primaryKey","value"]),me(G,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(Q){Q in IDBCursor.prototype&&(G.prototype[Q]=function(){var ce=this,Re=arguments;return Promise.resolve().then(function(){return ce._cursor[Q].apply(ce._cursor,Re),B(ce._request).then(function(Ne){if(Ne)return new G(Ne,ce._request)})})})}),H.prototype.createIndex=function(){return new _e(this._store.createIndex.apply(this._store,arguments))},H.prototype.index=function(){return new _e(this._store.index.apply(this._store,arguments))},se(H,"_store",["name","keyPath","indexNames","autoIncrement"]),me(H,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),ue(H,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),le(H,"_store",IDBObjectStore,["deleteIndex"]),ne.prototype.objectStore=function(){return new H(this._tx.objectStore.apply(this._tx,arguments))},se(ne,"_tx",["objectStoreNames","mode"]),le(ne,"_tx",IDBTransaction,["abort"]),He.prototype.createObjectStore=function(){return new H(this._db.createObjectStore.apply(this._db,arguments))},se(He,"_db",["name","version","objectStoreNames"]),le(He,"_db",IDBDatabase,["deleteObjectStore","close"]),xe.prototype.transaction=function(){return new ne(this._db.transaction.apply(this._db,arguments))},se(xe,"_db",["name","version","objectStoreNames"]),le(xe,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(Q){[H,_e].forEach(function(ce){Q in ce.prototype&&(ce.prototype[Q.replace("open","iterate")]=function(){var Re=p(arguments),Ne=Re[Re.length-1],he=this._store||this._index,Ce=he[Q].apply(he,Re.slice(0,-1));Ce.onsuccess=function(){Ne(Ce.result)}})})}),[_e,H].forEach(function(Q){Q.prototype.getAll||(Q.prototype.getAll=function(ce,Re){var Ne=this,he=[];return new Promise(function(Ce){Ne.iterateCursor(ce,function(we){we?(he.push(we.value),void 0===Re||he.length!=Re?we.continue():Ce(he)):Ce(he)})})})}),O.openDb=function Le(Q,ce,Re){var Ne=k(indexedDB,"open",[Q,ce]),he=Ne.request;return he&&(he.onupgradeneeded=function(Ce){Re&&Re(new He(he.result,Ce.oldVersion,he.transaction))}),Ne.then(function(Ce){return new xe(Ce)})},O.deleteDb=function je(Q){return k(indexedDB,"deleteDatabase",[Q])},Object.defineProperty(O,"__esModule",{value:!0})}(De)},8306:(at,De,O)=>{"use strict";O.d(De,{y:()=>G});var p=O(930),B=O(727),k=O(8822),ae=O(4671);var le=O(2416),ue=O(576),_e=O(2806);let G=(()=>{class xe{constructor(je){je&&(this._subscribe=je)}lift(je){const Q=new xe;return Q.source=this,Q.operator=je,Q}subscribe(je,Q,ce){const Re=function He(xe){return xe&&xe instanceof p.Lv||function ne(xe){return xe&&(0,ue.m)(xe.next)&&(0,ue.m)(xe.error)&&(0,ue.m)(xe.complete)}(xe)&&(0,B.Nn)(xe)}(je)?je:new p.Hp(je,Q,ce);return(0,_e.x)(()=>{const{operator:Ne,source:he}=this;Re.add(Ne?Ne.call(Re,he):he?this._subscribe(Re):this._trySubscribe(Re))}),Re}_trySubscribe(je){try{return this._subscribe(je)}catch(Q){je.error(Q)}}forEach(je,Q){return new(Q=H(Q))((ce,Re)=>{const Ne=new p.Hp({next:he=>{try{je(he)}catch(Ce){Re(Ce),Ne.unsubscribe()}},error:Re,complete:ce});this.subscribe(Ne)})}_subscribe(je){var Q;return null===(Q=this.source)||void 0===Q?void 0:Q.subscribe(je)}[k.L](){return this}pipe(...je){return function me(xe){return 0===xe.length?ae.y:1===xe.length?xe[0]:function(je){return xe.reduce((Q,ce)=>ce(Q),je)}}(je)(this)}toPromise(je){return new(je=H(je))((Q,ce)=>{let Re;this.subscribe(Ne=>Re=Ne,Ne=>ce(Ne),()=>Q(Re))})}}return xe.create=Le=>new xe(Le),xe})();function H(xe){var Le;return null!==(Le=null!=xe?xe:le.v.Promise)&&void 0!==Le?Le:Promise}},7579:(at,De,O)=>{"use strict";O.d(De,{x:()=>le});var p=O(8306),B=O(727);const ae=(0,O(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var se=O(8737),me=O(2806);let le=(()=>{class _e extends p.y{constructor(){super(),this.closed=!1,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const ne=new ue(this,this);return ne.operator=H,ne}_throwIfClosed(){if(this.closed)throw new ae}next(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){const ne=this.observers.slice();for(const He of ne)He.next(H)}})}error(H){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:ne}=this;for(;ne.length;)ne.shift().error(H)}})}complete(){(0,me.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:ne,isStopped:He,observers:xe}=this;return ne||He?B.Lc:(xe.push(H),new B.w0(()=>(0,se.P)(xe,H)))}_checkFinalizedStatuses(H){const{hasError:ne,thrownError:He,isStopped:xe}=this;ne?H.error(He):xe&&H.complete()}asObservable(){const H=new p.y;return H.source=this,H}}return _e.create=(G,H)=>new ue(G,H),_e})();class ue extends le{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===ne||ne.call(H,G)}error(G){var H,ne;null===(ne=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===ne||ne.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,ne;return null!==(ne=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==ne?ne:B.Lc}}},930:(at,De,O)=>{"use strict";O.d(De,{Hp:()=>je,Lv:()=>ne});var p=O(576),B=O(727),k=O(2416),ae=O(7849),se=O(5032);const me=_e("C",void 0,void 0);function _e(he,Ce,we){return{kind:he,value:Ce,error:we}}var G=O(3410),H=O(2806);class ne extends B.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,B.Nn)(Ce)&&Ce.add(this)):this.destination=Ne}static create(Ce,we,ze){return new je(Ce,we,ze)}next(Ce){this.isStopped?Re(function ue(he){return _e("N",he,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?Re(function le(he){return _e("E",void 0,he)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?Re(me,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function xe(he,Ce){return He.call(he,Ce)}class Le{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:we}=this;if(we.next)try{we.next(Ce)}catch(ze){Q(ze)}}error(Ce){const{partialObserver:we}=this;if(we.error)try{we.error(Ce)}catch(ze){Q(ze)}else Q(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(we){Q(we)}}}class je extends ne{constructor(Ce,we,ze){let re;if(super(),(0,p.m)(Ce)||!Ce)re={next:null!=Ce?Ce:void 0,error:null!=we?we:void 0,complete:null!=ze?ze:void 0};else{let Qe;this&&k.v.useDeprecatedNextContext?(Qe=Object.create(Ce),Qe.unsubscribe=()=>this.unsubscribe(),re={next:Ce.next&&xe(Ce.next,Qe),error:Ce.error&&xe(Ce.error,Qe),complete:Ce.complete&&xe(Ce.complete,Qe)}):re=Ce}this.destination=new Le(re)}}function Q(he){k.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(he):(0,ae.h)(he)}function Re(he,Ce){const{onStoppedNotification:we}=k.v;we&&G.z.setTimeout(()=>we(he,Ce))}const Ne={closed:!0,next:se.Z,error:function ce(he){throw he},complete:se.Z}},727:(at,De,O)=>{"use strict";O.d(De,{Lc:()=>me,w0:()=>se,Nn:()=>le});var p=O(576);const k=(0,O(3888).d)(_e=>function(H){_e(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((ne,He)=>`${He+1}) ${ne.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ae=O(8737);class se{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._teardowns=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const xe of H)xe.remove(this);else H.remove(this);const{initialTeardown:ne}=this;if((0,p.m)(ne))try{ne()}catch(xe){G=xe instanceof k?xe.errors:[xe]}const{_teardowns:He}=this;if(He){this._teardowns=null;for(const xe of He)try{ue(xe)}catch(Le){G=null!=G?G:[],Le instanceof k?G=[...G,...Le.errors]:G.push(Le)}}if(G)throw new k(G)}}add(G){var H;if(G&&G!==this)if(this.closed)ue(G);else{if(G instanceof se){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._teardowns=null!==(H=this._teardowns)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,ae.P)(H,G)}remove(G){const{_teardowns:H}=this;H&&(0,ae.P)(H,G),G instanceof se&&G._removeParent(this)}}se.EMPTY=(()=>{const _e=new se;return _e.closed=!0,_e})();const me=se.EMPTY;function le(_e){return _e instanceof se||_e&&"closed"in _e&&(0,p.m)(_e.remove)&&(0,p.m)(_e.add)&&(0,p.m)(_e.unsubscribe)}function ue(_e){(0,p.m)(_e)?_e():_e.unsubscribe()}},2416:(at,De,O)=>{"use strict";O.d(De,{v:()=>p});const p={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(at,De,O)=>{"use strict";O.d(De,{E:()=>B});const B=new(O(8306).y)(se=>se.complete())},8996:(at,De,O)=>{"use strict";O.d(De,{D:()=>Ce});var p=O(8421),B=O(5363),k=O(9468),me=O(8306),ue=O(2202),_e=O(576),G=O(9672);function ne(we,ze){if(!we)throw new Error("Iterable cannot be null");return new me.y(re=>{(0,G.f)(re,ze,()=>{const Qe=we[Symbol.asyncIterator]();(0,G.f)(re,ze,()=>{Qe.next().then(X=>{X.done?re.complete():re.next(X.value)})},0,!0)})})}var He=O(3670),xe=O(8239),Le=O(1144),je=O(6495),Q=O(2206),ce=O(4532),Re=O(3260);function Ce(we,ze){return ze?function he(we,ze){if(null!=we){if((0,He.c)(we))return function ae(we,ze){return(0,p.Xf)(we).pipe((0,k.R)(ze),(0,B.Q)(ze))}(we,ze);if((0,Le.z)(we))return function le(we,ze){return new me.y(re=>{let Qe=0;return ze.schedule(function(){Qe===we.length?re.complete():(re.next(we[Qe++]),re.closed||this.schedule())})})}(we,ze);if((0,xe.t)(we))return function se(we,ze){return(0,p.Xf)(we).pipe((0,k.R)(ze),(0,B.Q)(ze))}(we,ze);if((0,Q.D)(we))return ne(we,ze);if((0,je.T)(we))return function H(we,ze){return new me.y(re=>{let Qe;return(0,G.f)(re,ze,()=>{Qe=we[ue.h](),(0,G.f)(re,ze,()=>{let X,pe;try{({value:X,done:pe}=Qe.next())}catch(fe){return void re.error(fe)}pe?re.complete():re.next(X)},0,!0)}),()=>(0,_e.m)(null==Qe?void 0:Qe.return)&&Qe.return()})}(we,ze);if((0,Re.L)(we))return function Ne(we,ze){return ne((0,Re.Q)(we),ze)}(we,ze)}throw(0,ce.z)(we)}(we,ze):(0,p.Xf)(we)}},8421:(at,De,O)=>{"use strict";O.d(De,{Xf:()=>He});var p=O(655),B=O(1144),k=O(8239),ae=O(8306),se=O(3670),me=O(2206),le=O(4532),ue=O(6495),_e=O(3260),G=O(576),H=O(7849),ne=O(8822);function He(he){if(he instanceof ae.y)return he;if(null!=he){if((0,se.c)(he))return function xe(he){return new ae.y(Ce=>{const we=he[ne.L]();if((0,G.m)(we.subscribe))return we.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(he);if((0,B.z)(he))return function Le(he){return new ae.y(Ce=>{for(let we=0;we<he.length&&!Ce.closed;we++)Ce.next(he[we]);Ce.complete()})}(he);if((0,k.t)(he))return function je(he){return new ae.y(Ce=>{he.then(we=>{Ce.closed||(Ce.next(we),Ce.complete())},we=>Ce.error(we)).then(null,H.h)})}(he);if((0,me.D)(he))return ce(he);if((0,ue.T)(he))return function Q(he){return new ae.y(Ce=>{for(const we of he)if(Ce.next(we),Ce.closed)return;Ce.complete()})}(he);if((0,_e.L)(he))return function Re(he){return ce((0,_e.Q)(he))}(he)}throw(0,le.z)(he)}function ce(he){return new ae.y(Ce=>{(function Ne(he,Ce){var we,ze,re,Qe;return(0,p.mG)(this,void 0,void 0,function*(){try{for(we=(0,p.KL)(he);!(ze=yield we.next()).done;)if(Ce.next(ze.value),Ce.closed)return}catch(X){re={error:X}}finally{try{ze&&!ze.done&&(Qe=we.return)&&(yield Qe.call(we))}finally{if(re)throw re.error}}Ce.complete()})})(he,Ce).catch(we=>Ce.error(we))})}},6451:(at,De,O)=>{"use strict";O.d(De,{T:()=>me});var p=O(8189),B=O(8421),k=O(515),ae=O(7669),se=O(8996);function me(...le){const ue=(0,ae.yG)(le),_e=(0,ae._6)(le,1/0),G=le;return G.length?1===G.length?(0,B.Xf)(G[0]):(0,p.J)(_e)((0,se.D)(G,ue)):k.E}},5403:(at,De,O)=>{"use strict";O.d(De,{x:()=>B});var p=O(930);function B(ae,se,me,le,ue){return new k(ae,se,me,le,ue)}class k extends p.Lv{constructor(se,me,le,ue,_e,G){super(se),this.onFinalize=_e,this.shouldUnsubscribe=G,this._next=me?function(H){try{me(H)}catch(ne){se.error(ne)}}:super._next,this._error=ue?function(H){try{ue(H)}catch(ne){se.error(ne)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(H){se.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var se;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:me}=this;super.unsubscribe(),!me&&(null===(se=this.onFinalize)||void 0===se||se.call(this))}}}},4004:(at,De,O)=>{"use strict";O.d(De,{U:()=>k});var p=O(4482),B=O(5403);function k(ae,se){return(0,p.e)((me,le)=>{let ue=0;me.subscribe((0,B.x)(le,_e=>{le.next(ae.call(se,_e,ue++))}))})}},8189:(at,De,O)=>{"use strict";O.d(De,{J:()=>k});var p=O(5577),B=O(4671);function k(ae=1/0){return(0,p.z)(B.y,ae)}},5577:(at,De,O)=>{"use strict";O.d(De,{z:()=>ue});var p=O(4004),B=O(8421),k=O(4482),ae=O(9672),se=O(5403),le=O(576);function ue(_e,G,H=1/0){return(0,le.m)(G)?ue((ne,He)=>(0,p.U)((xe,Le)=>G(ne,xe,He,Le))((0,B.Xf)(_e(ne,He))),H):("number"==typeof G&&(H=G),(0,k.e)((ne,He)=>function me(_e,G,H,ne,He,xe,Le,je){const Q=[];let ce=0,Re=0,Ne=!1;const he=()=>{Ne&&!Q.length&&!ce&&G.complete()},Ce=ze=>ce<ne?we(ze):Q.push(ze),we=ze=>{xe&&G.next(ze),ce++;let re=!1;(0,B.Xf)(H(ze,Re++)).subscribe((0,se.x)(G,Qe=>{null==He||He(Qe),xe?Ce(Qe):G.next(Qe)},()=>{re=!0},void 0,()=>{if(re)try{for(ce--;Q.length&&ce<ne;){const Qe=Q.shift();Le?(0,ae.f)(G,Le,()=>we(Qe)):we(Qe)}he()}catch(Qe){G.error(Qe)}}))};return _e.subscribe((0,se.x)(G,Ce,()=>{Ne=!0,he()})),()=>{null==je||je()}}(ne,He,_e,H)))}},5363:(at,De,O)=>{"use strict";O.d(De,{Q:()=>ae});var p=O(9672),B=O(4482),k=O(5403);function ae(se,me=0){return(0,B.e)((le,ue)=>{le.subscribe((0,k.x)(ue,_e=>(0,p.f)(ue,se,()=>ue.next(_e),me),()=>(0,p.f)(ue,se,()=>ue.complete(),me),_e=>(0,p.f)(ue,se,()=>ue.error(_e),me)))})}},3099:(at,De,O)=>{"use strict";O.d(De,{B:()=>me});var p=O(8996),B=O(5698),k=O(7579),ae=O(930),se=O(4482);function me(ue={}){const{connector:_e=(()=>new k.x),resetOnError:G=!0,resetOnComplete:H=!0,resetOnRefCountZero:ne=!0}=ue;return He=>{let xe=null,Le=null,je=null,Q=0,ce=!1,Re=!1;const Ne=()=>{null==Le||Le.unsubscribe(),Le=null},he=()=>{Ne(),xe=je=null,ce=Re=!1},Ce=()=>{const we=xe;he(),null==we||we.unsubscribe()};return(0,se.e)((we,ze)=>{Q++,!Re&&!ce&&Ne();const re=je=null!=je?je:_e();ze.add(()=>{Q--,0===Q&&!Re&&!ce&&(Le=le(Ce,ne))}),re.subscribe(ze),xe||(xe=new ae.Hp({next:Qe=>re.next(Qe),error:Qe=>{Re=!0,Ne(),Le=le(he,G,Qe),re.error(Qe)},complete:()=>{ce=!0,Ne(),Le=le(he,H),re.complete()}}),(0,p.D)(we).subscribe(xe))})(He)}}function le(ue,_e,...G){return!0===_e?(ue(),null):!1===_e?null:_e(...G).pipe((0,B.q)(1)).subscribe(()=>ue())}},9468:(at,De,O)=>{"use strict";O.d(De,{R:()=>B});var p=O(4482);function B(k,ae=0){return(0,p.e)((se,me)=>{me.add(k.schedule(()=>se.subscribe(me),ae))})}},5698:(at,De,O)=>{"use strict";O.d(De,{q:()=>ae});var p=O(515),B=O(4482),k=O(5403);function ae(se){return se<=0?()=>p.E:(0,B.e)((me,le)=>{let ue=0;me.subscribe((0,k.x)(le,_e=>{++ue<=se&&(le.next(_e),se<=ue&&le.complete())}))})}},8505:(at,De,O)=>{"use strict";O.d(De,{b:()=>se});var p=O(576),B=O(4482),k=O(5403),ae=O(4671);function se(me,le,ue){const _e=(0,p.m)(me)||le||ue?{next:me,error:le,complete:ue}:me;return _e?(0,B.e)((G,H)=>{var ne;null===(ne=_e.subscribe)||void 0===ne||ne.call(_e);let He=!0;G.subscribe((0,k.x)(H,xe=>{var Le;null===(Le=_e.next)||void 0===Le||Le.call(_e,xe),H.next(xe)},()=>{var xe;He=!1,null===(xe=_e.complete)||void 0===xe||xe.call(_e),H.complete()},xe=>{var Le;He=!1,null===(Le=_e.error)||void 0===Le||Le.call(_e,xe),H.error(xe)},()=>{var xe,Le;He&&(null===(xe=_e.unsubscribe)||void 0===xe||xe.call(_e)),null===(Le=_e.finalize)||void 0===Le||Le.call(_e)}))}):ae.y}},4408:(at,De,O)=>{"use strict";O.d(De,{o:()=>se});var p=O(727);class B extends p.w0{constructor(le,ue){super()}schedule(le,ue=0){return this}}const k={setInterval(...me){const{delegate:le}=k;return((null==le?void 0:le.setInterval)||setInterval)(...me)},clearInterval(me){const{delegate:le}=k;return((null==le?void 0:le.clearInterval)||clearInterval)(me)},delegate:void 0};var ae=O(8737);class se extends B{constructor(le,ue){super(le,ue),this.scheduler=le,this.work=ue,this.pending=!1}schedule(le,ue=0){if(this.closed)return this;this.state=le;const _e=this.id,G=this.scheduler;return null!=_e&&(this.id=this.recycleAsyncId(G,_e,ue)),this.pending=!0,this.delay=ue,this.id=this.id||this.requestAsyncId(G,this.id,ue),this}requestAsyncId(le,ue,_e=0){return k.setInterval(le.flush.bind(le,this),_e)}recycleAsyncId(le,ue,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return ue;k.clearInterval(ue)}execute(le,ue){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(le,ue);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ue){let G,_e=!1;try{this.work(le)}catch(H){_e=!0,G=H||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:le,scheduler:ue}=this,{actions:_e}=ue;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ae.P)(_e,this),null!=le&&(this.id=this.recycleAsyncId(ue,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(at,De,O)=>{"use strict";O.d(De,{v:()=>k});var p=O(6063);class B{constructor(se,me=B.now){this.schedulerActionCtor=se,this.now=me}schedule(se,me=0,le){return new this.schedulerActionCtor(this,se).schedule(le,me)}}B.now=p.l.now;class k extends B{constructor(se,me=B.now){super(se,me),this.actions=[],this._active=!1,this._scheduled=void 0}flush(se){const{actions:me}=this;if(this._active)return void me.push(se);let le;this._active=!0;do{if(le=se.execute(se.state,se.delay))break}while(se=me.shift());if(this._active=!1,le){for(;se=me.shift();)se.unsubscribe();throw le}}}},4986:(at,De,O)=>{"use strict";O.d(De,{z:()=>k});var p=O(4408);const k=new(O(7565).v)(p.o)},6063:(at,De,O)=>{"use strict";O.d(De,{l:()=>p});const p={now:()=>(p.delegate||Date).now(),delegate:void 0}},3410:(at,De,O)=>{"use strict";O.d(De,{z:()=>p});const p={setTimeout(...B){const{delegate:k}=p;return((null==k?void 0:k.setTimeout)||setTimeout)(...B)},clearTimeout(B){const{delegate:k}=p;return((null==k?void 0:k.clearTimeout)||clearTimeout)(B)},delegate:void 0}},2202:(at,De,O)=>{"use strict";O.d(De,{h:()=>B});const B=function p(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(at,De,O)=>{"use strict";O.d(De,{L:()=>p});const p="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(at,De,O)=>{"use strict";O.d(De,{_6:()=>me,jO:()=>ae,yG:()=>se});var p=O(576);function k(le){return le[le.length-1]}function ae(le){return(0,p.m)(k(le))?le.pop():void 0}function se(le){return function B(le){return le&&(0,p.m)(le.schedule)}(k(le))?le.pop():void 0}function me(le,ue){return"number"==typeof k(le)?le.pop():ue}},8737:(at,De,O)=>{"use strict";function p(B,k){if(B){const ae=B.indexOf(k);0<=ae&&B.splice(ae,1)}}O.d(De,{P:()=>p})},3888:(at,De,O)=>{"use strict";function p(B){const ae=B(se=>{Error.call(se),se.stack=(new Error).stack});return ae.prototype=Object.create(Error.prototype),ae.prototype.constructor=ae,ae}O.d(De,{d:()=>p})},2806:(at,De,O)=>{"use strict";O.d(De,{x:()=>k,O:()=>ae});var p=O(2416);let B=null;function k(se){if(p.v.useDeprecatedSynchronousErrorHandling){const me=!B;if(me&&(B={errorThrown:!1,error:null}),se(),me){const{errorThrown:le,error:ue}=B;if(B=null,le)throw ue}}else se()}function ae(se){p.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=se)}},9672:(at,De,O)=>{"use strict";function p(B,k,ae,se=0,me=!1){const le=k.schedule(function(){ae(),me?B.add(this.schedule(null,se)):this.unsubscribe()},se);if(B.add(le),!me)return le}O.d(De,{f:()=>p})},4671:(at,De,O)=>{"use strict";function p(B){return B}O.d(De,{y:()=>p})},1144:(at,De,O)=>{"use strict";O.d(De,{z:()=>p});const p=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(at,De,O)=>{"use strict";O.d(De,{D:()=>B});var p=O(576);function B(k){return Symbol.asyncIterator&&(0,p.m)(null==k?void 0:k[Symbol.asyncIterator])}},576:(at,De,O)=>{"use strict";function p(B){return"function"==typeof B}O.d(De,{m:()=>p})},3670:(at,De,O)=>{"use strict";O.d(De,{c:()=>k});var p=O(8822),B=O(576);function k(ae){return(0,B.m)(ae[p.L])}},6495:(at,De,O)=>{"use strict";O.d(De,{T:()=>k});var p=O(2202),B=O(576);function k(ae){return(0,B.m)(null==ae?void 0:ae[p.h])}},8239:(at,De,O)=>{"use strict";O.d(De,{t:()=>B});var p=O(576);function B(k){return(0,p.m)(null==k?void 0:k.then)}},3260:(at,De,O)=>{"use strict";O.d(De,{Q:()=>k,L:()=>ae});var p=O(655),B=O(576);function k(se){return(0,p.FC)(this,arguments,function*(){const le=se.getReader();try{for(;;){const{value:ue,done:_e}=yield(0,p.qq)(le.read());if(_e)return yield(0,p.qq)(void 0);yield yield(0,p.qq)(ue)}}finally{le.releaseLock()}})}function ae(se){return(0,B.m)(null==se?void 0:se.getReader)}},4482:(at,De,O)=>{"use strict";O.d(De,{A:()=>B,e:()=>k});var p=O(576);function B(ae){return(0,p.m)(null==ae?void 0:ae.lift)}function k(ae){return se=>{if(B(se))return se.lift(function(me){try{return ae(me,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(at,De,O)=>{"use strict";function p(){}O.d(De,{Z:()=>p})},7849:(at,De,O)=>{"use strict";O.d(De,{h:()=>k});var p=O(2416),B=O(3410);function k(ae){B.z.setTimeout(()=>{const{onUnhandledError:se}=p.v;if(!se)throw ae;se(ae)})}},4532:(at,De,O)=>{"use strict";function p(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}O.d(De,{z:()=>p})},655:(at,De,O)=>{"use strict";function ae(X,pe){var fe={};for(var ye in X)Object.prototype.hasOwnProperty.call(X,ye)&&pe.indexOf(ye)<0&&(fe[ye]=X[ye]);if(null!=X&&"function"==typeof Object.getOwnPropertySymbols){var Fe=0;for(ye=Object.getOwnPropertySymbols(X);Fe<ye.length;Fe++)pe.indexOf(ye[Fe])<0&&Object.prototype.propertyIsEnumerable.call(X,ye[Fe])&&(fe[ye[Fe]]=X[ye[Fe]])}return fe}function ue(X,pe,fe,ye){return new(fe||(fe=Promise))(function(de,wt){function Zt(it){try{ut(ye.next(it))}catch(lr){wt(lr)}}function Rn(it){try{ut(ye.throw(it))}catch(lr){wt(lr)}}function ut(it){it.done?de(it.value):function Fe(de){return de instanceof fe?de:new fe(function(wt){wt(de)})}(it.value).then(Zt,Rn)}ut((ye=ye.apply(X,pe||[])).next())})}function Q(X){return this instanceof Q?(this.v=X,this):new Q(X)}function ce(X,pe,fe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Fe,ye=fe.apply(X,pe||[]),de=[];return Fe={},wt("next"),wt("throw"),wt("return"),Fe[Symbol.asyncIterator]=function(){return this},Fe;function wt(sn){ye[sn]&&(Fe[sn]=function(vr){return new Promise(function(Yt,$t){de.push([sn,vr,Yt,$t])>1||Zt(sn,vr)})})}function Zt(sn,vr){try{!function Rn(sn){sn.value instanceof Q?Promise.resolve(sn.value.v).then(ut,it):lr(de[0][2],sn)}(ye[sn](vr))}catch(Yt){lr(de[0][3],Yt)}}function ut(sn){Zt("next",sn)}function it(sn){Zt("throw",sn)}function lr(sn,vr){sn(vr),de.shift(),de.length&&Zt(de[0][0],de[0][1])}}function Ne(X){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var fe,pe=X[Symbol.asyncIterator];return pe?pe.call(X):(X=function ne(X){var pe="function"==typeof Symbol&&Symbol.iterator,fe=pe&&X[pe],ye=0;if(fe)return fe.call(X);if(X&&"number"==typeof X.length)return{next:function(){return X&&ye>=X.length&&(X=void 0),{value:X&&X[ye++],done:!X}}};throw new TypeError(pe?"Object is not iterable.":"Symbol.iterator is not defined.")}(X),fe={},ye("next"),ye("throw"),ye("return"),fe[Symbol.asyncIterator]=function(){return this},fe);function ye(de){fe[de]=X[de]&&function(wt){return new Promise(function(Zt,Rn){!function Fe(de,wt,Zt,Rn){Promise.resolve(Rn).then(function(ut){de({value:ut,done:Zt})},wt)}(Zt,Rn,(wt=X[de](wt)).done,wt.value)})}}}O.d(De,{_T:()=>ae,mG:()=>ue,qq:()=>Q,FC:()=>ce,KL:()=>Ne})},5e3:(at,De,O)=>{"use strict";O.d(De,{deG:()=>Zh,tb:()=>cp,AFp:()=>Km,ip1:()=>zm,CZH:()=>Il,hGG:()=>ps,z2F:()=>Zc,sBO:()=>Ub,Sil:()=>bl,_Vd:()=>Qf,EJc:()=>Wc,SBq:()=>ih,qLn:()=>gf,vpe:()=>An,tBr:()=>Qs,XFs:()=>pt,OlP:()=>kn,zs3:()=>no,ZZ4:()=>r_,aQg:()=>Cr,soG:()=>dp,YKP:()=>Yv,h0i:()=>Oc,PXZ:()=>Mb,R0b:()=>ln,FiY:()=>Ur,Lbi:()=>g0,g9A:()=>p0,Qsj:()=>fu,FYo:()=>qv,JOm:()=>ra,tp0:()=>Wr,Rgc:()=>rp,dDg:()=>Cl,q4F:()=>zv,GfV:()=>sh,s_b:()=>Om,ifc:()=>St,eFA:()=>pp,G48:()=>_p,X6Q:()=>mp,_c5:()=>Tl,VLi:()=>kb,c2e:()=>xb,zSh:()=>bf,wAp:()=>Et,vHH:()=>Le,cg1:()=>Lf,kL8:()=>OI,dqk:()=>jt,sIi:()=>au,CqO:()=>av,QGY:()=>qd,F4k:()=>ov,RDi:()=>dd,AaK:()=>ue,TTD:()=>Aa,xp6:()=>UT,uIk:()=>so,Suo:()=>vl,Xpm:()=>on,lG2:()=>Te,Yz7:()=>Yt,cJS:()=>en,oAB:()=>oe,Yjl:()=>qe,Y36:()=>Sf,_UZ:()=>sv,qZA:()=>Af,TgZ:()=>em,EpF:()=>iI,LFG:()=>$e,$8M:()=>Ka,$Z:()=>eI,NdJ:()=>Ro,CRH:()=>Fm,kcU:()=>L_,O4$:()=>O_,oxw:()=>uI,Q6J:()=>rv,s9C:()=>Wd,iGM:()=>mu,MAs:()=>$E,CHM:()=>Gl,LSH:()=>Rd,YNc:()=>zy,_uU:()=>gv,Oqu:()=>mv,hij:()=>Nf});var p=O(7579),B=O(727),k=O(8306),ae=O(6451),se=O(3099);function me(s){for(let o in s)if(s[o]===me)return o;throw Error("Could not find renamed property on target object.")}function ue(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(ue).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const G=me({__forward_ref__:me});function H(s){return s.__forward_ref__=H,s.toString=function(){return ue(this())},s}function ne(s){return function He(s){return"function"==typeof s&&s.hasOwnProperty(G)&&s.__forward_ref__===H}(s)?s():s}class Le extends Error{constructor(o,u){super(function je(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,u)),this.code=o}}function Q(s){return"string"==typeof s?s:null==s?"":String(s)}function ce(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Q(s)}function Ce(s,o){const u=o?` in ${o}`:"";throw new Le(-201,`No provider for ${ce(s)} found${u}`)}function ut(s,o){null==s&&function it(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function Yt(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function en(s){return{providers:s.providers||[],imports:s.imports||[]}}function In(s){return Fi(s,yi)||Fi(s,Vn)}function Fi(s,o){return s.hasOwnProperty(o)?s[o]:null}function Yi(s){return s&&(s.hasOwnProperty(Ui)||s.hasOwnProperty(Qi))?s[Ui]:null}const yi=me({\u0275prov:me}),Ui=me({\u0275inj:me}),Vn=me({ngInjectableDef:me}),Qi=me({ngInjectorDef:me});var pt=(()=>((pt=pt||{})[pt.Default=0]="Default",pt[pt.Host=1]="Host",pt[pt.Self=2]="Self",pt[pt.SkipSelf=4]="SkipSelf",pt[pt.Optional=8]="Optional",pt))();let Or;function Wt(s){const o=Or;return Or=s,o}function Sr(s,o,u){const c=In(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&pt.Optional?null:void 0!==o?o:void Ce(ue(s),"Injector")}function lt(s){return{toString:s}.toString()}var Ct=(()=>((Ct=Ct||{})[Ct.OnPush=0]="OnPush",Ct[Ct.Default=1]="Default",Ct))(),St=(()=>{return(s=St||(St={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",St;var s})();const st="undefined"!=typeof globalThis&&globalThis,Je="undefined"!=typeof window&&window,Vs="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,jt=st||"undefined"!=typeof global&&global||Je||Vs,wn={},j=[],W=me({\u0275cmp:me}),K=me({\u0275dir:me}),be=me({\u0275pipe:me}),ie=me({\u0275mod:me}),Ke=me({\u0275fac:me}),ft=me({__NG_ELEMENT_ID__:me});let zt=0;function on(s){return lt(()=>{const u={},c={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:u,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Ct.OnPush,directiveDefs:null,pipeDefs:null,selectors:s.selectors||j,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||St.Emulated,id:"c",styles:s.styles||j,_:null,setInput:null,schemas:s.schemas||null,tView:null},d=s.directives,f=s.features,y=s.pipes;return c.id+=zt++,c.inputs=z(s.inputs,u),c.outputs=z(s.outputs),f&&f.forEach(E=>E(c)),c.directiveDefs=d?()=>("function"==typeof d?d():d).map(dr):null,c.pipeDefs=y?()=>("function"==typeof y?y():y).map(Pt):null,c})}function dr(s){return ot(s)||function At(s){return s[K]||null}(s)}function Pt(s){return function Bt(s){return s[be]||null}(s)}const Xn={};function oe(s){return lt(()=>{const o={type:s.type,bootstrap:s.bootstrap||j,declarations:s.declarations||j,imports:s.imports||j,exports:s.exports||j,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null};return null!=s.id&&(Xn[s.id]=s.type),o})}function z(s,o){if(null==s)return wn;const u={};for(const c in s)if(s.hasOwnProperty(c)){let d=s[c],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),u[d]=c,o&&(o[d]=f)}return u}const Te=on;function qe(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,onDestroy:s.type.prototype.ngOnDestroy||null}}function ot(s){return s[W]||null}function Ot(s,o){const u=s[ie]||null;if(!u&&!0===o)throw new Error(`Type ${ue(s)} does not have '\u0275mod' property.`);return u}function oi(s){return Array.isArray(s)&&"object"==typeof s[1]}function es(s){return Array.isArray(s)&&!0===s[1]}function Du(s){return 0!=(8&s.flags)}function rd(s){return 2==(2&s.flags)}function ts(s){return 1==(1&s.flags)}function ns(s){return null!==s.template}function Ll(s){return 0!=(512&s[2])}function Bi(s,o){return s.hasOwnProperty(Ke)?s[Ke]:null}class ud{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Aa(){return xa}function xa(s){return s.type.prototype.ngOnChanges&&(s.setInput=Ra),jh}function jh(){const s=Na(this),o=null==s?void 0:s.current;if(o){const u=s.previous;if(u===wn)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Ra(s,o,u,c){const d=Na(s)||function Bo(s,o){return s[ld]=o}(s,{previous:wn,current:null}),f=d.current||(d.current={}),y=d.previous,E=this.declaredInputs[u],b=y[E];f[E]=new ud(b&&b.currentValue,o,y===wn),s[c]=o}Aa.ngInherit=!0;const ld="__ngSimpleChanges__";function Na(s){return s[ld]||null}let Ru;function dd(s){Ru=s}function dn(s){return!!s.listen}const jo={createRenderer:(s,o)=>function ji(){return void 0!==Ru?Ru:"undefined"!=typeof document?document:void 0}()};function hn(s){for(;Array.isArray(s);)s=s[0];return s}function hr(s,o){return hn(o[s.index])}function Hn(s,o){return s.data[o]}function Ar(s,o){const u=o[s];return oi(u)?u:u[0]}function yo(s){return 4==(4&s[2])}function zs(s){return 128==(128&s[2])}function Hi(s,o){return null==o?null:s[o]}function is(s){s[18]=0}function vs(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const _t={lFrame:Yl(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function La(){return _t.bindingsEnabled}function Se(){return _t.lFrame.lView}function Ut(){return _t.lFrame.tView}function Gl(s){return _t.lFrame.contextLView=s,s[8]}function Dn(){let s=$o();for(;null!==s&&64===s.type;)s=s.parent;return s}function $o(){return _t.lFrame.currentTNode}function wi(s,o){const u=_t.lFrame;u.currentTNode=s,u.isParent=o}function ql(){return _t.lFrame.isParent}function wo(){return _t.isInCheckNoChangesMode}function ku(s){_t.isInCheckNoChangesMode=s}function Ks(){return _t.lFrame.bindingIndex++}function zl(s,o){const u=_t.lFrame;u.bindingIndex=u.bindingRootIndex=s,Va(o)}function Va(s){_t.lFrame.currentDirectiveIndex=s}function Kl(){return _t.lFrame.currentQueryIndex}function Zl(s){_t.lFrame.currentQueryIndex=s}function $h(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function ja(s,o,u){if(u&pt.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||u&pt.Host||(d=$h(f),null===d||(f=f[15],10&d.type))););if(null===d)return!1;o=d,s=f}const c=_t.lFrame=Zs();return c.currentTNode=o,c.lView=s,!0}function Ha(s){const o=Zs(),u=s[1];_t.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Zs(){const s=_t.lFrame,o=null===s?null:s.child;return null===o?Yl(s):o}function Yl(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function Gh(){const s=_t.lFrame;return _t.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const qh=Gh;function Go(){const s=Gh();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function xr(){return _t.lFrame.selectedIndex}function Es(s){_t.lFrame.selectedIndex=s}function Nn(){const s=_t.lFrame;return Hn(s.tView,s.selectedIndex)}function O_(){_t.lFrame.currentNamespace="svg"}function L_(){!function F_(){_t.lFrame.currentNamespace=null}()}function Ga(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const f=s.data[u].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:E,ngAfterViewInit:b,ngAfterViewChecked:A,ngOnDestroy:x}=f;y&&(s.contentHooks||(s.contentHooks=[])).push(-u,y),E&&((s.contentHooks||(s.contentHooks=[])).push(u,E),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,E)),b&&(s.viewHooks||(s.viewHooks=[])).push(-u,b),A&&((s.viewHooks||(s.viewHooks=[])).push(u,A),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,A)),null!=x&&(s.destroyHooks||(s.destroyHooks=[])).push(u,x)}}function Ql(s,o,u){Er(s,o,3,u)}function Jl(s,o,u,c){(3&s[2])===u&&Er(s,o,u,c)}function Lu(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function Er(s,o,u,c){const f=null!=c?c:-1,y=o.length-1;let E=0;for(let b=void 0!==c?65535&s[18]:0;b<y;b++)if("number"==typeof o[b+1]){if(E=o[b],null!=c&&E>=c)break}else o[b]<0&&(s[18]+=65536),(E<f||-1==f)&&(Xl(s,u,o,b),s[18]=(4294901760&s[18])+b+2),b++}function Xl(s,o,u,c){const d=u[c]<0,f=u[c+1],E=s[d?-u[c]:u[c]];if(d){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{f.call(E)}finally{}}}else try{f.call(E)}finally{}}class Fu{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function et(s,o,u){const c=dn(s);let d=0;for(;d<u.length;){const f=u[d];if("number"==typeof f){if(0!==f)break;d++;const y=u[d++],E=u[d++],b=u[d++];c?s.setAttribute(o,E,b,y):o.setAttributeNS(y,E,b)}else{const y=f,E=u[++d];ui(y)?c&&s.setProperty(o,y,E):c?s.setAttribute(o,y,E):o.setAttribute(y,E),d++}}return d}function bs(s){return 3===s||4===s||6===s}function ui(s){return 64===s.charCodeAt(0)}function Pn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const d=o[c];"number"==typeof d?u=d:0===u||nc(s,u,d,null,-1===u||2===u?o[++c]:null)}}return s}function nc(s,o,u,c,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const E=s[f++];if("number"==typeof E){if(E===o){y=-1;break}if(E>o){y=f-1;break}}}for(;f<s.length;){const E=s[f];if("number"==typeof E)break;if(E===u){if(null===c)return void(null!==d&&(s[f+1]=d));if(c===s[f+1])return void(s[f+2]=d)}f++,null!==c&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,u),null!==c&&s.splice(f++,0,c),null!==d&&s.splice(f++,0,d)}function Gn(s){return-1!==s}function qo(s){return 32767&s}function Wo(s,o){let u=function qa(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let Io=!0;function os(s){const o=Io;return Io=s,o}let ju=0;function fn(s,o){const u=Wa(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,zo(c.data,s),zo(o,null),zo(c.blueprint,null));const d=Ko(s,o),f=s.injectorIndex;if(Gn(d)){const y=qo(d),E=Wo(d,o),b=E[1].data;for(let A=0;A<8;A++)o[f+A]=E[y+A]|b[y+A]}return o[f+8]=d,f}function zo(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Wa(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Ko(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,d=o;for(;null!==d;){const f=d[1],y=f.type;if(c=2===y?f.declTNode:1===y?d[6]:null,null===c)return-1;if(u++,d=d[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function $r(s,o,u){!function gd(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(ft)&&(c=u[ft]),null==c&&(c=u[ft]=ju++);const d=255&c;o.data[s+(d>>5)]|=1<<d}(s,o,u)}function Zo(s,o,u){if(u&pt.Optional)return s;Ce(o,"NodeInjector")}function as(s,o,u,c){if(u&pt.Optional&&void 0===c&&(c=null),0==(u&(pt.Self|pt.Host))){const d=s[9],f=Wt(void 0);try{return d?d.get(o,c,u&pt.Optional):Sr(o,c,u&pt.Optional)}finally{Wt(f)}}return Zo(c,o,u)}function $u(s,o,u,c=pt.Default,d){if(null!==s){const f=function Rr(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(ft)?s[ft]:void 0;return"number"==typeof o?o>=0?255&o:Ys:o}(u);if("function"==typeof f){if(!ja(o,s,c))return c&pt.Host?Zo(d,u,c):as(o,u,c,d);try{const y=f(c);if(null!=y||c&pt.Optional)return y;Ce(u)}finally{qh()}}else if("number"==typeof f){let y=null,E=Wa(s,o),b=-1,A=c&pt.Host?o[16][6]:null;for((-1===E||c&pt.SkipSelf)&&(b=-1===E?Ko(s,o):o[E+8],-1!==b&&Qo(c,!1)?(y=o[1],E=qo(b),o=Wo(b,o)):E=-1);-1!==E;){const x=o[1];if(sc(f,E,x.data)){const F=ic(E,o,u,y,c,A);if(F!==za)return F}b=o[E+8],-1!==b&&Qo(c,o[1].data[E+8]===A)&&sc(f,E,o)?(y=x,E=qo(b),o=Wo(b,o)):E=-1}}}return as(o,u,c,d)}const za={};function Ys(){return new Sn(Dn(),Se())}function ic(s,o,u,c,d,f){const y=o[1],E=y.data[s+8],x=Cs(E,y,u,null==c?rd(E)&&Io:c!=y&&0!=(3&E.type),d&pt.Host&&f===E);return null!==x?Yo(o,y,x,E):za}function Cs(s,o,u,c,d){const f=s.providerIndexes,y=o.data,E=1048575&f,b=s.directiveStart,x=f>>20,$=d?E+x:s.directiveEnd;for(let ee=c?E:E+x;ee<$;ee++){const Ie=y[ee];if(ee<b&&u===Ie||ee>=b&&Ie.type===u)return ee}if(d){const ee=y[b];if(ee&&ns(ee)&&ee.type===u)return b}return null}function Yo(s,o,u,c){let d=s[u];const f=o.data;if(function ec(s){return s instanceof Fu}(d)){const y=d;y.resolving&&function Re(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Le(-200,`Circular dependency in DI detected for ${s}${u}`)}(ce(f[u]));const E=os(y.canSeeViewProviders);y.resolving=!0;const b=y.injectImpl?Wt(y.injectImpl):null;ja(s,c,pt.Default);try{d=s[u]=y.factory(void 0,f,s,c),o.firstCreatePass&&u>=c.directiveStart&&function Eo(s,o,u){const{ngOnChanges:c,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(c){const y=xa(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,y),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,y)}d&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,d),f&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,f),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,f))}(u,f[u],o)}finally{null!==b&&Wt(b),os(E),y.resolving=!1,qh()}}return d}function sc(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function Qo(s,o){return!(s&pt.Self||s&pt.Host&&o)}class Sn{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return $u(this._tNode,this._lView,o,c,u)}}function Ka(s){return function Hu(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let d=0;for(;d<c;){const f=u[d];if(bs(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<c&&"string"==typeof u[d];)d++;else{if(f===o)return u[d+1];d+=2}}}return null}(Dn(),s)}const qn="__parameters__";function ci(s,o,u){return lt(()=>{const c=function oc(s){return function(...u){if(s){const c=s(...u);for(const d in c)this[d]=c[d]}}}(o);function d(...f){if(this instanceof d)return c.apply(this,f),this;const y=new d(...f);return E.annotation=y,E;function E(b,A,x){const F=b.hasOwnProperty(qn)?b[qn]:Object.defineProperty(b,qn,{value:[]})[qn];for(;F.length<=x;)F.push(null);return(F[x]=F[x]||[]).push(y),b}}return u&&(d.prototype=Object.create(u.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}class kn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=Yt({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Zh=new kn("AnalyzeForEntryComponents");function Gr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),Gr(c,o)):o!==s&&o.push(c)}return o}function bi(s,o){s.forEach(u=>Array.isArray(u)?bi(u,o):o(u))}function Qa(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function zu(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}const As={},Xu="__NG_DI_FLAG__",Xa="ngTempTokenPath",C=/\n/gm,N="__source",V=me({provide:String,useValue:me});let Y;function J(s){const o=Y;return Y=s,o}function Oe(s,o=pt.Default){if(void 0===Y)throw new Le(203,"");return null===Y?Sr(s,void 0,o):Y.get(s,o&pt.Optional?null:void 0,o)}function $e(s,o=pt.Default){return(function xn(){return Or}()||Oe)(ne(s),o)}function Xt(s){const o=[];for(let u=0;u<s.length;u++){const c=ne(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Le(900,"");let d,f=pt.Default;for(let y=0;y<c.length;y++){const E=c[y],b=qr(E);"number"==typeof b?-1===b?d=E.token:f|=b:d=E}o.push($e(d,f))}else o.push($e(c))}return o}function Wn(s,o){return s[Xu]=o,s.prototype[Xu]=o,s}function qr(s){return s[Xu]}const Qs=Wn(ci("Inject",s=>({token:s})),-1),Ur=Wn(ci("Optional"),8),Wr=Wn(ci("SkipSelf"),4);class Dd{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}const g=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,I=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var Ir=(()=>((Ir=Ir||{})[Ir.NONE=0]="NONE",Ir[Ir.HTML=1]="HTML",Ir[Ir.STYLE=2]="STYLE",Ir[Ir.SCRIPT=3]="SCRIPT",Ir[Ir.URL=4]="URL",Ir[Ir.RESOURCE_URL=5]="RESOURCE_URL",Ir))();function Rd(s){const o=function Nd(){const s=Se();return s&&s[12]}();return o?o.sanitize(Ir.URL,s)||"":function Js(s,o){const u=function nf(s){return s instanceof Dd&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?function Rs(s){return s instanceof Dd?s.changingThisBreaksApplicationSecurity:s}(s):function R(s){return(s=String(s)).match(g)||s.match(I)?s:"unsafe:"+s}(Q(s))}const Rw="__ngContext__";function Ci(s,o){s[Rw]=o}function K_(s){const o=function df(s){return s[Rw]||null}(s);return o?Array.isArray(o)?o:o.lView:null}function J_(s){return s.ngOriginalError}function mT(s,...o){s.error(...o)}class gf{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o),c=function gT(s){return s&&s.ngErrorLogger||mT}(o);c(this._console,"ERROR",o),u&&c(this._console,"ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&J_(o);for(;u&&J_(u);)u=J_(u);return u||null}}const Pw=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(jt))();function Do(s){return s instanceof Function?s():s}var ra=(()=>((ra=ra||{})[ra.Important=1]="Important",ra[ra.DashCase=2]="DashCase",ra))();function ey(s,o){return undefined(s,o)}function mf(s){const o=s[3];return es(o)?o[3]:o}function gg(s){return Uw(s[13])}function ny(s){return Uw(s[4])}function Uw(s){for(;null!==s&&!es(s);)s=s[4];return s}function Pd(s,o,u,c,d){if(null!=c){let f,y=!1;es(c)?f=c:oi(c)&&(y=!0,c=c[0]);const E=hn(c);0===s&&null!==u?null==d?Gw(o,u,E):ll(o,u,E,d||null,!0):1===s&&null!==u?ll(o,u,E,d||null,!0):2===s?function Qw(s,o,u){const c=Eg(s,o);c&&function Ww(s,o,u,c){dn(s)?s.removeChild(o,u,c):o.removeChild(u)}(s,c,o,u)}(o,E,y):3===s&&o.destroyNode(E),null!=f&&function Tg(s,o,u,c,d){const f=u[7];f!==hn(u)&&Pd(o,s,c,f,d);for(let E=10;E<u.length;E++){const b=u[E];_f(b[1],b,s,o,c,f)}}(o,s,f,u,d)}}function pi(s,o,u){if(dn(s))return s.createElement(o,u);{const c=null!==u?function cd(s){const o=s.toLowerCase();return"svg"===o?"http://www.w3.org/2000/svg":"math"===o?"http://www.w3.org/1998/MathML/":null}(u):null;return null===c?s.createElement(o):s.createElementNS(c,o)}}function jw(s,o){const u=s[9],c=u.indexOf(o),d=o[3];1024&o[2]&&(o[2]&=-1025,vs(d,-1)),u.splice(c,1)}function vg(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const d=c[17];null!==d&&d!==s&&jw(d,c),o>0&&(s[u-1][4]=c[4]);const f=zu(s,10+o);!function AT(s,o){_f(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const y=f[19];null!==y&&y.detachView(f[1]),c[3]=null,c[4]=null,c[2]&=-129}return c}function Hw(s,o){if(!(256&o[2])){const u=o[11];dn(u)&&u.destroyNode&&_f(s,o,u,3,null,null),function yg(s){let o=s[13];if(!o)return wg(s[1],s);for(;o;){let u=null;if(oi(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)oi(o)&&wg(o[1],o),o=o[3];null===o&&(o=s),oi(o)&&wg(o[1],o),u=o&&o[4]}o=u}}(o)}}function wg(s,o){if(!(256&o[2])){o[2]&=-129,o[2]|=256,function ry(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const d=o[u[c]];if(!(d instanceof Fu)){const f=u[c+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const E=d[f[y]],b=f[y+1];try{b.call(E)}finally{}}else try{f.call(d)}finally{}}}}(s,o),function $w(s,o){const u=s.cleanup,c=o[7];let d=-1;if(null!==u)for(let f=0;f<u.length-1;f+=2)if("string"==typeof u[f]){const y=u[f+1],E="function"==typeof y?y(o):hn(o[y]),b=c[d=u[f+2]],A=u[f+3];"boolean"==typeof A?E.removeEventListener(u[f],b,A):A>=0?c[d=A]():c[d=-A].unsubscribe(),f+=2}else{const y=c[d=u[f+1]];u[f].call(y)}if(null!==c){for(let f=d+1;f<c.length;f++)c[f]();o[7]=null}}(s,o),1===o[1].type&&dn(o[11])&&o[11].destroy();const u=o[17];if(null!==u&&es(o[3])){u!==o[3]&&jw(u,o);const c=o[19];null!==c&&c.detachView(s)}}}function xT(s,o,u){return function ul(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const d=s.data[c.directiveStart].encapsulation;if(d===St.None||d===St.Emulated)return null}return hr(c,u)}(s,o.parent,u)}function ll(s,o,u,c,d){dn(s)?s.insertBefore(o,u,c,d):o.insertBefore(u,c,d)}function Gw(s,o,u){dn(s)?s.appendChild(o,u):o.appendChild(u)}function qw(s,o,u,c,d){null!==c?ll(s,o,u,c,d):Gw(s,o,u)}function Eg(s,o){return dn(s)?s.parentNode(o):o.parentNode}let Kw=function iy(s,o,u){return 40&s.type?hr(s,u):null};function Md(s,o,u,c){const d=xT(s,c,o),f=o[11],E=function zw(s,o,u){return Kw(s,o,u)}(c.parent||o[6],c,o);if(null!=d)if(Array.isArray(u))for(let b=0;b<u.length;b++)qw(f,d,u[b],E,!1);else qw(f,d,u,E,!1)}function Ig(s,o){if(null!==o){const u=o.type;if(3&u)return hr(o,s);if(4&u)return bg(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Ig(s,c);{const d=s[o.index];return es(d)?bg(-1,d):hn(d)}}if(32&u)return ey(o,s)()||hn(s[o.index]);{const c=Yw(s,o);return null!==c?Array.isArray(c)?c[0]:Ig(mf(s[16]),c):Ig(s,o.next)}}return null}function Yw(s,o){return null!==o?s[16][6].projection[o.projection]:null}function bg(s,o){const u=10+s+1;if(u<o.length){const c=o[u],d=c[1].firstChild;if(null!==d)return Ig(c,d)}return o[7]}function Jw(s,o,u,c,d,f,y){for(;null!=u;){const E=c[u.index],b=u.type;if(y&&0===o&&(E&&Ci(hn(E),c),u.flags|=4),64!=(64&u.flags))if(8&b)Jw(s,o,u.child,c,d,f,!1),Pd(o,s,d,E,f);else if(32&b){const A=ey(u,c);let x;for(;x=A();)Pd(o,s,d,x,f);Pd(o,s,d,E,f)}else 16&b?Cg(s,o,c,u,d,f):Pd(o,s,d,E,f);u=y?u.projectionNext:u.next}}function _f(s,o,u,c,d,f){Jw(u,c,s.firstChild,o,d,f,!1)}function Cg(s,o,u,c,d,f){const y=u[16],b=y[6].projection[c.projection];if(Array.isArray(b))for(let A=0;A<b.length;A++)Pd(o,s,d,b[A],f);else Jw(s,o,b,y[3],d,f,!0)}function Xw(s,o,u){dn(s)?s.setAttribute(o,"style",u):o.style.cssText=u}function Dg(s,o,u){dn(s)?""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u):o.className=u}function oy(s,o,u){let c=s.length;for(;;){const d=s.indexOf(o,u);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===c||s.charCodeAt(d+f)<=32)return d}u=d+1}}const Sg="ng-template";function un(s,o,u){let c=0;for(;c<s.length;){let d=s[c++];if(u&&"class"===d){if(d=s[c],-1!==oy(d.toLowerCase(),o,0))return!0}else if(1===d){for(;c<s.length&&"string"==typeof(d=s[c++]);)if(d.toLowerCase()===o)return!0;return!1}}return!1}function ay(s){return 4===s.type&&s.value!==Sg}function Ag(s,o,u){return o===(4!==s.type||u?s.value:Sg)}function kT(s,o,u){let c=4;const d=s.attrs||[],f=function uN(s){for(let o=0;o<s.length;o++)if(bs(s[o]))return o;return s.length}(d);let y=!1;for(let E=0;E<o.length;E++){const b=o[E];if("number"!=typeof b){if(!y)if(4&c){if(c=2|1&c,""!==b&&!Ag(s,b,u)||""===b&&1===o.length){if(ia(c))return!1;y=!0}}else{const A=8&c?b:o[++E];if(8&c&&null!==s.attrs){if(!un(s.attrs,A,u)){if(ia(c))return!1;y=!0}continue}const F=MT(8&c?"class":b,d,ay(s),u);if(-1===F){if(ia(c))return!1;y=!0;continue}if(""!==A){let $;$=F>f?"":d[F+1].toLowerCase();const ee=8&c?$:null;if(ee&&-1!==oy(ee,A,0)||2&c&&A!==$){if(ia(c))return!1;y=!0}}}}else{if(!y&&!ia(c)&&!ia(b))return!1;if(y&&ia(b))continue;y=!1,c=b|1&c}}return ia(c)||y}function ia(s){return 0==(1&s)}function MT(s,o,u,c){if(null===o)return-1;let d=0;if(c||!u){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let E=o[++d];for(;"string"==typeof E;)E=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function OT(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function xg(s,o,u=!1){for(let c=0;c<o.length;c++)if(kT(s,o[c],u))return!0;return!1}function FT(s,o){return s?":not("+o.trim()+")":o}function lN(s){let o=s[0],u=1,c=2,d="",f=!1;for(;u<s.length;){let y=s[u];if("string"==typeof y)if(2&c){const E=s[++u];d+="["+y+(E.length>0?'="'+E+'"':"")+"]"}else 8&c?d+="."+y:4&c&&(d+=" "+y);else""!==d&&!ia(y)&&(o+=FT(f,d),d=""),c=y,f=f||!ia(c);u++}return""!==d&&(o+=FT(f,d)),o}const Mt={};function UT(s){VT(Ut(),Se(),xr()+s,wo())}function VT(s,o,u,c){if(!c)if(3==(3&o[2])){const f=s.preOrderCheckHooks;null!==f&&Ql(o,f,u)}else{const f=s.preOrderHooks;null!==f&&Jl(o,f,0,u)}Es(u)}function wy(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const d=u[c],f=u[c+1];if(-1!==f){const y=s.data[f];Zl(d),y.contentQueries(2,o[f],f)}}}function Ef(s,o,u,c,d,f,y,E,b,A){const x=o.blueprint.slice();return x[0]=d,x[2]=140|c,is(x),x[3]=x[15]=s,x[8]=u,x[10]=y||s&&s[10],x[11]=E||s&&s[11],x[12]=b||s&&s[12]||null,x[9]=A||s&&s[9]||null,x[6]=f,x[16]=2==o.type?s[16]:x,x}function Od(s,o,u,c,d){let f=s.data[o];if(null===f)f=function Ld(s,o,u,c,d){const f=$o(),y=ql(),b=s.data[o]=function YT(s,o,u,c,d,f){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,u,o,c,d);return null===s.firstChild&&(s.firstChild=b),null!==f&&(y?null==f.child&&null!==b.parent&&(f.child=b):null===f.next&&(f.next=b)),b}(s,o,u,c,d),function Wl(){return _t.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=u,f.value=c,f.attrs=d;const y=function vo(){const s=_t.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return wi(f,!0),f}function dl(s,o,u,c){if(0===u)return-1;const d=o.length;for(let f=0;f<u;f++)o.push(c),s.blueprint.push(c),s.data.push(null);return d}function yc(s,o,u){Ha(o);try{const c=s.viewQuery;null!==c&&If(1,c,u);const d=s.template;null!==d&&iE(s,o,d,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&wy(s,o),s.staticViewQueries&&If(2,s.viewQuery,u);const f=s.components;null!==f&&function KT(s,o){for(let u=0;u<o.length;u++)oD(s,o[u])}(o,f)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,Go()}}function hl(s,o,u,c){const d=o[2];if(256==(256&d))return;Ha(o);const f=wo();try{is(o),function Ua(s){return _t.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&iE(s,o,u,2,c);const y=3==(3&d);if(!f)if(y){const A=s.preOrderCheckHooks;null!==A&&Ql(o,A,null)}else{const A=s.preOrderHooks;null!==A&&Jl(o,A,0,null),Lu(o,0)}if(function sD(s){for(let o=gg(s);null!==o;o=ny(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const d=u[c],f=d[3];0==(1024&d[2])&&vs(f,1),d[2]|=1024}}}(o),function iD(s){for(let o=gg(s);null!==o;o=ny(o))for(let u=10;u<o.length;u++){const c=o[u],d=c[1];zs(c)&&hl(d,c,d.template,c[8])}}(o),null!==s.contentQueries&&wy(s,o),!f)if(y){const A=s.contentCheckHooks;null!==A&&Ql(o,A)}else{const A=s.contentHooks;null!==A&&Jl(o,A,1),Lu(o,1)}!function nE(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const d=u[c];if(d<0)Es(~d);else{const f=d,y=u[++c],E=u[++c];zl(y,f),E(2,o[f])}}}finally{Es(-1)}}(s,o);const E=s.components;null!==E&&function Ey(s,o){for(let u=0;u<o.length;u++)SN(s,o[u])}(o,E);const b=s.viewQuery;if(null!==b&&If(2,b,c),!f)if(y){const A=s.viewCheckHooks;null!==A&&Ql(o,A)}else{const A=s.viewHooks;null!==A&&Jl(o,A,2),Lu(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),f||(o[2]&=-73),1024&o[2]&&(o[2]&=-1025,vs(o[3],-1))}finally{Go()}}function rE(s,o,u,c){const d=o[10],f=!wo(),y=yo(o);try{f&&!y&&d.begin&&d.begin(),y&&yc(s,o,c),hl(s,o,u,c)}finally{f&&!y&&d.end&&d.end()}}function iE(s,o,u,c,d){const f=xr(),y=2&c;try{Es(-1),y&&o.length>20&&VT(s,o,20,wo()),u(c,d)}finally{Es(f)}}function Fd(s,o,u){!La()||(function XT(s,o,u,c){const d=u.directiveStart,f=u.directiveEnd;s.firstCreatePass||fn(u,o),Ci(c,o);const y=u.initialInputs;for(let E=d;E<f;E++){const b=s.data[E],A=ns(b);A&&xy(o,u,b);const x=Yo(o,s,E,u);Ci(x,o),null!==y&&Ry(0,E-d,x,b,0,y),A&&(Ar(u.index,o)[8]=x)}}(s,o,u,hr(u,o)),128==(128&u.flags)&&function CN(s,o,u){const c=u.directiveStart,d=u.directiveEnd,y=u.index,E=function Ou(){return _t.lFrame.currentDirectiveIndex}();try{Es(y);for(let b=c;b<d;b++){const A=s.data[b],x=o[b];Va(b),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&eD(A,x)}}finally{Es(-1),Va(E)}}(s,o,u))}function by(s,o,u=hr){const c=o.localNames;if(null!==c){let d=o.index+1;for(let f=0;f<c.length;f+=2){const y=c[f+1],E=-1===y?u(o,s):s[y];s[d++]=E}}}function sE(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Ug(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Ug(s,o,u,c,d,f,y,E,b,A){const x=20+c,F=x+d,$=function ZT(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Mt);return u}(x,F),ee="function"==typeof A?A():A;return $[1]={type:s,blueprint:$,template:u,queries:null,viewQuery:E,declTNode:o,data:$.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:b,consts:ee,incompleteFirstPass:!1}}function uE(s,o,u,c){const d=jg(o);null===u?d.push(c):(d.push(u),s.firstCreatePass&&Hg(s).push(c,d.length-1))}function lE(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const d=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,d):u[c]=[o,d]}return u}function cs(s,o,u,c,d,f,y,E){const b=hr(o,u);let x,A=o.inputs;!E&&null!=A&&(x=A[c])?($g(s,u,x,c,d),rd(o)&&function Cy(s,o){const u=Ar(o,s);16&u[2]||(u[2]|=64)}(u,o.index)):3&o.type&&(c=function cE(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),d=null!=y?y(d,o.value||"",c):d,dn(f)?f.setProperty(b,c,d):ui(c)||(b.setProperty?b.setProperty(c,d):b[c]=d))}function Bg(s,o,u,c){let d=!1;if(La()){const f=function Sy(s,o,u){const c=s.directiveRegistry;let d=null;if(c)for(let f=0;f<c.length;f++){const y=c[f];xg(u,y.selectors,!1)&&(d||(d=[]),$r(fn(u,o),s,y.type),ns(y)?(tD(s,u),d.unshift(y)):d.push(y))}return d}(s,o,u),y=null===c?null:{"":-1};if(null!==f){d=!0,fE(u,s.data.length,f.length);for(let x=0;x<f.length;x++){const F=f[x];F.providersResolver&&F.providersResolver(F)}let E=!1,b=!1,A=dl(s,o,f.length,null);for(let x=0;x<f.length;x++){const F=f[x];u.mergedAttrs=Pn(u.mergedAttrs,F.hostAttrs),Ay(s,u,o,A,F),hE(A,F,y),null!==F.contentQueries&&(u.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(u.flags|=128);const $=F.type.prototype;!E&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),E=!0),!b&&($.ngOnChanges||$.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),b=!0),A++}!function Vg(s,o){const c=o.directiveEnd,d=s.data,f=o.attrs,y=[];let E=null,b=null;for(let A=o.directiveStart;A<c;A++){const x=d[A],F=x.inputs,$=null===f||ay(o)?null:TN(F,f);y.push($),E=lE(F,A,E),b=lE(x.outputs,A,b)}null!==E&&(E.hasOwnProperty("class")&&(o.flags|=16),E.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=y,o.inputs=E,o.outputs=b}(s,u)}y&&function nD(s,o,u){if(o){const c=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=u[o[d+1]];if(null==f)throw new Le(-301,!1);c.push(o[d],f)}}}(u,c,y)}return u.mergedAttrs=Pn(u.mergedAttrs,u.attrs),d}function Dy(s,o,u,c,d,f){const y=f.hostBindings;if(y){let E=s.hostBindingOpCodes;null===E&&(E=s.hostBindingOpCodes=[]);const b=~o.index;(function bN(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(E)!=b&&E.push(b),E.push(c,d,y)}}function eD(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function tD(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function hE(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;ns(o)&&(u[""]=s)}}function fE(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Ay(s,o,u,c,d){s.data[c]=d;const f=d.factory||(d.factory=Bi(d.type)),y=new Fu(f,ns(d),null);s.blueprint[c]=y,u[c]=y,Dy(s,o,0,c,dl(s,u,d.hostVars,Mt),d)}function xy(s,o,u){const c=hr(o,s),d=sE(u),f=s[10],y=Ny(s,Ef(s,d,null,u.onPush?64:16,c,o,f,f.createRenderer(c,u),null,null));s[o.index]=y}function ds(s,o,u,c,d,f){const y=hr(s,o);!function pE(s,o,u,c,d,f,y){if(null==f)dn(s)?s.removeAttribute(o,d,u):o.removeAttribute(d);else{const E=null==y?Q(f):y(f,c||"",d);dn(s)?s.setAttribute(o,d,E,u):u?o.setAttributeNS(u,d,E):o.setAttribute(d,E)}}(o[11],y,f,s.value,u,c,d)}function Ry(s,o,u,c,d,f){const y=f[o];if(null!==y){const E=c.setInput;for(let b=0;b<y.length;){const A=y[b++],x=y[b++],F=y[b++];null!==E?c.setInput(u,F,A,x):u[x]=F}}}function TN(s,o){let u=null,c=0;for(;c<o.length;){const d=o[c];if(0!==d)if(5!==d){if("number"==typeof d)break;s.hasOwnProperty(d)&&(null===u&&(u=[]),u.push(d,s[d],o[c+1])),c+=2}else c+=2;else c+=4}return u}function rD(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function SN(s,o){const u=Ar(o,s);if(zs(u)){const c=u[1];80&u[2]?hl(c,u,c.template,u[8]):u[5]>0&&gE(u)}}function gE(s){for(let c=gg(s);null!==c;c=ny(c))for(let d=10;d<c.length;d++){const f=c[d];if(1024&f[2]){const y=f[1];hl(y,f,y.template,f[8])}else f[5]>0&&gE(f)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const d=Ar(u[c],s);zs(d)&&d[5]>0&&gE(d)}}function oD(s,o){const u=Ar(o,s),c=u[1];(function AN(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),yc(c,u,u[8])}function Ny(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function mE(s){for(;s;){s[2]|=64;const o=mf(s);if(Ll(s)&&!o)return s;s=o}return null}function Ud(s,o,u){const c=o[10];c.begin&&c.begin();try{hl(s,o,s.template,u)}catch(d){throw wE(o,d),d}finally{c.end&&c.end()}}function yE(s){!function _E(s){for(let o=0;o<s.components.length;o++){const u=s.components[o],c=K_(u),d=c[1];rE(d,c,d.template,u)}}(s[8])}function If(s,o,u){Zl(0),o(s,u)}const My=(()=>Promise.resolve(null))();function jg(s){return s[7]||(s[7]=[])}function Hg(s){return s.cleanup||(s.cleanup=[])}function wE(s,o){const u=s[9],c=u?u.get(gf,null):null;c&&c.handleError(o)}function $g(s,o,u,c,d){for(let f=0;f<u.length;){const y=u[f++],E=u[f++],b=o[y],A=s.data[y];null!==A.setInput?A.setInput(b,d,c,E):b[E]=d}}function iu(s,o,u){const c=function Ws(s,o){return hn(o[s])}(o,s);!function Vw(s,o,u){dn(s)?s.setValue(o,u):o.textContent=u}(s[11],c,u)}function Vd(s,o,u){let c=u?s.styles:null,d=u?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const E=o[y];"number"==typeof E?f=E:1==f?d=_e(d,E):2==f&&(c=_e(c,E+": "+o[++y]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=d:s.classesWithoutHost=d}const Oy=new kn("INJECTOR",-1);class ir{get(o,u=As){if(u===As){const c=new Error(`NullInjectorError: No provider for ${ue(o)}!`);throw c.name="NullInjectorError",c}return u}}const bf=new kn("Set Injector scope."),vc={},aD={};let Ly;function bE(){return void 0===Ly&&(Ly=new ir),Ly}function CE(s,o=null,u=null,c){const d=TE(s,o,u,c);return d._resolveInjectorDefTypes(),d}function TE(s,o=null,u=null,c){return new uD(s,u,o||bE(),c)}class uD{constructor(o,u,c,d=null){this.parent=c,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const f=[];u&&bi(u,E=>this.processProvider(E,o,u)),bi([o],E=>this.processInjectorType(E,[],f)),this.records.set(Oy,wc(void 0,this));const y=this.records.get(bf);this.scope=null!=y?y.value:null,this.source=d||("object"==typeof o?null:ue(o))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(o=>o.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(o,u=As,c=pt.Default){this.assertNotDestroyed();const d=J(this),f=Wt(void 0);try{if(!(c&pt.SkipSelf)){let E=this.records.get(o);if(void 0===E){const b=function Ti(s){return"function"==typeof s||"object"==typeof s&&s instanceof kn}(o)&&In(o);E=b&&this.injectableDefInScope(b)?wc(Gg(o),vc):null,this.records.set(o,E)}if(null!=E)return this.hydrate(o,E)}return(c&pt.Self?bE():this.parent).get(o,u=c&pt.Optional&&u===As?null:u)}catch(y){if("NullInjectorError"===y.name){if((y[Xa]=y[Xa]||[]).unshift(ue(o)),d)throw y;return function Mn(s,o,u,c){const d=s[Xa];throw o[N]&&d.unshift(o[N]),s.message=function ls(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.substr(2):s;let d=ue(o);if(Array.isArray(o))d=o.map(ue).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let E=o[y];f.push(y+":"+("string"==typeof E?JSON.stringify(E):ue(E)))}d=`{${f.join(", ")}}`}return`${u}${c?"("+c+")":""}[${d}]: ${s.replace(C,"\n  ")}`}("\n"+s.message,d,u,c),s.ngTokenPath=d,s[Xa]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Wt(f),J(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(o=>this.get(o))}toString(){const o=[];return this.records.forEach((c,d)=>o.push(ue(d))),`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Le(205,!1)}processInjectorType(o,u,c){if(!(o=ne(o)))return!1;let d=Yi(o);const f=null==d&&o.ngModule||void 0,y=void 0===f?o:f,E=-1!==c.indexOf(y);if(void 0!==f&&(d=Yi(f)),null==d)return!1;if(null!=d.imports&&!E){let x;c.push(y);try{bi(d.imports,F=>{this.processInjectorType(F,u,c)&&(void 0===x&&(x=[]),x.push(F))})}finally{}if(void 0!==x)for(let F=0;F<x.length;F++){const{ngModule:$,providers:ee}=x[F];bi(ee,Ie=>this.processProvider(Ie,$,ee||j))}}this.injectorDefTypes.add(y);const b=Bi(y)||(()=>new y);this.records.set(y,wc(b,vc));const A=d.providers;if(null!=A&&!E){const x=o;bi(A,F=>this.processProvider(F,x,A))}return void 0!==f&&void 0!==o.providers}processProvider(o,u,c){let d=Ec(o=ne(o))?o:ne(o&&o.provide);const f=function cD(s,o,u){return SE(s)?wc(void 0,s.useValue):wc(function DE(s,o,u){let c;if(Ec(s)){const d=ne(s);return Bi(d)||Gg(d)}if(SE(s))c=()=>ne(s.useValue);else if(function Bd(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Xt(s.deps||[]));else if(function dD(s){return!(!s||!s.useExisting)}(s))c=()=>$e(ne(s.useExisting));else{const d=ne(s&&(s.useClass||s.provide));if(!function Cf(s){return!!s.deps}(s))return Bi(d)||Gg(d);c=()=>new d(...Xt(s.deps))}return c}(s),vc)}(o);if(Ec(o)||!0!==o.multi)this.records.get(d);else{let y=this.records.get(d);y||(y=wc(void 0,vc,!0),y.factory=()=>Xt(y.multi),this.records.set(d,y)),d=o,y.multi.push(o)}this.records.set(d,f)}hydrate(o,u){return u.value===vc&&(u.value=aD,u.value=u.factory()),"object"==typeof u.value&&u.value&&function Tf(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this.onDestroy.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=ne(o.providedIn);return"string"==typeof u?"any"===u||u===this.scope:this.injectorDefTypes.has(u)}}function Gg(s){const o=In(s),u=null!==o?o.factory:Bi(s);if(null!==u)return u;if(s instanceof kn)throw new Le(204,!1);if(s instanceof Function)return function lD(s){const o=s.length;if(o>0)throw function di(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Le(204,!1);const u=function Yn(s){const o=s&&(s[yi]||s[Vn]);if(o){const u=function Dr(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Le(204,!1)}function wc(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function SE(s){return null!==s&&"object"==typeof s&&V in s}function Ec(s){return"function"==typeof s}let no=(()=>{class s{static create(u,c){var d;if(Array.isArray(u))return CE({name:""},c,u,"");{const f=null!==(d=u.name)&&void 0!==d?d:"";return CE({name:f},u.parent,u.providers,f)}}}return s.THROW_IF_NOT_FOUND=As,s.NULL=new ir,s.\u0275prov=Yt({token:s,providedIn:"any",factory:()=>$e(Oy)}),s.__NG_ELEMENT_ID__=-1,s})();function gD(s,o){Ga(K_(s)[1],Dn())}let Kr=null;function ou(){if(!Kr){const s=jt.Symbol;if(s&&s.iterator)Kr=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(Kr=c)}}}return Kr}function au(s){return!!Zg(s)&&(Array.isArray(s)||!(s instanceof Map)&&ou()in s)}function Zg(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function gi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function so(s,o,u,c){const d=Se();return gi(d,Ks(),o)&&(Ut(),ds(Nn(),d,s,o,u,c)),so}function uu(s,o,u,c){return gi(s,Ks(),u)?o+Q(u)+c:Mt}function zy(s,o,u,c,d,f,y,E){const b=Se(),A=Ut(),x=s+20,F=A.firstCreatePass?function CD(s,o,u,c,d,f,y,E,b){const A=o.consts,x=Od(o,s,4,y||null,Hi(A,E));Bg(o,u,x,Hi(A,b)),Ga(o,x);const F=x.tViews=Ug(2,x,c,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,A);return null!==o.queries&&(o.queries.template(o,x),F.queries=o.queries.embeddedTView(x)),x}(x,A,b,o,u,c,d,f,y):A.data[x];wi(F,!1);const $=b[11].createComment("");Md(A,b,$,F),Ci($,b),Ny(b,b[x]=rD($,b,$,F)),ts(F)&&Fd(A,b,F),null!=y&&by(b,F,E)}function $E(s){return function rs(s,o){return s[o]}(function fd(){return _t.lFrame.contextLView}(),20+s)}function Sf(s,o=pt.Default){const u=Se();return null===u?$e(s,o):$u(Dn(),u,ne(s),o)}function eI(){throw new Error("invalid")}function rv(s,o,u){const c=Se();return gi(c,Ks(),o)&&cs(Ut(),Nn(),c,s,o,c[11],u,!1),rv}function iv(s,o,u,c,d){const y=d?"class":"style";$g(s,u,o.inputs[y],y,c)}function em(s,o,u,c){const d=Se(),f=Ut(),y=20+s,E=d[11],b=d[y]=pi(E,o,function $a(){return _t.lFrame.currentNamespace}()),A=f.firstCreatePass?function OD(s,o,u,c,d,f,y){const E=o.consts,A=Od(o,s,2,d,Hi(E,f));return Bg(o,u,A,Hi(E,y)),null!==A.attrs&&Vd(A,A.attrs,!1),null!==A.mergedAttrs&&Vd(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,0,o,u,c):f.data[y];wi(A,!0);const x=A.mergedAttrs;null!==x&&et(E,b,x);const F=A.classes;null!==F&&Dg(E,b,F);const $=A.styles;return null!==$&&Xw(E,b,$),64!=(64&A.flags)&&Md(f,d,b,A),0===function hd(){return _t.lFrame.elementDepthCount}()&&Ci(b,d),function Pu(){_t.lFrame.elementDepthCount++}(),ts(A)&&(Fd(f,d,A),function Iy(s,o,u){if(Du(o)){const d=o.directiveEnd;for(let f=o.directiveStart;f<d;f++){const y=s.data[f];y.contentQueries&&y.contentQueries(1,u[f],f)}}}(f,A,d)),null!==c&&by(d,A),em}function Af(){let s=Dn();ql()?function Fa(){_t.lFrame.isParent=!1}():(s=s.parent,wi(s,!1));const o=s;!function jl(){_t.lFrame.elementDepthCount--}();const u=Ut();return u.firstCreatePass&&(Ga(u,s),Du(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function Kh(s){return 0!=(16&s.flags)}(o)&&iv(u,o,Se(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function U_(s){return 0!=(32&s.flags)}(o)&&iv(u,o,Se(),o.stylesWithoutHost,!1),Af}function sv(s,o,u,c){return em(s,o,u,c),Af(),sv}function iI(){return Se()}function qd(s){return!!s&&"function"==typeof s.then}function ov(s){return!!s&&"function"==typeof s.subscribe}const av=ov;function Ro(s,o,u,c){const d=Se(),f=Ut(),y=Dn();return function oI(s,o,u,c,d,f,y,E){const b=ts(c),x=s.firstCreatePass&&Hg(s),F=o[8],$=jg(o);let ee=!0;if(3&c.type||E){const Ue=hr(c,o),nt=E?E(Ue):Ue,Ae=$.length,mt=E?Nt=>E(hn(Nt[c.index])):c.index;if(dn(u)){let Nt=null;if(!E&&b&&(Nt=function sI(s,o,u,c){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===u&&d[f+1]===c){const E=o[7],b=d[f+2];return E.length>b?E[b]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,c.index)),null!==Nt)(Nt.__ngLastListenerFn__||Nt).__ngNextListenerFn__=f,Nt.__ngLastListenerFn__=f,ee=!1;else{f=lv(c,o,F,f,!1);const pn=u.listen(nt,d,f);$.push(f,pn),x&&x.push(d,mt,Ae,Ae+1)}}else f=lv(c,o,F,f,!0),nt.addEventListener(d,f,y),$.push(f),x&&x.push(d,mt,Ae,y)}else f=lv(c,o,F,f,!1);const Ie=c.outputs;let Ve;if(ee&&null!==Ie&&(Ve=Ie[d])){const Ue=Ve.length;if(Ue)for(let nt=0;nt<Ue;nt+=2){const gs=o[Ve[nt]][Ve[nt+1]].subscribe(f),Sl=$.length;$.push(f,gs),x&&x.push(d,c.index,Sl,-(Sl+1))}}}(f,d,d[11],y,s,o,!!u,c),Ro}function aI(s,o,u,c){try{return!1!==u(c)}catch(d){return wE(s,d),!1}}function lv(s,o,u,c,d){return function f(y){if(y===Function)return c;const E=2&s.flags?Ar(s.index,o):o;0==(32&o[2])&&mE(E);let b=aI(o,0,c,y),A=f.__ngNextListenerFn__;for(;A;)b=aI(o,0,A,y)&&b,A=A.__ngNextListenerFn__;return d&&!1===b&&(y.preventDefault(),y.returnValue=!1),b}}function uI(s=1){return function ss(s){return(_t.lFrame.contextLView=function Wh(s,o){for(;s>0;)o=o[15],s--;return o}(s,_t.lFrame.contextLView))[8]}(s)}function Wd(s,o,u){return cv(s,"",o,"",u),Wd}function cv(s,o,u,c,d){const f=Se(),y=uu(f,o,u,c);return y!==Mt&&cs(Ut(),Nn(),f,s,y,f[11],d,!1),cv}function gv(s,o=""){const u=Se(),c=Ut(),d=s+20,f=c.firstCreatePass?Od(c,d,1,o,null):c.data[d],y=u[d]=function mg(s,o){return dn(s)?s.createText(o):s.createTextNode(o)}(u[11],o);Md(c,u,y,f),wi(f,!1)}function mv(s){return Nf("",s,""),mv}function Nf(s,o,u){const c=Se(),d=uu(c,s,o,u);return d!==Mt&&iu(c,xr(),d),Nf}const Ac=void 0;var kI=["en",[["a","p"],["AM","PM"],Ac],[["AM","PM"],Ac,Ac],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Ac,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Ac,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Ac,"{1} 'at' {0}",Ac],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function QD(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let Zd={};function Lf(s){const o=function wm(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=vm(o);if(u)return u;const c=o.split("-")[0];if(u=vm(c),u)return u;if("en"===c)return kI;throw new Error(`Missing locale data for the locale "${s}".`)}function OI(s){return Lf(s)[Et.PluralCase]}function vm(s){return s in Zd||(Zd[s]=jt.ng&&jt.ng.common&&jt.ng.common.locales&&jt.ng.common.locales[s]),Zd[s]}var Et=(()=>((Et=Et||{})[Et.LocaleId=0]="LocaleId",Et[Et.DayPeriodsFormat=1]="DayPeriodsFormat",Et[Et.DayPeriodsStandalone=2]="DayPeriodsStandalone",Et[Et.DaysFormat=3]="DaysFormat",Et[Et.DaysStandalone=4]="DaysStandalone",Et[Et.MonthsFormat=5]="MonthsFormat",Et[Et.MonthsStandalone=6]="MonthsStandalone",Et[Et.Eras=7]="Eras",Et[Et.FirstDayOfWeek=8]="FirstDayOfWeek",Et[Et.WeekendRange=9]="WeekendRange",Et[Et.DateFormat=10]="DateFormat",Et[Et.TimeFormat=11]="TimeFormat",Et[Et.DateTimeFormat=12]="DateTimeFormat",Et[Et.NumberSymbols=13]="NumberSymbols",Et[Et.NumberFormats=14]="NumberFormats",Et[Et.CurrencyCode=15]="CurrencyCode",Et[Et.CurrencySymbol=16]="CurrencySymbol",Et[Et.CurrencyName=17]="CurrencyName",Et[Et.Currencies=18]="Currencies",Et[Et.Directionality=19]="Directionality",Et[Et.PluralCase=20]="PluralCase",Et[Et.ExtraData=21]="ExtraData",Et))();const Ff="en-US";let Vf=Ff;class tb{}class gS{resolveComponentFactory(o){throw function Pr(s){const o=Error(`No component factory found for ${ue(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Qf=(()=>{class s{}return s.NULL=new gS,s})();function mS(){return kc(Dn(),Se())}function kc(s,o){return new ih(hr(s,o))}let ih=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=mS,s})();function nb(s){return s instanceof ih?s.nativeElement:s}class qv{}let fu=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function _S(){const s=Se(),u=Ar(Dn().index,s);return function rb(s){return s[11]}(oi(u)?u:s)}(),s})(),Wv=(()=>{class s{}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:()=>null}),s})();class sh{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const zv=new sh("13.2.3"),Jf={};function Mc(s,o,u,c,d=!1){for(;null!==u;){const f=o[u.index];if(null!==f&&c.push(hn(f)),es(f))for(let E=10;E<f.length;E++){const b=f[E],A=b[1].firstChild;null!==A&&Mc(b[1],b,A,c)}const y=u.type;if(8&y)Mc(s,o,u.child,c);else if(32&y){const E=ey(u,o);let b;for(;b=E();)c.push(b)}else if(16&y){const E=Yw(o,u);if(Array.isArray(E))c.push(...E);else{const b=mf(o[16]);Mc(b[1],b,E,c,!0)}}u=d?u.projectionNext:u.next}return c}class oh{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return Mc(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(es(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(vg(o,c),zu(u,c))}this._attachedToViewContainer=!1}Hw(this._lView[1],this._lView)}onDestroy(o){uE(this._lView[1],this._lView,null,o)}markForCheck(){mE(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ud(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Py(s,o,u){ku(!0);try{Ud(s,o,u)}finally{ku(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Le(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function ru(s,o){_f(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Le(902,"");this._appRef=o}}class Kv extends oh{constructor(o){super(o),this._view=o}detectChanges(){yE(this._view)}checkNoChanges(){!function ky(s){ku(!0);try{yE(s)}finally{ku(!1)}}(this._view)}get context(){return null}}class Xf extends Qf{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=ot(o);return new Rm(u,this.ngModule)}}function ib(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}const ep=new kn("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Pw});class Rm extends tb{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function cN(s){return s.map(lN).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return ib(this.componentDef.inputs)}get outputs(){return ib(this.componentDef.outputs)}create(o,u,c,d){const f=(d=d||this.ngModule)?function ob(s,o){return{get:(u,c,d)=>{const f=s.get(u,Jf,d);return f!==Jf||c===Jf?f:o.get(u,c,d)}}}(o,d.injector):o,y=f.get(qv,jo),E=f.get(Wv,null),b=y.createRenderer(null,this.componentDef),A=this.componentDef.selectors[0][0]||"div",x=c?function aE(s,o,u){if(dn(s))return s.selectRootElement(o,u===St.ShadowDom);let c="string"==typeof o?s.querySelector(o):o;return c.textContent="",c}(b,c,this.componentDef.encapsulation):pi(y.createRenderer(null,this.componentDef),A,function sb(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(A)),F=this.componentDef.onPush?576:528,$=function jy(s,o){return{components:[],scheduler:s||Pw,clean:My,playerHandler:o||null,flags:0}}(),ee=Ug(0,null,null,1,0,null,null,null,null,null),Ie=Ef(null,ee,$,F,null,null,y,b,E,f);let Ve,Ue;Ha(Ie);try{const nt=function zg(s,o,u,c,d,f){const y=u[1];u[20]=s;const b=Od(y,20,2,"#host",null),A=b.mergedAttrs=o.hostAttrs;null!==A&&(Vd(b,A,!0),null!==s&&(et(d,s,A),null!==b.classes&&Dg(d,s,b.classes),null!==b.styles&&Xw(d,s,b.styles)));const x=c.createRenderer(s,o),F=Ef(u,sE(o),null,o.onPush?64:16,u[20],b,c,x,f||null,null);return y.firstCreatePass&&($r(fn(b,u),y,o.type),tD(y,b),fE(b,u.length,1)),Ny(u,F),u[20]=F}(x,this.componentDef,Ie,y,b);if(x)if(c)et(b,x,["ng-version",zv.full]);else{const{attrs:Ae,classes:mt}=function dN(s){const o=[],u=[];let c=1,d=2;for(;c<s.length;){let f=s[c];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++c]):8===d&&u.push(f);else{if(!ia(d))break;d=f}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Ae&&et(b,x,Ae),mt&&mt.length>0&&Dg(b,x,mt.join(" "))}if(Ue=Hn(ee,20),void 0!==u){const Ae=Ue.projection=[];for(let mt=0;mt<this.ngContentSelectors.length;mt++){const Nt=u[mt];Ae.push(null!=Nt?Array.from(Nt):null)}}Ve=function Kg(s,o,u,c,d){const f=u[1],y=function dE(s,o,u){const c=Dn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Ay(s,c,o,dl(s,o,1,null),u));const d=Yo(o,s,c.directiveStart,c);Ci(d,o);const f=hr(c,o);return f&&Ci(f,o),d}(f,u,o);if(c.components.push(y),s[8]=y,d&&d.forEach(b=>b(y,o)),o.contentQueries){const b=Dn();o.contentQueries(1,y,b.directiveStart)}const E=Dn();return!f.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(Es(E.index),Dy(u[1],E,0,E.directiveStart,E.directiveEnd,o),eD(o,y)),y}(nt,this.componentDef,Ie,$,[gD]),yc(ee,Ie,null)}finally{Go()}return new ub(this.componentType,Ve,kc(Ue,Ie),Ie,Ue)}}class ub extends class Yf{}{constructor(o,u,c,d,f){super(),this.location=c,this._rootLView=d,this._tNode=f,this.instance=u,this.hostView=this.changeDetectorRef=new Kv(d),this.componentType=o}get injector(){return new Sn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}class Oc{}class Yv{}const oo=new Map;class Jv extends Oc{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Xf(this);const c=Ot(o);this._bootstrapComponents=Do(c.bootstrap),this._r3Injector=TE(o,u,[{provide:Oc,useValue:this},{provide:Qf,useValue:this.componentFactoryResolver}],ue(o)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(o)}get(o,u=no.THROW_IF_NOT_FOUND,c=pt.Default){return o===no||o===Oc||o===Oy?this:this._r3Injector.get(o,u,c)}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class Pm extends Yv{constructor(o){super(),this.moduleType=o,null!==Ot(o)&&function lb(s){const o=new Set;!function u(c){const d=Ot(c,!0),f=d.id;null!==f&&(function Qv(s,o,u){if(o&&o!==u)throw new Error(`Duplicate module registered for ${s} - ${ue(o)} vs ${ue(o.name)}`)}(f,oo.get(f),c),oo.set(f,c));const y=Do(d.imports);for(const E of y)o.has(E)||(o.add(E),u(E))}(s)}(o)}create(o){return new Jv(this.moduleType,o)}}function Me(s){return o=>{setTimeout(s,void 0,o)}}const An=class ge extends p.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){var d,f,y;let E=o,b=u||(()=>null),A=c;if(o&&"object"==typeof o){const F=o;E=null===(d=F.next)||void 0===d?void 0:d.bind(F),b=null===(f=F.error)||void 0===f?void 0:f.bind(F),A=null===(y=F.complete)||void 0===y?void 0:y.bind(F)}this.__isAsync&&(b=Me(b),E&&(E=Me(E)),A&&(A=Me(A)));const x=super.subscribe({next:E,error:b,complete:A});return o instanceof B.w0&&o.add(x),x}};function hb(){return this._results[ou()]()}class t0{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=ou(),c=t0.prototype;c[u]||(c[u]=hb)}get changes(){return this._changes||(this._changes=new An)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const d=Gr(o);(this._changesDetected=!function Wu(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let d=s[c],f=o[c];if(u&&(d=u(d),f=u(f)),f!==d)return!1}return!0}(c._results,d,u))&&(c._results=d,c.length=d.length,c.last=d[this.length-1],c.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let rp=(()=>{class s{}return s.__NG_ELEMENT_ID__=xS,s})();const SS=rp,AS=class extends SS{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o){const u=this._declarationTContainer.tViews,c=Ef(this._declarationLView,u,o,16,null,u.declTNode,null,null,null,null);c[17]=this._declarationLView[this._declarationTContainer.index];const f=this._declarationLView[19];return null!==f&&(c[19]=f.createEmbeddedView(u)),yc(u,c,o),new oh(c)}};function xS(){return ip(Dn(),Se())}function ip(s,o){return 4&s.type?new AS(o,s,kc(s,o)):null}let Om=(()=>{class s{}return s.__NG_ELEMENT_ID__=qN,s})();function qN(){return Fc(Dn(),Se())}const ks=Om,fb=class extends ks{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return kc(this._hostTNode,this._hostLView)}get injector(){return new Sn(this._hostTNode,this._hostLView)}get parentInjector(){const o=Ko(this._hostTNode,this._hostLView);if(Gn(o)){const u=Wo(o,this._hostLView),c=qo(o);return new Sn(u[1].data[c+8],u)}return new Sn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=n0(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){const d=o.createEmbeddedView(u||{});return this.insert(d,c),d}createComponent(o,u,c,d,f){const y=o&&!function Ya(s){return"function"==typeof s}(o);let E;if(y)E=u;else{const F=u||{};E=F.index,c=F.injector,d=F.projectableNodes,f=F.ngModuleRef}const b=y?o:new Rm(ot(o)),A=c||this.parentInjector;if(!f&&null==b.ngModule){const $=(y?A:this.parentInjector).get(Oc,null);$&&(f=$)}const x=b.create(A,d,void 0,f);return this.insert(x.hostView,E),x}insert(o,u){const c=o._lView,d=c[1];if(function Oa(s){return es(s[3])}(c)){const x=this.indexOf(o);if(-1!==x)this.detach(x);else{const F=c[3],$=new fb(F,F[6],F[3]);$.detach($.indexOf(o))}}const f=this._adjustIndex(u),y=this._lContainer;!function kd(s,o,u,c){const d=10+c,f=u.length;c>0&&(u[d-1][4]=o),c<f-10?(o[4]=u[d],Qa(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const y=o[17];null!==y&&u!==y&&function Bw(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(y,o);const E=o[19];null!==E&&E.insertView(s),o[2]|=128}(d,c,y,f);const E=bg(f,y),b=c[11],A=Eg(b,y[7]);return null!==A&&function _g(s,o,u,c,d,f){c[0]=d,c[6]=o,_f(s,c,u,1,d,f)}(d,y[6],b,c,A,E),o.attachToViewContainerRef(),Qa(Ht(y),f,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=n0(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=vg(this._lContainer,u);c&&(zu(Ht(this._lContainer),u),Hw(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=vg(this._lContainer,u);return c&&null!=zu(Ht(this._lContainer),u)?new oh(c):null}_adjustIndex(o,u=0){return null==o?this.length+u:o}};function n0(s){return s[8]}function Ht(s){return s[8]||(s[8]=[])}function Fc(s,o){let u;const c=o[s.index];if(es(c))u=c;else{let d;if(8&s.type)d=hn(c);else{const f=o[11];d=f.createComment("");const y=hr(s,o);ll(f,Eg(f,y),d,function RT(s,o){return dn(s)?s.nextSibling(o):o.nextSibling}(f,y),!1)}o[s.index]=u=rD(c,o,d,s),Ny(o,u)}return new fb(u,s,o)}class Lm{constructor(o){this.queryList=o,this.matches=null}clone(){return new Lm(this.queryList)}setDirty(){this.queryList.setDirty()}}class gu{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,d=[];for(let f=0;f<c;f++){const y=u.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new gu(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==wl(o,u).matches&&this.queries[u].setDirty()}}class r0{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class Uc{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const d=null!==u?u.length:0,f=this.getByIndex(c).embeddedTView(o,d);f&&(f.indexInDeclarationView=c,null!==u?u.push(f):u=[f])}return null!==u?new Uc(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class tn{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new tn(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let d=0;d<c.length;d++){const f=c[d];this.matchTNodeWithReadOption(o,u,RS(u,f)),this.matchTNodeWithReadOption(o,u,Cs(u,o,f,!1,!1))}else c===rp?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Cs(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const d=this.metadata.read;if(null!==d)if(d===ih||d===Om||d===rp&&4&u.type)this.addMatch(u.index,-2);else{const f=Cs(u,o,d,!1,!1);null!==f&&this.addMatch(u.index,f)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function RS(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function lh(s,o,u,c){return-1===u?function ei(s,o){return 11&s.type?kc(s,o):4&s.type?ip(s,o):null}(o,s):-2===u?function NS(s,o,u){return u===ih?kc(o,s):u===rp?ip(o,s):u===Om?Fc(o,s):void 0}(s,o,c):Yo(s,s[1],u,o)}function Mr(s,o,u,c){const d=o[19].queries[c];if(null===d.matches){const f=s.data,y=u.matches,E=[];for(let b=0;b<y.length;b+=2){const A=y[b];E.push(A<0?null:lh(o,f[A],y[b+1],u.metadata.read))}d.matches=E}return d.matches}function s0(s,o,u,c){const d=s.queries.getByIndex(u),f=d.matches;if(null!==f){const y=Mr(s,o,d,u);for(let E=0;E<f.length;E+=2){const b=f[E];if(b>0)c.push(y[E/2]);else{const A=f[E+1],x=o[-b];for(let F=10;F<x.length;F++){const $=x[F];$[17]===$[3]&&s0($[1],$,A,c)}if(null!==x[9]){const F=x[9];for(let $=0;$<F.length;$++){const ee=F[$];s0(ee[1],ee,A,c)}}}}}return c}function mu(s){const o=Se(),u=Ut(),c=Kl();Zl(c+1);const d=wl(u,c);if(s.dirty&&yo(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?s0(u,o,c,[]):Mr(u,o,d,c);s.reset(f,nb),s.notifyOnChanges()}return!0}return!1}function vl(s,o,u,c){const d=Ut();if(d.firstCreatePass){const f=Dn();(function mb(s,o,u){null===s.queries&&(s.queries=new Uc),s.queries.track(new tn(o,u))})(d,new r0(o,u,c),f.index),function Vc(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(d,s),2==(2&u)&&(d.staticContentQueries=!0)}!function ch(s,o,u){const c=new t0(4==(4&u));uE(s,o,c,c.destroy),null===o[19]&&(o[19]=new gu),o[19].queries.push(new Lm(c))}(d,Se(),u)}function Fm(){return function gb(s,o){return s[19].queries[o].queryList}(Se(),Kl())}function wl(s,o){return s.queries.getByIndex(o)}function lp(...s){}const zm=new kn("Application Initializer");let Il=(()=>{class s{constructor(u){this.appInits=u,this.resolve=lp,this.reject=lp,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,d)=>{this.resolve=c,this.reject=d})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const f=this.appInits[d]();if(qd(f))u.push(f);else if(av(f)){const y=new Promise((E,b)=>{f.subscribe({complete:E,error:b})});u.push(y)}}Promise.all(u).then(()=>{c()}).catch(d=>{this.reject(d)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)($e(zm,8))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const Km=new kn("AppId"),FS={provide:Km,useFactory:function Ab(){return`${Zm()}${Zm()}${Zm()}`},deps:[]};function Zm(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const p0=new kn("Platform Initializer"),g0=new kn("Platform ID"),cp=new kn("appBootstrapListener");let xb=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const dp=new kn("LocaleId"),Wc=new kn("DefaultCurrencyCode");class Rb{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let bl=(()=>{class s{compileModuleSync(u){return new Pm(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),f=Do(Ot(u).declarations).reduce((y,E)=>{const b=ot(E);return b&&y.push(new Rm(b)),y},[]);return new Rb(c,f)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();const hp=(()=>Promise.resolve(0))();function m0(s){"undefined"==typeof Zone?hp.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class ln{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new An(!1),this.onMicrotaskEmpty=new An(!1),this.onStable=new An(!1),this.onError=new An(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!c&&u,d.shouldCoalesceRunChangeDetection=c,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function BS(){let s=jt.requestAnimationFrame,o=jt.cancelAnimationFrame;if("undefined"!=typeof Zone&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function _0(s){const o=()=>{!function jS(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(jt,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,y0(s),s.isCheckStableRunning=!0,_h(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),y0(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,d,f,y,E)=>{try{return v0(s),u.invokeTask(d,f,y,E)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),w0(s)}},onInvoke:(u,c,d,f,y,E,b)=>{try{return v0(s),u.invoke(d,f,y,E,b)}finally{s.shouldCoalesceRunChangeDetection&&o(),w0(s)}},onHasTask:(u,c,d,f)=>{u.hasTask(d,f),c===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,y0(s),_h(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(u,c,d,f)=>(u.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ln.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(ln.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,Ym,lp,lp);try{return f.runTask(y,u,c)}finally{f.cancelTask(y)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const Ym={};function _h(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function y0(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function v0(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function w0(s){s._nesting--,_h(s)}class fp{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new An,this.onMicrotaskEmpty=new An,this.onStable=new An,this.onError=new An}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,d){return o.apply(u,c)}}let Cl=(()=>{class s{constructor(u){this._ngZone=u,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ln.assertNotInAngularZone(),m0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())m0(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,d){let f=-1;c&&c>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:f,updateCb:d})}whenStable(u,c,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(u,c,d){return[]}}return s.\u0275fac=function(u){return new(u||s)($e(ln))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})(),E0=(()=>{class s{constructor(){this._applications=new Map,zc.addToWindow(this)}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return zc.findTestabilityInTree(this,u,c)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();class Pb{addToWindow(o){}findTestabilityInTree(o,u,c){return null}}function kb(s){zc=s}let Ms,zc=new Pb;const I0=new kn("AllowMultipleToken");class Mb{constructor(o,u){this.name=o,this.token=u}}function pp(s,o,u=[]){const c=`Platform: ${o}`,d=new kn(c);return(f=[])=>{let y=b0();if(!y||y.injector.get(I0,!1))if(s)s(u.concat(f).concat({provide:d,useValue:!0}));else{const E=u.concat(f).concat({provide:d,useValue:!0},{provide:bf,useValue:"platform"});!function br(s){if(Ms&&!Ms.destroyed&&!Ms.injector.get(I0,!1))throw new Le(400,"");Ms=s.get(Kc);const o=s.get(p0,null);o&&o.forEach(u=>u())}(no.create({providers:E,name:c}))}return function mi(s){const o=b0();if(!o)throw new Le(401,"");return o}()}}function b0(){return Ms&&!Ms.destroyed?Ms:null}let Kc=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const E=function $S(s,o){let u;return u="noop"===s?new fp:("zone.js"===s?void 0:s)||new ln({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==o?void 0:o.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==o?void 0:o.ngZoneRunCoalescing)}),u}(c?c.ngZone:void 0,{ngZoneEventCoalescing:c&&c.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:c&&c.ngZoneRunCoalescing||!1}),b=[{provide:ln,useValue:E}];return E.run(()=>{const A=no.create({providers:b,parent:this.injector,name:u.moduleType.name}),x=u.create(A),F=x.injector.get(gf,null);if(!F)throw new Le(402,"");return E.runOutsideAngular(()=>{const $=E.onError.subscribe({next:ee=>{F.handleError(ee)}});x.onDestroy(()=>{C0(this._modules,x),$.unsubscribe()})}),function uo(s,o,u){try{const c=u();return qd(c)?c.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(F,E,()=>{const $=x.injector.get(Il);return $.runInitializers(),$.donePromise.then(()=>(function tS(s){ut(s,"Expected localeId to be defined"),"string"==typeof s&&(Vf=s.toLowerCase().replace(/_/g,"-"))}(x.injector.get(dp,Ff)||Ff),this._moduleDoBootstrap(x),x))})})}bootstrapModule(u,c=[]){const d=Ob({},c);return function HS(s,o,u){const c=new Pm(u);return Promise.resolve(c)}(0,0,u).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(u){const c=u.injector.get(Zc);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(d=>c.bootstrap(d));else{if(!u.instance.ngDoBootstrap)throw new Le(403,"");u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Le(404,"");this._modules.slice().forEach(u=>u.destroy()),this._destroyListeners.forEach(u=>u()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)($e(no))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function Ob(s,o){return Array.isArray(o)?o.reduce(Ob,s):Object.assign(Object.assign({},s),o)}let Zc=(()=>{class s{constructor(u,c,d,f,y){this._zone=u,this._injector=c,this._exceptionHandler=d,this._componentFactoryResolver=f,this._initStatus=y,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const E=new k.y(A=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{A.next(this._stable),A.complete()})}),b=new k.y(A=>{let x;this._zone.runOutsideAngular(()=>{x=this._zone.onStable.subscribe(()=>{ln.assertNotInAngularZone(),m0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,A.next(!0))})})});const F=this._zone.onUnstable.subscribe(()=>{ln.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{A.next(!1)}))});return()=>{x.unsubscribe(),F.unsubscribe()}});this.isStable=(0,ae.T)(E,b.pipe((0,se.B)()))}bootstrap(u,c){if(!this._initStatus.done)throw new Le(405,"");let d;d=u instanceof tb?u:this._componentFactoryResolver.resolveComponentFactory(u),this.componentTypes.push(d.componentType);const f=function nn(s){return s.isBoundToModule}(d)?void 0:this._injector.get(Oc),E=d.create(no.NULL,[],c||d.selector,f),b=E.location.nativeElement,A=E.injector.get(Cl,null),x=A&&E.injector.get(E0);return A&&x&&x.registerApplication(b,A),E.onDestroy(()=>{this.detachView(E.hostView),C0(this.components,E),x&&x.unregisterApplication(b)}),this._loadComponent(E),E}tick(){if(this._runningTick)throw new Le(101,"");try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;C0(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(cp,[]).concat(this._bootstrapListeners).forEach(d=>d(u))}ngOnDestroy(){this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return s.\u0275fac=function(u){return new(u||s)($e(ln),$e(no),$e(gf),$e(Qf),$e(Il))},s.\u0275prov=Yt({token:s,factory:s.\u0275fac}),s})();function C0(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let Fb=!0,gp=!1;function mp(){return gp=!0,Fb}function _p(){if(gp)throw new Error("Cannot enable prod mode after platform setup.");Fb=!1}let Ub=(()=>{class s{}return s.__NG_ELEMENT_ID__=qS,s})();function qS(s){return function Vb(s,o,u){if(rd(s)&&!u){const c=Ar(s.index,o);return new oh(c,c)}return 47&s.type?new oh(o[16],o):null}(Dn(),Se(),16==(16&s))}class Hb{constructor(){}supports(o){return au(o)}create(o){return new Gb(o)}}const $b=(s,o)=>o;class Gb{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||$b}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,d=0,f=null;for(;u||c;){const y=!c||u&&u.currentIndex<Wb(c,d,f)?u:c,E=Wb(y,d,f),b=y.currentIndex;if(y===c)d--,c=c._nextRemoved;else if(u=u._next,null==y.previousIndex)d++;else{f||(f=[]);const A=E-d,x=b-d;if(A!=x){for(let $=0;$<A;$++){const ee=$<f.length?f[$]:f[$]=0,Ie=ee+$;x<=Ie&&Ie<A&&(f[$]=ee+1)}f[y.previousIndex]=x-A}}E!==b&&o(y,E,b)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!au(o))throw new Le(900,"");return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let E=0;E<this.length;E++)f=o[E],y=this._trackByFn(E,f),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,f,y,E)),Object.is(u.item,f)||this._addIdentityChange(u,f)):(u=this._mismatch(u,f,y,E),c=!0),u=u._next}else d=0,function bD(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[ou()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,E=>{y=this._trackByFn(d,E),null!==u&&Object.is(u.trackById,y)?(c&&(u=this._verifyReinsertion(u,E,y,d)),Object.is(u.item,E)||this._addIdentityChange(u,E)):(u=this._mismatch(u,E,y,d),c=!0),u=u._next,d++}),this.length=d;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,d))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,f,d)):o=this._addAfter(new qb(u,c),f,d),o}_verifyReinsertion(o,u,c,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const d=null===u?this._itHead:u._next;return o._next=d,o._prev=u,null===d?this._itTail=o:d._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new x0),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new x0),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class qb{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class zS{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class x0{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new zS,this.map.set(u,c)),c.add(o)}get(o,u){const d=this.map.get(o);return d?d.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Wb(s,o,u){const c=s.previousIndex;if(null===c)return c;let d=0;return u&&c<u.length&&(d=u[c]),c+o+d}class zb{constructor(){}supports(o){return o instanceof Map||Zg(o)}create(){return new yh}}class yh{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||Zg(o)))throw new Le(900,"")}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,d)=>{if(u&&u.key===d)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const f=this._getOrCreateRecordForKey(d,c);u=this._insertBeforeOrAppend(u,f)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,u);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const c=new vh(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class vh{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Kb(){return new r_([new Hb])}let r_=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Kb()),deps:[[s,new Wr,new Ur]]}}find(u){const c=this.factories.find(d=>d.supports(u));if(null!=c)return c;throw new Le(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:Kb}),s})();function R0(){return new Cr([new zb])}let Cr=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const d=c.factories.slice();u=u.concat(d)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||R0()),deps:[[s,new Wr,new Ur]]}}find(u){const c=this.factories.find(f=>f.supports(u));if(c)return c;throw new Le(901,"")}}return s.\u0275prov=Yt({token:s,providedIn:"root",factory:R0}),s})();const KS=[new zb],fa=new r_([new Hb]),ZS=new Cr(KS),Tl=pp(null,"core",[{provide:g0,useValue:"unknown"},{provide:Kc,deps:[no]},{provide:E0,deps:[]},{provide:xb,deps:[]}]),mr=[{provide:Zc,useClass:Zc,deps:[ln,no,gf,Qf,Il]},{provide:ep,deps:[ln],useFactory:function pa(s){let o=[];return s.onStable.subscribe(()=>{for(;o.length;)o.pop()()}),function(u){o.push(u)}}},{provide:Il,useClass:Il,deps:[[new Ur,zm]]},{provide:bl,useClass:bl,deps:[]},FS,{provide:r_,useFactory:function Fn(){return fa},deps:[]},{provide:Cr,useFactory:function Ni(){return ZS},deps:[]},{provide:dp,useFactory:function YS(s){return s||function QS(){return"undefined"!=typeof $localize&&$localize.locale||Ff}()},deps:[[new Qs(dp),new Ur,new Wr]]},{provide:Wc,useValue:"USD"}];let ps=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)($e(Zc))},s.\u0275mod=oe({type:s}),s.\u0275inj=en({providers:mr}),s})()},3942:(at,De,O)=>{"use strict";O.d(De,{Z:()=>Le});var p=O(2090),B=O(4859),k=O(9681),ae=O(1877);class se{constructor(Q,ce){this._delegate=Q,this.firebase=ce,(0,k._addComponent)(Q,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=Q.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Q){this._delegate.automaticDataCollectionEnabled=Q}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Q=>{this._delegate.checkDestroyed(),Q()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,k.deleteApp)(this._delegate)))}_getService(Q,ce=k._DEFAULT_ENTRY_NAME){var Re;this._delegate.checkDestroyed();const Ne=this._delegate.container.getProvider(Q);return!Ne.isInitialized()&&"EXPLICIT"===(null===(Re=Ne.getComponent())||void 0===Re?void 0:Re.instantiationMode)&&Ne.initialize(),Ne.getImmediate({identifier:ce})}_removeServiceInstance(Q,ce=k._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Q).clearInstance(ce)}_addComponent(Q){(0,k._addComponent)(this._delegate,Q)}_addOrOverwriteComponent(Q){(0,k._addOrOverwriteComponent)(this._delegate,Q)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new p.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function _e(){const je=function ue(je){const Q={},ce={__esModule:!0,initializeApp:function he(re,Qe={}){const X=k.initializeApp(re,Qe);if((0,p.r3)(Q,X.name))return Q[X.name];const pe=new je(X,ce);return Q[X.name]=pe,pe},app:Ne,registerVersion:k.registerVersion,setLogLevel:k.setLogLevel,onLog:k.onLog,apps:null,SDK_VERSION:k.SDK_VERSION,INTERNAL:{registerComponent:function we(re){const Qe=re.name,X=Qe.replace("-compat","");if(k._registerComponent(re)&&"PUBLIC"===re.type){const pe=(fe=Ne())=>{if("function"!=typeof fe[X])throw le.create("invalid-app-argument",{appName:Qe});return fe[X]()};void 0!==re.serviceProps&&(0,p.ZB)(pe,re.serviceProps),ce[X]=pe,je.prototype[X]=function(...fe){return this._getService.bind(this,Qe).apply(this,re.multipleInstances?fe:[])}}return"PUBLIC"===re.type?ce[X]:null},removeApp:function Re(re){delete Q[re]},useAsService:function ze(re,Qe){return"serverAuth"===Qe?null:Qe},modularAPIs:k}};function Ne(re){if(!(0,p.r3)(Q,re=re||k._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:re});return Q[re]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function Ce(){return Object.keys(Q).map(re=>Q[re])}}),Ne.App=je,ce}(se);return je.INTERNAL=Object.assign(Object.assign({},je.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function Q(ce){(0,p.ZB)(je,ce)},createSubscribe:p.ne,ErrorFactory:p.LL,deepExtend:p.ZB}),je}(),H=new ae.Yd("@firebase/app-compat");if((0,p.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const je=self.firebase.SDK_VERSION;je&&je.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Le=G;!function xe(je){(0,k.registerVersion)("@firebase/app-compat","0.1.18",je)}()},9681:(at,De,O)=>{"use strict";O.r(De),O.d(De,{FirebaseError:()=>ae.ZR,SDK_VERSION:()=>Yi,_DEFAULT_ENTRY_NAME:()=>Rn,_addComponent:()=>sn,_addOrOverwriteComponent:()=>vr,_apps:()=>it,_clearComponents:()=>In,_components:()=>lr,_getProvider:()=>$t,_registerComponent:()=>Yt,_removeServiceInstance:()=>en,deleteApp:()=>Qi,getApp:()=>Ui,getApps:()=>Vn,initializeApp:()=>yi,onLog:()=>xn,registerVersion:()=>Or,setLogLevel:()=>Wt});var p=O(5861),B=O(4859),k=O(1877),ae=O(2090);class se{constructor(lt){this.container=lt}getPlatformInfoString(){return this.container.getProviders().map(Ct=>{if(function me(ht){const lt=ht.getComponent();return"VERSION"===(null==lt?void 0:lt.type)}(Ct)){const Qt=Ct.getImmediate();return`${Qt.library}/${Qt.version}`}return null}).filter(Ct=>Ct).join(" ")}}const le="@firebase/app",_e=new k.Yd("@firebase/app"),Rn="[DEFAULT]",ut={[le]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},it=new Map,lr=new Map;function sn(ht,lt){try{ht.container.addComponent(lt)}catch(Ct){_e.debug(`Component ${lt.name} failed to register with FirebaseApp ${ht.name}`,Ct)}}function vr(ht,lt){ht.container.addOrOverwriteComponent(lt)}function Yt(ht){const lt=ht.name;if(lr.has(lt))return _e.debug(`There were multiple attempts to register component ${lt}.`),!1;lr.set(lt,ht);for(const Ct of it.values())sn(Ct,ht);return!0}function $t(ht,lt){return ht.container.getProvider(lt)}function en(ht,lt,Ct=Rn){$t(ht,lt).clearInstance(Ct)}function In(){lr.clear()}const Yn=new ae.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function."});class Dr{constructor(lt,Ct,Qt){this._isDeleted=!1,this._options=Object.assign({},lt),this._config=Object.assign({},Ct),this._name=Ct.name,this._automaticDataCollectionEnabled=Ct.automaticDataCollectionEnabled,this._container=Qt,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(lt){this.checkDestroyed(),this._automaticDataCollectionEnabled=lt}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(lt){this._isDeleted=lt}checkDestroyed(){if(this.isDeleted)throw Yn.create("app-deleted",{appName:this._name})}}const Yi="9.6.7";function yi(ht,lt={}){"object"!=typeof lt&&(lt={name:lt});const Ct=Object.assign({name:Rn,automaticDataCollectionEnabled:!1},lt),Qt=Ct.name;if("string"!=typeof Qt||!Qt)throw Yn.create("bad-app-name",{appName:String(Qt)});const cr=it.get(Qt);if(cr){if((0,ae.vZ)(ht,cr.options)&&(0,ae.vZ)(Ct,cr.config))return cr;throw Yn.create("duplicate-app",{appName:Qt})}const St=new B.H0(Qt);for(const Je of lr.values())St.addComponent(Je);const st=new Dr(ht,Ct,St);return it.set(Qt,st),st}function Ui(ht=Rn){const lt=it.get(ht);if(!lt)throw Yn.create("no-app",{appName:ht});return lt}function Vn(){return Array.from(it.values())}function Qi(ht){return pt.apply(this,arguments)}function pt(){return(pt=(0,p.Z)(function*(ht){const lt=ht.name;it.has(lt)&&(it.delete(lt),yield Promise.all(ht.container.getProviders().map(Ct=>Ct.delete())),ht.isDeleted=!0)})).apply(this,arguments)}function Or(ht,lt,Ct){var Qt;let cr=null!==(Qt=ut[ht])&&void 0!==Qt?Qt:ht;Ct&&(cr+=`-${Ct}`);const St=cr.match(/\s|\//),st=lt.match(/\s|\//);if(St||st){const Je=[`Unable to register library "${cr}" with version "${lt}":`];return St&&Je.push(`library name "${cr}" contains illegal characters (whitespace or "/")`),St&&st&&Je.push("and"),st&&Je.push(`version name "${lt}" contains illegal characters (whitespace or "/")`),void _e.warn(Je.join(" "))}Yt(new B.wA(`${cr}-version`,()=>({library:cr,version:lt}),"VERSION"))}function xn(ht,lt){if(null!==ht&&"function"!=typeof ht)throw Yn.create("invalid-log-argument");(0,k.Am)(ht,lt)}function Wt(ht){(0,k.Ub)(ht)}!function Sr(ht){Yt(new B.wA("platform-logger",lt=>new se(lt),"PRIVATE")),Or(le,"0.7.17",ht),Or(le,"0.7.17","esm2017"),Or("fire-js","")}("")},4859:(at,De,O)=>{"use strict";O.d(De,{wA:()=>k,H0:()=>ue,zt:()=>se});var p=O(5861),B=O(2090);class k{constructor(G,H,ne){this.name=G,this.instanceFactory=H,this.type=ne,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ae="[DEFAULT]";class se{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const ne=new B.BH;if(this.instancesDeferred.set(H,ne),this.isInitialized(H)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:H});He&&ne.resolve(He)}catch(He){}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const ne=this.normalizeInstanceIdentifier(null==G?void 0:G.identifier),He=null!==(H=null==G?void 0:G.optional)&&void 0!==H&&H;if(!this.isInitialized(ne)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:ne})}catch(xe){if(He)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function le(_e){return"EAGER"===_e.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ae})}catch(H){}for(const[H,ne]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(H);try{const xe=this.getOrInitializeService({instanceIdentifier:He});ne.resolve(xe)}catch(xe){}}}}clearInstance(G=ae){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,p.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(ne=>"INTERNAL"in ne).map(ne=>ne.INTERNAL.delete()),...H.filter(ne=>"_delete"in ne).map(ne=>ne._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ae){return this.instances.has(G)}getOptions(G=ae){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,ne=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(ne))throw Error(`${this.name}(${ne}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:ne,options:H});for(const[xe,Le]of this.instancesDeferred.entries())ne===this.normalizeInstanceIdentifier(xe)&&Le.resolve(He);return He}onInit(G,H){var ne;const He=this.normalizeInstanceIdentifier(H),xe=null!==(ne=this.onInitCallbacks.get(He))&&void 0!==ne?ne:new Set;xe.add(G),this.onInitCallbacks.set(He,xe);const Le=this.instances.get(He);return Le&&G(Le,He),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,H){const ne=this.onInitCallbacks.get(H);if(ne)for(const He of ne)try{He(G,H)}catch(xe){}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let ne=this.instances.get(G);if(!ne&&this.component&&(ne=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=G,_e===ae?void 0:_e),options:H}),this.instances.set(G,ne),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(ne,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,ne)}catch(He){}var _e;return ne||null}normalizeInstanceIdentifier(G=ae){return this.component?this.component.multipleInstances?G:ae:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ue{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new se(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(at,De,O)=>{"use strict";O.d(De,{in:()=>B,Yd:()=>le,Ub:()=>ue,Am:()=>_e});const p=[];var B=(()=>{return(G=B||(B={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",B;var G})();const k={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ae=B.INFO,se={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},me=(G,H,...ne)=>{if(H<G.logLevel)return;const He=(new Date).toISOString(),xe=se[H];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[xe](`[${He}]  ${G.name}:`,...ne)};class le{constructor(H){this.name=H,this._logLevel=ae,this._logHandler=me,this._userLogHandler=null,p.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in B))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?k[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...H),this._logHandler(this,B.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...H),this._logHandler(this,B.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,B.INFO,...H),this._logHandler(this,B.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,B.WARN,...H),this._logHandler(this,B.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...H),this._logHandler(this,B.ERROR,...H)}}function ue(G){p.forEach(H=>{H.setLogLevel(G)})}function _e(G,H){for(const ne of p){let He=null;H&&H.level&&(He=k[H.level]),ne.userLogHandler=null===G?null:(xe,Le,...je)=>{const Q=je.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch(Re){return null}}).filter(ce=>ce).join(" ");Le>=(null!=He?He:xe.logLevel)&&G({level:B[Le].toLowerCase(),message:Q,args:je,type:xe.name})}}}},5861:(at,De,O)=>{"use strict";function p(k,ae,se,me,le,ue,_e){try{var G=k[ue](_e),H=G.value}catch(ne){return void se(ne)}G.done?ae(H):Promise.resolve(H).then(me,le)}function B(k){return function(){var ae=this,se=arguments;return new Promise(function(me,le){var ue=k.apply(ae,se);function _e(H){p(ue,me,le,_e,G,"next",H)}function G(H){p(ue,me,le,_e,G,"throw",H)}_e(void 0)})}}O.d(De,{Z:()=>B})}},at=>{at(at.s=2783)}]);